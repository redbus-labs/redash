!function(e){function t(t){for(var r,o,s=t[0],l=t[1],u=t[2],d=0,p=[];d<s.length;d++)o=s[d],a[o]&&p.push(a[o][0]),a[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);for(c&&c(t);p.length;)p.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,s=1;s<n.length;s++){var l=n[s];0!==a[l]&&(r=!1)}r&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={0:0},i=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/static/";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var c=l;i.push([709,2]),n()}([,,,,,,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"$http",function(){return r}),n.d(t,"$sanitize",function(){return a}),n.d(t,"$location",function(){return i}),n.d(t,"$route",function(){return o}),n.d(t,"$routeParams",function(){return s}),n.d(t,"$q",function(){return l}),n.d(t,"$rootScope",function(){return u}),n.d(t,"$uibModal",function(){return c}),n.d(t,"toastr",function(){return d}),n.d(t,"default",function(){return p});var r=null,a=null,i=null,o=null,s=null,l=null,u=null,c=null,d=null;function p(e){e.run(["$injector",function(e){r=e.get("$http"),a=e.get("$sanitize"),i=e.get("$location"),o=e.get("$route"),s=e.get("$routeParams"),l=e.get("$q"),u=e.get("$rootScope"),c=e.get("$uibModal"),d=e.get("toastr")}])}p.init=!0},,function(e,t,n){"use strict";n.r(t),n.d(t,"Auth",function(){return o}),n.d(t,"currentUser",function(){return s}),n.d(t,"clientConfig",function(){return l}),n.d(t,"default",function(){return m});var r=n(64),a=n.n(r),i=n(2);f.$inject=["$injector"],p.$inject=["$window","$location","$q","$http"];var o=null,s={canEdit:function(e){var t=e.user_id||e.user&&e.user.id;return this.hasPermission("admin")||t&&t===this.id},hasPermission:function(e){return Object(i.includes)(this.permissions,e)},get isAdmin(){return this.hasPermission("admin")}},l={},u=a()("redash:auth"),c={loaded:!1};function d(e){u("Updating session to be:",e),Object(i.extend)(c,e,{loaded:!0}),Object(i.extend)(s,c.user),Object(i.extend)(l,c.client_config)}function p(e,t,n,r){return{isAuthenticated:function(){return c.loaded&&c.user.id},login:function(){var e=encodeURI(t.url());u("Calling login with next = %s",e),window.location.href="login?next=".concat(e)},logout:function(){u("Logout."),e.location.href="logout"},loadSession:function(){return u("Loading session"),c.loaded&&c.user.id?(u("Resolving with local value."),n.resolve(c)):(this.setApiKey(null),r.get("api/session").then(function(e){return d(e.data),c}))},loadConfig:function(){return u("Loading config"),r.get("/api/config").then(function(e){return d({client_config:e.data.client_config,user:{permissions:[]}}),e.data})},setApiKey:function(e){u("Set API key to: %s",e),this.apiKey=e},getApiKey:function(){return this.apiKey},requireSession:function(){var e=this;return u("Requested authentication"),this.isAuthenticated()?n.when(c):this.loadSession().then(function(){if(e.isAuthenticated())return u("Loaded session"),c;u("Need to login, redirecting"),e.login()}).catch(function(){u("Need to login, redirecting"),e.login()})}}}function f(e){return{request:function(t){var n=e.get("Auth").getApiKey();return n&&(t.headers.Authorization="Key ".concat(n)),t}}}function m(e){e.factory("Auth",p),e.value("currentUser",s),e.value("clientConfig",l),e.factory("apiKeyHttpInterceptor",f),e.config(["$httpProvider",function(e){e.interceptors.push("apiKeyHttpInterceptor")}]),e.run(["$injector",function(e){o=e.get("Auth")}])}m.init=!0},,,,,,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"Columns",function(){return S}),n.d(t,"default",function(){return j});n(21),n(22),n(29),n(19);var r=n(2),a=n(1),i=n.n(a),o=n(0),s=n.n(o),l=n(6),u=n.n(l),c=n(100),d=n.n(c),p=n(403),f=n(410),m=n(39),g=n(289);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(){return Object(r.extend)(this.apply(void 0,arguments),{sorter:!0})}var S={favorites:function(e){return Object(r.extend)({width:"1%",render:function(e,t){return i.a.createElement(p.FavoritesControl,{item:t})}},e)},avatar:function(e,t){return t=Object(r.isFunction)(t)?t:r.identity,Object(r.extend)({width:"1%",render:function(e,n){return i.a.createElement("img",{src:n.user.profile_image_url,className:"profile__image_thumb",alt:t(e.name,n),title:t(e.name,n)})}},e)},dateTime:function(e){return Object(r.extend)({render:function(e){return Object(g.b)(e)}},e)},duration:function(e){return Object(r.extend)({width:"1%",className:"text-nowrap",render:function(e){return Object(m.durationHumanize)(e)}},e)},timeAgo:function(e){return Object(r.extend)({render:function(e){return i.a.createElement(f.TimeAgo,{date:e})}},e)},custom:function(e,t){return Object(r.extend)({render:e},t)}};S.dateTime.sortable=x,S.duration.sortable=x,S.timeAgo.sortable=x,S.custom.sortable=x;var j=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),y(this,v(t).apply(this,arguments))}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(t,i.a.Component),n=t,(a=[{key:"prepareColumns",value:function(){var e=this.props,t=e.orderByField,n=e.orderByReverse,a=e.toggleSorting,i=n?"descend":"ascend";return Object(r.map)(Object(r.map)(Object(r.filter)(this.props.columns,function(e){return!Object(r.isFunction)(e.isAvailable)||e.isAvailable()}),function(e){return Object(r.extend)(e,{orderByField:e.orderByField||e.field})}),function(e,n){var o=e.sorter?function(){return{onClick:function(){return a(e.orderByField)}}}:null,s=Object(r.isFunction)(e.render)?function(t,n){return e.render(t,n.item)}:r.identity;return Object(r.extend)(Object(r.omit)(e,["field","orderByField","render"]),{key:"column"+n,dataIndex:"item["+JSON.stringify(e.field)+"]",defaultSortOrder:e.orderByField===t?i:null,onHeaderCell:o,render:s})})}},{key:"render",value:function(){var e=this,t=this.prepareColumns(),n=Object(r.map)(this.props.items,function(e,t){return{key:"row"+t,item:e}}),a=Object(r.isFunction)(this.props.onRowClick)?function(t){return{onClick:function(n){e.props.onRowClick(n,t.item)}}}:null,o=this.props.showHeader;return i.a.createElement(d.a,{className:u()("table-data",{"ant-table-headerless":!o}),columns:t,showHeader:o,dataSource:n,rowKey:function(e){return e.key},pagination:!1,onRow:a})}}])&&b(n.prototype,a),o&&b(n,o),t}();O(j,"propTypes",{items:s.a.arrayOf(s.a.object),columns:s.a.arrayOf(s.a.shape({field:s.a.string,orderByField:s.a.string,render:s.a.func,isAvailable:s.a.func})),showHeader:s.a.bool,onRowClick:s.a.func,orderByField:s.a.string,orderByReverse:s.a.bool,toggleSorting:s.a.func}),O(j,"defaultProps",{items:[],columns:[],showHeader:!0,onRowClick:null,orderByField:null,orderByReverse:!1,toggleSorting:function(){}})},,,,,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"DialogPropType",function(){return p}),n.d(t,"wrap",function(){return g});n(18),n(31),n(57),n(35),n(98);var r=n(2),a=n(1),i=n.n(a),o=n(0),s=n.n(o),l=n(12),u=n.n(l);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var p=s.a.shape({props:s.a.shape({visible:s.a.bool,onOk:s.a.func,onCancel:s.a.func,afterClose:s.a.func}).isRequired,close:s.a.func.isRequired,dismiss:s.a.func.isRequired}),f={Promise:Promise,DialogPropType:p,wrap:function(){}};function m(e,t){var n={props:{visible:!0,onOk:function(){},onCancel:function(){},afterClose:function(){}},close:function(){},dismiss:function(){}},a={resolve:function(){},reject:function(){}},o=document.createElement("div");function s(){u.a.render(i.a.createElement(e,d({},t,{dialog:n})),o)}function l(e){a.resolve(e),n.props.visible=!1,s()}function p(e){a.reject(e),n.props.visible=!1,s()}document.body.appendChild(o),n.props.onOk=l,n.props.onCancel=p,n.props.afterClose=function(){setTimeout(function(){u.a.unmountComponentAtNode(o),document.body.removeChild(o)},10)},n.close=l,n.dismiss=p;var m={close:l,dismiss:p,update:function(e){t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){c(e,t,n[t])})}return e}({},t,e),s()},result:new f.Promise(function(e,t){a.resolve=e,a.reject=t})};return s(),Object(r.isFunction)(m.result.suppressUnhandledRejections)&&m.result.suppressUnhandledRejections(),m}function g(e){return{Component:e,showModal:function(t){return m(e,t)}}}f.wrap=g,t.default=f},,function(e,t,n){"use strict";n.r(t),n.d(t,"DataSource",function(){return l}),n.d(t,"Table",function(){return u}),n.d(t,"Schema",function(){return c}),n.d(t,"RefreshScheduleType",function(){return d}),n.d(t,"RefreshScheduleDefault",function(){return p}),n.d(t,"Field",function(){return f}),n.d(t,"Action",function(){return m}),n.d(t,"AntdForm",function(){return g}),n.d(t,"UserProfile",function(){return h}),n.d(t,"Moment",function(){return y});var r=n(0),a=n.n(r),i=n(2),o=n(10),s=n.n(o),l=a.a.shape({syntax:a.a.string,options:a.a.shape({doc:a.a.string,doc_url:a.a.string}),type_name:a.a.string}),u=a.a.shape({columns:a.a.arrayOf(a.a.string).isRequired}),c=a.a.arrayOf(u),d=a.a.shape({interval:a.a.number,time:a.a.string,day_of_week:a.a.string,until:a.a.string}),p={interval:null,time:null,day_of_week:null,until:null},f=a.a.shape({name:a.a.string.isRequired,title:a.a.string,type:a.a.oneOf(["text","email","password","number","checkbox","file"]).isRequired,initialValue:a.a.oneOfType([a.a.string,a.a.number,a.a.bool]),required:a.a.bool,readOnly:a.a.bool,minLength:a.a.number,placeholder:a.a.string,props:a.a.object}),m=a.a.shape({name:a.a.string.isRequired,callback:a.a.func.isRequired,type:a.a.string,pullRight:a.a.bool,disabledWhenDirty:a.a.bool}),g=a.a.shape({validateFieldsAndScroll:a.a.func}),h=a.a.shape({id:a.a.number.isRequired,name:a.a.string.isRequired,email:a.a.string.isRequired,profileImageUrl:a.a.string,apiKey:a.a.string,isDisabled:a.a.bool});function b(e,t,n,r){var a=t[n],i=e&&null!==a,o=!e&&(null===a||s.a.isMoment(a));if(!i&&!o)return new Error("Prop `"+n+"` supplied to `"+r+"` should be a Moment.js instance.")}var y=Object(i.wrap)(!1,b);y.isRequired=Object(i.wrap)(!0,b)},,,function(e,t,n){"use strict";n.r(t),n.d(t,"IntervalEnum",function(){return s}),n.d(t,"localizeTime",function(){return l}),n.d(t,"secondsToInterval",function(){return u}),n.d(t,"intervalToSeconds",function(){return c}),n.d(t,"pluralize",function(){return d}),n.d(t,"durationHumanize",function(){return p}),n.d(t,"toHuman",function(){return f}),n.d(t,"colWidth",function(){return m}),n.d(t,"capitalize",function(){return g}),n.d(t,"remove",function(){return h}),n.d(t,"notEmpty",function(){return b}),n.d(t,"showError",function(){return y}),n.d(t,"prettySize",function(){return w}),n.d(t,"join",function(){return O});n(21),n(22),n(18),n(66),n(110);var r=n(10),a=n.n(r),i=n(2);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var s={NEVER:"Never",SECONDS:"second",MINUTES:"minute",HOURS:"hour",DAYS:"day",WEEKS:"week"};function l(e){var t=o(e.split(":"),2),n=t[0],r=t[1];return a.a.utc().hour(n).minute(r).local().format("HH:mm")}function u(e){if(!e)return{interval:s.NEVER};var t=s.SECONDS;return e>=60&&(e/=60,t=s.MINUTES),e>=60&&(e/=60,t=s.HOURS),e>=24&&t===s.HOURS&&(e/=24,t=s.DAYS),e>=7&&!(e%7)&&t===s.DAYS&&(e/=7,t=s.WEEKS),{count:e,interval:t}}function c(e,t){var n=0;switch(t){case s.MINUTES:n=60;break;case s.HOURS:n=3600;break;case s.DAYS:n=86400;break;case s.WEEKS:n=604800;break;default:return null}return n*e}function d(e,t){return e+(1!==t?"s":"")}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return"-";var n="",r=u(e),a=r.interval,i=r.count,o=Math.round(i);return 1===o&&t.omitSingleValueNumber||(n="".concat(o," ")),n+=d(a,o)}function f(e){return e.replace(/_/g," ").replace(/(?:^|\s)\S/g,function(e){return e.toUpperCase()})}function m(e){return 0===e?0:1===e?6:2===e?12:e}function g(e){return e?Object(i.capitalize)(e):null}function h(e,t){if(void 0===e)return e;var n;n=t instanceof Array?function(e){return-1===t.indexOf(e)}:function(e){return t!==e};for(var r=[],a=0;a<e.length;a+=1)n(e[a])&&r.push(e[a]);return r}function b(e){return!Object(i.isEmpty)(e)}function y(e){return void 0!==e&&(e.$touched&&e.$invalid)}var v=["bytes","KB","MB","GB","TB","PB"];function w(e){if(isNaN(parseFloat(e))||!isFinite(e))return"?";for(var t=0;e>=1024;)e/=1024,t+=1;return e.toFixed(3)+" "+v[t]}function O(e){return null==e?"":e.join(" / ")}},,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"User",function(){return o}),n.d(t,"default",function(){return h});n(19);var r=n(2),a=n(11),i=n(13);g.$inject=["$resource"];var o=null;function s(e){return"api/users/".concat(e.id,"/disable")}function l(e){var t=Object(a.$sanitize)(e.name);return a.$http.delete(s(e)).then(function(n){return a.toastr.success("User <b>".concat(t,"</b> is now enabled."),{allowHtml:!0}),e.is_disabled=!1,e.profile_image_url=n.data.profile_image_url,n}).catch(function(e){var n=e instanceof Error?e.message:e.statusText;Object(r.isString)(n)||(n="Unknown error"),a.toastr.error("Cannot enable user <b>".concat(t,"</b><br>").concat(n),{allowHtml:!0})})}function u(e){var t=Object(a.$sanitize)(e.name);return a.$http.post(s(e)).then(function(n){return a.toastr.warning("User <b>".concat(t,"</b> is now disabled."),{allowHtml:!0}),e.is_disabled=!0,e.profile_image_url=n.data.profile_image_url,n}).catch(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.data&&e.data.message?e.data.message:"Cannot disable user <b>".concat(t,"</b><br>").concat(e.statusText);a.toastr.error(n,{allowHtml:!0})})}function c(e){var t=Object(a.$sanitize)(e.name);return a.$http.delete("api/users/".concat(e.id)).then(function(e){return a.toastr.warning("User <b>".concat(t,"</b> has been deleted."),{allowHtml:!0}),e}).catch(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.data&&e.data.message?e.data.message:"Cannot delete user <b>".concat(t,"</b><br>").concat(e.statusText);a.toastr.error(n,{allowHtml:!0})})}function d(e){return{id:e.id,name:e.name,email:e.email,profileImageUrl:e.profile_image_url,apiKey:e.api_key,isDisabled:e.is_disabled,isInvitationPending:e.is_invitation_pending}}function p(e){return a.$http.post("api/users/".concat(e.id,"/regenerate_api_key")).then(function(e){var t=e.data;return a.toastr.success("The API Key has been updated."),t.api_key}).catch(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data&&e.data.message?e.data.message:"Failed regenerating API Key: ".concat(e.statusText);a.toastr.error(t)})}function f(e){return a.$http.post("api/users/".concat(e.id,"/reset_password")).then(function(e){var t=e.data;if(i.clientConfig.mailSettingsMissing)return a.toastr.warning("The mail server is not configured."),t.reset_link;a.toastr.success("Password reset email sent.")}).catch(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.message?e.message:"Failed to send password reset email: ".concat(e.statusText);a.toastr.error(t)})}function m(e){return a.$http.post("api/users/".concat(e.id,"/invite")).then(function(e){var t=e.data;if(i.clientConfig.mailSettingsMissing)return a.toastr.warning("The mail server is not configured."),t.invite_link;a.toastr.success("Invitation sent.")}).catch(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.message?e.message:"Failed to resend invitation: ".concat(e.statusText);a.toastr.error(t)})}function g(e){var t=e("api/users/:id",{id:"@id"},{get:{method:"GET"},create:{method:"POST"},save:{method:"POST"},query:{method:"GET",isArray:!1},delete:{method:"DELETE"},disable:{method:"POST",url:"api/users/:id/disable"},enable:{method:"DELETE",url:"api/users/:id/disable"}});return t.enableUser=l,t.disableUser=u,t.deleteUser=c,t.convertUserInfo=d,t.regenerateApiKey=p,t.sendPasswordReset=f,t.resendInvitation=m,t}function h(e){e.factory("User",g),e.run(["$injector",function(e){o=e.get("User")}])}h.init=!0},,function(e,t,n){"use strict";n.r(t),n.d(t,"Query",function(){return m}),n.d(t,"Parameter",function(){return v}),n.d(t,"default",function(){return S});n(97),n(350),n(19),n(110),n(18);var r=n(10),a=n.n(r),i=n(64),o=n.n(i),s=n(431),l=n.n(s),u=n(2);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}x.$inject=["$resource","$http","$location","$q","currentUser","QueryResultError","QueryResult"],O.$inject=["$q"],l.a.escape=u.identity;var m=null,g=o()("redash:services:query"),h={date:"YYYY-MM-DD","date-range":"YYYY-MM-DD","datetime-local":"YYYY-MM-DD HH:mm","datetime-range":"YYYY-MM-DD HH:mm","datetime-with-seconds":"YYYY-MM-DD HH:mm:ss","datetime-range-with-seconds":"YYYY-MM-DD HH:mm:ss"};function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=parseFloat(e);return isFinite(n)?n:t}function y(e){return Object(u.includes)(["date-range","datetime-range","datetime-range-with-seconds"],e)}var v=function(){function e(t){d(this,e),this.title=t.title,this.name=t.name,this.type=t.type,this.useCurrentDateTime=t.useCurrentDateTime,this.global=t.global,this.enumOptions=t.enumOptions,this.queryId=t.queryId,this.locals=[],this.setValue(t.value),Object.defineProperty(this,"urlPrefix",{configurable:!0,enumerable:!1,writable:!0,value:"p_"})}return f(e,[{key:"clone",value:function(){return new e(this)}},{key:"getValue",value:function(){return this.constructor.getValue(this)}},{key:"setValue",value:function(e){var t,n=this;return y(this.type)?(this.value=null,this.$$value=null,Object(u.isObject)(e)&&!Object(u.isArray)(e)&&(e=[e.start,e.end]),Object(u.isArray)(e)&&2===e.length&&(e=[a()(e[0]),a()(e[1])])[0].isValid()&&e[1].isValid()&&(this.value={start:e[0].format(h[this.type]),end:e[1].format(h[this.type])},this.$$value=e)):(t=this.type,Object(u.includes)(["date","datetime-local","datetime-with-seconds"],t)?(this.value=null,this.$$value=null,(e=a()(e)).isValid()&&(this.value=e.format(h[this.type]),this.$$value=e)):"number"===this.type?(this.value=e,this.$$value=b(e,null)):(this.value=e,this.$$value=e)),Object(u.isArray)(this.locals)&&Object(u.each)(this.locals,function(e){e.setValue(n.value)}),this}},{key:"toUrlParams",value:function(){if(this.isEmpty)return{};var e,t=this.urlPrefix;return y(this.type)?(c(e={},"".concat(t).concat(this.name,".start"),this.value.start),c(e,"".concat(t).concat(this.name,".end"),this.value.end),e):c({},"".concat(t).concat(this.name),this.value)}},{key:"fromUrlParams",value:function(e){var t=this.urlPrefix;if(y(this.type)){var n="".concat(t).concat(this.name,".start"),r="".concat(t).concat(this.name,".end");Object(u.has)(e,n)&&Object(u.has)(e,r)&&this.setValue([e[n],e[r]])}else{var a="".concat(t).concat(this.name);Object(u.has)(e,a)&&this.setValue(e[a])}}},{key:"toQueryTextFragment",value:function(){return y(this.type)?"{{ ".concat(this.name,".start }} {{ ").concat(this.name,".end }}"):"{{ ".concat(this.name," }}")}},{key:"isEmpty",get:function(){return Object(u.isNull)(this.getValue())}},{key:"normalizedValue",get:function(){return this.$$value}},{key:"ngModel",get:function(){return this.normalizedValue},set:function(e){this.setValue(e)}}],[{key:"getValue",value:function(e){var t=e.value,n=e.type,r=e.useCurrentDateTime;return Object(u.isNull)(t)||Object(u.isUndefined)(t)||""===t?Object(u.includes)(["date","datetime-local","datetime-with-seconds"],n)&&r?a()().format(h[n]):null:"number"===n?b(t,null):t}}]),e}(),w=function(){function e(t,n){d(this,e),this.query=t,this.updateParameters(),this.initFromQueryString(n)}return f(e,[{key:"parseQuery",value:function(){var e=[];try{var t=l.a.parse(this.query.query);e=Object(u.uniq)(function e(t){var n=[];return t.forEach(function(t){"name"===t[0]||"&"===t[0]?n.push(t[1].split(".")[0]):"#"===t[0]&&(n=Object(u.union)(n,e(t[4])))}),n}(t))}catch(t){g("Failed parsing parameters: ",t),e=Object(u.map)(this.query.options.parameters,function(e){return e.name})}return e}},{key:"updateParameters",value:function(){var e=this;if(this.query.query!==this.cachedQueryText){this.cachedQueryText=this.query.query;var t=this.parseQuery();this.query.options.parameters=this.query.options.parameters||[];var n={};this.query.options.parameters.forEach(function(e){n[e.name]=e}),t.forEach(function(t){Object(u.has)(n,t)||e.query.options.parameters.push(new v({title:t,name:t,type:"text",value:null,global:!1}))});this.query.options.parameters=this.query.options.parameters.filter(function(e){return Object(u.includes)(t,e.name)}).map(function(e){return new v(e)})}}},{key:"initFromQueryString",value:function(e){this.get().forEach(function(t){t.fromUrlParams(e)})}},{key:"get",value:function(){return this.updateParameters(),this.query.options.parameters}},{key:"add",value:function(e){this.query.options.parameters=this.query.options.parameters.filter(function(t){return t.name!==e.name});var t=new v(e);return this.query.options.parameters.push(t),t}},{key:"getMissing",value:function(){return Object(u.map)(Object(u.filter)(this.get(),function(e){return e.isEmpty}),function(e){return e.title})}},{key:"isRequired",value:function(){return!Object(u.isEmpty)(this.get())}},{key:"getValues",value:function(){var e=this.get();return Object(u.zipObject)(Object(u.map)(e,function(e){return e.name}),Object(u.map)(e,function(e){return e.getValue()}))}}]),e}();function O(e){return function(){function t(e){d(this,t),this.errorMessage=e,this.updatedAt=a.a.utc()}return f(t,[{key:"getUpdatedAt",value:function(){return this.updatedAt}},{key:"getError",value:function(){return this.errorMessage}},{key:"toPromise",value:function(){return e.reject(this)}},{key:"getStatus",value:function(){return"failed"}},{key:"getData",value:function(){return null}},{key:"getLog",value:function(){return null}},{key:"getChartData",value:function(){return null}}]),t}()}function x(e,t,n,r,i,o,s){var l=e("api/queries/:id",{id:"@id"},{recent:{method:"get",isArray:!0,url:"api/queries/recent"},archive:{method:"get",isArray:!1,url:"api/queries/archive"},query:{isArray:!1},myQueries:{method:"get",isArray:!1,url:"api/queries/my"},fork:{method:"post",isArray:!1,url:"api/queries/:id/fork",params:{id:"@id"}},resultById:{method:"get",isArray:!1,url:"api/queries/:id/results.json"},dropdownOptions:{method:"get",isArray:!0,url:"api/queries/:id/dropdown"},favorites:{method:"get",isArray:!1,url:"api/queries/favorites"},favorite:{method:"post",isArray:!1,url:"api/queries/:id/favorite",transformRequest:[function(){return""}]},unfavorite:{method:"delete",isArray:!1,url:"api/queries/:id/favorite",transformRequest:[function(){return""}]}});return l.newQuery=function(){return new l({query:"",name:"New Query",schedule:null,user:i,options:{}})},l.format=function(e,n){if("json"!==e)return"sql"===e?t.post("api/queries/format",{query:n}).then(function(e){return e.data.query}):r.reject("Query formatting is not supported for your data source syntax.");try{var a=JSON.stringify(JSON.parse(n)," ",4);return r.resolve(a)}catch(e){return r.reject(String(e))}},l.prototype.getSourceLink=function(){return"/queries/".concat(this.id,"/source")},l.prototype.isNew=function(){return void 0===this.id},l.prototype.hasDailySchedule=function(){return this.schedule&&null!==this.schedule.match(/\d\d:\d\d/)},l.prototype.scheduleInLocalTime=function(){var e=this.schedule.split(":");return a.a.utc().hour(e[0]).minute(e[1]).local().format("HH:mm")},l.prototype.hasResult=function(){return!(!this.latest_query_data&&!this.latest_query_data_id)},l.prototype.paramsRequired=function(){return this.getParameters().isRequired()},l.prototype.prepareQueryResultExecution=function(e,t){if(!this.query)return new o("Can't execute empty query.");var n=this.getParameters(),r=n.getMissing();if(r.length>0){var a="parameter",i="value";return r.length>1&&(a="parameters",i="values"),new s({job:{error:"missing ".concat(i," for ").concat(r.join(", ")," ").concat(a,"."),status:4}})}if(n.isRequired()&&(this.latest_query_data=null,this.latest_query_data_id=null),this.latest_query_data&&0!==t)this.queryResult||(this.queryResult=new s({query_result:this.latest_query_data}));else if(this.latest_query_data_id&&0!==t)this.queryResult||(this.queryResult=s.getById(this.latest_query_data_id));else{if(!this.data_source_id)return new o("Please select data source to run this query.");this.queryResult=e()}return this.queryResult},l.prototype.getQueryResult=function(e){var t=this;return this.prepareQueryResultExecution(function(){return s.getByQueryId(t.id,t.getParameters().getValues(),e)},e)},l.prototype.getQueryResultByText=function(e,t){var n=this,r=t||this.query,a=this.getParameters().getValues();return this.prepareQueryResultExecution(function(){return s.get(n.data_source_id,r,a,e,n.id)},e)},l.prototype.getUrl=function(e,t){var n="queries/".concat(this.id);e&&(n+="/source");var r={};return this.getParameters().isRequired()&&this.getParametersDefs().forEach(function(e){Object(u.extend)(r,e.toUrlParams())}),""!==(r=Object(u.map)(r,function(e,t){return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e))}).join("&"))&&(n+="?".concat(r)),t&&(n+="#".concat(t)),n},l.prototype.getQueryResultPromise=function(){return this.getQueryResult().toPromise()},l.prototype.getParameters=function(){return this.$parameters||(this.$parameters=new w(this,n.search())),this.$parameters},l.prototype.getParametersDefs=function(){return this.getParameters().get()},l}function S(e){e.factory("QueryResultError",O),e.factory("Query",x),e.run(["$injector",function(e){m=e.get("Query")}])}S.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"ControllerType",function(){return O}),n.d(t,"wrap",function(){return x});n(21),n(22),n(18),n(31),n(57),n(29);var r=n(2),a=n(1),i=n.n(a),o=n(0),s=n.n(o),l=n(401),u=n.n(l),c=n(11),d=n(13),p=n(69);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){w(e,t,n[t])})}return e}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=s.a.shape({params:s.a.object.isRequired,isLoaded:s.a.bool.isRequired,isEmpty:s.a.bool.isRequired,searchTerm:s.a.string,updateSearch:s.a.func.isRequired,selectedTags:s.a.array.isRequired,updateSelectedTags:s.a.func.isRequired,orderByField:s.a.string,orderByReverse:s.a.bool.isRequired,toggleSorting:s.a.func.isRequired,page:s.a.number.isRequired,itemsPerPage:s.a.number.isRequired,totalItemsCount:s.a.number.isRequired,pageSizeOptions:s.a.arrayOf(s.a.number).isRequired,pageItems:s.a.array.isRequired,updatePagination:s.a.func.isRequired,handleError:s.a.func.isRequired});function x(e,t,n){var a=function(a){function o(e){var a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=b(this,y(o).call(this,e)),n=n||new p.StateStorage,t.setState(g({},n.getState(),{validate:!1})),t.getCallbackContext=function(){return a.state},t.onBeforeUpdate=function(){var e=t.getState();n.setState(e),a.setState(a.getState(g({},e,{isLoaded:!1})))},t.onAfterUpdate=function(){var e=t.getState();a.setState(a.getState(g({},e,{isLoaded:!0})))},t.onError=function(e){return a.props.onError(e)};var i=a.getState(g({},t.getState(),{isLoaded:!1})),s=t.updatePagination,l=t.toggleSorting,u=t.updateSearch,c=t.updateSelectedTags,d=t.update,f=t.handleError;return a.state=g({},i,{toggleSorting:l,updateSearch:Object(r.debounce)(u,200),updateSelectedTags:c,updatePagination:s,update:d,handleError:f}),a}var s,l,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(o,i.a.Component),s=o,(l=[{key:"componentDidMount",value:function(){this.state.update()}},{key:"componentWillUnmount",value:function(){t.onBeforeUpdate=function(){},t.onAfterUpdate=function(){},t.onError=function(){}}},{key:"getState",value:function(e){var t=e.isLoaded,n=e.totalCount,a=e.pageItems,i=m(e,["isLoaded","totalCount","pageItems"]),o=g({title:c.$route.current.title},c.$routeParams,Object(r.omit)(c.$route.current.locals,["$scope","$template"]),Object(r.omit)(this.props,["onError","children"]));return g({},i,{params:o,isLoaded:t,isEmpty:!t||0===n,totalItemsCount:t?n:0,pageSizeOptions:d.clientConfig.pageSizeOptions,pageItems:t?a:[]})}},{key:"render",value:function(){var t=this.props,n=t.children,r=(t.onError,m(t,["children","onError"]));return r.controller=this.state,i.a.createElement(e,r,n)}}])&&h(s.prototype,l),u&&h(s,u),o}();return w(a,"propTypes",g({},Object(r.omit)(e.propTypes,["controller"]),{onError:s.a.func,children:s.a.node})),w(a,"defaultProps",g({},Object(r.omit)(e.defaultProps,["controller"]),{onError:function(e){setTimeout(function(){throw e})},children:null})),u()(a,e),a}},,,,function(e,t,n){"use strict";n.r(t),n.d(t,"SearchInput",function(){return g}),n.d(t,"Menu",function(){return h}),n.d(t,"MenuIcon",function(){return b}),n.d(t,"ProfileImage",function(){return y}),n.d(t,"Tags",function(){return v}),n.d(t,"PageSizeSelect",function(){return w});n(19);var r=n(2),a=n(1),i=n.n(a),o=n(0),s=n.n(o),l=n(6),u=n.n(l),c=n(40),d=n.n(c),p=n(38),f=n.n(p),m=n(409);function g(e){var t=e.placeholder,n=e.value,r=e.showIcon,a=e.onChange,o=r?d.a.Search:d.a;return i.a.createElement("div",{className:"m-b-10"},i.a.createElement(o,{className:"form-control",placeholder:t,defaultValue:n,onChange:function(e){return a(e.target.value)},autoFocus:!0}))}function h(e){var t=e.items,n=e.selected;return 0===(t=Object(r.filter)(t,function(e){return!Object(r.isFunction)(e.isAvailable)||e.isAvailable()})).length?null:i.a.createElement("div",{className:"list-group m-b-10 tags-list tiled"},Object(r.map)(t,function(e){return i.a.createElement("a",{key:e.key,href:e.href,className:u()("list-group-item",{active:n===e.key})},Object(r.isString)(e.icon)&&""!==e.icon&&i.a.createElement("span",{className:"btn-favourite m-r-5"},i.a.createElement("i",{className:e.icon,"aria-hidden":"true"})),Object(r.isFunction)(e.icon)&&(e.icon(e)||null),e.title)}))}function b(e){var t=e.icon;return i.a.createElement("span",{className:"btn-favourite m-r-5"},i.a.createElement("i",{className:t,"aria-hidden":"true"}))}function y(e){var t=e.user;return Object(r.isString)(t.profile_image_url)&&""!==t.profile_image_url?i.a.createElement("img",{src:t.profile_image_url,className:"profile__image--navbar m-r-5",width:"13",alt:t.name}):null}function v(e){var t=e.url,n=e.onChange;return""===t?null:i.a.createElement("div",{className:"m-b-10"},i.a.createElement(m.TagsList,{tagsUrl:t,onUpdate:n}))}function w(e){var t=e.options,n=e.value,a=e.onChange;return i.a.createElement("div",{className:"m-b-10"},i.a.createElement("div",{className:"m-b-10"},i.a.createElement(f.a,{className:"w-100",defaultValue:n,onChange:a},Object(r.map)(t,function(e){return i.a.createElement(f.a.Option,{key:e,value:e},e," results")}))))}g.propTypes={placeholder:s.a.string,value:s.a.string.isRequired,showIcon:s.a.bool,onChange:s.a.func.isRequired},g.defaultProps={placeholder:"Search...",showIcon:!1},h.propTypes={items:s.a.arrayOf(s.a.shape({key:s.a.string.isRequired,href:s.a.string.isRequired,title:s.a.string.isRequired,icon:s.a.func,isAvailable:s.a.func})),selected:s.a.string},h.defaultProps={items:[],selected:null},b.propTypes={icon:s.a.string.isRequired},y.propTypes={user:s.a.shape({profile_image_url:s.a.string,name:s.a.string}).isRequired},v.propTypes={url:s.a.string.isRequired,onChange:s.a.func.isRequired},w.propTypes={options:s.a.arrayOf(s.a.number).isRequired,value:s.a.number.isRequired,onChange:s.a.func.isRequired}},,function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return g});n(35),n(18),n(31),n(57);var r=n(1),a=n.n(r),i=n(0),o=n.n(i),s=n(6),l=n.n(s);n(1156);function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var d={className:o.a.string,children:o.a.node},p={className:null,children:null};function f(e){var t=e.className,n=e.children,r=c(e,["className","children"]);return a.a.createElement("div",u({className:l()("layout-sidebar",t)},r),a.a.createElement("div",null,n))}function m(e){var t=e.className,n=e.children,r=c(e,["className","children"]);return a.a.createElement("div",u({className:l()("layout-content",t)},r),a.a.createElement("div",null,n))}function g(e){var t=e.className,n=e.children,r=c(e,["className","children"]);return a.a.createElement("div",u({className:l()("layout-with-sidebar",t)},r),n)}f.propTypes=d,f.defaultProps=p,m.propTypes=d,m.defaultProps=p,g.propTypes=d,g.defaultProps=p,g.Sidebar=f,g.Content=m},function(e,t,n){"use strict";n.r(t),n.d(t,"Group",function(){return r}),n.d(t,"default",function(){return i}),a.$inject=["$resource"];var r=null;function a(e){return e("api/groups/:id",{id:"@id"},{get:{method:"GET",cache:!1,isArray:!1},query:{method:"GET",cache:!1,isArray:!0},members:{method:"GET",cache:!1,isArray:!0,url:"api/groups/:id/members"},addMember:{method:"POST",url:"api/groups/:id/members"},removeMember:{method:"DELETE",url:"api/groups/:id/members/:userId"},dataSources:{method:"GET",cache:!1,isArray:!0,url:"api/groups/:id/data_sources"},addDataSource:{method:"POST",url:"api/groups/:id/data_sources"},removeDataSource:{method:"DELETE",url:"api/groups/:id/data_sources/:dataSourceId"},updateDataSource:{method:"POST",url:"api/groups/:id/data_sources/:dataSourceId"}})}function i(e){e.factory("Group",a),e.run(["$injector",function(e){r=e.get("Group")}])}i.init=!0},,,,function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return s});n(35);var r=n(1),a=n.n(r),i=n(60);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e){return a.a.createElement("div",{className:"text-center"},a.a.createElement(i.BigMessage,o({icon:"fa-spinner fa-2x fa-pulse",message:"Loading..."},e)))}},function(e,t,n){"use strict";n.r(t),n.d(t,"BigMessage",function(){return l}),n.d(t,"default",function(){return u});var r=n(1),a=n.n(r),i=n(0),o=n.n(i),s=n(14);function l(e){var t=e.message,n=e.icon,r=e.children,i=e.className;return a.a.createElement("div",{className:"p-15 text-center "+i},a.a.createElement("h3",{className:"m-t-0 m-b-0"},a.a.createElement("i",{className:"fa "+n})),a.a.createElement("br",null),t,r)}function u(e){e.component("bigMessage",Object(s.react2angular)(l))}l.propTypes={message:o.a.string,icon:o.a.string.isRequired,children:o.a.node,className:o.a.string},l.defaultProps={message:"",children:null,className:"tiled bg-white"},u.init=!0},,,,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"StateStorage",function(){return h}),n.d(t,"UrlStateStorage",function(){return b});n(21),n(22),n(547),n(29),n(18),n(31),n(57),n(97);var r=n(2),a=n(13),i=n(11),o=n(168);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e,t,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),e}var h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this._state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){p(e,t,n[t])})}return e}({},t)}return g(e,[{key:"getState",value:function(){return Object(r.defaults)(this._state,{page:1,itemsPerPage:a.clientConfig.pageSize,orderByField:"created_at",orderByReverse:!1,searchTerm:"",tags:[]})}},{key:"setState",value:function(){}}]),e}(),b=function(e){function t(){return f(this,t),l(this,c(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,h),g(t,[{key:"getState",value:function(){var e=u(c(t.prototype),"getState",this).call(this),n=i.$location.search(),r=n.q||"",a=""!==r?"":Object(o.compile)(e.orderByField,e.orderByReverse),s=Object(o.parse)(n.order||a),l=s.field,d=s.reverse;return{page:parseInt(n.page,10)||e.page,itemsPerPage:parseInt(n.page_size,10)||e.itemsPerPage,orderByField:l,orderByReverse:d,searchTerm:r}}},{key:"setState",value:function(e){var t=e.page,n=e.itemsPerPage,r=e.orderByField,a=e.orderByReverse,s=e.searchTerm;i.$location.search({page:t,page_size:n,order:Object(o.compile)(r,a),q:""!==s?s:null})}}]),t}()},function(e,t,n){"use strict";n.r(t);n(270);var r=n(2);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}var s=function(){function e(t){a(this,e),Object(r.extend)(this,{pathPrefix:"/".concat(t.path)},Object(r.omit)(t,["isActive"])),Object(r.isFunction)(t.isActive)&&(this.isActive=t.isActive)}return o(e,[{key:"isActive",value:function(e){return e.startsWith(this.pathPrefix)}}]),e}(),l=function(){function e(){a(this,e),this.items=[]}return o(e,[{key:"add",value:function(e){this.items.push(new s(e)),this.items=Object(r.sortBy)(this.items,"order")}}]),e}();t.default=new l},function(e,t,n){"use strict";n.d(t,"a",function(){return d}),n.d(t,"b",function(){return p});n(66);var r=n(10),a=n.n(r),i=n(435),o=n.n(i),s=n(2),l=n.n(s);o.a.options.scalePercentBy100=!1;var u=/(^|[\s\n]|<br\/?>)((?:https?|ftp):\/\/[\-A-Z0-9+\u0026\u2019@#\/%?=()~_|!:,.;]*[\-A-Z0-9+\u0026@#\/%=~()_|])/gi,c=Object.prototype.hasOwnProperty;function d(e){switch(e.displayAs){case"number":return function(e){if(l.a.isString(e)&&""!==e){var t=o()(0);return function(n){return null===n||""===n?"":t.set(n).format(e)}}return function(e){return e}}(e.numberFormat);case"boolean":return function(e){if(l.a.isArray(e)){if(e.length>=2)return function(t){return null==t?"":""+e[t?1:0]};if(1===e.length)return function(t){return t?e[0]:""}}return function(e){return null==e?"":e?"true":"false"}}(e.booleanValues);case"datetime":return t=e.dateTimeFormat,l.a.isString(t)&&""!==t?function(e){return e&&a.a.isMoment(e)?e.format(t):e}:function(e){return e};default:return e.allowHTML&&e.highlightLinks?function(e){return l.a.isString(e)&&(e=e.replace(u,'$1<a href="$2" target="_blank">$2</a>')),e}:function(e){return e}}var t}function p(e,t){return l.a.isString(e)?e.replace(/{{\s*([^\s]+?)\s*}}/g,function(e,n){return c.call(t,n)&&!l.a.isUndefined(t[n])?t[n]:e}):""}},function(e,t,n){"use strict";n.r(t),n.d(t,"MappingType",function(){return Y}),n.d(t,"parameterMappingsToEditableMappings",function(){return K}),n.d(t,"editableMappingsToParameterMappings",function(){return X}),n.d(t,"synchronizeWidgetTitles",function(){return J}),n.d(t,"ParameterMappingInput",function(){return Z}),n.d(t,"ParameterMappingListInput",function(){return ne});n(67),n(115),n(35),n(21),n(22),n(18),n(29),n(117),n(19);var r=n(2),a=n(1),i=n.n(a),o=n(0),s=n.n(o),l=n(6),u=n.n(l),c=n(38),d=n.n(c),p=n(100),f=n.n(p),m=n(432),g=n.n(m),h=n(25),b=n.n(h),y=n(30),v=n.n(y),w=n(396),O=n.n(w),x=n(40),S=n.n(x),j=n(90),E=n.n(j),P=n(42),k=n.n(P),_=n(44),q=n.n(_),C=n(404),T=n(91),$=n(13),R=n(47),z=n(223);n(1044);function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function N(){return(N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(e,t,n){return t&&F(e.prototype,t),n&&F(e,n),e}function L(e,t){return!t||"object"!==D(t)&&"function"!=typeof t?Q(e):t}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var G=d.a.Option,Y={DashboardAddNew:"dashboard-add-new",DashboardMapToExisting:"dashboard-map-to-existing",WidgetLevel:"widget-level",StaticValue:"static-value"};function K(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return Object(r.map)(e,function(e){var a=Object(r.extend)({},e),i=Object(r.includes)(n,e.mapTo);switch(a.param=Object(r.find)(t,function(t){return t.name===e.name}),e.type){case T.ParameterMappingType.DashboardLevel:a.type=i?Y.DashboardMapToExisting:Y.DashboardAddNew,a.value=null;break;case T.ParameterMappingType.StaticValue:a.type=Y.StaticValue,a.param=a.param.clone(),a.param.setValue(a.value);break;case T.ParameterMappingType.WidgetLevel:a.type=Y.WidgetLevel,a.value=null}return a})}function X(e){return Object(r.fromPairs)(Object(r.map)(e,function(e){var t=Object(r.extend)({},e);switch(e.type){case Y.DashboardAddNew:case Y.DashboardMapToExisting:t.type=T.ParameterMappingType.DashboardLevel,t.value=null;break;case Y.StaticValue:t.type=T.ParameterMappingType.StaticValue,t.param=e.param.clone(),t.param.setValue(t.value),t.value=t.param.value;break;case Y.WidgetLevel:t.type=T.ParameterMappingType.WidgetLevel,t.value=null}return delete t.param,[t.name,t]}))}function J(e,t){var n=[];return Object(r.each)(e,function(e){e.type===T.ParameterMappingType.DashboardLevel&&Object(r.each)(t,function(t){var a=t.options.parameterMappings;Object(r.each)(a,function(r){r.type===T.ParameterMappingType.DashboardLevel&&r.mapTo===e.mapTo&&r.title!==e.title&&(r.title=e.title,n.push(t))})})}),n}var Z=function(e){function t(){var e,n;M(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return W(Q(n=L(this,(e=V(t)).call.apply(e,[this].concat(i)))),"formItemProps",{labelCol:{span:5},wrapperCol:{span:16},className:"form-item"}),W(Q(n),"updateSourceType",function(e){var t=n.props.mapping.mapTo,a=n.props.existingParamNames;e!==Y.DashboardMapToExisting||Object(r.includes)(a,t)||(t=a[0]),n.updateParamMapping({type:e,mapTo:t})}),W(Q(n),"updateParamMapping",function(e){var t=n.props,a=t.onChange,i=t.mapping;a(Object(r.extend)({},i,e))}),n}return B(t,i.a.Component),U(t,[{key:"renderMappingTypeSelector",value:function(){var e=this,t=Object(r.isEmpty)(this.props.existingParamNames);return i.a.createElement(E.a.Group,{value:this.props.mapping.type,onChange:function(t){return e.updateSourceType(t.target.value)}},i.a.createElement(E.a,{className:"radio",value:Y.DashboardAddNew},"New dashboard parameter"),i.a.createElement(E.a,{className:"radio",value:Y.DashboardMapToExisting,disabled:t},"Existing dashboard parameter"," ",t?i.a.createElement(q.a,{title:"There are no dashboard parameters corresponding to this data type"},i.a.createElement(v.a,{type:"question-circle",theme:"filled"})):null),i.a.createElement(E.a,{className:"radio",value:Y.WidgetLevel},"Widget parameter"),i.a.createElement(E.a,{className:"radio",value:Y.StaticValue},"Static value"))}},{key:"renderDashboardAddNew",value:function(){var e=this,t=this.props.mapping.mapTo;return i.a.createElement(S.a,{value:t,onChange:function(t){return e.updateParamMapping({mapTo:t.target.value})}})}},{key:"renderDashboardMapToExisting",value:function(){var e=this,t=this.props,n=t.mapping,a=t.existingParamNames;return i.a.createElement(d.a,{value:n.mapTo,onChange:function(t){return e.updateParamMapping({mapTo:t})},dropdownMatchSelectWidth:!1},Object(r.map)(a,function(e){return i.a.createElement(G,{value:e,key:e},e)}))}},{key:"renderStaticValue",value:function(){var e=this,t=this.props.mapping;return i.a.createElement(C.ParameterValueInput,{type:t.param.type,value:t.param.normalizedValue,enumOptions:t.param.enumOptions,queryId:t.param.queryId,onSelect:function(t){return e.updateParamMapping({value:t})},clientConfig:this.props.clientConfig,Query:this.props.Query})}},{key:"renderInputBlock",value:function(){switch(this.props.mapping.type){case Y.DashboardAddNew:return["Key","Enter a new parameter keyword",this.renderDashboardAddNew()];case Y.DashboardMapToExisting:return["Key","Select from a list of existing parameters",this.renderDashboardMapToExisting()];case Y.StaticValue:return["Value",null,this.renderStaticValue()];default:return[]}}},{key:"render",value:function(){var e=this.props.inputError,t=I(this.renderInputBlock(),3),n=t[0],r=t[1],a=t[2];return i.a.createElement(k.a,{layout:"horizontal"},i.a.createElement(k.a.Item,N({label:"Source"},this.formItemProps),this.renderMappingTypeSelector()),i.a.createElement(k.a.Item,N({style:{height:60,visibility:a?"visible":"hidden"},label:n},this.formItemProps,{validateStatus:e?"error":"",help:e||r}),a))}}]),t}();W(Z,"propTypes",{mapping:s.a.object,existingParamNames:s.a.arrayOf(s.a.string),onChange:s.a.func,clientConfig:s.a.any,Query:s.a.any,inputError:s.a.string}),W(Z,"defaultProps",{mapping:{},existingParamNames:[],onChange:function(){},clientConfig:null,Query:null,inputError:null});var ee=function(e){function t(e){var n;return M(this,t),W(Q(n=L(this,V(t).call(this,e))),"onVisibleChange",function(e){e?n.show():n.hide()}),W(Q(n),"onChange",function(e){var t=null;e.type===Y.DashboardAddNew&&(Object(r.isEmpty)(e.mapTo)?t="Keyword must have a value":Object(r.includes)(n.props.existingParamNames,e.mapTo)&&(t="A parameter with this name already exists")),n.setState({mapping:e,inputError:t})}),W(Q(n),"save",function(){n.props.onChange(n.props.mapping,n.state.mapping),n.hide()}),W(Q(n),"show",function(){n.setState({visible:!0,mapping:Object(r.clone)(n.props.mapping)})}),W(Q(n),"hide",function(){n.setState({visible:!1})}),n.state={visible:!1,mapping:Object(r.clone)(n.props.mapping),inputError:null},n}return B(t,i.a.Component),U(t,[{key:"renderContent",value:function(){var e=this.state,t=e.mapping,n=e.inputError;return i.a.createElement("div",{className:"parameter-mapping-editor"},i.a.createElement("header",null,"Edit Source and Value ",i.a.createElement(z.HelpTrigger,{type:"VALUE_SOURCE_OPTIONS"})),i.a.createElement(Z,{mapping:t,existingParamNames:this.props.existingParamNames,onChange:this.onChange,clientConfig:$.clientConfig,Query:R.Query,inputError:n}),i.a.createElement("footer",null,i.a.createElement(b.a,{onClick:this.hide},"Cancel"),i.a.createElement(b.a,{onClick:this.save,disabled:!!n,type:"primary"},"OK")))}},{key:"render",value:function(){return i.a.createElement(g.a,{placement:"left",trigger:"click",content:this.renderContent(),visible:this.state.visible,onVisibleChange:this.onVisibleChange},i.a.createElement(b.a,{size:"small",type:"dashed"},i.a.createElement(v.a,{type:"edit"})))}}]),t}();W(ee,"propTypes",{mapping:s.a.object.isRequired,existingParamNames:s.a.arrayOf(s.a.string).isRequired,onChange:s.a.func.isRequired});var te=function(e){function t(){var e,n;M(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return W(Q(n=L(this,(e=V(t)).call.apply(e,[this].concat(i)))),"state",{showPopup:!1,title:""}),W(Q(n),"onPopupVisibleChange",function(e){n.setState({showPopup:e,title:e?n.getMappingTitle():""})}),W(Q(n),"onEditingTitleChange",function(e){n.setState({title:e.target.value})}),W(Q(n),"save",function(){var e=Object(r.extend)({},n.props.mapping,{title:n.state.title});n.props.onChange(e),n.hide()}),W(Q(n),"hide",function(){n.setState({showPopup:!1})}),n}return B(t,i.a.Component),U(t,[{key:"getMappingTitle",value:function(){var e=this.props.mapping;if(Object(r.isString)(e.title)&&""!==e.title)return e.title;if(e.type===Y.DashboardMapToExisting){var t=Object(r.find)(this.props.existingParams,{name:e.mapTo});t&&(e=t)}return e.title||e.param.title}},{key:"renderPopover",value:function(){var e=this.props.mapping.param.title;return i.a.createElement("div",{className:"parameter-mapping-title-editor"},i.a.createElement(S.a,{size:"small",value:this.state.title,placeholder:e,onChange:this.onEditingTitleChange,onPressEnter:this.save,maxLength:100,autoFocus:!0}),i.a.createElement(b.a,{size:"small",type:"dashed",onClick:this.hide},i.a.createElement(v.a,{type:"close"})),i.a.createElement(b.a,{size:"small",type:"dashed",onClick:this.save},i.a.createElement(v.a,{type:"check"})))}},{key:"renderEditButton",value:function(){return this.props.mapping.type===Y.StaticValue?i.a.createElement(q.a,{placement:"right",title:"Titles for static values don't appear in widgets"},i.a.createElement("i",{className:"fa fa-eye-slash"})):i.a.createElement(g.a,{placement:"right",trigger:"click",content:this.renderPopover(),visible:this.state.showPopup,onVisibleChange:this.onPopupVisibleChange},i.a.createElement(b.a,{size:"small",type:"dashed"},i.a.createElement(v.a,{type:"edit"})))}},{key:"render",value:function(){var e=this.props.mapping.type===Y.StaticValue;return i.a.createElement("div",{className:u()("parameter-mapping-title",{disabled:e})},i.a.createElement("span",{className:"text"},this.getMappingTitle()),this.renderEditButton())}}]),t}();W(te,"propTypes",{existingParams:s.a.arrayOf(s.a.object),mapping:s.a.object.isRequired,onChange:s.a.func.isRequired}),W(te,"defaultProps",{existingParams:[]});var ne=function(e){function t(){return M(this,t),L(this,V(t).apply(this,arguments))}return B(t,i.a.Component),U(t,[{key:"updateParamMapping",value:function(e,t){var n=A(this.props.mappings),a=Object(r.findIndex)(n,e);a>=0?n[a]=t:n.push(t),this.props.onChange(n)}},{key:"render",value:function(){var e=this,t=this.props.existingParams,n=this.props.mappings.map(function(e){return{mapping:e}});return i.a.createElement("div",{className:"parameters-mapping-list"},i.a.createElement(f.a,{dataSource:n,size:"middle",pagination:!1,rowKey:function(e,t){return"row".concat(t)}},i.a.createElement(f.a.Column,{title:"Title",dataIndex:"mapping",key:"title",render:function(n){return i.a.createElement(te,{existingParams:t,mapping:n,onChange:function(t){return e.updateParamMapping(n,t)}})}}),i.a.createElement(f.a.Column,{title:"Keyword",dataIndex:"mapping",key:"keyword",className:"keyword",render:function(e){return i.a.createElement("code",null,"{{ ".concat(e.name," }}"))}}),i.a.createElement(f.a.Column,{title:"Default Value",dataIndex:"mapping",key:"value",render:function(t){return e.constructor.getDefaultValue(t,e.props.existingParams)}}),i.a.createElement(f.a.Column,{title:"Value Source",dataIndex:"mapping",key:"source",render:function(n){var r=t.filter(function(e){return e.type===n.param.type}).map(function(e){return e.name});return i.a.createElement(a.Fragment,null,e.constructor.getSourceTypeLabel(n)," ",i.a.createElement(ee,{mapping:n,existingParamNames:r,onChange:function(t,n){return e.updateParamMapping(t,n)}}))}})))}}],[{key:"getStringValue",value:function(e){var t=this;return e?e instanceof Object&&"start"in e&&"end"in e?"".concat(e.start," ~ ").concat(e.end):"object"===D(e)?Object(r.map)(e,function(e){return t.getStringValue(e)}).join(", "):e.toString():""}},{key:"getDefaultValue",value:function(e,t){var n=e.type,a=e.mapTo,i=e.name,o=e.param;if(n===Y.DashboardMapToExisting&&a!==i){var s=Object(r.find)(t,{name:a});s&&(o=s)}else n===Y.StaticValue&&(o=o.clone().setValue(e.value));var l=R.Parameter.getValue(o);return this.getStringValue(l)}},{key:"getSourceTypeLabel",value:function(e){var t=e.type,n=e.mapTo;switch(t){case Y.DashboardAddNew:case Y.DashboardMapToExisting:return i.a.createElement(a.Fragment,null,"Dashboard"," ",i.a.createElement(O.a,{className:"tag"},n));case Y.WidgetLevel:return"Widget parameter";case Y.StaticValue:return"Static value";default:return""}}}]),t}();W(ne,"propTypes",{mappings:s.a.arrayOf(s.a.object),existingParams:s.a.arrayOf(s.a.object),onChange:s.a.func}),W(ne,"defaultProps",{mappings:[],existingParams:[],onChange:function(){}})},,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"Paginator",function(){return c}),n.d(t,"default",function(){return d});var r=n(1),a=n.n(r),i=n(0),o=n.n(i),s=n(14),l=n(284),u=n.n(l);function c(e){var t=e.page,n=e.itemsPerPage,r=e.totalCount,i=e.onChange;return r<=n?null:a.a.createElement("div",{className:"paginator-container"},a.a.createElement(u.a,{defaultCurrent:t,defaultPageSize:n,total:r,onChange:i}))}function d(e){e.component("paginatorImpl",Object(s.react2angular)(c)),e.component("paginator",{template:'\n      <paginator-impl\n        page="$ctrl.paginator.page"\n        items-per-page="$ctrl.paginator.itemsPerPage"\n        total-count="$ctrl.paginator.totalCount"\n        on-change="$ctrl.onPageChanged"\n      ></paginator-impl>',bindings:{paginator:"<"},controller:["$scope",function(e){var t=this;this.onPageChanged=function(n){t.paginator.setPage(n),e.$applyAsync()}}]})}c.propTypes={page:o.a.number.isRequired,itemsPerPage:o.a.number.isRequired,totalCount:o.a.number.isRequired,onChange:o.a.func},c.defaultProps={onChange:function(){}},d.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"ItemsSource",function(){return b}),n.d(t,"ResourceItemsSource",function(){return y});n(21),n(22),n(29),n(18),n(31),n(57),n(98);var r=n(2),a=n(419),i=n(168),o=n(121),s=n(296);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(){function e(t){var n=this,a=t.getRequest,i=t.doRequest,l=t.processResults,u=t.isPlainList,c=void 0!==u&&u,d=p(t,["getRequest","doRequest","processResults","isPlainList"]);f(this,e),h(this,"onBeforeUpdate",null),h(this,"onAfterUpdate",null),h(this,"onError",null),h(this,"getCallbackContext",function(){return null}),h(this,"updatePagination",function(e){var t=e.page,r=e.itemsPerPage,a=n._paginator,i=a.page,o=a.itemsPerPage;n._paginator.setItemsPerPage(r),n._paginator.setPage(t),n._changed({pagination:{page:i!==n._paginator.page,itemsPerPage:o!==n._paginator.itemsPerPage}})}),h(this,"toggleSorting",function(e){n._sorter.toggleField(e),n._savedOrderByField=n._sorter.field,n._changed({sorting:!0})}),h(this,"updateSearch",function(e){n._searchTerm=e,""===e?n._sorter.setField(n._savedOrderByField):n._sorter.setField(null),n._paginator.setPage(1),n._changed({search:!0,pagination:{page:!0}})}),h(this,"updateSelectedTags",function(e){n._selectedTags=e,n._paginator.setPage(1),n._changed({tags:!0,pagination:{page:!0}})}),h(this,"update",function(){return n._changed()}),h(this,"handleError",function(e){Object(r.isFunction)(n.onError)&&(e.status&&e.data&&(e=new o.a(e)),n.onError(e))}),Object(r.isFunction)(a)||(a=r.identity),this._fetcher=c?new s.PlainListFetcher({getRequest:a,doRequest:i,processResults:l}):new s.PaginatedListFetcher({getRequest:a,doRequest:i,processResults:l}),this.setState(d),this._pageItems=[]}return g(e,[{key:"_beforeUpdate",value:function(){return Object(r.isFunction)(this.onBeforeUpdate)?Promise.resolve(this.onBeforeUpdate(this.getState(),this.getCallbackContext())):Promise.resolve()}},{key:"_afterUpdate",value:function(){return Object(r.isFunction)(this.onAfterUpdate)?Promise.resolve(this.onAfterUpdate(this.getState(),this.getCallbackContext())):Promise.resolve()}},{key:"_changed",value:function(e){var t=this,n={paginator:this._paginator,sorter:this._sorter,searchTerm:this._searchTerm,selectedTags:this._selectedTags},r=this.getCallbackContext();return this._beforeUpdate().then(function(){return t._fetcher.fetch(e,n,r).then(function(e){var n=e.results,r=e.count,a=e.allResults;return t._pageItems=n,t._allItems=a||null,t._paginator.setTotalCount(r),t._afterUpdate()}).catch(function(e){t.handleError(e)})})}}]),g(e,[{key:"getState",value:function(){return{page:this._paginator.page,itemsPerPage:this._paginator.itemsPerPage,orderByField:this._sorter.field,orderByReverse:this._sorter.reverse,searchTerm:this._searchTerm,selectedTags:this._selectedTags,totalCount:this._paginator.totalCount,pageItems:this._pageItems,allItems:this._allItems}}},{key:"setState",value:function(e){this._paginator=new a.default(e),this._sorter=new i.default(e),this._searchTerm=e.searchTerm||"",this._selectedTags=e.selectedTags||[],this._savedOrderByField=this._sorter.field}}]),e}(),y=function(e){function t(e){var n=e.getResource,a=e.getItemProcessor,i=p(e,["getResource","getItemProcessor"]);return f(this,t),a=Object(r.isFunction)(a)?a:function(){return null},u(this,c(t).call(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){h(e,t,n[t])})}return e}({},i,{doRequest:function(e,t){return n(t)(e).$promise},processResults:function(e,t){var n=a(t);return n=Object(r.isFunction)(n)?n:r.identity,Object(r.map)(e,function(e){return n(e,t)})}})))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,b),t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});n(18),n(31),n(57);var r=n(2);function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){i(e,t,n[t])})}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function s(e,t){var n={};return t=Object(r.extend)({},t),Object(r.each)(e,function(e){var i=e.path,s=e.title,l=e.key,u=o(e,["path","title","key"]);Object(r.each)(u,function(e,t){u[t]=function(){return e}}),n[i]=a({},t,{title:s,resolve:a({},t.resolve,u,{currentPage:function(){return l}})})}),n}},function(e,t,n){"use strict";n.r(t),n.d(t,"policy",function(){return r}),n.d(t,"setPolicy",function(){return a});var r=new(n(416).default);function a(e){r=e}},function(e,t,n){"use strict";n.r(t),n.d(t,"ColorPalette",function(){return f}),n.d(t,"normalizeValue",function(){return v}),n.d(t,"prepareData",function(){return P}),n.d(t,"prepareLayout",function(){return k}),n.d(t,"updateData",function(){return C}),n.d(t,"updateLayout",function(){return T});n(35),n(1369),n(188),n(317),n(18),n(31),n(67),n(187),n(19);var r=n(2),a=n(10),i=n.n(a),o=n(9),s=n.n(o),l=n(427),u=n.n(l),c=n(71);function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var p={Blue:"#356AFF",Red:"#E92828",Green:"#3BD973",Purple:"#604FE9",Cyan:"#50F5ED",Orange:"#FB8D3D","Light Blue":"#799CFF",Lilac:"#B554FF","Light Green":"#8CFFB4",Brown:"#A55F2A",Black:"#000000",Gray:"#494949",Pink:"#FF7DE3","Dark Blue":"#002FB4"},f=d({},p,{"Indian Red":"#981717","Green 2":"#17BF51","Green 3":"#049235",DarkTurquoise:"#00B6EB","Dark Violet":"#A58AFF","Pink 2":"#C63FA9"}),m=Object(r.values)(p);function g(e){return Object(r.isUndefined)(e)?e:u()(e)||0}function h(e){var t=e["@@y"];return void 0!==e["@@yError"]&&(t="".concat(t,"  ").concat(e["@@yError"])),void 0!==e["@@yPercent"]&&(t="".concat(e["@@yPercent"]," (").concat(t,")")),void 0!==e["@@size"]&&(t="".concat(t,": ").concat(e["@@size"])),t}function b(e){return e["@@yPercent"]+" ("+e["@@y"]+")"}function y(e){var t="#333333";if(Object(r.isString)(e)){var n,a,i,o=/#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})/i.exec(e);if(o)n=parseInt(o[1],16),a=parseInt(o[2],16),i=parseInt(o[3],16);else{if(!(o=/#?([0-9a-f])([0-9a-f])([0-9a-f])/i.exec(e)))return t;n=parseInt(o[1]+o[1],16),a=parseInt(o[2]+o[2],16),i=parseInt(o[3]+o[3],16)}.299*n+.587*a+.114*i<170&&(t="#ffffff")}return t}function v(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"YYYY-MM-DD HH:mm:ss";return"datetime"===t&&i.a.utc(e).isValid()&&(e=i.a.utc(e)),i.a.isMoment(e)?e.format(n):e}function w(e,t){return e===t?0:e<t?-1:1}function O(e,t,n){return Object(r.isNumber)(t)||(t=Math.min(0,Object(r.min)(Object(r.map)(e,function(e){return Object(r.min)(e.y)})))),Object(r.isNumber)(n)||(n=Object(r.max)(Object(r.map)(e,function(e){return Object(r.max)(e.y)}))),[t,n]}function x(e){return"datetime"===e?"date":"logarithmic"===e?"log":e}function S(e){return Object(r.isUndefined)(e)||Object(r.isUndefined)(e.title)?null:e.title.text}function j(e,t){var n=e.length>2?2:1,a=Math.ceil(e.length/n);return{rows:n,cellsInRow:a,cellWidth:1/a,cellHeight:1/n,xPadding:.02,yPadding:.1,hasX:Object(r.includes)(Object(r.values)(t.columnMapping),"x"),hasY2:!!Object(r.find)(e,function(e){var n=t.seriesOptions[e.name]||{type:t.globalSeriesType};return 1===n.yAxis&&(null===t.series.stacking||"line"===n.type)})}}function E(e,t){var n=!0===t.sortX||void 0===t.sortX,a=Object(c.a)({displayAs:"number",numberFormat:t.numberFormat}),i=Object(c.a)({displayAs:"number",numberFormat:t.percentFormat}),o=""===t.textFormat?h:function(e){return Object(c.b)(t.textFormat,e)},s=function(e){var t="text";return/{{\s*@@x\s*}}/.test(e.textFormat)||(t+="+x"),/{{\s*@@name\s*}}/.test(e.textFormat)||(t+="+name"),t}(t);return Object(r.map)(e,function(e,l){var u=t.seriesOptions[e.name]||{type:t.globalSeriesType},c=function(e,t){return e.color||m[t%m.length]}(u,l),d=n?Object(r.sortBy)(e.data,function(e){return v(e.x,t.xAxis.type)}):e.data,p=Object(r.includes)(["bubble","scatter"],u.type)?v:g,f=new Map,h=[],b=[],w=[];Object(r.each)(d,function(e){var n=v(e.x,t.xAxis.type),a=p(e.y,t.yAxis[0].type),i=g(e.yError),o=g(e.size);f.set(n,{x:n,y:a,yError:i,size:o,yPercent:null,raw:Object(r.extend)({},e.$raw,{"@@x":v(e.x,t.xAxis.type,t.dateTimeFormat)})}),h.push(n),b.push(a),w.push(i)});var O={visible:!0,hoverinfo:s,x:h,y:b,error_y:{array:w,color:c},name:u.name||e.name,marker:{color:c},insidetextfont:{color:y(c)},sourceData:f,formatNumber:a,formatPercent:i,formatText:o};return 1!==u.yAxis||null!==t.series.stacking&&"line"!==u.type||(O.yaxis="y2"),function(e,t,n){switch(t){case"column":e.type="bar",n.showDataLabels&&(e.textposition="inside");break;case"line":e.mode="lines"+(n.showDataLabels?"+text":"");break;case"area":e.mode="lines"+(n.showDataLabels?"+text":""),e.fill=null===n.series.stacking?"tozeroy":"tonexty";break;case"scatter":e.type="scatter",e.mode="markers"+(n.showDataLabels?"+text":"");break;case"bubble":e.mode="markers";break;case"box":e.type="box",e.mode="markers"}}(O,u.type,t),"bubble"===u.type?O.marker={color:c,size:Object(r.map)(d,function(e){return e.size})}:"box"===u.type&&(O.boxpoints="outliers",O.hoverinfo=!1,O.marker={color:c,size:3},t.showpoints&&(O.boxpoints="all",O.jitter=.3,O.pointpos=-1.8)),O})}function P(e,t){return"pie"===t.globalSeriesType?function(e,t){var n=j(e,t),a=n.cellWidth,i=n.cellHeight,o=n.xPadding,l=n.yPadding,u=n.cellsInRow,d=n.hasX,p=Object(c.a)({displayAs:"number",numberFormat:t.numberFormat}),f=Object(c.a)({displayAs:"number",numberFormat:t.percentFormat}),h=""===t.textFormat?b:function(e){return Object(c.b)(t.textFormat,e)},y=function(e){var t="text";return/{{\s*@@x\s*}}/.test(e.textFormat)||(t+="+label"),t}(t),w=s.a.scale.ordinal().domain([]).range(m),O={};return Object(r.each)(t.valuesOptions,function(e,t){Object(r.isString)(e.color)&&""!==e.color&&(O[t]=e.color)}),Object(r.map)(e,function(e,n){var s=n%u*a,c=Math.floor(n/u)*i,m=new Map,b=Object(r.reduce)(e.data,function(e,t){var n=g(t.y);return e+Math.abs(n)},0);return Object(r.each)(e.data,function(e){var n=v(e.x),a=g(e.y);m.set(n,{x:n,y:a,yPercent:a/b*100,raw:Object(r.extend)({},e.$raw,{"@@x":v(e.x,t.xAxis.type,t.dateTimeFormat)})})}),{values:Object(r.map)(e.data,function(e){return e.y}),labels:Object(r.map)(e.data,function(e){return d?v(e.x):"Slice ".concat(n)}),type:"pie",hole:.4,marker:{colors:Object(r.map)(e.data,function(e){return O[e.x]||w(e.x)})},hoverinfo:y,text:[],textinfo:t.showDataLabels?"percent":"none",textposition:"inside",textfont:{color:"#ffffff"},name:e.name,domain:{x:[s,s+a-o],y:[c,c+i-l]},sourceData:m,formatNumber:p,formatPercent:f,formatText:h}})}(e,t):"heatmap"===t.globalSeriesType?Object(r.flatten)(function(e,t){var n=Object(c.a)({displayAs:"number",numberFormat:t.numberFormat}),a=[];return a=t.colorScheme?"Custom..."===t.colorScheme?[[0,t.heatMinColor],[1,t.heatMaxColor]]:t.colorScheme:[[0,"#356aff"],[.14,"#4a7aff"],[.28,"#5d87ff"],[.42,"#7398ff"],[.56,"#fb8c8c"],[.71,"#ec6463"],[.86,"#ec4949"],[1,"#e92827"]],Object(r.map)(e,function(e){var i={x:[],y:[],z:[],type:"heatmap",name:"",colorscale:a};i.x=Object(r.uniq)(Object(r.map)(e.data,"x")),i.y=Object(r.uniq)(Object(r.map)(e.data,"y")),t.sortX&&i.x.sort(w),t.sortY&&i.y.sort(w),t.reverseX&&i.x.reverse(),t.reverseY&&i.y.reverse();for(var o=Object(r.max)(Object(r.map)(e.data,"zVal")),s={x:[],y:[],mode:"text",hoverinfo:"skip",showlegend:!1,text:[],textfont:{color:[]}},l=0;l<i.y.length;l+=1){for(var u=[],c=0;c<i.x.length;c+=1){var d=Object(r.find)(e.data,{x:i.x[c],y:i.y[l]}),p=d?d.zVal:0;u.push(p),isFinite(o)&&t.showDataLabels&&(s.x.push(i.x[c]),s.y.push(i.y[l]),s.text.push(n(p)),t.colorScheme&&"Custom..."===t.colorScheme?s.textfont.color.push("white"):s.textfont.color.push(p/o<.25?"white":"black"))}i.z.push(u)}return isFinite(o)&&t.showDataLabels?[i,s]:[i]})}(e,t)):E(e,t)}function k(e,t,n,a){var i=j(t,n),o=i.cellsInRow,s=i.cellWidth,l=i.cellHeight,u=i.xPadding,c=i.hasY2,d={margin:{l:10,r:10,b:10,t:25,pad:4},width:Math.floor(e.offsetWidth),height:Math.floor(e.offsetHeight),autosize:!0,showlegend:!Object(r.has)(n,"legend")||n.legend.enabled};if("pie"===n.globalSeriesType){var p=/{{\s*@@name\s*}}/.test(n.textFormat);d.annotations=p?[]:Object(r.filter)(Object(r.map)(t,function(e,t){var r=t%o*s,a=Math.floor(t/o)*l;return{x:r+(s-u)/2,y:a+l-.015,xanchor:"center",yanchor:"top",text:n.seriesOptions[e.name].name||e.name,showarrow:!1}}))}else"box"===n.globalSeriesType&&(d.boxmode="group",d.boxgroupgap=.5),d.xaxis={title:S(n.xAxis),type:x(n.xAxis.type),automargin:!0},n.sortX&&"category"===d.xaxis.type&&(n.reverseX?d.xaxis.categoryorder="category descending":d.xaxis.categoryorder="category ascending"),Object(r.isUndefined)(n.xAxis.labels)||(d.xaxis.showticklabels=n.xAxis.labels.enabled),Object(r.isArray)(n.yAxis)&&(d.yaxis={title:S(n.yAxis[0]),type:x(n.yAxis[0].type),automargin:!0},(Object(r.isNumber)(n.yAxis[0].rangeMin)||Object(r.isNumber)(n.yAxis[0].rangeMax))&&(d.yaxis.range=O(a.filter(function(e){return"y2"!==!e.yaxis}),n.yAxis[0].rangeMin,n.yAxis[0].rangeMax))),c&&!Object(r.isUndefined)(n.yAxis)&&(d.yaxis2={title:S(n.yAxis[1]),type:x(n.yAxis[1].type),overlaying:"y",side:"right",automargin:!0},(Object(r.isNumber)(n.yAxis[1].rangeMin)||Object(r.isNumber)(n.yAxis[1].rangeMax))&&(d.yaxis2.range=O(a.filter(function(e){return"y2"===e.yaxis}),n.yAxis[1].rangeMin,n.yAxis[1].rangeMax))),n.series.stacking&&(d.barmode="relative");return d}function _(e,t){return Object(r.each)(e,function(e){var n=t.seriesOptions[e.name]||{type:t.globalSeriesType};e.text=[],e.hover=[],("pie"===t.globalSeriesType?e.labels:e.x).forEach(function(a){var i={"@@name":e.name},o=e.sourceData.get(a);o&&(i["@@y"]=Object(r.includes)(["bubble","scatter"],n.type)?o.y:e.formatNumber(o.y),void 0!==o.yError&&(i["@@yError"]=e.formatNumber(o.yError)),void 0!==o.size&&(i["@@size"]=e.formatNumber(o.size)),(t.series.percentValues||"pie"===t.globalSeriesType)&&(i["@@yPercent"]=e.formatPercent(Math.abs(o.yPercent))),Object(r.extend)(i,o.raw)),e.text.push(e.formatText(i))})}),e}function q(e,t,n,a){var i=function(e,t){var n=new Set;Object(r.each)(e,function(e){e.sourceData.forEach(function(e){n.add(e.x)})});var a=[];return n.forEach(function(e){a.push(e)}),t?Object(r.sortBy)(a,r.identity):a}(e,n);a=void 0===a?null:a,Object(r.each)(e,function(e){e.x=[],e.y=[],e.error_y.array=[],Object(r.each)(i,function(n){e.x.push(n);var r=e.sourceData.get(n);r?(e.y.push(t.series.percentValues?r.yPercent:r.y),e.error_y.array.push(r.yError)):(e.y.push(a),e.error_y.array.push(null))})})}function C(e,t){if(0===e.length)return e;if("pie"===t.globalSeriesType)return _(e,t),e;if("heatmap"===t.globalSeriesType)return e;!function(e,t){if(t.series.percentValues&&e.length>0){var n=new Map;Object(r.each)(e,function(e){e.sourceData.forEach(function(e){var t=n.get(e.x)||0;n.set(e.x,t+Math.abs(e.y))})}),Object(r.each)(e,function(e){var t=[];e.sourceData.forEach(function(e){var r=n.get(e.x);e.yPercent=Math.sign(e.y)*Math.abs(e.y)/r*100,t.push(e.yPercent)}),e.y=t})}}(e=Object(r.filter)(e,function(e){return!0===e.visible}),t);var n=!0===t.sortX||void 0===t.sortX;if(t.series.stacking){if(["line","area"].indexOf(t.globalSeriesType)>=0){q(e,t,n,0);var a=null;Object(r.each)(e,function(e){a&&(e.y=Object(r.map)(e.y,function(e,t){return a.y[t]+e})),a=e})}}else n&&"category"===t.xAxis.type&&"box"!==t.globalSeriesType&&q(e,t,n);_(e,t)}function T(e,t,n){t.width=Math.floor(e.offsetWidth),t.height=Math.floor(e.offsetHeight);var a=Object(r.find)(["transform","webkitTransform","mozTransform","msTransform","oTransform"],function(t){return Object(r.has)(e.style,t)});if(t.width<=600)t.legend={orientation:"h",y:0,x:0,xanchor:"left",yanchor:"bottom"},function(e){var t=e.querySelector(".legend");if(t)for(var n=t.parentNode;n;){if("svg"===n.tagName.toLowerCase()){n.style.overflow="visible";break}n=n.parentNode}}(e),n(e,Object(r.pick)(t,["width","height","legend"])).then(function(){var i=e.querySelector(".legend");if(i){var o=Object(r.reduce)(i.querySelectorAll(".traces"),function(e,t){var n=t.getBoundingClientRect();return e=e||n,{top:Math.min(e.top,n.top),bottom:Math.max(e.bottom,n.bottom)}},null);t.height=Math.floor(Math.max(t.height/2,t.height-(o.bottom-o.top))),i.style[a]="translate(0, "+t.height+"px)",n(e,Object(r.pick)(t,["height"]))}});else{t.legend={orientation:"v",y:1,x:1,xanchor:"left",yanchor:"top"};var i=e.querySelector(".legend");i&&(i.style[a]=null),n(e,Object(r.pick)(t,["width","height","legend"]))}}},,,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"Widget",function(){return s}),n.d(t,"ParameterMappingType",function(){return l}),n.d(t,"default",function(){return c});n(97),n(19);var r=n(10),a=n.n(r),i=n(2);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}u.$inject=["$http","$location","Query","Visualization","dashboardGridOptions"];var s=null;var l={DashboardLevel:"dashboard-level",WidgetLevel:"widget-level",StaticValue:"static-value"};function u(e,t,n,r,s){var u,c,d,p=function(){function l(e){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),Object(i.each)(e,function(e,n){t[n]=e});var n=function(e,t,n){n.width=1;var r={autoHeight:!1,sizeX:Math.round(t.columns/2),sizeY:t.defaultSizeY,minSizeX:t.minSizeX,maxSizeX:t.maxSizeX,minSizeY:t.minSizeY,maxSizeY:t.maxSizeY},a=n.visualization?e.visualizations[n.visualization.type]:null;if(Object(i.isObject)(a)){var o=Object(i.extend)({},a.defaultOptions);Object.prototype.hasOwnProperty.call(o,"autoHeight")&&(r.autoHeight=o.autoHeight);var s=parseInt(o.minColumns,10);isFinite(s)&&s>=0&&(r.minSizeX=s);var l=parseInt(o.maxColumns,10);isFinite(l)&&l>=0&&(r.maxSizeX=Math.min(l,t.columns));var u=parseInt(o.height,10);isFinite(u)&&(r.minSizeY=Math.ceil(u/t.rowHeight));var c=parseInt(o.minRows,10);isFinite(c)&&(r.minSizeY=c);var d=parseInt(o.maxRows,10);isFinite(d)&&d>=0&&(r.maxSizeY=d);var p=parseInt(o.defaultColumns,10);isFinite(p)&&p>0&&(r.sizeX=p);var f=parseInt(o.defaultRows,10);isFinite(f)&&f>0&&(r.sizeY=f)}return r}(r,s,this);this.options=this.options||{},this.options.position=Object(i.extend)({},n,Object(i.pick)(this.options.position,["col","row","sizeX","sizeY","autoHeight"])),this.options.position.sizeY<0&&(this.options.position.autoHeight=!0),this.$originalPosition=Object(i.extend)({},this.options.position)}var u,c,d;return u=l,(c=[{key:"getQuery",value:function(){return!this.query&&this.visualization&&(this.query=new n(this.visualization.query)),this.query}},{key:"getQueryResult",value:function(){return this.data}},{key:"getName",value:function(){return this.visualization?"".concat(this.visualization.query.name," (").concat(this.visualization.name,")"):Object(i.truncate)(this.text,20)}},{key:"load",value:function(e,t){var n=this;if(this.visualization)return(e||void 0===this.queryResult)&&(this.loading=!0,this.refreshStartedAt=a()(),(void 0===t||e)&&(t=e?0:void 0),this.queryResult=this.getQuery().getQueryResult(t),this.queryResult.toPromise().then(function(e){n.loading=!1,n.data=e}).catch(function(e){n.loading=!1,n.data=e})),this.queryResult.toPromise()}},{key:"save",value:function(){var t=this,n=Object(i.pick)(this,"options","text","id","width","dashboard_id","visualization_id"),r="api/widgets";return this.id&&(r="".concat(r,"/").concat(this.id)),e.post(r,n).then(function(e){return Object(i.each)(e.data,function(e,n){t[n]=e}),t})}},{key:"delete",value:function(){var t="api/widgets/".concat(this.id);return e.delete(t)}},{key:"isStaticParam",value:function(e){return this.getParameterMappings()[e.name].type===l.MappingType.StaticValue}},{key:"getParametersDefs",value:function(){var e=this,n=this.getParameterMappings(),r=this.getQuery()?this.getQuery().getParametersDefs():[],a=t.search(),o=[l.MappingType.WidgetLevel,l.MappingType.StaticValue];return Object(i.map)(Object(i.filter)(r,function(e){return o.indexOf(n[e.name].type)>=0}),function(t){var r=n[t.name],i=t.clone();return i.title=r.title||t.title,i.locals=[t],i.urlPrefix="p_w".concat(e.id,"_"),r.type===l.MappingType.StaticValue?i.setValue(r.value):i.fromUrlParams(a),i})}},{key:"getParameterMappings",value:function(){var e=this;Object(i.isObject)(this.options.parameterMappings)||(this.options.parameterMappings={});var t={},n=this.getQuery()?this.getQuery().getParametersDefs():[];Object(i.each)(n,function(n){t[n.name]=!0,Object(i.isObject)(e.options.parameterMappings[n.name])||(e.options.parameterMappings[n.name]={name:n.name,type:n.global?l.MappingType.DashboardLevel:l.MappingType.WidgetLevel,mapTo:n.name,value:null,title:""})});var r=Object(i.difference)(Object(i.keys)(this.options.parameterMappings),Object(i.keys)(t));return Object(i.each)(r,function(t){delete e.options.parameterMappings[t]}),this.options.parameterMappings}}])&&o(u.prototype,c),d&&o(u,d),l}();return d=l,(c="MappingType")in(u=p)?Object.defineProperty(u,c,{value:d,enumerable:!0,configurable:!0,writable:!0}):u[c]=d,p}function c(e){e.factory("Widget",u),e.run(["$injector",function(e){s=e.get("Widget")}])}c.init=!0},,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"PreviewCard",function(){return u}),n.d(t,"UserPreviewCard",function(){return c}),n.d(t,"DataSourcePreviewCard",function(){return d});n(35),n(18),n(31),n(57),n(19);var r=n(1),a=n.n(r),i=n(0),o=n.n(i);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function u(e){var t=e.imageUrl,n=e.title,r=e.body,i=e.children,o=e.className,u=l(e,["imageUrl","title","body","children","className"]);return a.a.createElement("div",s({},u,{className:o+" w-100 d-flex align-items-center"}),a.a.createElement("img",{src:t,width:"32",height:"32",className:"profile__image--settings m-r-5",alt:"Logo/Avatar"}),a.a.createElement("div",{className:"flex-fill"},a.a.createElement("div",null,n),r&&a.a.createElement("div",{className:"text-muted"},r)),i)}function c(e){var t=e.user,n=e.withLink,r=e.children,i=l(e,["user","withLink","children"]),o=n?a.a.createElement("a",{href:"users/"+t.id},t.name):t.name;return a.a.createElement(u,s({},i,{imageUrl:t.profile_image_url,title:o,body:t.email}),r)}function d(e){var t=e.dataSource,n=e.withLink,r=e.children,i=l(e,["dataSource","withLink","children"]),o="/static/images/db-logos/".concat(t.type,".png"),c=n?a.a.createElement("a",{href:"data_sources/"+t.id},t.name):t.name;return a.a.createElement(u,s({},i,{imageUrl:o,title:c}),r)}u.propTypes={imageUrl:o.a.string.isRequired,title:o.a.node.isRequired,body:o.a.node,className:o.a.string,children:o.a.node},u.defaultProps={body:null,className:"",children:null},c.propTypes={user:o.a.shape({profile_image_url:o.a.string.isRequired,name:o.a.string.isRequired,email:o.a.string.isRequired}).isRequired,withLink:o.a.bool,children:o.a.node},c.defaultProps={withLink:!1,children:null},d.propTypes={dataSource:o.a.shape({name:o.a.string.isRequired,type:o.a.string.isRequired}).isRequired,withLink:o.a.bool,children:o.a.node},d.defaultProps={withLink:!1,children:null}},function(e,t,n){"use strict";n.r(t),n.d(t,"AdditionalColors",function(){return l}),n.d(t,"darkenColor",function(){return u}),n.d(t,"createNumberFormatter",function(){return c}),n.d(t,"prepareData",function(){return d}),n.d(t,"prepareFeatureProperties",function(){return p}),n.d(t,"getValueForFeature",function(){return f}),n.d(t,"getColorByValue",function(){return m}),n.d(t,"createScale",function(){return g}),n.d(t,"inferCountryCodeType",function(){return h});var r=n(301),a=n.n(r),i=n(2),o=n.n(i),s=n(71),l={White:"#ffffff",Black:"#000000","Light Gray":"#dddddd"};function u(e){return a()(e).darken().hex()}function c(e,t){var n=Object(s.a)({displayAs:"number",numberFormat:e});return function(e){return o.a.isNumber(e)&&isFinite(e)?n(e):t}}function d(e,t,n){if(!t||!n)return{};var r={};return o.a.each(e,function(e){if(e[t]){var a=parseFloat(e[n]);r[e[t]]={code:e[t],value:isFinite(a)?a:void 0,item:e}}}),r}function p(e,t,n,r){var a={};o.a.each(e.properties,function(e,t){a["@@"+t]=e}),a["@@value"]=t;var i=n[e.properties[r]]||{};return o.a.extend(a,i.item)}function f(e,t,n){var r=e.properties[n];if(o.a.isString(r)&&o.a.isObject(t[r]))return t[r].value}function m(e,t,n,r){if(o.a.isNumber(e)&&isFinite(e))for(var a=0;a<t.length;a+=1)if(e<=t[a])return n[a];return r}function g(e,t,n){var r=o.a.uniq(o.a.filter(o.a.map(e,function(e){return f(e,t,n.countryCodeType)}),o.a.isNumber));if(0===r.length)return{limits:[],colors:[],legend:[]};var i=Math.min(r.length,n.steps);if(1===i)return{limits:r,colors:[n.colors.max],legend:[{color:n.colors.max,limit:o.a.first(r)}]};var s=a.a.limits(r,n.clusteringMode,i-1),l=a.a.scale([n.colors.min,n.colors.max]).colors(s.length),u=o.a.map(l,function(e,t){return{color:e,limit:s[t]}}).reverse();return{limits:s,colors:l,legend:u}}function h(e,t){var n={iso_a2:/^[a-z]{2}$/i,iso_a3:/^[a-z]{3}$/i,iso_n3:/^[0-9]{3}$/i},r=o.a.chain(e).reduce(function(e,r){var a=r[t];return o.a.isString(a)&&o.a.each(n,function(t,n){e[n]+=t.test(a)?1:0}),e},{iso_a2:0,iso_a3:0,iso_n3:0}).toPairs().reduce(function(e,t){return t[1]>e[1]?t:e}).value();return r[1]/e.length>=.9?r[0]:null}},,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"TagsControl",function(){return v}),n.d(t,"QueryTagsControl",function(){return O}),n.d(t,"DashboardTagsControl",function(){return x}),n.d(t,"default",function(){return S});n(21),n(22),n(18),n(31),n(57),n(29),n(98);var r=n(2),a=n(1),i=n.n(a),o=n(0),s=n.n(o),l=n(14),u=n(44),c=n.n(u),d=n(399);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=this,a=(e=g(t)).call.apply(e,[this].concat(o)),n=!a||"object"!==p(a)&&"function"!=typeof a?h(r):a,y(h(n),"editTags",function(e,t){d.default.showModal({tags:e,getAvailableTags:t}).result.then(n.props.onEdit)}),n}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,i.a.Component),n=t,(a=[{key:"renderEditButton",value:function(){var e=this,t=Object(r.map)(this.props.tags,r.trim);return i.a.createElement("a",{className:"label label-tag",role:"none",onClick:function(){return e.editTags(t,e.props.getAvailableTags)}},0===t.length&&i.a.createElement(i.a.Fragment,null,i.a.createElement("i",{className:"zmdi zmdi-plus m-r-5"}),"Add tag"),t.length>0&&i.a.createElement("i",{className:"zmdi zmdi-edit"}))}},{key:"render",value:function(){return i.a.createElement("div",{className:"tags-control "+this.props.className},this.props.children,Object(r.map)(this.props.tags,function(e){return i.a.createElement("span",{className:"label label-tag",key:e,title:e},e)}),this.props.canEdit&&this.renderEditButton())}}])&&m(n.prototype,a),o&&m(n,o),t}();function w(e){var t=e.archivedTooltip;function n(e){var n=e.isDraft,r=e.isArchived,a=f(e,["isDraft","isArchived"]);return i.a.createElement(v,a,!r&&n&&i.a.createElement("span",{className:"label label-tag-unpublished"},"Unpublished"),r&&i.a.createElement(c.a,{placement:"right",title:t},i.a.createElement("span",{className:"label label-tag-archived"},"Archived")))}return n.propTypes=Object(r.extend)({isDraft:s.a.bool,isArchived:s.a.bool},v.propTypes),n.defaultProps=Object(r.extend)({isDraft:!1,isArchived:!1},v.defaultProps),n}y(v,"propTypes",{tags:s.a.arrayOf(s.a.string),canEdit:s.a.bool,getAvailableTags:s.a.func,onEdit:s.a.func,className:s.a.string,children:s.a.node}),y(v,"defaultProps",{tags:[],canEdit:!1,getAvailableTags:function(){return Promise.resolve([])},onEdit:function(){},className:"",children:null});var O=w({archivedTooltip:"This query is archived and can't be used in dashboards, or appear in search results."}),x=w({archivedTooltip:"This dashboard is archived and won't be listed in dashboards nor search results."});function S(e){e.component("queryTagsControl",Object(l.react2angular)(O)),e.component("dashboardTagsControl",Object(l.react2angular)(x))}S.init=!0},function(e,t,n){"use strict";n.d(t,"a",function(){return l});n(67),n(115),n(519),n(21),n(22),n(29);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}var l=function(e){function t(e){var n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),void 0!==e.status&&(404===e.status?r="It seems like the page you're looking for cannot be found.":403!==e.status&&401!==e.status||(r="It seems like you dont have permission to see this page.")),void 0===r&&(r="It seems like we encountered an error. Try refreshing this page or contact your administrator."),(n=a(this,i(t).call(this,r))).rejection=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(t,s(Error)),t}()},,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return s});var r=n(2),a=n(11),i=[],o=Object(r.debounce)(function(){var e=i;i=[],a.$http.post("api/events",e)},1e3);function s(e,t,n,a){var s={action:e,object_type:t,object_id:n,timestamp:Date.now()/1e3,screen_resolution:"".concat(window.screen.width,"x").concat(window.screen.height)};Object(r.extend)(s,a),i.push(s),o()}},,function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return i});n(66);var r=n(2),a=n(11);function i(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(r.isString)(e)&&(a.$location.url(e),t&&a.$location.replace(),a.$rootScope.$applyAsync())}},function(e,t,n){"use strict";n.r(t);var r=n(11);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.objectCounters={}}var t,n,i;return t=e,(n=[{key:"refresh",value:function(){var e=this;return r.$http.get("api/organization/status").then(function(t){var n=t.data;return e.objectCounters=n.object_counters,e})}}])&&a(t.prototype,n),i&&a(t,i),e}();t.default=new i},,,,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return b});n(21),n(22),n(35),n(29);var r=n(1),a=n.n(r),i=n(40),o=n.n(i),s=n(30),l=n.n(s),u=n(44),c=n.n(u);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b=function(e){function t(e){var n,r,i,o,s,l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,i=m(t).call(this,e),n=!i||"object"!==d(i)&&"function"!=typeof i?g(r):i,o=g(n),l=function(){n.ref.current.select();try{if(!document.execCommand("copy"))throw new Error;n.setState({copied:"Copied!"})}catch(e){n.setState({copied:"Copy failed"})}n.resetCopyState=setTimeout(function(){return n.setState({copied:null})},2e3)},(s="copy")in o?Object.defineProperty(o,s,{value:l,enumerable:!0,configurable:!0,writable:!0}):o[s]=l,n.state={copied:null},n.ref=a.a.createRef(),n.copyFeatureSupported=document.queryCommandSupported("copy"),n.resetCopyState=null,n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,a.a.Component),n=t,(r=[{key:"componentWillUnmount",value:function(){this.resetCopyState&&clearTimeout(this.resetCopyState)}},{key:"render",value:function(){var e=a.a.createElement(c.a,{title:this.state.copied||"Copy"},a.a.createElement(l.a,{type:"copy",style:{cursor:"pointer"},onClick:this.copy}));return a.a.createElement(o.a,p({},this.props,{ref:this.ref,addonAfter:this.copyFeatureSupported&&e}))}}])&&f(n.prototype,r),i&&f(n,i),t}()},,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n.p+"images/redash_icon_small.png"},function(e,t,n){"use strict";n.r(t),n.d(t,"PageHeader",function(){return l}),n.d(t,"default",function(){return u});var r=n(1),a=n.n(r),i=n(0),o=n.n(i),s=n(14);function l(e){var t=e.title;return a.a.createElement("div",{className:"page-header-wrapper row p-l-15 p-r-15 m-b-10 m-l-0 m-r-0"},a.a.createElement("div",{className:"col-sm-9 p-l-0 p-r-0"},a.a.createElement("h3",null,t)))}function u(e){e.component("pageHeader",Object(s.react2angular)(l))}l.propTypes={title:o.a.string.isRequired},u.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return a});var r=n(11);function a(e){return r.$http.get(e).then(function(e){return e.data.tags||[]})}},function(e,t,n){"use strict";n.r(t),n.d(t,"EmptyState",function(){return h}),n.d(t,"default",function(){return b});var r=n(2),a=n(1),i=n.n(a),o=n(0),s=n.n(o),l=n(14),u=n(6),c=n.n(u),d=n(11),p=n(13),f=n(130);n(1154);function m(){d.$uibModal.open({component:"editDashboardDialog",resolve:{dashboard:function(){return{name:null,layout:null}}}})}function g(e){var t=e.show,n=e.completed,r=e.text,a=e.url,o=e.urlText,s=e.onClick;return t?i.a.createElement("li",{className:c()({done:n})},i.a.createElement("a",{href:a||"javascript:void(0)",onClick:s},o)," ",r):null}function h(e){var t=e.icon,n=e.title,a=e.description,o=e.illustration,s=e.helpLink,l=e.onboardingMode,u={dataSource:!0,query:!0,alert:e.showAlertStep,dashboard:e.showDashboardStep,inviteUsers:e.showInviteStep},c={dataSource:f.default.objectCounters.data_sources>0,query:f.default.objectCounters.queries>0,alert:f.default.objectCounters.alerts>0,dashboard:f.default.objectCounters.dashboards>0,inviteUsers:f.default.objectCounters.users>1};return!l||Object(r.some)(Object(r.keys)(u),function(e){return u[e]&&!c[e]})?i.a.createElement("div",{className:"empty-state bg-white tiled"},i.a.createElement("div",{className:"empty-state__summary"},n&&i.a.createElement("h4",null,n),i.a.createElement("h2",null,i.a.createElement("i",{className:t})),i.a.createElement("p",null,a),i.a.createElement("img",{src:"/static/images/illustrations/"+o+".svg",alt:o+" Illustration",width:"75%"})),i.a.createElement("div",{className:"empty-state__steps"},i.a.createElement("h4",null,"Let's get started"),i.a.createElement("ol",null,p.currentUser.isAdmin&&i.a.createElement(g,{show:u.dataSource,completed:c.dataSource,url:"data_sources/new",urlText:"Connect",text:"a Data Source"}),!p.currentUser.isAdmin&&i.a.createElement(g,{show:u.dataSource,completed:c.dataSource,text:"Ask an account admin to connect a data source"}),i.a.createElement(g,{show:u.query,completed:c.query,url:"queries/new",urlText:"Create",text:"your first Query"}),i.a.createElement(g,{show:u.alert,completed:c.alert,url:"alerts/new",urlText:"Create",text:"your first Alert"}),i.a.createElement(g,{show:u.dashboard,completed:c.dashboard,onClick:m,urlText:"Create",text:"your first Dashboard"}),i.a.createElement(g,{show:u.inviteUsers,completed:c.inviteUsers,url:"users/new",urlText:"Invite",text:"your team members"})),i.a.createElement("p",null,"Need more support?"," ",i.a.createElement("a",{href:s,target:"_blank",rel:"noopener noreferrer"},"See our Help",i.a.createElement("i",{className:"fa fa-external-link m-l-5","aria-hidden":"true"}))))):null}function b(e){e.component("emptyState",Object(l.react2angular)(h))}g.propTypes={show:s.a.bool.isRequired,completed:s.a.bool.isRequired,text:s.a.string.isRequired,url:s.a.string,urlText:s.a.string,onClick:s.a.func},g.defaultProps={url:null,urlText:null,onClick:null},h.propTypes={icon:s.a.string,title:s.a.string,description:s.a.string.isRequired,illustration:s.a.string.isRequired,helpLink:s.a.string.isRequired,onboardingMode:s.a.bool,showAlertStep:s.a.bool,showDashboardStep:s.a.bool,showInviteStep:s.a.bool},h.defaultProps={icon:null,title:null,onboardingMode:!1,showAlertStep:!1,showDashboardStep:!1,showInviteStep:!1},b.init=!0},,,function(e,t,n){"use strict";n.r(t),n.d(t,"compile",function(){return l}),n.d(t,"parse",function(){return u}),n.d(t,"default",function(){return c});n(270);var r=n(2);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s="-";function l(e,t){return e?t?s+e:e:null}function u(e){var t=(e=Object(r.isString)(e)?e:"").startsWith(s);return t&&(e=e.substring(1)),{field:""!==e?e:null,reverse:t}}var c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.orderByField,r=t.orderByReverse;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"field",null),o(this,"reverse",!1),this.setField(n),this.setReverse(r)}return i(e,[{key:"setField",value:function(e){this.field=Object(r.isString)(e)&&""!==e?e:null}},{key:"setReverse",value:function(e){this.reverse=!!e}},{key:"compiled",get:function(){return l(this.field,this.reverse)},set:function(e){var t=u(e),n=t.field,r=t.reverse;this.field=n,this.reverse=r}}]),i(e,[{key:"toggleField",value:function(e){Object(r.isString)(e)&&""!==e&&(e===this.field?this.reverse=!this.reverse:(this.field=e,this.reverse=!1))}},{key:"sort",value:function(e){if(this.field)return e=Object(r.sortBy)(e,this.field),this.reverse&&e.reverse(),e}}]),e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return u});var r=n(1),a=n.n(r),i=n(0),o=n.n(i),s=n(44),l=n.n(s);function u(e){var t=e.isSelected,n=e.isStaged,r=e.alreadyInGroup;return n?a.a.createElement("i",{className:"fa fa-remove"}):r?a.a.createElement(l.a,{title:"Already in this group"},a.a.createElement("i",{className:"fa fa-check"})):t?a.a.createElement("i",{className:"fa fa-check"}):a.a.createElement("i",{className:"fa fa-angle-double-right"})}u.propTypes={isSelected:o.a.bool,isStaged:o.a.bool,alreadyInGroup:o.a.bool},u.defaultProps={isSelected:!1,isStaged:!1,alreadyInGroup:!1}},function(e,t,n){"use strict";n.r(t),n.d(t,"SCHEMA_NOT_SUPPORTED",function(){return r}),n.d(t,"SCHEMA_LOAD_ERROR",function(){return a}),n.d(t,"DataSource",function(){return i}),n.d(t,"default",function(){return s}),o.$inject=["$q","$resource","$http"];var r=1,a=2,i=null;function o(e,t,n){var r=t("api/data_sources/:id",{id:"@id"},{get:{method:"GET",cache:!1,isArray:!1},query:{method:"GET",cache:!1,isArray:!0},test:{method:"POST",cache:!1,isArray:!1,url:"api/data_sources/:id/test"}});return r.prototype.getSchema=function(){var t=this,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return void 0===this._schema||r?function(e){var t={};return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(t.refresh=!0),n.get("api/data_sources/".concat(e,"/schema"),{params:t})}(this.id,r).then(function(e){var n=e.data;return t._schema=n,n}):e.resolve(this._schema)},r}function s(e){e.factory("DataSource",o),e.run(["$injector",function(e){i=e.get("DataSource")}])}s.init=!0},function(e,t,n){"use strict";n.r(t);n(67),n(115),n(21),n(22),n(98),n(66),n(19),n(1127),n(117),n(31),n(57),n(18);var r=n(2);function a(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t.default={getFields:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e){Object(r.each)(e.properties,function(t,n){"password"!==n&&"passwd"!==n||(t.type="password"),n.endsWith("File")&&(t.type="file"),"boolean"===t.type&&(t.type="checkbox"),"string"===t.type&&(t.type="text"),t.required=Object(r.includes)(e.required,n)}),e.order=e.order||[]}(e),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0===Object.keys(t).length){var n=e.properties;Object.keys(n).forEach(function(e){Object(r.isUndefined)(n[e].default)||"checkbox"!==n[e].type||(t[e]=n[e].default)})}}(e,t.options),[{name:"name",title:"Name",type:"text",required:!0,initialValue:t.name}].concat(a(function(e,t,n){var r=new Array(t.length);return Object.keys(e).forEach(function(a){var i=t.indexOf(a),o={name:a,title:e[a].title,type:e[a].type,placeholder:e[a].default&&e[a].default.toString(),required:e[a].required,initialValue:n[a]};i>-1?r[i]=o:r.push(o)}),r}(e.properties,e.order,t.options)))},updateTargetWithValues:function(e,t){e.name=t.name,Object.keys(t).forEach(function(n){"name"!==n&&(e.options[n]=t[n])})},toHuman:function(e){return e.replace(/_/g," ").replace(/(?:^|\s)\S/g,function(e){return e.toUpperCase()})},getBase64:function(e){return new Promise(function(t,n){var r=new FileReader;r.readAsDataURL(e),r.onload=function(){return t(r.result.substr(r.result.indexOf(",")+1))},r.onerror=function(e){return n(e)}})}}},function(e,t,n){"use strict";n.r(t),n.d(t,"Dashboard",function(){return i}),n.d(t,"default",function(){return l});n(31),n(19),n(97),n(18);var r=n(2),a=n.n(r);s.$inject=["$resource","$http","$location","currentUser","Widget","dashboardGridOptions"];var i=null;function o(e){var t=Math.max(a.a.chain(e).map(function(e){return e.options.position.sizeY}).max().value(),20)+5;return a.a.chain(e).sortBy(function(e){return e.options.position.row}).groupBy(function(e){return e.options.position.row}).reduce(function(e,n){var r=1;return a.a.each(n,function(n){r=Math.max(r,n.options.position.autoHeight?t:n.options.position.sizeY),n.options.position.row=e,n.options.position.sizeY<1&&(n.options.position.sizeY=t)}),e+r},0).value(),e=a.a.sortBy(e,function(e){return e.options.position.col}),e=a.a.sortBy(e,function(e){return e.options.position.row})}function s(e,t,n,r,i,s){function l(e){return o(a.a.map(e,function(e){return new i(e)}))}function u(e){e.widgets&&(e.widgets=l(e.widgets)),e.publicAccessEnabled=void 0!==e.public_url}var c=t.defaults.transformResponse.concat(function(e){return e.results?e.results.forEach(u):u(e),e}),d=e("api/dashboards/:slug",{slug:"@slug"},{get:{method:"GET",transformResponse:c},save:{method:"POST",transformResponse:c},query:{method:"GET",isArray:!1,transformResponse:c},recent:{method:"get",isArray:!0,url:"api/dashboards/recent",transformResponse:c},favorites:{method:"get",isArray:!1,url:"api/dashboards/favorites"},favorite:{method:"post",isArray:!1,url:"api/dashboards/:slug/favorite",transformRequest:[function(){return""}]},unfavorite:{method:"delete",isArray:!1,url:"api/dashboards/:slug/favorite",transformRequest:[function(){return""}]}});return d.prototype.canEdit=function(){return r.canEdit(this)||this.can_edit},d.prototype.calculateNewWidgetPosition=function(e){var t=a.a.extend({sizeX:s.defaultSizeX},a.a.extend({},e.options).position).sizeX,n=a.a.chain(this.widgets).map(function(e){var t=a.a.extend({},e.options),n=a.a.extend({row:0,sizeY:0},t.position);return{left:n.col,top:n.row,right:n.col+n.sizeX,bottom:n.row+n.sizeY,width:n.sizeX,height:n.sizeY}}).reduce(function(e,t){for(var n=Math.max(t.left,0),r=Math.min(t.right,e.length+1),a=n;a<r;a+=1)e[a]=Math.max(e[a],t.bottom);return e},a.a.map(new Array(s.columns),a.a.constant(0))).value();return a.a.chain(a.a.range(0,s.columns-t+1)).map(function(e){return{col:e,row:a.a.chain(n).slice(e,e+t).max().value()}}).sortBy("row").first().value()},d.prepareDashboardWidgets=l,d.prepareWidgetsForDashboard=o,d.prototype.getParametersDefs=function(){var e={},t=n.search();return a.a.each(this.widgets,function(t){if(t.getQuery()){var n=t.getParameterMappings();t.getQuery().getParametersDefs().forEach(function(t){var r=n[t.name];r.type===i.MappingType.DashboardLevel&&(e[r.mapTo]||(e[r.mapTo]=t.clone(),e[r.mapTo].name=r.mapTo,e[r.mapTo].title=r.title||t.title,e[r.mapTo].locals=[]),e[r.mapTo].locals.push(t))})}}),a.a.values(a.a.each(e,function(e){e.fromUrlParams(t)}))},d}function l(e){e.factory("Dashboard",s),e.run(["$injector",function(e){i=e.get("Dashboard")}])}l.init=!0},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"registerComponent",function(){return b}),n.d(t,"unregisterComponent",function(){return y}),n.d(t,"default",function(){return v});n(21),n(22),n(57),n(29),n(19),n(187),n(18),n(31),n(67),n(317);var r=n(2),a=n(1),i=n.n(a),o=n(0),s=n.n(o);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=new Map,h=new Set;function b(e,t){Object(r.isString)(e)&&""!==e&&(g.set(e,Object(r.isFunction)(t)?t:null),h.forEach(function(t){t.props.name===e&&t.forceUpdate()}))}function y(e){b(e,null)}var v=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),d(this,p(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,i.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){h.add(this)}},{key:"componentWillUnmount",value:function(){h.delete(this)}},{key:"render",value:function(){var e=this.props,t=e.name,n=e.children,r=u(e,["name","children"]),a=g.get(t);return a?i.a.createElement(a,r,n):null}}])&&c(n.prototype,r),a&&c(n,a),t}();m(v,"propTypes",{name:s.a.string.isRequired,children:s.a.node}),m(v,"defaultProps",{children:null})},function(e,t,n){"use strict";n.r(t);n(31),n(57),n(21),n(22),n(18),n(35),n(19);var r=n(2),a=n(1),i=n.n(a),o=n(0),s=n.n(o),l=n(43),u=n.n(l),c=n(42),d=n.n(c),p=n(160),f=n.n(p),m=n(25),g=n.n(m),h=n(38),b=n.n(h),y=n(40),v=n.n(y),w=n(167),O=n.n(w),x=n(34),S=n(221),j=n(47);function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){P(e,t,n[t])})}return e}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var q=b.a.Option,C={labelCol:{span:6},wrapperCol:{span:16}};function T(e){return Object(r.capitalize)(Object(r.words)(e).join(" "))}function $(e){return/-range/.test(e)}function R(e){var t=e.name,n=e.type,a=e.onChange,o=e.existingNames,s=e.setValidation,l="",u="";return t?Object(r.includes)(o,t)?(l="Parameter with this name already exists",s(!1),u="error"):($(n)&&(l=i.a.createElement(i.a.Fragment,null,"Appears in query as "," ",i.a.createElement("code",{style:{display:"inline-block",color:"inherit"}},"{{".concat(t,".start}} {{").concat(t,".end}}")))),s(!0)):(l="Choose a keyword for this parameter",s(!1)),i.a.createElement(d.a.Item,_({required:!0,label:"Keyword",help:l,validateStatus:u},C),i.a.createElement(v.a,{onChange:function(e){return a(e.target.value)},autoFocus:!0}))}function z(e){var t,n=k(Object(a.useState)(Object(r.clone)(e.parameter)),2),o=n[0],s=n[1],l=k(Object(a.useState)(!0),2),c=l[0],p=l[1],m=k(Object(a.useState)(),2),h=m[0],y=m[1],w=!e.parameter.name;return Object(a.useEffect)(function(){var t=e.parameter.queryId;t&&j.Query.get({id:t},function(e){y(e)})},[]),i.a.createElement(u.a,_({},e.dialog.props,{title:w?"Add Parameter":o.name,width:600,footer:[i.a.createElement(g.a,{key:"cancel",onClick:e.dialog.dismiss},"Cancel"),i.a.createElement(g.a,{key:"submit",htmlType:"submit",disabled:!(c&&""!==o.title&&("query"!==o.type||o.queryId)),type:"primary",form:"paramForm"},w?"Add Parameter":"OK")]}),i.a.createElement(d.a,{layout:"horizontal",onSubmit:function(t){o.title||(o.title=T(o.name),s(o)),e.dialog.close(o),t.preventDefault()},id:"paramForm"},w&&i.a.createElement(R,{name:o.name,onChange:function(e){return s(E({},o,{name:e}))},setValidation:p,existingNames:e.existingParams,type:o.type}),i.a.createElement(d.a.Item,_({label:"Title"},C),i.a.createElement(v.a,{value:Object(r.isNull)(o.title)?T(o.name):o.title,onChange:function(e){return s(E({},o,{title:e.target.value}))}})),i.a.createElement(d.a.Item,_({label:"Type"},C),i.a.createElement(b.a,{value:o.type,onChange:function(e){return s(E({},o,{type:e}))}},i.a.createElement(q,{value:"text"},"Text"),i.a.createElement(q,{value:"number"},"Number"),i.a.createElement(q,{value:"enum"},"Dropdown List"),i.a.createElement(q,{value:"query"},"Query Based Dropdown List"),i.a.createElement(q,{disabled:!0,key:"dv1"},i.a.createElement(O.a,{className:"select-option-divider"})),i.a.createElement(q,{value:"date"},"Date"),i.a.createElement(q,{value:"datetime-local"},"Date and Time"),i.a.createElement(q,{value:"datetime-with-seconds"},"Date and Time (with seconds)"),i.a.createElement(q,{disabled:!0,key:"dv2"},i.a.createElement(O.a,{className:"select-option-divider"})),i.a.createElement(q,{value:"date-range"},"Date Range"),i.a.createElement(q,{value:"datetime-range"},"Date and Time Range"),i.a.createElement(q,{value:"datetime-range-with-seconds"},"Date and Time Range (with seconds)"))),(t=o.type,Object(r.startsWith)(t,"date")&&!$(t)&&i.a.createElement(d.a.Item,_({label:" ",colon:!1},C),i.a.createElement(f.a,{defaultChecked:o.useCurrentDateTime,onChange:function(e){return s(E({},o,{useCurrentDateTime:e.target.checked}))}},"Default to Today/Now if no other value is set"))),"enum"===o.type&&i.a.createElement(d.a.Item,_({label:"Values",help:"Dropdown list values (newline delimeted)"},C),i.a.createElement(v.a.TextArea,{rows:3,value:o.enumOptions,onChange:function(e){return s(E({},o,{enumOptions:e.target.value}))}})),"query"===o.type&&i.a.createElement(d.a.Item,_({label:"Query",help:"Select query to load dropdown values from"},C),i.a.createElement(S.QuerySelector,{selectedQuery:h,onChange:function(e){return s(E({},o,{queryId:e&&e.id}))},type:"select"}))))}R.propTypes={name:s.a.string.isRequired,onChange:s.a.func.isRequired,existingNames:s.a.arrayOf(s.a.string).isRequired,setValidation:s.a.func.isRequired,type:s.a.string.isRequired},z.propTypes={parameter:s.a.object.isRequired,dialog:x.DialogPropType.isRequired,existingParams:s.a.arrayOf(s.a.string)},z.defaultProps={existingParams:[]},t.default=Object(x.wrap)(z)},function(e,t,n){"use strict";n.r(t),n.d(t,"QuerySelector",function(){return k}),n.d(t,"default",function(){return _});n(18),n(67),n(115),n(519),n(19),n(98),n(21),n(22),n(29);var r=n(1),a=n.n(r),i=n(0),o=n.n(i),s=n(6),l=n.n(s),u=n(14),c=n(2),d=n(40),p=n.n(d),f=n(38),m=n.n(f),g=n(47),h=n(11),b=n(120);function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}var j=200,E=m.a.Option,P=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),w(this,O(t).call(this,"stale search"))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(t,S(Error)),t}();function k(e){var t=y(Object(r.useState)(),2),n=t[0],i=t[1],o=y(Object(r.useState)(),2),s=o[0],u=o[1],d=y(Object(r.useState)([]),2),f=d[0],v=d[1],w=y(Object(r.useState)(),2),O=w[0],x=w[1],S=!1,k=Object(c.debounce)(function(e){u(!0),function(e){return e?g.Query.query({q:e}).$promise.then(function(e){var t=e.results;return Promise.resolve(t)}):g.Query.recent().$promise.then(function(e){var t=e.filter(function(e){return!e.is_draft});return Promise.resolve(t)})}(e).then(T).then(function(e){v(e),u(!1)}).catch(function(e){e instanceof P||u(!1)})},j),_="Search a query by name",q=a.a.createElement("i",{className:"fa fa-times",onClick:function(){return $(null)}}),C=a.a.createElement("i",{className:l()("fa fa-spinner fa-pulse",{hidden:!s})});function T(e){return S?Promise.reject(new P):Promise.resolve(e)}function $(t){var n=null;t&&((n=Object(c.find)(f,{id:t}))||h.toastr.error("Something went wrong... Couldn't select query")),i(n?null:""),x(n),e.onChange(n)}if(Object(r.useEffect)(function(){e.selectedQuery&&x(e.selectedQuery)},[e.selectedQuery]),Object(r.useEffect)(function(){return null===n?(v(null),function(){}):(k(n),function(){k.cancel(),S=!0})},[n]),e.disabled)return a.a.createElement(p.a,{value:O&&O.name,placeholder:_,disabled:!0});if("select"===e.type){var R=O?q:null,z=O?O.name:n;return a.a.createElement(m.a,{showSearch:!0,dropdownMatchSelectWidth:!1,placeholder:_,value:z||void 0,onSearch:i,onChange:$,suffixIcon:s?C:R,notFoundContent:null,filterOption:!1,defaultActiveFirstOption:!1},f&&f.map(function(e){var t=e.is_draft;return a.a.createElement(E,{value:e.id,key:e.id,disabled:t},e.name," ",a.a.createElement(b.QueryTagsControl,{isDraft:e.is_draft,tags:e.tags,className:l()("inline-tags-control",{disabled:t})}))}))}return a.a.createElement(a.a.Fragment,null,O?a.a.createElement(p.a,{value:O.name,suffix:q,readOnly:!0}):a.a.createElement(p.a,{placeholder:_,value:n,onChange:function(e){return i(e.target.value)},suffix:C}),a.a.createElement("div",{className:"scrollbox",style:{maxHeight:"50vh",marginTop:15}},f&&(f.length?a.a.createElement("div",{className:"list-group"},f.map(function(e){return a.a.createElement("a",{href:"javascript:void(0)",className:l()("list-group-item",{inactive:e.is_draft}),key:e.id,onClick:function(){return $(e.id)}},e.name," ",a.a.createElement(b.QueryTagsControl,{isDraft:e.is_draft,tags:e.tags,className:"inline-tags-control"}))})):a.a.createElement("div",{className:"text-muted"},"No results matching search term."))))}function _(e){e.component("querySelector",Object(u.react2angular)(k))}k.propTypes={onChange:o.a.func.isRequired,selectedQuery:o.a.object,type:o.a.oneOf(["select","default"]),disabled:o.a.bool},k.defaultProps={selectedQuery:null,type:"default",disabled:!1},_.init=!0},,function(e,t,n){"use strict";n.r(t),n.d(t,"HelpTrigger",function(){return k}),n.d(t,"default",function(){return _});n(21),n(22),n(29),n(18),n(31),n(57);var r=n(14),a=n(1),i=n.n(a),o=n(0),s=n.n(o),l=n(6),u=n.n(l),c=n(44),d=n.n(c),p=n(639),f=n.n(p),m=n(60),g=n(219);n(1040);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S="https://redash.io",j="/help",E=2e4,P={HOME:["","Help"],VALUE_SOURCE_OPTIONS:["/user-guide/querying/query-parameters#Value-Source-Options","Guide: Value Source Options"],SHARE_DASHBOARD:["/user-guide/dashboards/sharing-dashboards","Guide: Sharing and Embedding Dashboards"]},k=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=v(t).call(this,e),n=!a||"object"!==h(a)&&"function"!=typeof a?w(r):a,x(w(n),"iframeRef",null),x(w(n),"iframeLoadingTimeout",null),x(w(n),"state",{visible:!1,loading:!1,error:!1}),x(w(n),"loadIframe",function(e){clearTimeout(n.iframeLoadingTimeout),n.setState({loading:!0,error:!1}),n.iframeRef.current.src=e,n.iframeLoadingTimeout=setTimeout(function(){n.setState({error:e,loading:!1})},E)}),x(w(n),"onIframeLoaded",function(){n.setState({loading:!1}),clearTimeout(n.iframeLoadingTimeout)}),x(w(n),"openDrawer",function(){n.setState({visible:!0});var e=b(P[n.props.type],1)[0],t=S+j+e;setTimeout(function(){return n.loadIframe(t)},300)}),x(w(n),"closeDrawer",function(){n.setState({visible:!1})}),n.iframeRef=i.a.createRef(),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,i.a.Component),n=t,(r=[{key:"componentWillUnmount",value:function(){clearTimeout(this.iframeLoadingTimeout)}},{key:"render",value:function(){var e=b(P[this.props.type],2)[1],t=u()("help-trigger",this.props.className);return i.a.createElement(i.a.Fragment,null,i.a.createElement(d.a,{title:e},i.a.createElement("a",{href:"javascript: void(0)",onClick:this.openDrawer,className:t},i.a.createElement("i",{className:"fa fa-question-circle"}))),i.a.createElement(f.a,{placement:"right",onClose:this.closeDrawer,visible:this.state.visible,className:"help-drawer",destroyOnClose:!0,width:400},i.a.createElement("div",{className:"drawer-wrapper"},!this.state.error&&i.a.createElement("iframe",{ref:this.iframeRef,title:"Redash Help",src:"about:blank",className:u()({ready:!this.state.loading}),onLoad:this.onIframeLoaded}),this.state.loading&&i.a.createElement(m.BigMessage,{icon:"fa-spinner fa-2x fa-pulse",message:"Loading...",className:"help-message"}),this.state.error&&i.a.createElement(m.BigMessage,{icon:"fa-exclamation-circle",className:"help-message"},"Something went wrong.",i.a.createElement("br",null),i.a.createElement("a",{href:this.state.error,target:"_blank",rel:"noopener"},"Click here")," ","to open the page in a new window.")),i.a.createElement(g.default,{name:"HelpDrawerExtraContent",onLeave:this.closeDrawer,openPageUrl:this.loadIframe})))}}])&&y(n.prototype,r),a&&y(n,a),t}();function _(e){e.component("helpTrigger",Object(r.react2angular)(k))}x(k,"propTypes",{type:s.a.oneOf(Object.keys(P)).isRequired,className:s.a.string}),x(k,"defaultProps",{className:null}),_.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"NoTaggedObjectsFound",function(){return c}),n.d(t,"default",function(){return d});n(18),n(31),n(187),n(67),n(115);var r=n(1),a=n.n(r),i=n(0),o=n.n(i),s=n(14),l=n(60),u=n(120);function c(e){var t=e.objectType,n=e.tags;return a.a.createElement(l.BigMessage,{icon:"fa-tags"},"No ",t," found tagged with",a.a.createElement(u.TagsControl,{className:"inline-tags-control",tags:Array.from(n)}),".")}function d(e){e.component("noTaggedObjectsFound",Object(s.react2angular)(c))}c.propTypes={objectType:o.a.string.isRequired,tags:o.a.oneOfType([o.a.array,o.a.objectOf(Set)]).isRequired},d.init=!0},function(e,t,n){"use strict";n.r(t);n(35),n(67),n(115),n(117),n(21),n(22),n(18),n(29),n(97),n(98);var r=n(2),a=n(1),i=n.n(a),o=n(0),s=n.n(o),l=n(6),u=n.n(l),c=n(43),d=n.n(c),p=n(40),f=n.n(p),m=n(299),g=n.n(m),h=n(34),b=n(60),y=n(59),v=n(11);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function x(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=function(e){function t(){var e,n,a,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return a=this,i=(e=j(t)).call.apply(e,[this].concat(s)),n=!i||"object"!==w(i)&&"function"!=typeof i?E(a):i,k(E(n),"state",{searchTerm:"",loading:!1,items:[],selected:[],saveInProgress:!1}),k(E(n),"loadItems",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";n.setState({searchTerm:e,loading:!0},function(){n.props.searchItems(e).then(function(t){n.state.searchTerm===e&&n.setState({items:t,loading:!1})}).catch(function(){n.state.searchTerm===e&&n.setState({items:[],loading:!1})})})}),k(E(n),"search",Object(r.debounce)(n.loadItems,200)),n}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,i.a.Component),n=t,(a=[{key:"componentDidMount",value:function(){this.loadItems()}},{key:"isSelected",value:function(e){var t=this,n=this.props.itemKey(e);return!!Object(r.find)(this.state.selected,function(e){return t.props.itemKey(e)===n})}},{key:"toggleItem",value:function(e){var t=this;if(this.isSelected(e)){var n=this.props.itemKey(e);this.setState(function(e){var a=e.selected;return{selected:Object(r.filter)(a,function(e){return t.props.itemKey(e)!==n})}})}else this.setState(function(t){var n=t.selected;return{selected:[].concat(x(n),[e])}})}},{key:"save",value:function(){var e=this;this.setState({saveInProgress:!0},function(){var t=e.state.selected;Promise.resolve(e.props.save(t)).then(function(){e.props.dialog.close(t)}).catch(function(){e.setState({saveInProgress:!1}),v.toastr.error("Failed to save some of selected items.")})})}},{key:"renderItem",value:function(e,t){var n=this,r=this.props,a=r.renderItem,o=r.renderStagedItem,s=this.isSelected(e),l=(t&&o||a)(e,{isSelected:s}),c=l.content,d=l.className,p=l.isDisabled;return i.a.createElement(g.a.Item,{className:u()("p-l-10","p-r-10",{clickable:!p,disabled:p},d),onClick:p?null:function(){return n.toggleItem(e)}},c)}},{key:"render",value:function(){var e=this,t=this.props,n=t.dialog,r=t.dialogTitle,a=t.inputPlaceholder,o=t.selectedItemsTitle,s=this.state,l=s.loading,u=s.saveInProgress,c=s.items,p=s.selected,m=c.length>0;return i.a.createElement(d.a,O({},n.props,{width:"80%",title:r,okText:"Save",okButtonProps:{loading:u,disabled:0===p.length},onOk:function(){return e.save()}}),i.a.createElement("div",{className:"d-flex align-items-center m-b-10"},i.a.createElement("div",{className:"w-50 m-r-10"},i.a.createElement(f.a.Search,{defaultValue:this.state.searchTerm,onChange:function(t){return e.search(t.target.value)},placeholder:a,autoFocus:!0})),i.a.createElement("div",{className:"w-50 m-l-10"},i.a.createElement("h5",{className:"m-0"},o))),i.a.createElement("div",{className:"d-flex align-items-stretch",style:{minHeight:"30vh",maxHeight:"50vh"}},i.a.createElement("div",{className:"w-50 m-r-10 scrollbox"},l&&i.a.createElement(y.default,{className:""}),!l&&!m&&i.a.createElement(b.BigMessage,{icon:"fa-search",message:"No items match your search.",className:""}),!l&&m&&i.a.createElement(g.a,{size:"small",dataSource:c,renderItem:function(t){return e.renderItem(t,!1)}})),i.a.createElement("div",{className:"w-50 m-l-10 scrollbox"},p.length>0&&i.a.createElement(g.a,{size:"small",dataSource:p,renderItem:function(t){return e.renderItem(t,!0)}}))))}}])&&S(n.prototype,a),o&&S(n,o),t}();k(_,"propTypes",{dialog:h.DialogPropType.isRequired,dialogTitle:s.a.string,inputPlaceholder:s.a.string,selectedItemsTitle:s.a.string,searchItems:s.a.func.isRequired,itemKey:s.a.func,renderItem:s.a.func,renderStagedItem:s.a.func,save:s.a.func}),k(_,"defaultProps",{dialogTitle:"Add Items",inputPlaceholder:"Search...",selectedItemsTitle:"Selected items",itemKey:function(e){return e.id},renderItem:function(){return""},renderStagedItem:null,save:function(e){return e}}),t.default=Object(h.wrap)(_)},function(e,t,n){"use strict";n.r(t),n.d(t,"DynamicForm",function(){return I}),n.d(t,"default",function(){return M});n(21),n(22),n(35),n(31),n(57),n(29),n(18),n(19);var r,a,i=n(1),o=n.n(i),s=n(0),l=n.n(s),u=n(42),c=n.n(u),d=n(40),p=n.n(d),f=n(294),m=n.n(f),g=n(160),h=n.n(g),b=n(25),y=n.n(b),v=n(654),w=n.n(v),O=n(30),x=n.n(O),S=n(2),j=n(14),E=n(11),P=n(36),k=n(171);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function C(){return(C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){A(e,t,n[t])})}return e}function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var N=function(e){var t=e.type,n=e.required,r=e.minLength;return[n&&{required:n,message:"This field is required."},r&&Object(S.includes)(["text","email","password"],t)&&{min:r,message:"This field is too short."},"email"===t&&{type:"email",message:"This field must be a valid email."}].filter(function(e){return e})},I=c.a.create()((a=r=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=R(t).call(this,e),n=!a||"object"!==_(a)&&"function"!=typeof a?z(r):a,A(z(n),"setActionInProgress",function(e,t){n.setState(function(n){return{inProgressActions:T({},n.inProgressActions,A({},e,t))}})}),A(z(n),"handleSubmit",function(e){n.setState({isSubmitting:!0}),e.preventDefault(),n.props.form.validateFieldsAndScroll(function(e,t){e?n.setState({isSubmitting:!1}):n.props.onSubmit(t,function(e){var t=n.props.form,r=t.setFieldsValue,a=t.getFieldsValue;n.setState({isSubmitting:!1}),r(a()),E.toastr.success(e)},function(e){n.setState({isSubmitting:!1}),E.toastr.error(e)})})}),A(z(n),"handleAction",function(e){var t=e.target.dataset.action;n.setActionInProgress(t,!0),n.actionCallbacks[t](function(){n.setActionInProgress(t,!1)})}),A(z(n),"base64File",function(e,t){t&&t.fileList[0]&&k.default.getBase64(t.file).then(function(t){n.props.form.setFieldsValue(A({},e,t))})}),n.state={isSubmitting:!1,inProgressActions:[]},n.actionCallbacks=n.props.actions.reduce(function(e,t){return T({},e,A({},t.name,t.callback))},null),e.actions.forEach(function(e){n.state.inProgressActions[e.name]=!1}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(t,o.a.Component),n=t,(r=[{key:"renderUpload",value:function(e,t){var n=this.props.form,r=n.getFieldDecorator,a=n.getFieldValue,i=e.name,s=e.initialValue,l={rules:N(e),initialValue:s,getValueFromEvent:this.base64File.bind(this,i)},u=void 0!==a(i)&&a(i)!==s,c=o.a.createElement(w.a,C({},t,{beforeUpload:function(){return!1}}),o.a.createElement(y.a,{disabled:u},o.a.createElement(x.a,{type:"upload"})," Click to upload"));return r(i,l)(c)}},{key:"renderField",value:function(e,t){var n=this.props.form.getFieldDecorator,r=e.name,a=e.type,i=e.initialValue,s=e.title||k.default.toHuman(r),l={rules:N(e),valuePropName:"checkbox"===a?"checked":"value",initialValue:i};return"checkbox"===a?n(r,l)(o.a.createElement(h.a,t,s)):"file"===a?this.renderUpload(e,t):"number"===a?n(r,l)(o.a.createElement(m.a,t)):n(r,l)(o.a.createElement(p.a,t))}},{key:"renderFields",value:function(){var e=this;return this.props.fields.map(function(t){var n=q(e.props.fields,1)[0],r=c.a.Item,a=t.name,i=t.title,s=t.type,l=t.readOnly,u=i||k.default.toHuman(a),d=e.props.feedbackIcons,p={key:a,className:"m-b-10",hasFeedback:"checkbox"!==s&&"file"!==s&&d,label:"checkbox"===s?"":u},f=T({},t.props,{autoFocus:n===t,className:"w-100",name:a,type:s,readOnly:l,placeholder:t.placeholder,"data-test":u});return o.a.createElement(r,p,e.renderField(t,f))})}},{key:"renderActions",value:function(){var e=this;return this.props.actions.map(function(t){var n=e.state.inProgressActions[t.name],r=e.props.form.isFieldsTouched,a={key:t.name,htmlType:"button",className:t.pullRight?"pull-right m-t-10":"m-t-10",type:t.type,disabled:r()&&t.disableWhenDirty,loading:n,onClick:e.handleAction};return o.a.createElement(y.a,C({},a,{"data-action":t.name}),t.name)})}},{key:"render",value:function(){var e={type:"primary",htmlType:"submit",className:"w-100",disabled:this.state.isSubmitting,loading:this.state.isSubmitting},t=this.props,n=t.hideSubmitButton,r=t.saveText,a=!n;return o.a.createElement(c.a,{layout:"vertical",onSubmit:this.handleSubmit},this.renderFields(),a&&o.a.createElement(y.a,e,r),this.renderActions())}}])&&$(n.prototype,r),a&&$(n,a),t}(),A(r,"propTypes",{fields:l.a.arrayOf(P.Field),actions:l.a.arrayOf(P.Action),feedbackIcons:l.a.bool,hideSubmitButton:l.a.bool,saveText:l.a.string,onSubmit:l.a.func,form:P.AntdForm.isRequired}),A(r,"defaultProps",{fields:[],actions:[],feedbackIcons:!1,hideSubmitButton:!1,saveText:"Save",onSubmit:function(){}}),a));function M(e){e.component("dynamicForm",Object(j.react2angular)(function(e){var t={fields:k.default.getFields(e.type.configuration_schema,e.target),actions:e.target.id?e.actions:[],feedbackIcons:!0,onSubmit:function(t,n,r){k.default.updateTargetWithValues(e.target,t),e.target.$save(function(){n("Saved.")},function(e){400===e.status&&"message"in e.data?r(e.data.message):r("Failed saving.")})}};return o.a.createElement(I,t)},["target","type","actions"]))}M.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return b});n(35),n(18),n(31),n(57);var r=n(2),a=n(1),i=n.n(a),o=n(0),s=n.n(o),l=n(25),u=n.n(l),c=n(43),d=n.n(c),p=n(44),f=n.n(p),m=n(11);function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function h(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function b(e){var t=e.group,n=e.title,a=e.onClick,o=e.children,s=h(e,["group","title","onClick","children"]);if(!t)return null;var l=i.a.createElement(u.a,g({},s,{type:"danger",onClick:function(e){return function(e,t,n){d.a.confirm({title:"Delete Group",content:"Are you sure you want to delete this group?",okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){t.$delete(function(){m.toastr.success("Group deleted successfully."),n()})}})}(0,t,a)}}),o);return Object(r.isString)(n)&&""!==n?i.a.createElement(f.a,{placement:"top",title:n,mouseLeaveDelay:0},l):l}b.propTypes={group:s.a.object,title:s.a.string,onClick:s.a.func,children:s.a.node},b.defaultProps={group:null,title:null,onClick:function(){},children:null}},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return g});var r=n(1),a=n.n(r),i=n(0),o=n.n(i),s=n(25),l=n.n(s),u=n(167),c=n.n(u),d=n(52),p=n(48),f=n(227),m=n(13);function g(e){var t=e.controller,n=e.group,r=e.items,i=e.canAddMembers,o=e.onAddMembersClick,s=e.canAddDataSources,u=e.onAddDataSourcesClick,p=e.onGroupDeleted,g=n&&m.currentUser.isAdmin&&"builtin"!==n.type;return a.a.createElement(a.a.Fragment,null,a.a.createElement(d.Menu,{items:r,selected:t.params.currentPage}),a.a.createElement(d.PageSizeSelect,{options:t.pageSizeOptions,value:t.itemsPerPage,onChange:function(e){return t.updatePagination({itemsPerPage:e})}}),i&&a.a.createElement(l.a,{className:"w-100 m-t-5",type:"primary",onClick:o},a.a.createElement("i",{className:"fa fa-plus m-r-5"}),"Add Members"),s&&a.a.createElement(l.a,{className:"w-100 m-t-5",type:"primary",onClick:u},a.a.createElement("i",{className:"fa fa-plus m-r-5"}),"Add Data Sources"),g&&a.a.createElement(a.a.Fragment,null,a.a.createElement(c.a,{dashed:!0,className:"m-t-10 m-b-10"}),a.a.createElement(f.default,{className:"w-100",group:n,onClick:p},"Delete Group")))}g.propTypes={controller:p.ControllerType.isRequired,group:o.a.object,items:o.a.array.isRequired,canAddMembers:o.a.bool,onAddMembersClick:o.a.func,canAddDataSources:o.a.bool,onAddDataSourcesClick:o.a.func,onGroupDeleted:o.a.func},g.defaultProps={group:null,canAddMembers:!1,onAddMembersClick:null,canAddDataSources:!1,onAddDataSourcesClick:null,onGroupDeleted:null}},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return c});n(18),n(31),n(57),n(19);var r=n(1),a=n.n(r),i=n(0),o=n.n(i),s=n(398),l=n(13);function u(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function c(e){var t=e.group,n=e.onChange,r=u(e,["group","onChange"]);if(!t)return null;var i=l.currentUser.isAdmin&&"builtin"!==t.type;return a.a.createElement("h3",r,a.a.createElement(s.EditInPlace,{className:"edit-in-place",isEditable:i,ignoreBlanks:!0,editor:"input",onDone:function(e){return function(e,t,n){e.name=t,e.$save(),n()}(t,e,n)},value:t.name}))}c.propTypes={group:o.a.shape({name:o.a.string.isRequired,$save:o.a.func.isRequired}),onChange:o.a.func},c.defaultProps={group:null,onChange:function(){}}},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return s});n(35);var r=n(1),a=n.n(r),i=n(60);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e){return a.a.createElement("div",{className:"text-center"},a.a.createElement(i.BigMessage,o({icon:"fa-search",message:"Sorry, we couldn't find anything."},e)))}},function(e,t,n){"use strict";n.r(t),n.d(t,"absoluteUrl",function(){return r});n(117);function r(e){var t=new URL(e,window.location);return t.protocol=window.location.protocol,t.host=window.location.host,t.toString()}},,,function(e,t,n){"use strict";n.r(t),n.d(t,"renderDefault",function(){return s}),n.d(t,"renderImage",function(){return l}),n.d(t,"renderLink",function(){return u});n(19),n(66);var r=n(2),a=n(71);function i(e){return e.replace(/^\s+|\s+$/g,"")}function o(e,t,n){return Object(a.b)(e,Object(r.extend)({"@":t[n]},t))}function s(e,t){var n=t[e.name];return Object(r.isFunction)(e.formatFunction)?e.formatFunction(n):n}function l(e,t){var n=i(o(e.imageUrlTemplate,t,e.name)),r=parseInt(o(e.imageWidth,t,e.name),10),a=parseInt(o(e.imageHeight,t,e.name),10),s=i(o(e.imageTitleTemplate,t,e.name)),l=[];return""!==n&&(l.push('<img src="'+n+'"'),isFinite(r)&&r>0&&l.push('width="'+r+'"'),isFinite(a)&&a>0&&l.push('height="'+a+'"'),""!==s&&l.push('title="'+s+'"'),l.push(">")),l.join(" ")}function u(e,t){var n=i(o(e.linkUrlTemplate,t,e.name)),r=i(o(e.linkTitleTemplate,t,e.name)),a=i(o(e.linkTextTemplate,t,e.name)),s=[];return""!==n&&(s.push('<a href="'+n+'"'),""!==r&&s.push('title="'+r+'"'),e.linkOpenInNewTab&&s.push('target="_blank"'),s.push(">"+(""===a?n:a)+"</a>")),s.join(" ")}},function(e,t,n){"use strict";n.r(t),n.d(t,"Alert",function(){return a}),n.d(t,"default",function(){return o});n(35);function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}i.$inject=["$resource","$http"];var a=null;function i(e,t){return e("api/alerts/:id",{id:"@id"},{save:{method:"POST",transformRequest:[function(e){var t=r({},e);return void 0===t.query_id&&(t.query_id=t.query.id,t.destination_id=t.destinations,delete t.query,delete t.destinations),t}].concat(t.defaults.transformRequest)}})}function o(e){e.factory("Alert",i),e.run(["$injector",function(e){a=e.get("Alert")}])}o.init=!0},function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(64),i=n.n(a),o=n(127);function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=i()("redash:notifications"),u=window.Notification||null;u||l("HTML5 notifications are not supported.");var c=Object(r.find)(["hidden","webkitHidden","mozHidden","msHidden"],function(e){return e in document}),d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"getPermissions",value:function(){u&&"default"===u.permission&&u.requestPermission(function(e){u.permission!==e&&(u.permission=e)})}},{key:"showNotification",value:function(e,t){if(u&&!this.pageVisible&&"granted"===u.permission){var n=new u(e,{tag:e+t,body:t,icon:"/images/redash_icon_small.png"});setTimeout(function(){n.close()},3e3),n.onclick=function(){window.focus(),this.close(),Object(o.default)("click","notification")}}}},{key:"pageVisible",get:function(){return!document[c]}}])&&s(t.prototype,n),r&&s(t,r),e}();t.default=new d},function(e,t,n){"use strict";n.r(t),n.d(t,"deleteConfirm",function(){return u}),n.d(t,"logAndToastrError",function(){return c}),n.d(t,"toastrSuccessAndPath",function(){return d}),n.d(t,"default",function(){return f});n(19),n(66);var r=n(2),a=n(64),i=n.n(a),o=n(436),s=n.n(o);p.$inject=["$scope","$route","$routeParams","$http","$location","toastr","currentUser","AlertDialog","DataSource"];var l=i()("redash:http"),u={class:"btn-warning",title:"Delete"};function c(e,t,n){l("Failed to delete "+e+": ",t.status,t.statusText,t.data),n.error("Failed to delete "+e+".")}function d(e,t,n,r){n.success(e+" deleted successfully."),r.path("/"+t+"/")}function p(e,t,n,a,i,o,s,p,f){e.dataSource=t.current.locals.dataSource,e.dataSourceId=n.dataSourceId,e.types=t.current.locals.types,e.type=Object(r.find)(e.types,{type:e.dataSource.type}),e.canChangeType=void 0===e.dataSource.id,e.helpLinks={athena:"https://redash.io/help/data-sources/amazon-athena-setup",bigquery:"https://redash.io/help/data-sources/bigquery-setup",url:"https://redash.io/help/data-sources/querying-urls",mongodb:"https://redash.io/help/data-sources/mongodb-setup",google_spreadsheets:"https://redash.io/help/data-sources/querying-a-google-spreadsheet",google_analytics:"https://redash.io/help/data-sources/google-analytics-setup",axibasetsd:"https://redash.io/help/data-sources/axibase-time-series-database",results:"https://redash.io/help/user-guide/querying/query-results-data-source"},e.$watch("dataSource.id",function(t){t!==e.dataSourceId&&void 0!==t&&i.path("/data_sources/".concat(t)).replace()}),e.setType=function(t){e.type=t,e.dataSource.type=t.type},e.resetType=function(){e.type=void 0,e.dataSource=new f({options:{}})},e.actions=[{name:"Delete",type:"danger",callback:function(t){var n='Are you sure you want to delete the "'.concat(e.dataSource.name,'" data source?');p.open("Delete Data source",n,u).then(function(){e.dataSource.$delete(function(){d("Data source","data_sources",o,i)},function(e){c("data source",e,o)})},t)}},{name:"Test Connection",pullRight:!0,callback:function(t){f.test({id:e.dataSource.id},function(e){e.ok?o.success("Success"):o.error(e.message,"Connection Test Failed:",{timeOut:1e4}),t()},function(e){l("Failed to test data source: ",e.status,e.statusText,e),o.error("Unknown error occurred while performing connection test. Please try again later.","Connection Test Failed:",{timeOut:1e4}),t()})},disableWhenDirty:!0}]}function f(e){return e.controller("DataSourceCtrl",p),{"/data_sources/new":{template:s.a,controller:"DataSourceCtrl",title:"Datasources",resolve:{dataSource:["DataSource",function(e){return new e({options:{}})}],types:["$http",function(e){return e.get("api/data_sources/types").then(function(e){return e.data})}]}},"/data_sources/:dataSourceId":{template:s.a,controller:"DataSourceCtrl",title:"Datasources",resolve:{dataSource:["DataSource","$route",function(e,t){return e.get({id:t.current.params.dataSourceId}).$promise}],types:["$http",function(e){return e.get("api/data_sources/types").then(function(e){return e.data})}]}}}}f.init=!0},function(e,t){e.exports='<div class="query-page-wrapper">\n  <div class="container">\n    <overlay ng-if="canCreateQuery === false && query.isNew()">\n      You don\'t have permission to create new queries on any of the data sources available to you. You can either\n      <a href="queries">browse existing queries</a>, or ask for additional permissions from your Redash admin.\n    </overlay>\n    <overlay ng-if="noDataSources && currentUser.isAdmin">\n      Looks like no data sources were created yet (or none of them available to the group(s) you\'re member of). Please create one\n      first, and then start querying.\n      <br/>\n      <a href="data_sources/new" class="btn btn-primary">Create Data Source</a>\n      <a href="groups" class="btn btn-default">Manage Group Permissions</a>\n    </overlay>\n    <overlay ng-if="noDataSources && !currentUser.isAdmin">\n      Looks like no data sources were created yet (or none of them available to the group(s) you\'re member of). Please ask your\n      Redash admin to create one first.\n    </overlay>\n\n    <alert-unsaved-changes ng-if="canEdit" is-dirty="isDirty"></alert-unsaved-changes>\n\n    <div class="p-b-10 m-l-0 m-r-0 page-header--new page-header--query">\n      <div class="page-title p-0">\n        <div class="d-flex flex-nowrap align-items-center">\n          <favorites-control ng-if="!query.isNew()" item="query"></favorites-control>\n          <h3>\n            <edit-in-place class="m-r-5" is-editable="canEdit" on-done="saveName"\n              ignore-blanks="true" value="query.name" editor="\'input\'"></edit-in-place>\n            <query-tags-control\n              class="query-tags" ng-class="{\'query-tags__empty\': query.tags.length == 0}"\n              tags="query.tags" is-draft="query.is_draft" is-archived="query.is_archived"\n              can-edit="isQueryOwner" get-available-tags="loadTags" on-edit="saveTags"></query-tags-control>\n          </h3>\n\n          <span class="flex-fill">&nbsp;</span>\n\n          <div class="p-0 source-control text-right text-nowrap align-self-start m-t-5">\n            <button class="btn btn-default btn-publish" ng-click="togglePublished()" ng-if="query.is_draft && query.id != undefined && (isQueryOwner || currentUser.hasPermission(\'admin\'))">\n              <span class="fa fa-paper-plane"></span> Publish\n            </button>\n\n            <span ng-show="query.id && canViewSource">\n              <a ng-show="!sourceMode" ng-href="{{query.getUrl(true, selectedTab)}}" class="btn btn-default btn--showhide">\n                <i class="fa fa-pencil-square-o" aria-hidden="true"></i> Edit Source</i>\n              </a>\n              <a ng-show="sourceMode" ng-href="{{query.getUrl(false, selectedTab)}}" class="btn btn-default btn--showhide">\n                <i class="fa fa-table" aria-hidden="true"></i> Show Data Only</i>\n              </a>\n            </span>\n\n            <div ng-if="query.id != undefined" class="btn-group query-actions-menu" role="group" uib-dropdown>\n              <button class="btn btn-default dropdown-toggle hidden-xs" uib-dropdown-toggle>\n                <span class="zmdi zmdi-more"></span>\n              </button>\n              <ul class="dropdown-menu pull-right" uib-dropdown-menu>\n                <li ng-class="{\'disabled\': query.id === undefined || !canForkQuery() }">\n                  <a ng-click="duplicateQuery()"> Fork <i class="fa fa-external-link"></i></a>\n                </li>\n                <li class="divider" ng-if="query.is_archived"></li>\n                <li ng-if="!query.is_archived && query.id != undefined && (isQueryOwner || currentUser.hasPermission(\'admin\'))">\n                  <a ng-click="archiveQuery()">Archive</a>\n                </li>\n                <li ng-if="!query.is_archived && query.id != undefined && (isQueryOwner || currentUser.hasPermission(\'admin\')) && showPermissionsControl">\n                  <a ng-click="showManagePermissionsModal()">Manage Permissions</a>\n                </li>\n                <li ng-if="!query.is_draft && query.id != undefined && (isQueryOwner || currentUser.hasPermission(\'admin\'))">\n                  <a ng-click="togglePublished()">Unpublish</a>\n                </li>\n                <li class="divider" ng-if="!query.is_archived"></li>\n                <li ng-if="query.id != undefined">\n                  <a ng-click="showApiKey()">Show API Key</a>\n                </li>\n              </ul>\n            </div>\n          </div>\n        </div>\n        <query-tags-control\n          class="query-tags__mobile" ng-class="{\'query-tags__empty\': query.tags.length == 0}"\n          tags="query.tags" is-draft="query.is_draft" is-archived="query.is_archived"\n          can-edit="isQueryOwner" get-available-tags="loadTags" on-edit="saveTags"></query-tags-control>\n      </div>\n    </div>\n  </div>\n  <main class="query-fullscreen">\n    <nav resizable r-directions="[\'right\']" r-flex="true" resizable-toggle toggle-shortcut="Alt+Shift+D, Alt+D">\n      <div class="editor__left__data-source">\n        <ui-select ng-model="query.data_source_id" remove-selected="false" ng-disabled="!isQueryOwner || !sourceMode"\n          on-select="updateDataSource()" data-test="SelectDataSource">\n          <ui-select-match placeholder="Select Data Source...">{{$select.selected.name}}</ui-select-match>\n          <ui-select-choices repeat="ds.id as ds in dataSources | filter:$select.search">\n            {{ds.name}}\n          </ui-select-choices>\n        </ui-select>\n      </div>\n\n      <div class="editor__left__schema" ng-if="sourceMode">\n        <schema-browser class="schema-container" schema="schema" on-refresh="refreshSchema()"></schema-browser>\n      </div>\n      <div ng-if="!sourceMode" style="flex-grow: 1;">&nbsp;</div>\n\n      <div class="query-metadata query-metadata--description" ng-if="!query.isNew()">\n        <edit-in-place is-editable="canEdit" on-done="saveDescription" editor="\'textarea\'" placeholder="\'Add description\'" ignore-blanks=\'false\'\n          value="query.description" markdown="true">\n        </edit-in-place>\n      </div>\n\n      <div class="query-metadata query-metadata--history" ng-if="!query.isNew()">\n        <table>\n          <tr>\n            <td>\n              <img ng-src="{{ query.user.profile_image_url }}" class="profile__image_thumb" />\n              <strong class="meta__name" ng-class="{\'text-muted\': query.user.is_disabled}">{{query.user.name}}</strong>\n            </td>\n            <td class="text-right">\n              created\n              <strong>\n                <rd-time-ago value="query.created_at"></rd-time-ago>\n              </strong>\n            </td>\n          </tr>\n          <tr>\n            <td>\n              <img ng-src="{{ query.last_modified_by.profile_image_url }}" class="profile__image_thumb" />\n              <strong class="meta__name" ng-class="{\'text-muted\': query.last_modified_by.is_disabled}">{{query.last_modified_by.name}}</strong>\n            </td>\n            <td class="text-right">\n              updated\n              <strong>\n                <rd-time-ago value="query.updated_at"></rd-time-ago>\n              </strong>\n            </td>\n          </tr>\n          <tr>\n            <td class="p-t-15">\n              <span class="query-metadata__property">\n                <span class="zmdi zmdi-refresh"></span> Refresh Schedule</span>\n            </td>\n            <td class="p-t-15 text-right">\n              <schedule-phrase ng-click="editSchedule()" is-link="true" schedule="query.schedule" is-new="query.isNew()" />\n            </td>\n          </tr>\n        </table>\n      </div>\n    </nav>\n\n    <div class="content">\n      <div class="flex-fill p-relative">\n        <div class="p-absolute d-flex flex-column p-l-15 p-r-15" style="left: 0; top: 0; right: 0; bottom: 0; overflow: auto">\n          <div class="row editor" resizable r-directions="[\'bottom\']" r-flex="true" resizable-toggle\n               style="min-height: 11px; max-height: 70vh;" ng-if="sourceMode">\n            <query-editor\n              style="width: 100%; height: 100%;"\n              query-text="query.query"\n              schema="schema"\n              syntax="dataSource.syntax"\n              can-edit="canEdit"\n              is-dirty="isDirty"\n              is-query-owner="isQueryOwner"\n              update-data-source="updateDataSource"\n              execute-query="executeQuery"\n              query-executing="queryExecuting"\n              can-execute-query="canExecuteQuery"\n              listen-for-resize="listenForResize"\n              listen-for-editor-command="listenForEditorCommand"\n              save-query="saveQuery"\n              update-query="updateQuery"\n              update-selected-query="updateSelectedQuery"\n              add-new-parameter="addNewParameter"\n              data-data-source="dataSource"\n              data-data-sources="dataSources"></query-editor>\n          </div>\n\n          <div class="row query-metadata__mobile">\n            <img ng-src="{{ query.user.profile_image_url }}" class="profile__image_thumb">\n            <div class="flex-fill m-r-10">\n              <strong class="meta__name" ng-class="{\'text-muted\': query.user.is_disabled}">{{query.user.name}}</strong>\n              created <rd-time-ago value="query.created_at"></rd-time-ago>\n            </div>\n\n            <img ng-src="{{ query.last_modified_by.profile_image_url }}" class="profile__image_thumb">\n            <div class="flex-fill m-r-10">\n              <strong class="meta__name" ng-class="{\'text-muted\': query.last_modified_by.is_disabled}">{{query.last_modified_by.name}}</strong>\n              updated <rd-time-ago value="query.updated_at"></rd-time-ago>\n            </div>\n\n            <div>\n              <span class="query-metadata__property">Refresh schedule:</span>\n              <schedule-phrase ng-click="editSchedule()" is-link="true" schedule="query.schedule" is-new="query.isNew()" />\n            </div>\n          </div>\n\n          <section class="flex-fill p-relative t-body query-visualizations-wrapper">\n            <div class="d-flex flex-column p-b-15 p-absolute static-position__mobile" style="left: 0; top: 0; right: 0; bottom: 0;">\n              <div class="p-t-15 p-b-5" ng-if="query.getParametersDefs().length > 0">\n                <parameters parameters="query.getParametersDefs()" sync-values="!query.isNew()" editable="sourceMode && canEdit" on-updated="onParametersUpdated"></parameters>\n              </div>\n              \x3c!-- Query Execution Status --\x3e\n\n              <div class="query-alerts">\n                <div class="alert alert-info m-t-15" ng-show="queryResult.getStatus() == \'processing\'">\n                  Executing query&hellip;\n                  <rd-timer timestamp="queryResult.getUpdatedAt()"></rd-timer>\n                  <button type="button" class="btn btn-warning btn-xs pull-right" ng-disabled="cancelling" ng-click="cancelExecution()">Cancel\n                  </button>\n                </div>\n                <div class="alert alert-info m-t-15" ng-show="queryResult.getStatus() == \'loading-result\'">\n                  Loading results&hellip;\n                  <rd-timer timestamp="queryResult.getUpdatedAt()"></rd-timer>\n                </div>\n                <div class="alert alert-info m-t-15" ng-show="queryResult.getStatus() == \'waiting\'">\n                  Query in queue&hellip;\n                  <rd-timer timestamp="queryResult.getUpdatedAt()"></rd-timer>\n                  <button type="button" class="btn btn-warning btn-xs pull-right" ng-disabled="cancelling" ng-click="cancelExecution()">Cancel\n                  </button>\n                </div>\n                <div class="alert alert-danger m-t-15" ng-show="queryResult.getError()">\n                  Error running query:\n                  <strong>{{queryResult.getError()}}</strong>\n                </div>\n              </div>\n              \x3c!-- End of Query Execution Status --\x3e\n\n              \x3c!-- tabs and data --\x3e\n              <div ng-if="showDataset" class="flex-fill p-relative">\n                <div class="d-flex flex-column p-absolute static-position__mobile" style="left: 0; top: 0; right: 0; bottom: 0;">\n                  <div class="p-10" ng-show="showLog">\n                    <p>Log Information:</p>\n                    <p ng-repeat="l in queryResult.getLog()">{{l}}</p>\n                  </div>\n                  <ul class="tab-nav">\n                    <rd-tab ng-if="!query.visualizations.length" tab-id="table" name="Table" base-path="query.getUrl(sourceMode)"></rd-tab>\n                    <rd-tab tab-id="{{vis.id}}" name="{{vis.name}}" base-path="query.getUrl(sourceMode)" ng-repeat="vis in query.visualizations | orderBy:\'id\'">\n                      <span class="remove hidden-xs" ng-click="deleteVisualization($event, vis)" ng-if="canEdit && !($first && (vis.type === \'TABLE\'))">\n                        <i class="zmdi zmdi-close"></i>\n                      </span>\n                    </rd-tab>\n                    <li class="rd-tab tab-new-vis">\n                      <a ng-click="openVisualizationEditor()" class="btn btn-default" ng-if="canEdit">\n                        <i class="zmdi zmdi-plus"></i> New Visualization</a>\n                    </li>\n                  </ul>\n                  <div ng-if="!query.visualizations.length" class="query__vis m-t-15 p-b-15 scrollbox">\n                    <filters filters="filters"></filters>\n                    <grid-renderer query-result="queryResult" items-per-page="50"></grid-renderer>\n                  </div>\n\n                  <div ng-if="selectedTab == vis.id" ng-repeat="vis in query.visualizations" class="query__vis m-t-15 scrollbox">\n                    <visualization-renderer visualization="vis" query-result="queryResult"></visualization-renderer>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </section>\n        </div>\n      </div>\n      <div class="bottom-controller-container" ng-if="showDataset">\n        <div class="bottom-controller">\n\n          <button class="m-r-5 btn btn-default btn-edit-visualisation" ng-click="openVisualizationEditor(selectedTab)" ng-if="!query.isNew() && canEdit"><span class="fa fa-edit"></span><span class="hidden-xs hidden-s hidden-m"> Edit Visualization</span></button>\n\n          <div class="m-r-5 btn-group dropup" uib-dropdown>\n            <button type="button" class="btn btn-default dropup-toggle" aria-haspopup="true"\n              uib-dropdown-toggle aria-expanded="false">\n              <span class="fa fa-ellipsis-v"></span>\n            </button>\n            <ul class="dropdown-menu" uib-dropdown-menu>\n              <li>\n                <a target="_self" ng-click="openAddToDashboardForm(selectedTab)" ng-if="!query.isNew() && (!query.is_draft || !query.is_archived)">\n                  <span class="fa fa-plus-circle"></span> Add to Dashboard\n                </a>\n              </li>\n              <li>\n                <a ng-click="showEmbedDialog(query, selectedTab)" ng-if="!query.isNew()">\n                  <span class="zmdi zmdi-code"></span> Embed elsewhere\n                </a>\n              </li>\n              <li>\n                <a query-result-link target="_self" ng-disabled="queryExecuting || !queryResult.getData()">\n                  <span class="fa fa-file-o"></span> Download as CSV File\n                </a>\n              </li>\n              <li>\n                <a query-result-link file-type="xlsx" target="_self" ng-disabled="queryExecuting || !queryResult.getData()">\n                  <span class="fa fa-file-excel-o"></span> Download as Excel File\n                </a>\n              </li>\n            </ul>\n          </div>\n\n          <span class="query-metadata__bottom" ng-if="queryResult.getData()">\n            <span class="query-metadata__property">\n              <strong>{{queryResult.getData().length}}</strong>\n              <ng-pluralize count="queryResult.getData().length" when="{\'0\': \' rows\', \'one\': \' row\', \'other\': \' rows\'}"></ng-pluralize>\n            </span>\n            <span class="query-metadata__property">\n              <strong ng-show="!queryExecuting">{{queryResult.getRuntime() | durationHumanize}}</strong>\n              <span ng-show="queryExecuting">Running&hellip;</span>\n              <span class="hidden-xs">runtime</span>\n            </span>\n            <span class="query-metadata__property" ng-if="queryResult.query_result.data.metadata.data_scanned">Data Scanned\n              <strong>{{ queryResult.query_result.data.metadata.data_scanned | prettySize}}</strong>\n            </span>\n          </span>\n\n          <div>\n            <span class="query-metadata__property hidden-xs">\n              <span class="hidden-xs">Updated </span>\n              <rd-time-ago value="queryResult.query_result.retrieved_at"></rd-time-ago>\n            </span>\n\n            <button class="m-l-5 btn btn-primary" ng-click="executeQuery()" ng-disabled="queryExecuting || !canExecuteQuery()" title="Refresh Dataset"\n              ng-if="!sourceMode">\n              <span class="zmdi zmdi-play"></span>\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </main>\n</div>\n'},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return s});var r=n(10),a=n.n(r),i=n(13);function o(e){if(!e)return"";var t=a()(e);return t.isValid()?t.format(i.clientConfig.dateTimeFormat):"-"}function s(e){e.filter("toMilliseconds",function(){return function(e){return 1e3*e}}),e.filter("dateTime",function(){return o})}s.init=!0},,function(e,t,n){"use strict";n.r(t),n.d(t,"DateTimeInput",function(){return f}),n.d(t,"default",function(){return m});n(35);var r=n(1),a=n.n(r),i=n(0),o=n.n(i),s=n(14),l=n(119),u=n.n(l),c=n(13),d=n(36);function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function f(e){var t=e.value,n=e.withSeconds,r=e.onSelect,i=e.className,o=(c.clientConfig.dateFormat||"YYYY-MM-DD")+(n?" HH:mm:ss":" HH:mm"),s={};return t&&t.isValid()&&(s.defaultValue=t),a.a.createElement(u.a,p({className:i,showTime:!0},s,{format:o,placeholder:"Select Date and Time",onChange:r}))}function m(e){e.component("dateTimeInput",Object(s.react2angular)(f))}f.propTypes={value:d.Moment,withSeconds:o.a.bool,onSelect:o.a.func,className:o.a.string},f.defaultProps={value:null,withSeconds:!1,onSelect:function(){},className:""},m.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"DateTimeRangeInput",function(){return g}),n.d(t,"default",function(){return h});n(35);var r=n(2),a=n(1),i=n.n(a),o=n(0),s=n.n(o),l=n(14),u=n(119),c=n.n(u),d=n(13),p=n(36);function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var m=c.a.RangePicker;function g(e){var t=e.value,n=e.withSeconds,a=e.onSelect,o=e.className,s=(d.clientConfig.dateFormat||"YYYY-MM-DD")+(n?" HH:mm:ss":" HH:mm"),l={};return Object(r.isArray)(t)&&t[0].isValid()&&t[1].isValid()&&(l.defaultValue=t),i.a.createElement(m,f({className:o,showTime:!0},l,{format:s,onChange:a}))}function h(e){e.component("dateTimeRangeInput",Object(l.react2angular)(g))}g.propTypes={value:s.a.arrayOf(p.Moment),withSeconds:s.a.bool,onSelect:s.a.func,className:s.a.string},g.defaultProps={value:null,withSeconds:!1,onSelect:function(){},className:""},h.init=!0},,,,function(e,t,n){"use strict";n.r(t),n.d(t,"PlainListFetcher",function(){return g}),n.d(t,"PaginatedListFetcher",function(){return h});n(21),n(22),n(547),n(29),n(98),n(188);var r=n(2);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?o(e):t}function o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}var m=function(){function e(t){var n=t.getRequest,a=t.doRequest,i=t.processResults;d(this,e),this._originalGetRequest=Object(r.isFunction)(n)?n:r.identity,this._originalDoRequest=a,this._originalProcessResults=Object(r.isFunction)(i)?i:r.identity}return f(e,[{key:"_getRequest",value:function(e,t){return this._originalGetRequest({},t)}},{key:"_processResults",value:function(e,t,n){var r=e.results,a=e.count;return{results:this._originalProcessResults(r,n),count:a}}}]),f(e,[{key:"fetch",value:function(e,t,n){var r=this,a=this._getRequest(t,n);return this._originalDoRequest(a,n).then(function(e){return r._processResults(e,t,n)})}}]),e}(),g=function(e){function t(){var e,n,r,a,s;d(this,t);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return n=i(this,(e=l(t)).call.apply(e,[this].concat(c))),r=o(n),s=[],(a="_allItems")in r?Object.defineProperty(r,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[a]=s,n}return u(t,m),f(t,[{key:"_getRequest",value:function(e,t){var n=e.searchTerm,a=e.selectedTags;return this._originalGetRequest({q:Object(r.isString)(n)&&""!==n?n:void 0,tags:a},t)}},{key:"_processResults",value:function(e,t,n){var r=t.paginator,a=t.sorter;return this._allItems=this._originalProcessResults(e,n),this._allItems=a.sort(this._allItems),{results:r.getItemsForPage(this._allItems),count:this._allItems.length,allResults:this._allItems}}},{key:"fetch",value:function(e,n,a){if(Object(r.isNil)(e)||e.tags||e.sorting)return s(l(t.prototype),"fetch",this).call(this,e,n,a);var i=n.paginator,o=n.sorter;return e.sorting&&(this._allItems=o.sort(this._allItems)),Promise.resolve({results:i.getItemsForPage(this._allItems),count:this._allItems.length,allResults:this._allItems})}}]),t}(),h=function(e){function t(){return d(this,t),i(this,l(t).apply(this,arguments))}return u(t,m),f(t,[{key:"_getRequest",value:function(e,t){var n=e.paginator,a=e.sorter,i=e.searchTerm,o=e.selectedTags;return this._originalGetRequest({page:n.page,page_size:n.itemsPerPage,order:a.compiled,q:Object(r.isString)(i)&&""!==i?i:void 0,tags:o},t)}}]),t}()},function(e,t,n){"use strict";var r=n(2);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.page,a=void 0===r?1:r,i=n.itemsPerPage,o=void 0===i?20:i,s=n.totalCount,l=void 0===s?void 0:s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.page=a,this.itemsPerPage=o,this.updateRows(t,l),this.orderByField=void 0,this.orderByReverse=!1}var t,n,i;return t=e,(n=[{key:"setPage",value:function(e){this.page=e}},{key:"getPageRows",value:function(){var e=this.itemsPerPage*(this.page-1),t=this.itemsPerPage*this.page;return this.rows.slice(e,t)}},{key:"updateRows",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;this.rows=e,this.rows?this.totalCount=t||e.length:this.totalCount=0}},{key:"orderBy",value:function(e){e===this.orderByField?this.orderByReverse=!this.orderByReverse:(this.orderByField=e,this.orderByReverse=!1),this.orderByField&&(this.rows=Object(r.sortBy)(this.rows,this.orderByField),this.orderByReverse&&(this.rows=this.rows.reverse()))}}])&&a(t.prototype,n),i&&a(t,i),e}();n.d(t,"a",function(){return i})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return c});var r=n(1),a=n.n(r),i=n(44),o=n.n(i),s=n(0),l=n.n(s),u=(n(822),n(127));function c(e){var t=e.state,n=e.disabled,r=e.onToggle,i="Live Autocomplete Enabled",s="icon-flash";t||(i="Live Autocomplete Disabled",s="icon-flash-off"),n&&(i="Live Autocomplete Not Available (Use Ctrl+Space to Trigger)",s="icon-flash-off");return a.a.createElement(o.a,{placement:"top",title:i},a.a.createElement("button",{type:"button",className:"btn btn-default m-r-5"+(n?" disabled":""),onClick:function(){return e=!t,Object(u.default)("toggle_autocomplete","screen","query_editor",{state:e}),void r(e);var e},disabled:n},a.a.createElement("i",{className:"icon "+s})))}c.propTypes={state:l.a.bool.isRequired,disabled:l.a.bool.isRequired,onToggle:l.a.func.isRequired}},,function(e,t,n){"use strict";n.r(t),n.d(t,"DateInput",function(){return f}),n.d(t,"default",function(){return m});n(35);var r=n(1),a=n.n(r),i=n(0),o=n.n(i),s=n(14),l=n(119),u=n.n(l),c=n(13),d=n(36);function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function f(e){var t=e.value,n=e.onSelect,r=e.className,i=c.clientConfig.dateFormat||"YYYY-MM-DD",o={};return t&&t.isValid()&&(o.defaultValue=t),a.a.createElement(u.a,p({className:r},o,{format:i,placeholder:"Select Date",onChange:n}))}function m(e){e.component("dateInput",Object(s.react2angular)(f))}f.propTypes={value:d.Moment,onSelect:o.a.func,className:o.a.string},f.defaultProps={value:null,onSelect:function(){},className:""},m.init=!0},,,function(e,t,n){"use strict";n.r(t),n.d(t,"DateRangeInput",function(){return g}),n.d(t,"default",function(){return h});n(35);var r=n(2),a=n(1),i=n.n(a),o=n(0),s=n.n(o),l=n(14),u=n(119),c=n.n(u),d=n(13),p=n(36);function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var m=c.a.RangePicker;function g(e){var t=e.value,n=e.onSelect,a=e.className,o=d.clientConfig.dateFormat||"YYYY-MM-DD",s={};return Object(r.isArray)(t)&&t[0].isValid()&&t[1].isValid()&&(s.defaultValue=t),i.a.createElement(m,f({className:a},s,{format:o,onChange:n}))}function h(e){e.component("dateRangeInput",Object(l.react2angular)(g))}g.propTypes={value:s.a.arrayOf(p.Moment),onSelect:s.a.func,className:s.a.string},g.defaultProps={value:null,onSelect:function(){},className:""},h.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"EditInPlace",function(){return g}),n.d(t,"default",function(){return h});n(21),n(22),n(29);var r=n(1),a=n.n(r),i=n(0),o=n.n(i),s=n(14),l=n(2);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?p(e):t}(this,d(t).call(this,e)),m(p(n),"startEditing",function(){n.props.isEditable&&n.setState({editing:!0})}),m(p(n),"stopEditing",function(){var e=Object(l.trim)(n.inputRef.current.value);n.props.ignoreBlanks&&""===e||e===n.props.value||n.props.onDone(e),n.setState({editing:!1})}),m(p(n),"keyDown",function(e){13!==e.keyCode||e.shiftKey?27===e.keyCode&&n.setState({editing:!1}):(e.preventDefault(),n.stopEditing())}),m(p(n),"renderNormal",function(){return a.a.createElement("span",{role:"presentation",onFocus:n.startEditing,onClick:n.startEditing,className:n.props.isEditable?"editable":""},n.props.value||n.props.placeholder)}),m(p(n),"renderEdit",function(){return a.a.createElement(n.props.editor,{ref:n.inputRef,className:"rd-form-control",defaultValue:n.props.value,onBlur:n.stopEditing,onKeyDown:n.keyDown})}),n.state={editing:!1},n.inputRef=a.a.createRef();var r=p(n);return n.componentDidUpdate=function(e,t){r.state.editing&&!t.editing&&r.inputRef.current.focus()},n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){return a.a.createElement("span",{className:"edit-in-place"+(this.state.editing?" active":"")},this.state.editing?this.renderEdit():this.renderNormal())}}])&&c(n.prototype,r),i&&c(n,i),t}();function h(e){e.component("editInPlace",Object(s.react2angular)(g))}m(g,"propTypes",{ignoreBlanks:o.a.bool,isEditable:o.a.bool,editor:o.a.string.isRequired,placeholder:o.a.string,value:o.a.string,onDone:o.a.func.isRequired}),m(g,"defaultProps",{ignoreBlanks:!1,isEditable:!0,placeholder:"",value:""}),h.init=!0},function(e,t,n){"use strict";n.r(t);n(21),n(22),n(35),n(29);var r=n(2),a=n(1),i=n.n(a),o=n(0),s=n.n(o),l=n(38),u=n.n(l),c=n(43),d=n.n(c),p=n(34);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=h(this,b(t).call(this,e))).state={loading:!0,availableTags:[],result:Object(r.uniq)(Object(r.map)(n.props.tags,r.trim))},n}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,i.a.Component),n=t,(a=[{key:"componentDidMount",value:function(){var e=this;this.props.getAvailableTags().then(function(t){e.setState({loading:!1,availableTags:Object(r.uniq)(Object(r.map)(t,r.trim))})})}},{key:"render",value:function(){var e=this,t=this.props.dialog,n=this.state,a=n.loading,o=n.availableTags,s=n.result;return i.a.createElement(d.a,m({},t.props,{onOk:function(){return t.close(s)},title:"Add/Edit Tags",className:"shortModal"}),i.a.createElement(u.a,{mode:"tags",className:"w-100",placeholder:"Add some tags...",defaultValue:s,onChange:function(t){return e.setState({result:Object(r.map)(t,r.trim)})},autoFocus:!0,disabled:a,loading:a},Object(r.map)(o,function(e){return i.a.createElement(u.a.Option,{key:e},e)})))}}])&&g(n.prototype,a),o&&g(n,o),t}();v(w,"propTypes",{dialog:p.DialogPropType.isRequired,tags:s.a.arrayOf(s.a.string),getAvailableTags:s.a.func.isRequired}),v(w,"defaultProps",{tags:[]}),t.default=Object(p.wrap)(w)},,,function(e,t,n){"use strict";n.r(t),n.d(t,"EmailSettingsWarning",function(){return u}),n.d(t,"default",function(){return c});var r=n(1),a=n.n(r),i=n(0),o=n.n(i),s=n(14),l=n(13);function u(e){var t=e.featureName;return l.clientConfig.mailSettingsMissing&&l.currentUser.isAdmin?a.a.createElement("p",{className:"alert alert-danger"},"It looks like your mail server isn't configured. Make sure to configure it for the ".concat(t," to work.")):null}function c(e){e.component("emailSettingsWarning",Object(s.react2angular)(u))}u.propTypes={featureName:o.a.string.isRequired},c.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"FavoritesControl",function(){return g}),n.d(t,"default",function(){return h});n(21),n(22),n(29);var r=n(1),a=n.n(r),i=n(0),o=n.n(i),s=n(14),l=n(11);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),d(this,p(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,a.a.Component),n=t,(r=[{key:"toggleItem",value:function(e,t,n){var r=this,a=t.is_favorite?t.$unfavorite.bind(t):t.$favorite.bind(t),i=t.is_favorite;a().then(function(){t.is_favorite=!i,r.forceUpdate(),l.$rootScope.$broadcast("reloadFavorites"),n()})}},{key:"render",value:function(){var e=this,t=this.props,n=t.item,r=t.onChange,i=n.is_favorite?"fa fa-star":"fa fa-star-o",o=n.is_favorite?"Remove from favorites":"Add to favorites";return a.a.createElement("a",{href:"javascript:void(0)",title:o,className:"btn-favourite",onClick:function(t){return e.toggleItem(t,n,r)}},a.a.createElement("i",{className:i,"aria-hidden":"true"}))}}])&&c(n.prototype,r),i&&c(n,i),t}();function h(e){e.component("favoritesControlImpl",Object(s.react2angular)(g)),e.component("favoritesControl",{template:'\n      <favorites-control-impl \n        ng-if="$ctrl.item" \n        item="$ctrl.item" \n        on-change="$ctrl.onChange"\n        force-update="$ctrl.forceUpdateTag"\n      ></favorites-control-impl>\n    ',bindings:{item:"="},controller:["$scope",function(e){var t=this;this.forceUpdateTag="force"+Date.now(),e.$on("reloadFavorites",function(){t.forceUpdateTag="force"+Date.now()}),this.onChange=function(){e.$applyAsync()}}]})}m(g,"propTypes",{item:o.a.shape({is_favorite:o.a.bool.isRequired}).isRequired,onChange:o.a.func,forceUpdate:o.a.string}),m(g,"defaultProps",{onChange:function(){},forceUpdate:""}),h.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"ParameterValueInput",function(){return P}),n.d(t,"default",function(){return k});n(21),n(22),n(29),n(110);var r=n(1),a=n.n(r),i=n(0),o=n.n(i),s=n(14),l=n(38),u=n.n(l),c=n(40),d=n.n(c),p=n(294),f=n.n(p),m=n(394),g=n(397),h=n(291),b=n(292),y=n(405);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=u.a.Option,P=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),O(this,x(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,a.a.Component),n=t,(r=[{key:"renderDateTimeWithSecondsInput",value:function(){var e=this.props,t=e.value,n=e.onSelect;return a.a.createElement(h.DateTimeInput,{className:this.props.className,value:t,onSelect:n,withSeconds:!0})}},{key:"renderDateTimeInput",value:function(){var e=this.props,t=e.value,n=e.onSelect;return a.a.createElement(h.DateTimeInput,{className:this.props.className,value:t,onSelect:n})}},{key:"renderDateInput",value:function(){var e=this.props,t=e.value,n=e.onSelect;return a.a.createElement(m.DateInput,{className:this.props.className,value:t,onSelect:n})}},{key:"renderDateTimeRangeWithSecondsInput",value:function(){var e=this.props,t=e.value,n=e.onSelect;return a.a.createElement(b.DateTimeRangeInput,{className:this.props.className,value:t,onSelect:n,withSeconds:!0})}},{key:"renderDateTimeRangeInput",value:function(){var e=this.props,t=e.value,n=e.onSelect;return a.a.createElement(b.DateTimeRangeInput,{className:this.props.className,value:t,onSelect:n})}},{key:"renderDateRangeInput",value:function(){var e=this.props,t=e.value,n=e.onSelect;return a.a.createElement(g.DateRangeInput,{className:this.props.className,value:t,onSelect:n})}},{key:"renderEnumInput",value:function(){var e=this.props,t=e.value,n=e.onSelect,r=e.enumOptions.split("\n").filter(function(e){return""!==e});return a.a.createElement(u.a,{className:this.props.className,disabled:0===r.length,defaultValue:t,onChange:n,dropdownMatchSelectWidth:!1,dropdownClassName:"ant-dropdown-in-bootstrap-modal"},r.map(function(e){return a.a.createElement(E,{key:e,value:e},e)}))}},{key:"renderQueryBasedInput",value:function(){var e=this.props,t=e.value,n=e.onSelect,r=e.queryId;return a.a.createElement(y.QueryBasedParameterInput,{className:this.props.className,value:t,queryId:r,onSelect:n})}},{key:"renderNumberInput",value:function(){var e=this.props,t=e.value,n=e.onSelect,r=e.className;return a.a.createElement(f.a,{className:"form-control "+r,defaultValue:!isNaN(t)&&t||0,onChange:n})}},{key:"renderTextInput",value:function(){var e=this.props,t=e.value,n=e.onSelect,r=e.className;return a.a.createElement(d.a,{className:"form-control "+r,defaultValue:t||"",onChange:function(e){return n(e.target.value)}})}},{key:"render",value:function(){switch(this.props.type){case"datetime-with-seconds":return this.renderDateTimeWithSecondsInput();case"datetime-local":return this.renderDateTimeInput();case"date":return this.renderDateInput();case"datetime-range-with-seconds":return this.renderDateTimeRangeWithSecondsInput();case"datetime-range":return this.renderDateTimeRangeInput();case"date-range":return this.renderDateRangeInput();case"enum":return this.renderEnumInput();case"query":return this.renderQueryBasedInput();case"number":return this.renderNumberInput();default:return this.renderTextInput()}}}])&&w(n.prototype,r),i&&w(n,i),t}();function k(e){e.component("parameterValueInput",{template:'\n      <parameter-value-input-impl\n        type="$ctrl.param.type"\n        value="$ctrl.param.normalizedValue"\n        enum-options="$ctrl.param.enumOptions"\n        query-id="$ctrl.param.queryId"\n        on-select="$ctrl.setValue"\n      ></parameter-value-input-impl>\n    ',bindings:{param:"<"},controller:["$scope",function(e){var t=this;this.setValue=function(n){t.param.setValue(n),e.$applyAsync()}}]}),e.component("parameterValueInputImpl",Object(s.react2angular)(P))}j(P,"propTypes",{type:o.a.string,value:o.a.any,enumOptions:o.a.string,queryId:o.a.number,onSelect:o.a.func,className:o.a.string}),j(P,"defaultProps",{type:"text",value:null,enumOptions:"",queryId:null,onSelect:function(){},className:""}),k.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"QueryBasedParameterInput",function(){return v}),n.d(t,"default",function(){return w});n(21),n(22),n(29),n(19);var r=n(2),a=n(1),i=n.n(a),o=n(0),s=n.n(o),l=n(14),u=n(38),c=n.n(u),d=n(47);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=c.a.Option,v=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=m(this,g(t).call(this,e))).state={options:[],loading:!1},n}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,i.a.Component),n=t,(a=[{key:"componentDidMount",value:function(){this._loadOptions(this.props.queryId)}},{key:"componentWillReceiveProps",value:function(e){e.queryId!==this.props.queryId&&this._loadOptions(e.queryId,e.value)}},{key:"_loadOptions",value:function(e){var t=this;e&&e!==this.state.queryId&&(this.setState({loading:!0}),d.Query.dropdownOptions({id:e},function(n){t.props.queryId===e&&(t.setState({options:n,loading:!1}),!(void 0!==Object(r.find)(n,function(e){return e.value===t.props.value}))&&Object(r.isFunction)(t.props.onSelect)&&t.props.onSelect(n[0].value))}))}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.value,r=e.onSelect,a=this.state,o=a.loading,s=a.options;return i.a.createElement("span",null,i.a.createElement(c.a,{className:t,disabled:o||0===s.length,loading:o,defaultValue:""+n,onChange:r,dropdownMatchSelectWidth:!1,dropdownClassName:"ant-dropdown-in-bootstrap-modal"},s.map(function(e){return i.a.createElement(y,{value:e.value,key:e.value},e.name)})))}}])&&f(n.prototype,a),o&&f(n,o),t}();function w(e){e.component("queryBasedParameterInput",Object(l.react2angular)(v))}b(v,"propTypes",{value:s.a.any,queryId:s.a.number,onSelect:s.a.func,className:s.a.string}),b(v,"defaultProps",{value:null,queryId:null,onSelect:function(){},className:""}),w.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"QuerySnippet",function(){return r}),n.d(t,"default",function(){return i}),a.$inject=["$resource"];var r=null;function a(e){var t=e("api/query_snippets/:id",{id:"@id"});return t.prototype.getSnippet=function(){var e=this.trigger;return""!==this.description&&(e="".concat(this.trigger,": ").concat(this.description)),{name:e,content:this.snippet,tabTrigger:this.trigger}},t}function i(e){e.factory("QuerySnippet",a),e.run(["$injector",function(e){r=e.get("QuerySnippet")}])}i.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"KeyboardShortcuts",function(){return s}),n.d(t,"default",function(){return d});n(67),n(115),n(117),n(21),n(22),n(18),n(110);var r=n(2),a=n(433),i=n.n(a);n(1090);function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var s=null,l={};function u(e,t){e.preventDefault(),e.retunValue=!1,Object(r.each)(l[t],function(e){return e()})}function c(){this.modKey=/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"Cmd":"Ctrl",this.bind=function(e){Object(r.each)(e,function(e,t){var n=t.toLowerCase().split(",").map(r.trim);Object(r.each)(n,function(t){l[t]=[].concat(o(Object(r.without)(l[t],e)),[e]),i.a.bindGlobal(t,u)})})},this.unbind=function(e){Object(r.each)(e,function(e,t){var n=t.toLowerCase().split(",").map(r.trim);Object(r.each)(n,function(t){l[t]=Object(r.without)(l[t],e),0===l[t].length&&(l[t]=void 0,i.a.unbind(t))})})}}function d(e){e.service("KeyboardShortcuts",c),e.run(["$injector",function(e){s=e.get("KeyboardShortcuts")}])}d.init=!0},function(e,t,n){"use strict";n.r(t);n(19),n(18);var r=n(2);t.default={buildKeywordsFromSchema:function(e){var t=[],n={},a={};return e.forEach(function(e){t.push({name:e.name,value:e.name,score:100,meta:"Table"}),a[e.name]=function(e){var t=[];return e.columns.forEach(function(n){t.push({caption:n,name:"".concat(e.name,".").concat(n),value:"".concat(e.name,".").concat(n),score:100,meta:"Column",className:"completion"})}),t}(e),e.columns.forEach(function(e){n[e]="Column"})}),{table:t,column:Object(r.map)(n,function(e,t){return{name:t,value:t,score:50,meta:e}}),tableColumn:a}}}},function(e,t,n){"use strict";n.r(t),n.d(t,"TagsList",function(){return v}),n.d(t,"default",function(){return w});n(115),n(117),n(21),n(22),n(29),n(19),n(18),n(31),n(67),n(187);var r=n(2),a=n(1),i=n.n(a),o=n(0),s=n.n(o),l=n(14),u=n(6),c=n.n(u),d=n(164);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=g(this,h(t).call(this,e))).state={allTags:[],selectedTags:new Set},n}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,i.a.Component),n=t,(a=[{key:"componentDidMount",value:function(){var e=this;Object(d.default)(this.props.tagsUrl).then(function(t){e.setState({allTags:t})})}},{key:"toggleTag",value:function(e,t){var n=this.state.selectedTags;e.shiftKey?n.has(t)?n.delete(t):n.add(t):n.has(t)&&1===n.size?n.clear():(n.clear(),n.add(t)),this.forceUpdate(),this.props.onUpdate(f(this.state.selectedTags))}},{key:"render",value:function(){var e=this,t=this.state,n=t.allTags,a=t.selectedTags;return n.length>0?i.a.createElement("div",{className:"list-group m-t-10 tags-list tiled"},Object(r.map)(n,function(t){return i.a.createElement("a",{key:t.name,href:"javascript:void(0)",className:c()("list-group-item","max-character",{active:a.has(t.name)}),onClick:function(n){return e.toggleTag(n,t.name)}},i.a.createElement("span",{className:"badge badge-light"},t.count),i.a.createElement("span",{className:"tags-list__name"},t.name))})):null}}])&&m(n.prototype,a),o&&m(n,o),t}();function w(e){e.component("tagsList",Object(l.react2angular)(v))}y(v,"propTypes",{tagsUrl:s.a.string.isRequired,onUpdate:s.a.func}),y(v,"defaultProps",{onUpdate:function(){}}),w.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"TimeAgo",function(){return O}),n.d(t,"default",function(){return x});n(21),n(22),n(29),n(18),n(31),n(67),n(187);var r=n(10),a=n.n(r),i=n(2),o=n(1),s=n.n(o),l=n(12),u=n.n(l),c=n(0),d=n.n(c),p=n(36),f=n(13);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=new Set;!function e(){w.forEach(function(e){return e.update()}),setTimeout(e,3e4)}();var O=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=this,n=!(a=(e=h(t)).call.apply(e,[this].concat(o)))||"object"!==m(a)&&"function"!=typeof a?b(r):a,v(b(n),"state",{title:null,value:null}),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,s.a.PureComponent),n=t,o=[{key:"getDerivedStateFromProps",value:function(e){var t=e.date,n=e.placeholder;return{value:(t=(t=Object(i.isNil)(t)?null:a()(t))&&t.isValid()?t:null)?t.fromNow():n,title:t?t.format(f.clientConfig.dateTimeFormat):""}}}],(r=[{key:"componentDidMount",value:function(){w.add(this),this.update(!0)}},{key:"componentWillUnmount",value:function(){w.delete(this)}},{key:"update",value:function(){(arguments.length>0&&void 0!==arguments[0]&&arguments[0]||this.props.autoUpdate)&&this.setState(this.constructor.getDerivedStateFromProps(this.props))}},{key:"render",value:function(){return s.a.createElement("span",{title:this.state.title,"data-test":"TimeAgo"},this.state.value)}}])&&g(n.prototype,r),o&&g(n,o),t}();function x(e){e.directive("amTimeAgo",function(){return{link:function(e,t,n){var r=n.amTimeAgo;e.$watch(r,function(e){u.a.render(s.a.createElement(O,{date:e}),t[0])})}}}),e.component("rdTimeAgo",{bindings:{value:"="},controller:["$scope","$element",function(e,t){var n=this;e.$watch("$ctrl.value",function(){u.a.render(s.a.createElement(O,{date:n.value,placeholder:"-"}),t[0])})}]})}v(O,"propTypes",{date:d.a.oneOfType([d.a.string,d.a.number,d.a.instanceOf(Date),p.Moment]),placeholder:d.a.string,autoUpdate:d.a.bool}),v(O,"defaultProps",{date:null,placeholder:"",autoUpdate:!0}),x.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return A});n(21),n(22),n(29),n(18);var r=n(1),a=n.n(r),i=n(0),o=n.n(i),s=n(11),l=n(100),u=n.n(l),c=n(233),d=n.n(c),p=n(295),f=n.n(p),m=n(645),g=n.n(m),h=n(286),b=n.n(h),y=n(434),v=n.n(y),w=n(192),O=n.n(w),x=n(140),S=n.n(x),j=n(10),E=n.n(j),P=n(644),k=n.n(P),_=n(24);function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e){var t=e.loading,n=e.queues,r=["Name","Active","Reserved","Waiting"].map(function(e){return{title:e,dataIndex:e.toLowerCase()}});return a.a.createElement(u.a,{columns:r,rowKey:"name",dataSource:n,loading:t})}function D(e){var t=e.title,n=e.value,r=e.loading;return a.a.createElement(b.a,{spinning:r},a.a.createElement(g.a,null,t,a.a.createElement("div",{className:"f-20"},n)))}z.propTypes={loading:o.a.bool.isRequired,queues:o.a.arrayOf(o.a.any).isRequired},D.propTypes={title:o.a.string.isRequired,value:o.a.oneOfType([o.a.number,o.a.string]),loading:o.a.bool.isRequired},D.defaultProps={value:""};var A=function(e){function t(e){var n,r,a,i,o,s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(a=T(t).call(this,e))||"object"!==q(a)&&"function"!=typeof a?$(r):a,i=$(n),s={loading:!0,error:!1,counters:{},queries:[],otherTasks:[],queues:[]},(o="state")in i?Object.defineProperty(i,o,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[o]=s,n.fetch(),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(t,a.a.Component),n=t,(r=[{key:"fetch",value:function(){var e=this;s.$http.get("/api/admin/queries/tasks").then(function(t){var n=function(e){var t={},n=[],r=[],a={active:0,reserved:0,waiting:0};return e.forEach(function(e){t[e.queue]=t[e.queue]||{name:e.queue,active:0,reserved:0,waiting:0},t[e.queue][e.state]+=1,e.enqueue_time&&(e.enqueue_time=E()(1e3*e.enqueue_time)),e.start_time&&(e.start_time=E()(1e3*e.start_time)),a[e.state]+=1,"redash.tasks.execute_query"===e.task_name?n.push(e):r.push(e)}),{queues:k()(t),queries:n,otherTasks:r,counters:a}}(t.data.tasks),r=n.queues,a=n.queries,i=n.otherTasks,o=n.counters;e.setState({loading:!1,queries:a,otherTasks:i,queues:r,counters:o})}).catch(function(){e.setState({loading:!1,error:!0})})}},{key:"render",value:function(){var e=[{title:"Worker Name",dataIndex:"worker"},{title:"PID",dataIndex:"worker_pid"},{title:"Queue",dataIndex:"queue"},{title:"State",dataIndex:"state",render:function(e){return"active"===e?a.a.createElement("span",null,a.a.createElement(v.a,{status:"processing"})," Active"):a.a.createElement("span",null,a.a.createElement(v.a,{status:"warning"})," ",e)}},_.Columns.timeAgo({title:"Start Time",dataIndex:"start_time"})],t=e.concat([_.Columns.timeAgo({title:"Enqueue Time",dataIndex:"enqueue_time"}),{title:"Query ID",dataIndex:"query_id"},{title:"Org ID",dataIndex:"org_id"},{title:"Data Source ID",dataIndex:"data_source_id"},{title:"User ID",dataIndex:"user_id"},{title:"Scheduled",dataIndex:"scheduled"}]),n=e.concat([{title:"Task Name",dataIndex:"task_name"}]);return this.state.error?a.a.createElement("div",{className:"p-5"},a.a.createElement(S.a,{type:"error",message:"Failed loading status. Please refresh."})):a.a.createElement("div",{className:"p-5"},a.a.createElement(f.a,{gutter:16},a.a.createElement(d.a,{span:4},a.a.createElement(D,{title:"Active Tasks",value:this.state.counters.active,loading:this.state.loading})),a.a.createElement(d.a,{span:4},a.a.createElement(D,{title:"Reserved Tasks",value:this.state.counters.reserved,loading:this.state.loading})),a.a.createElement(d.a,{span:4},a.a.createElement(D,{title:"Waiting Tasks",value:this.state.counters.waiting,loading:this.state.loading}))),a.a.createElement(f.a,null,a.a.createElement(O.a,{defaultActiveKey:"queues"},a.a.createElement(O.a.TabPane,{key:"queues",tab:"Queues"},a.a.createElement(z,{loading:this.state.loading,queues:this.state.queues})),a.a.createElement(O.a.TabPane,{key:"queries",tab:"Queries"},a.a.createElement(u.a,{rowKey:"task_id",dataSource:this.state.queries,loading:this.state.loading,columns:t})),a.a.createElement(O.a.TabPane,{key:"other",tab:"Other Tasks"},a.a.createElement(u.a,{rowKey:"task_id",dataSource:this.state.otherTasks,loading:this.state.loading,columns:n})))))}}])&&C(n.prototype,r),i&&C(n,i),t}()},function(e,t,n){"use strict";n.r(t),n.d(t,"ErrorHandler",function(){return i});var r=n(121);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.logToConsole=!0,this.reset()}var t,n,i;return t=e,(n=[{key:"reset",value:function(){this.error=null}},{key:"process",value:function(e){this.reset(),this.logToConsole&&console.error(e),(null===e||e instanceof r.a)&&(this.error=e)}}])&&a(t.prototype,n),i&&a(t,i),e}()},function(e,t,n){"use strict";n.r(t);n(21),n(22),n(35),n(29),n(103);var r=n(288),a=n(2),i=n(1),o=n.n(i),s=n(0),l=n.n(s),u=n(43),c=n.n(u),d=n(40),p=n.n(d),f=n(44),m=n.n(f),g=n(167),h=n.n(g),b=n(34),y=n(11);n(1114);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P=function(e){function t(){var e,n,i,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];return i=this,o=(e=x(t)).call.apply(e,[this].concat(l)),n=!o||"object"!==v(o)&&"function"!=typeof o?S(i):o,E(S(n),"state",{saveInProgress:!1,text:"",preview:""}),E(S(n),"updatePreview",Object(a.debounce)(function(){var e=n.state.text;n.setState({preview:r.markdown.toHTML(e)})},100)),E(S(n),"onTextChanged",function(e){n.setState({text:e.target.value}),n.updatePreview()}),n}var n,i,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(t,o.a.Component),n=t,(i=[{key:"saveWidget",value:function(){var e=this;this.setState({saveInProgress:!0}),this.props.onConfirm(this.state.text).then(function(){e.props.dialog.close()}).catch(function(){y.toastr.error("Widget could not be added")}).finally(function(){e.setState({saveInProgress:!1})})}},{key:"render",value:function(){var e=this,t=this.props.dialog;return o.a.createElement(c.a,w({},t.props,{title:"Add Textbox",onOk:function(){return e.saveWidget()},okButtonProps:{loading:this.state.saveInProgress,disabled:!this.state.text},okText:"Add to Dashboard",width:500}),o.a.createElement("div",{className:"add-textbox"},o.a.createElement(p.a.TextArea,{className:"resize-vertical",rows:"5",value:this.state.text,onChange:this.onTextChanged,autoFocus:!0,placeholder:"This is where you write some text"}),o.a.createElement("small",null,"Supports basic"," ",o.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.markdownguide.org/cheat-sheet/#basic-syntax"},o.a.createElement(m.a,{title:"Markdown guide opens in new window"},"Markdown")),"."),this.state.text&&o.a.createElement(o.a.Fragment,null,o.a.createElement(h.a,{dashed:!0}),o.a.createElement("strong",{className:"preview-title"},"Preview:"),o.a.createElement("p",{dangerouslySetInnerHTML:{__html:this.state.preview},className:"preview"}))))}}])&&O(n.prototype,i),s&&O(n,s),t}();E(P,"propTypes",{dashboard:l.a.object.isRequired,dialog:b.DialogPropType.isRequired,onConfirm:l.a.func.isRequired}),t.default=Object(b.wrap)(P)},function(e,t,n){"use strict";n.r(t);n(21),n(22),n(35),n(29),n(103),n(19);var r=n(2),a=n(1),i=n.n(a),o=n(0),s=n.n(o),l=n(38),u=n.n(l),c=n(43),d=n.n(c),p=n(34),f=n(72),m=n(221),g=n(11),h=n(47);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j=u.a.Option,E=u.a.OptGroup,P=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=this,n=!(a=(e=w(t)).call.apply(e,[this].concat(o)))||"object"!==b(a)&&"function"!=typeof a?O(r):a,S(O(n),"state",{saveInProgress:!1,selectedQuery:null,selectedVis:null,parameterMappings:[]}),n}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(t,i.a.Component),n=t,(a=[{key:"selectQuery",value:function(e){var t=this;this.setState({selectedQuery:null,selectedVis:null,parameterMappings:[]}),e&&h.Query.get({id:e.id},function(e){if(e){var n=Object(r.map)(t.props.dashboard.getParametersDefs(),function(e){return e.name});t.setState({selectedQuery:e,parameterMappings:Object(r.map)(e.getParametersDefs(),function(e){return{name:e.name,type:Object(r.includes)(n,e.name)?f.MappingType.DashboardMapToExisting:f.MappingType.DashboardAddNew,mapTo:e.name,value:e.normalizedValue,title:"",param:e}})}),e.visualizations.length&&t.setState({selectedVis:e.visualizations[0]})}})}},{key:"selectVisualization",value:function(e,t){var n=this;Object(r.each)(e.visualizations,function(e){if(e.id===t)return n.setState({selectedVis:e}),!1})}},{key:"saveWidget",value:function(){var e=this,t=this.state,n=t.selectedVis,r=t.parameterMappings;this.setState({saveInProgress:!0}),this.props.onConfirm(n,r).then(function(){e.props.dialog.close()}).catch(function(){g.toastr.error("Widget could not be added")}).finally(function(){e.setState({saveInProgress:!1})})}},{key:"updateParamMappings",value:function(e){this.setState({parameterMappings:e})}},{key:"renderVisualizationInput",value:function(){var e=this,t={};return this.state.selectedQuery&&Object(r.each)(this.state.selectedQuery.visualizations,function(e){t[e.type]=t[e.type]||[],t[e.type].push(e)}),t=Object(r.values)(t),i.a.createElement("div",null,i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"choose-visualization"},"Choose Visualization"),i.a.createElement(u.a,{id:"choose-visualization",className:"w-100",defaultValue:Object(r.first)(this.state.selectedQuery.visualizations).id,onChange:function(t){return e.selectVisualization(e.state.selectedQuery,t)},dropdownClassName:"ant-dropdown-in-bootstrap-modal"},t.map(function(e){return i.a.createElement(E,{label:e[0].type,key:e[0].type},e.map(function(e){return i.a.createElement(j,{value:e.id,key:e.id},e.name)}))}))))}},{key:"render",value:function(){var e=this,t=this.props.dashboard.getParametersDefs(),n=this.props.dialog;return i.a.createElement(d.a,y({},n.props,{title:"Add Widget",onOk:function(){return e.saveWidget()},okButtonProps:{loading:this.state.saveInProgress,disabled:!this.state.selectedQuery},okText:"Add to Dashboard",width:700}),i.a.createElement(m.QuerySelector,{onChange:function(t){return e.selectQuery(t)}}),this.state.selectedQuery&&this.renderVisualizationInput(),this.state.parameterMappings.length>0&&[i.a.createElement("label",{key:"parameters-title",htmlFor:"parameter-mappings"},"Parameters"),i.a.createElement(f.ParameterMappingListInput,{key:"parameters-list",id:"parameter-mappings",mappings:this.state.parameterMappings,existingParams:t,onChange:function(t){return e.updateParamMappings(t)}})])}}])&&v(n.prototype,a),o&&v(n,o),t}();S(P,"propTypes",{dashboard:s.a.object.isRequired,dialog:p.DialogPropType.isRequired,onConfirm:s.a.func.isRequired}),t.default=Object(p.wrap)(P)},function(e,t,n){"use strict";n.r(t),n.d(t,"getParamValuesSnapshot",function(){return w});n(35),n(115),n(117),n(21),n(22),n(29),n(98),n(18),n(31),n(67),n(103),n(19);var r=n(2),a=n(1),i=n.n(a),o=n(0),s=n.n(o),l=n(43),u=n.n(l),c=n(34),d=n(72);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e,t){return Object(r.map)(Object(r.sortBy)(e,function(e){return e.name}),function(e){var n;switch(e.type){case d.MappingType.StaticValue:return[e.name,e.value];case d.MappingType.WidgetLevel:return[e.name,e.param.value];case d.MappingType.DashboardAddNew:case d.MappingType.DashboardMapToExisting:return n=Object(r.find)(t,function(t){return t.name===e.mapTo}),[e.name,n?n.value:null]}})}var O=function(e){function t(e){var n,a,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,n=!(i=h(t).call(this,e))||"object"!==p(i)&&"function"!=typeof i?b(a):i,v(b(n),"originalParamValuesSnapshot",null);var o=Object(d.parameterMappingsToEditableMappings)(e.widget.options.parameterMappings,e.widget.query.getParametersDefs(),Object(r.map)(n.props.dashboard.getParametersDefs(),function(e){return e.name}));return n.originalParamValuesSnapshot=w(o,n.props.dashboard.getParametersDefs()),n.state={saveInProgress:!1,parameterMappings:o},n}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,i.a.Component),n=t,(a=[{key:"saveWidget",value:function(){var e=this,t=this.props.toastr,n=this.props.widget;this.setState({saveInProgress:!0});var a=Object(d.editableMappingsToParameterMappings)(this.state.parameterMappings);n.options.parameterMappings=a;var i=!Object(r.isMatch)(this.originalParamValuesSnapshot,w(this.state.parameterMappings,this.props.dashboard.getParametersDefs())),o=[n].concat(m(Object(d.synchronizeWidgetTitles)(n.options.parameterMappings,this.props.dashboard.widgets)));Promise.all(Object(r.map)(o,function(e){return e.save()})).then(function(){e.props.dialog.close(i)}).catch(function(){t.error("Widget cannot be updated")}).finally(function(){e.setState({saveInProgress:!1})})}},{key:"updateParamMappings",value:function(e){this.setState({parameterMappings:e})}},{key:"render",value:function(){var e=this,t=this.props.dialog;return i.a.createElement(u.a,f({},t.props,{title:"Parameters",onOk:function(){return e.saveWidget()},okButtonProps:{loading:this.state.saveInProgress},width:700}),this.state.parameterMappings.length>0&&i.a.createElement(d.ParameterMappingListInput,{mappings:this.state.parameterMappings,existingParams:this.props.dashboard.getParametersDefs(),onChange:function(t){return e.updateParamMappings(t)}}))}}])&&g(n.prototype,a),o&&g(n,o),t}();v(O,"propTypes",{dashboard:s.a.object.isRequired,widget:s.a.object.isRequired,dialog:c.DialogPropType.isRequired}),t.default=Object(c.wrap)(O)},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return s});var r=n(2),a=n(11),i=n(13);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,s;return t=e,(n=[{key:"refresh",value:function(){return a.$q.resolve(this)}},{key:"canCreateDataSource",value:function(){return i.currentUser.isAdmin}},{key:"isCreateDataSourceEnabled",value:function(){return i.currentUser.isAdmin}},{key:"canCreateDashboard",value:function(){return i.currentUser.hasPermission("create_dashboard")}},{key:"isCreateDashboardEnabled",value:function(){return i.currentUser.hasPermission("create_dashboard")}},{key:"canCreateAlert",value:function(){return!0}},{key:"canCreateUser",value:function(){return i.currentUser.isAdmin}},{key:"isCreateUserEnabled",value:function(){return i.currentUser.isAdmin}},{key:"getDashboardRefreshIntervals",value:function(){var e=i.clientConfig.dashboardRefreshIntervals;return Object(r.isArray)(e)?e:null}},{key:"getQueryRefreshIntervals",value:function(){var e=i.clientConfig.queryRefreshIntervals;return Object(r.isArray)(e)?e:null}}])&&o(t.prototype,n),s&&o(t,s),e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return p});n(179);var r=n(2),a=n(17),i=n.n(a);n(1153);function o(e,t){if(Object(r.isFunction)(t)){var n=!1,a=i()("<i>").addClass("fa fa-caret-right").appendTo(e.empty());t(n),e.on("click",function(){n=!n,a.toggleClass("fa-caret-right fa-caret-down"),t(n)})}else e.addClass("hidden")}function s(e){return i()("<span>").addClass("jvi-punctuation jvi-comma").text(",").appendTo(e)}function l(e,t,n){return i()("<span>").addClass("jvi-punctuation jvi-string").text('"').appendTo(e),i()("<span>").addClass("jvi-value jvi-string").text(t).appendTo(e),i()("<span>").addClass("jvi-punctuation jvi-string").text('"').appendTo(e),n&&s(e),null}function u(e,t,n){var r=n?t?"[":"{":t?"]":"}";return i()("<span>").addClass("jvi-punctuation jvi-braces").text(r).appendTo(e)}function c(e,t,n,a){var c=a?t.length:Object(r.keys)(t).length,p=null;if(u(e,a,!0),c>0){var f=function(e){var t=i()("<span>").addClass("jvi-punctuation jvi-ellipsis").html("&hellip;").appendTo(e).on("click",function(){t.parents(".jvi-item").eq(0).find(".jvi-toggle").trigger("click")});return t}(e);p=function(e,t,n,a){return function(s){if(s){t.addClass("hidden"),e.removeClass("hidden").empty();var u=null,c=null;Object(r.each)(n,function(t,n){var r=i()("<span>").addClass("jvi-item").appendTo(e);u=u||r,c=r;var s=i()("<span>").addClass("jvi-toggle").appendTo(r);a&&(l(i()("<span>").addClass("jvi-object-key").appendTo(r),n),i()("<span>").addClass("jvi-punctuation").text(": ").appendTo(r)),o(s,d(r,t,!0))}),u&&u.addClass("jvi-nested-first"),c&&c.addClass("jvi-nested-last")}else e.addClass("hidden").empty(),t.removeClass("hidden")}}(i()("<span>").addClass("jvi-block hidden").appendTo(e),f,t,!a)}return u(e,a,!1),n&&s(e),c>0&&(p=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t=Object(r.filter)(t,r.isFunction),function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];Object(r.each)(t,function(e){e.apply(void 0,n)})}}(function(e,t){var n=" // "+t+" "+(1===t?"item":"items"),r=i()("<span>").addClass("jvi-comment").text(n).appendTo(e);return function(e){e?r.addClass("hidden"):r.removeClass("hidden")}}(e,c),p)),p}function d(e,t,n){return e=i()("<span>").appendTo(e),function(e){return null===e||!1===e||!0===e||Object(r.isNumber)(e)&&isFinite(e)}(t)?function(e,t,n){return i()("<span>").addClass("jvi-value jvi-primitive").text(""+t).appendTo(e),n&&s(e),null}(e,t,n):Object(r.isString)(t)?l(e,t,n):Object(r.isArray)(t)?function(e,t,n){return c(e,t,n,!0)}(e,t,n):Object(r.isObject)(t)?function(e,t,n){return c(e,t,n,!1)}(e,t,n):void 0}function p(e,t){if(e instanceof i.a&&!Object(r.isUndefined)(t)&&!Object(r.isFunction)(t)){var n=i()("<span>").addClass("jvi-item").appendTo(e);o(i()("<span>").addClass("jvi-toggle").appendTo(n),d(n,t))}}},function(e,t,n){"use strict";n.r(t);n(21),n(22),n(35),n(29),n(19);var r=n(1),a=n.n(r),i=n(43),o=n.n(i),s=n(40),l=n.n(s),u=n(34),c=n(55);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=this,a=(e=m(t)).call.apply(e,[this].concat(o)),n=!a||"object"!==d(a)&&"function"!=typeof a?g(r):a,b(g(n),"state",{name:""}),b(g(n),"save",function(){n.props.dialog.close(new c.Group({name:n.state.name}))}),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){var e=this,t=this.props.dialog;return a.a.createElement(o.a,p({},t.props,{title:"Create a New Group",okText:"Create",onOk:function(){return e.save()}}),a.a.createElement(l.a,{className:"form-control",defaultValue:this.state.name,onChange:function(t){return e.setState({name:t.target.value})},onPressEnter:function(){return e.save()},placeholder:"Group Name",autoFocus:!0}))}}])&&f(n.prototype,r),i&&f(n,i),t}();b(y,"propTypes",{dialog:u.DialogPropType.isRequired}),t.default=Object(u.wrap)(y)},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return s});var r=n(2);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.page,r=t.itemsPerPage,a=t.totalCount,i=t.validate,s=void 0===i||i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"page",1),o(this,"itemsPerPage",20),o(this,"totalCount",0),this.setItemsPerPage(r,s),this.setTotalCount(a,s),this.setPage(n,s)}return i(e,[{key:"setPage",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Object(r.isUndefined)(e)||(e=parseInt(e,10)||1,this.page=t?e>=1&&e<=this.totalPages?e:1:e>=1?e:1)}},{key:"setItemsPerPage",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Object(r.isUndefined)(e)||(e=parseInt(e,10)||20,this.itemsPerPage=e>=1?e:1,t&&this.setPage(this.page,t))}},{key:"setTotalCount",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Object(r.isUndefined)(e)||(e=parseInt(e,10)||0,this.totalCount=e,t&&this.setPage(this.page,t))}},{key:"totalPages",get:function(){return Math.ceil(this.totalCount/this.itemsPerPage)}}]),i(e,[{key:"getItemsForPage",value:function(e){var t=this.itemsPerPage*(this.page-1),n=t+this.itemsPerPage;return e.slice(t,n)}}]),e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"TimeEditor",function(){return N});n(21),n(22),n(35),n(29),n(18),n(31),n(57),n(110);var r=n(1),a=n.n(r),i=n(0),o=n.n(i),s=n(43),l=n.n(s),u=n(119),c=n.n(u),d=n(395),p=n.n(d),f=n(38),m=n.n(f),g=n(90),h=n.n(g),b=n(2),y=n(10),v=n.n(y),w=n(39),O=n(34),x=n(36);n(548);function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(){return(j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var T=v.a.weekdaysShort(),$=v.a.weekdays(),R="YYYY-MM-DD",z="HH:mm",D=m.a.Option,A=m.a.OptGroup;function N(e){var t=C(Object(r.useState)(e.defaultValue),2),n=t[0],i=t[1],o=n&&!n.isUTC();return a.a.createElement(a.a.Fragment,null,a.a.createElement(p.a,{allowClear:!1,value:n,format:z,minuteStep:5,onChange:function(t){i(t),e.onChange(t)}}),o&&a.a.createElement("span",{className:"utc","data-testid":"utc"},"(",v.a.utc(n).format(z)," UTC)"))}N.propTypes={defaultValue:x.Moment,onChange:o.a.func.isRequired},N.defaultProps={defaultValue:null};var I=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=this,a=(e=P(t)).call.apply(e,[this].concat(o)),n=!a||"object"!==S(a)&&"function"!=typeof a?k(r):a,q(k(n),"state",n.getState()),q(k(n),"setTime",function(e){n.newSchedule={time:v()(e).utc().format(z)}}),q(k(n),"setInterval",function(e){var t=n.state.newSchedule,r=Object(w.secondsToInterval)(e).interval;r===w.IntervalEnum.NEVER&&(t.until=null),-1!==[w.IntervalEnum.NEVER,w.IntervalEnum.MINUTES,w.IntervalEnum.HOURS].indexOf(r)&&(t.time=null),r!==w.IntervalEnum.WEEKS&&(t.day_of_week=null),r!==w.IntervalEnum.DAYS&&r!==w.IntervalEnum.WEEKS||n.state.minute&&n.state.hour||(t.time=v()().hour("00").minute("15").utc().format(z)),r!==w.IntervalEnum.WEEKS||n.state.dayOfWeek||(t.day_of_week=$[0]),t.interval=e;var a=C(t.time?Object(w.localizeTime)(t.time).split(":"):[null,null],2),i=a[0],o=a[1];n.setState({interval:r,seconds:e,hour:i,minute:o,dayOfWeek:t.day_of_week?T[$.indexOf(t.day_of_week)]:null}),n.newSchedule=t}),q(k(n),"setScheduleUntil",function(e,t){n.newSchedule={until:t}}),q(k(n),"setWeekday",function(e){var t=e.target.value;n.setState({dayOfWeek:t}),n.newSchedule={day_of_week:t?$[T.indexOf(t)]:null}}),q(k(n),"setUntilToggle",function(e){var t=e.target.value?v()().format(R):null;n.setScheduleUntil(null,t)}),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,a.a.Component),n=t,(r=[{key:"getState",value:function(){var e=Object(b.clone)(this.props.schedule||t.defaultProps.schedule),n=e.time,r=e.interval,a=e.day_of_week,i=Object(w.secondsToInterval)(r).interval,o=C(n?Object(w.localizeTime)(n).split(":"):[null,null],2);return{hour:o[0],minute:o[1],seconds:r,interval:i,dayOfWeek:a?T[$.indexOf(a)]:null,newSchedule:e}}},{key:"save",value:function(){var e=this.state.newSchedule;Object(b.isEqual)(e,this.props.schedule)||(e.interval?this.props.dialog.close(Object(b.clone)(e)):this.props.dialog.close(null)),this.props.dialog.dismiss()}},{key:"render",value:function(){var e=this,t=this.props.dialog,n=this.state,r=n.interval,i=n.minute,o=n.hour,s=n.seconds,u=n.newSchedule.until;return a.a.createElement(l.a,j({},t.props,{title:"Refresh Schedule",className:"schedule",onOk:function(){return e.save()}}),a.a.createElement("div",{className:"schedule-component"},a.a.createElement("h5",null,"Refresh every"),a.a.createElement("div",{"data-testid":"interval"},a.a.createElement(m.a,{className:"input",value:s,onChange:this.setInterval,dropdownMatchSelectWidth:!1},a.a.createElement(D,{value:null,key:"never"},"Never"),Object.keys(this.intervals).map(function(t){return a.a.createElement(A,{label:Object(b.capitalize)(Object(w.pluralize)(t)),key:t},e.intervals[t].map(function(e){var t=C(e,2),n=t[0],r=t[1];return a.a.createElement(D,{value:r,key:n},Object(w.durationHumanize)(r))}))})))),-1!==[w.IntervalEnum.DAYS,w.IntervalEnum.WEEKS].indexOf(r)?a.a.createElement("div",{className:"schedule-component"},a.a.createElement("h5",null,"On time"),a.a.createElement("div",{"data-testid":"time"},a.a.createElement(N,{defaultValue:o?v()().hour(o).minute(i):null,onChange:this.setTime}))):null,w.IntervalEnum.WEEKS===r?a.a.createElement("div",{className:"schedule-component"},a.a.createElement("h5",null,"On day"),a.a.createElement("div",{"data-testid":"weekday"},a.a.createElement(h.a.Group,{size:"medium",defaultValue:this.state.dayOfWeek,onChange:this.setWeekday},T.map(function(e){return a.a.createElement(h.a.Button,{value:e,key:e,className:"input"},e[0])})))):null,r!==w.IntervalEnum.NEVER?a.a.createElement("div",{className:"schedule-component"},a.a.createElement("h5",null,"Ends"),a.a.createElement("div",{className:"ends","data-testid":"ends"},a.a.createElement(h.a.Group,{size:"medium",value:!!u,onChange:this.setUntilToggle},a.a.createElement(h.a,{value:!1},"Never"),a.a.createElement(h.a,{value:!0},"On")),u?a.a.createElement(c.a,{size:"small",className:"datepicker",value:v()(u),allowClear:!1,format:R,onChange:this.setScheduleUntil}):null)):null)}},{key:"intervals",get:function(){var e=q({},w.IntervalEnum.NEVER,[]);return this.props.refreshOptions.forEach(function(t){var n=Object(w.secondsToInterval)(t),r=n.count,a=n.interval;a in e||(e[a]=[]),e[a].push([r,t])}),Object.defineProperty(this,"intervals",{value:e}),e}},{key:"newSchedule",set:function(e){this.setState(function(t){return{newSchedule:j(t.newSchedule,e)}})}}])&&E(n.prototype,r),i&&E(n,i),t}();q(I,"propTypes",{schedule:x.RefreshScheduleType,refreshOptions:o.a.arrayOf(o.a.number).isRequired,dialog:O.DialogPropType.isRequired}),q(I,"defaultProps",{schedule:x.RefreshScheduleDefault}),t.default=Object(O.wrap)(I)},function(e,t,n){"use strict";n.r(t),n.d(t,"SchedulePhrase",function(){return v}),n.d(t,"default",function(){return w});n(21),n(22),n(18),n(29);var r=n(14),a=n(1),i=n.n(a),o=n(0),s=n.n(o),l=n(44),u=n.n(l),c=n(39),d=n(36);n(548);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),g(this,h(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,i.a.Component),n=t,(r=[{key:"render",value:function(){if(this.props.isNew)return"Never";var e=f(this.content,2),t=e[0],n=e[1],r=n?i.a.createElement(u.a,{title:n},t):t;return this.props.isLink?i.a.createElement("a",{className:"schedule-phrase"},r):r}},{key:"content",get:function(){var e=(this.props.schedule||t.defaultProps.schedule).interval;if(!e)return["Never"];var n=Object(c.durationHumanize)(e,{omitSingleValueNumber:!0}),r="Every ".concat(n),a="Refreshes every ".concat(n),i=this.props.schedule,o=i.time,s=i.day_of_week;return o&&(a+=" at ".concat(Object(c.localizeTime)(o))),s&&(a+=" on ".concat(s)),[r,a]}}])&&m(n.prototype,r),a&&m(n,a),t}();function w(e){e.component("schedulePhrase",Object(r.react2angular)(v))}y(v,"propTypes",{schedule:d.RefreshScheduleType,isNew:s.a.bool.isRequired,isLink:s.a.bool}),y(v,"defaultProps",{schedule:d.RefreshScheduleDefault,isLink:!1}),w.init=!0},function(e,t,n){"use strict";n.r(t);n(21),n(22),n(35),n(18),n(31),n(57),n(29),n(19);var r=n(1),a=n.n(r),i=n(42),o=n.n(i),s=n(43),l=n.n(s),u=n(40),c=n.n(u),d=n(2),p=n(45),f=n(11),m=n(36),g=n(34);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){S(e,t,n[t])})}return e}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=w(t).call(this,e),n=!a||"object"!==h(a)&&"function"!=typeof a?O(r):a,S(O(n),"fieldError",function(e,t){return 0===t.length?"This field is required.":"currentPassword"!==e&&t.length<6?"This field is too short.":"repeatPassword"===e&&t!==n.state.newPassword.value?"Passwords don't match":null}),S(O(n),"validateFields",function(e){var t=n.state,r=t.currentPassword,a=t.newPassword,i=t.repeatPassword,o={currentPassword:n.fieldError("currentPassword",r.value),newPassword:n.fieldError("newPassword",a.value),repeatPassword:n.fieldError("repeatPassword",i.value)};n.setState({currentPassword:y({},r,{error:o.currentPassword}),newPassword:y({},a,{error:o.newPassword}),repeatPassword:y({},i,{error:o.repeatPassword})}),Object(d.isFunction)(e)&&e(o.currentPassword||o.newPassword||o.repeatPassword?o:null)}),S(O(n),"updatePassword",function(){var e=n.state,t=e.currentPassword,r=e.newPassword;e.updatingPassword||n.validateFields(function(e){if(e)n.setState(function(e){return{currentPassword:y({},e.currentPassword,{touched:!0}),newPassword:y({},e.newPassword,{touched:!0}),repeatPassword:y({},e.repeatPassword,{touched:!0})}});else{var a={id:n.props.user.id,old_password:t.value,password:r.value};n.setState({updatingPassword:!0}),p.User.save(a,function(){f.toastr.success("Saved."),n.props.dialog.close({success:!0})},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f.toastr.error(e.data&&e.data.message||"Failed saving."),n.setState({updatingPassword:!1})})}})}),S(O(n),"handleChange",function(e){var t=e.target,r=t.name,a=t.value,i=n.state[r].error;n.setState(S({},r,{value:a,error:i,touched:!0}),function(){n.validateFields()})}),n.state={currentPassword:{value:"",error:null,touched:!1},newPassword:{value:"",error:null,touched:!1},repeatPassword:{value:"",error:null,touched:!1},updatingPassword:!1},n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props.dialog,t=this.state,n=t.currentPassword,r=t.newPassword,i=t.repeatPassword,s=t.updatingPassword,u={className:"m-b-10",required:!0},d={onChange:this.handleChange,onPressEnter:this.updatePassword};return a.a.createElement(l.a,b({},e.props,{okButtonProps:{loading:s},onOk:this.updatePassword,title:"Change Password"}),a.a.createElement(o.a,{layout:"vertical"},a.a.createElement(o.a.Item,b({},u,{validateStatus:n.touched&&n.error?"error":null,help:n.touched?n.error:null,label:"Current Password"}),a.a.createElement(c.a.Password,b({},d,{name:"currentPassword","data-test":"CurrentPassword",autoFocus:!0}))),a.a.createElement(o.a.Item,b({},u,{validateStatus:r.touched&&r.error?"error":null,help:r.touched?r.error:null,label:"New Password"}),a.a.createElement(c.a.Password,b({},d,{name:"newPassword","data-test":"NewPassword"}))),a.a.createElement(o.a.Item,b({},u,{validateStatus:i.touched&&i.error?"error":null,help:i.touched?i.error:null,label:"Repeat New Password"}),a.a.createElement(c.a.Password,b({},d,{name:"repeatPassword","data-test":"RepeatPassword"})))))}}])&&v(n.prototype,r),i&&v(n,i),t}();S(j,"propTypes",{user:m.UserProfile.isRequired,dialog:g.DialogPropType.isRequired}),t.default=Object(g.wrap)(j)},function(e,t,n){"use strict";n.r(t);n(21),n(22),n(35),n(18),n(31),n(57),n(29);var r=n(1),a=n.n(r),i=n(0),o=n.n(i),s=n(43),l=n.n(s),u=n(140),c=n.n(u),d=n(226),p=n(34),f=n(127);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,i=b(t).call(this,e),n=!i||"object"!==m(i)&&"function"!=typeof i?y(r):i,w(y(n),"createUser",function(){n.form.current.validateFieldsAndScroll(function(e,t){e||(n.setState({savingUser:!0}),n.props.onCreate(t).then(function(){n.props.dialog.close()}).catch(function(e){n.setState({savingUser:!1,errorMessage:e.message})}))})}),n.state={savingUser:!1,errorMessage:null},n.form=a.a.createRef(),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,a.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){Object(f.default)("view","page","users/new")}},{key:"render",value:function(){var e=this,t=this.state,n=t.savingUser,r=t.errorMessage,i=[{name:"name",title:"Name",type:"text"},{name:"email",title:"Email",type:"email"}].map(function(t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){w(e,t,n[t])})}return e}({required:!0,props:{onPressEnter:e.createUser}},t)});return a.a.createElement(l.a,g({},this.props.dialog.props,{title:"Create a New User",okText:"Create",okButtonProps:{loading:n},onOk:function(){return e.createUser()}}),a.a.createElement(d.DynamicForm,{fields:i,ref:this.form,hideSubmitButton:!0}),r&&a.a.createElement(c.a,{message:r,type:"error",showIcon:!0}))}}])&&h(n.prototype,r),i&&h(n,i),t}();w(O,"propTypes",{dialog:p.DialogPropType.isRequired,onCreate:o.a.func.isRequired}),t.default=Object(p.wrap)(O)},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return k});n(21),n(22),n(18),n(31),n(57),n(29),n(19),n(103);var r=n(1),a=n.n(r),i=n(140),o=n.n(i),s=n(25),l=n.n(s),u=n(42),c=n.n(u),d=n(43),p=n.n(d),f=n(45),m=n(13),g=n(231),h=n(36),b=n(226),y=n(422),v=n(139);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){P(e,t,n[t])})}return e}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=S(t).call(this,e),n=!a||"object"!==w(a)&&"function"!=typeof a?j(r):a,P(j(n),"changePassword",function(){y.default.showModal({user:n.props.user})}),P(j(n),"sendPasswordReset",function(){n.setState({sendingPasswordEmail:!0}),f.User.sendPasswordReset(n.state.user).then(function(e){n.setState({passwordLink:e})}).finally(function(){n.setState({sendingPasswordEmail:!1})})}),P(j(n),"resendInvitation",function(){n.setState({resendingInvitation:!0}),f.User.resendInvitation(n.state.user).then(function(e){n.setState({passwordLink:e})}).finally(function(){n.setState({resendingInvitation:!1})})}),P(j(n),"regenerateApiKey",function(){p.a.confirm({title:"Regenerate API Key",content:"Are you sure you want to regenerate?",okText:"Regenerate",onOk:function(){n.setState({regeneratingApiKey:!0}),f.User.regenerateApiKey(n.state.user).then(function(e){if(e){var t=n.state.user;n.setState({user:O({},t,{apiKey:e})})}}).finally(function(){n.setState({regeneratingApiKey:!1})})},maskClosable:!0,autoFocusButton:null})}),P(j(n),"toggleUser",function(){var e=n.state.user,t=e.isDisabled?f.User.enableUser:f.User.disableUser;n.setState({togglingUser:!0}),t(e).then(function(e){e&&n.setState({user:f.User.convertUserInfo(e.data)})}).finally(function(){n.setState({togglingUser:!1})})}),P(j(n),"saveUser",function(e,t,r){var a=O({id:n.props.user.id},e);f.User.save(a,function(e){t("Saved."),n.setState({user:f.User.convertUserInfo(e)})},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(e.data&&e.data.message||"Failed saving.")})}),n.state={user:n.props.user,regeneratingApiKey:!1,sendingPasswordEmail:!1,resendingInvitation:!1,togglingUser:!1},n}var n,i,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,a.a.Component),n=t,(i=[{key:"renderBasicInfoForm",value:function(){var e=this.state.user,t=[{name:"name",title:"Name",type:"text",initialValue:e.name},{name:"email",title:"Email",type:"email",initialValue:e.email}].map(function(t){return O({},t,{readOnly:e.isDisabled,required:!0})});return a.a.createElement(b.DynamicForm,{fields:t,onSubmit:this.saveUser,hideSubmitButton:e.isDisabled})}},{key:"renderApiKey",value:function(){var e=this.state,t=e.user,n=e.regeneratingApiKey;return a.a.createElement(c.a,{layout:"vertical"},a.a.createElement("hr",null),a.a.createElement(c.a.Item,{label:"API Key",className:"m-b-10"},a.a.createElement(v.default,{id:"apiKey",value:t.apiKey,"data-test":"ApiKey",readOnly:!0})),a.a.createElement(l.a,{className:"w-100",onClick:this.regenerateApiKey,loading:n,"data-test":"RegenerateApiKey"},"Regenerate"))}},{key:"renderPasswordLinkAlert",value:function(){var e=this,t=this.state,n=t.user,i=t.passwordLink;return a.a.createElement(o.a,{message:"Email not sent!",description:a.a.createElement(r.Fragment,null,a.a.createElement("p",null,"The mail server is not configured, please send the following link to ",a.a.createElement("b",null,n.name),":"),a.a.createElement(v.default,{value:Object(g.absoluteUrl)(i),readOnly:!0})),type:"warning",className:"m-t-20",afterClose:function(){e.setState({passwordLink:null})},closable:!0})}},{key:"renderResendInvitation",value:function(){return a.a.createElement(l.a,{className:"w-100 m-t-10",onClick:this.resendInvitation,loading:this.state.resendingInvitation},"Resend Invitation")}},{key:"renderSendPasswordReset",value:function(){var e=this.state.sendingPasswordEmail;return a.a.createElement(r.Fragment,null,a.a.createElement(l.a,{className:"w-100 m-t-10",onClick:this.sendPasswordReset,loading:e},"Send Password Reset Email"))}},{key:"rendertoggleUser",value:function(){var e=this.state,t=e.user,n=e.togglingUser;return t.isDisabled?a.a.createElement(l.a,{className:"w-100 m-t-10",type:"primary",onClick:this.toggleUser,loading:n},"Enable User"):a.a.createElement(l.a,{className:"w-100 m-t-10",type:"danger",onClick:this.toggleUser,loading:n},"Disable User")}},{key:"render",value:function(){var e=this.state,t=e.user,n=e.passwordLink;return a.a.createElement("div",{className:"col-md-4 col-md-offset-4"},a.a.createElement("img",{alt:"Profile",src:t.profileImageUrl,className:"profile__image",width:"40"}),a.a.createElement("h3",{className:"profile__h3"},t.name),a.a.createElement("hr",null),this.renderBasicInfoForm(),!t.isDisabled&&a.a.createElement(r.Fragment,null,this.renderApiKey(),a.a.createElement("hr",null),a.a.createElement("h5",null,"Password"),t.id===m.currentUser.id&&a.a.createElement(l.a,{className:"w-100 m-t-10",onClick:this.changePassword,"data-test":"ChangePassword"},"Change Password"),m.currentUser.isAdmin&&t.id!==m.currentUser.id&&a.a.createElement(r.Fragment,null,t.isInvitationPending?this.renderResendInvitation():this.renderSendPasswordReset(),n&&this.renderPasswordLinkAlert())),a.a.createElement("hr",null),m.currentUser.isAdmin&&t.id!==m.currentUser.id&&this.rendertoggleUser())}}])&&x(n.prototype,i),s&&x(n,s),t}();P(k,"propTypes",{user:h.UserProfile.isRequired})},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return o});n(19);var r=n(1),a=n.n(r),i=n(36);function o(e){var t=e.user,n=t.name,r=t.email,i=t.profileImageUrl;return a.a.createElement("div",{className:"col-md-4 col-md-offset-4 profile__container"},a.a.createElement("img",{alt:"profile",src:i,className:"profile__image",width:"40"}),a.a.createElement("h3",{className:"profile__h3"},n),a.a.createElement("hr",null),a.a.createElement("dl",{className:"profile__dl"},a.a.createElement("dt",null,"Name:"),a.a.createElement("dd",null,n),a.a.createElement("dt",null,"Email:"),a.a.createElement("dd",null,r)))}o.propTypes={user:i.UserProfile.isRequired}},function(e,t,n){"use strict";n.r(t),n.d(t,"getColumnCleanName",function(){return h}),n.d(t,"default",function(){return w});n(21),n(22),n(35),n(31),n(18),n(19),n(350),n(66),n(110);var r=n(64),a=n.n(r),i=n(10),o=n.n(i),s=n(2);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}v.$inject=["$resource","$timeout","$q","QueryResultError"];var d=a()("redash:services:QueryResult"),p=["filter","multi-filter","multiFilter"],f="*",m="-";function g(e){var t;if(-1!==e.indexOf("::"))t="::";else{if(-1===e.indexOf("__"))return e;t="__"}var n=e.split(t);return""===n[0]&&2===n.length?n[1]:Object(s.includes)(p,n[1])?n[0]:e}function h(e){return g(e)}function b(e){return g(e).replace(/(?:^|\s)\S/g,function(e){return e.toUpperCase()})}function y(e,t,n){void 0===t[n]&&(t[n]={name:n,type:"column",data:[]}),t[n].data.push(e)}function v(e,t,n,r){var a=e("api/query_results/:id",{id:"@id"},{post:{method:"POST"}}),i=e("api/jobs/:id",{id:"@id"}),g={1:"waiting",2:"processing",3:"done",4:"failed"};function v(e,t){403===t.status?e.update(t.data):400===t.status&&"job"in t.data?e.update(t.data):(d("Unknown error",t),e.update({job:{error:"unknown error occurred. Please try again later.",status:4}}))}return function(){function w(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,w),this.deferred=n.defer(),this.job={},this.query_result={},this.status="waiting",this.filters=void 0,this.filterFreeze=void 0,this.updatedAt=o()(),this.isLoadingResult=!1,e&&this.update(e)}var O,x,S;return O=w,S=[{key:"getById",value:function(e){var t=new w;return t.isLoadingResult=!0,a.get({id:e},function(e){t.isLoadingResult=!1,t.update(e)},function(e){t.isLoadingResult=!1,v(t,e)}),t}},{key:"getByQueryId",value:function(t,n,r){var a=new w;return e("api/queries/:id/results",{id:"@id"},{post:{method:"POST"}}).post({id:t,parameters:n,max_age:r},function(e){a.update(e),"job"in e&&a.refreshStatus(t)},function(e){v(a,e)}),a}},{key:"get",value:function(e,t,n,r,i){var o=new w,s={data_source_id:e,parameters:n,query:t,max_age:r};return void 0!==i&&(s.query_id=i),a.post(s,function(e){o.update(e),"job"in e&&o.refreshStatus(t)},function(e){v(o,e)}),o}}],(x=[{key:"update",value:function(e){if(u(this,e),"query_result"in e){this.status="done",this.filters=void 0,this.filterFreeze=void 0;var t={};Object(s.each)(this.query_result.data.rows,function(e){Object(s.forOwn)(e,function(n,r){var a=null;Object(s.isNumber)(n)?a="float":Object(s.isString)(n)&&n.match(/^\d{4}-\d{2}-\d{2}T/)?(e[r]=o.a.utc(n),a="datetime"):Object(s.isString)(n)&&n.match(/^\d{4}-\d{2}-\d{2}$/)?(e[r]=o.a.utc(n),a="date"):"object"===l(n)&&null!==n?e[r]=JSON.stringify(n):a="string",null!==a&&(void 0!==t[r]&&t[r]!==a?t[r]="string":t[r]=a)})}),Object(s.each)(this.query_result.data.columns,function(e){e.name=""+e.name,t[e.name]&&(null!=e.type&&"string"!==e.type||(e.type=t[e.name]))}),this.deferred.resolve(this)}else 3===this.job.status?this.status="processing":4===this.job.status?(this.status=g[this.job.status],this.deferred.reject(new r(this.job.error))):this.status=void 0}},{key:"getId",value:function(){var e=null;return"query_result"in this&&(e=this.query_result.id),e}},{key:"cancelExecution",value:function(){i.delete({id:this.job.id})}},{key:"getStatus",value:function(){return this.isLoadingResult?"loading-result":this.status||g[this.job.status]}},{key:"getError",value:function(){if("None"!==this.job.error)return this.job.error}},{key:"getLog",value:function(){return this.query_result.data&&this.query_result.data.log&&0!==this.query_result.data.log.length?this.query_result.data.log:null}},{key:"getUpdatedAt",value:function(){return this.query_result.retrieved_at||1e3*this.job.updated_at||this.updatedAt}},{key:"getRuntime",value:function(){return this.query_result.runtime}},{key:"getRawData",value:function(){return this.query_result.data?this.query_result.data.rows:null}},{key:"getData",value:function(){if(!this.query_result.data)return null;var e=this.getFilters(),t=function(e){return e?e.reduce(function(e,t){return e+t.current},""):null}(e);return this.filterFreeze!==t&&(this.filterFreeze=t,e?(e.forEach(function(e){e.multiple&&Object(s.includes)(e.current,f)&&(e.current=e.values.slice(2)),e.multiple&&Object(s.includes)(e.current,m)&&(e.current=[])}),this.filteredData=this.query_result.data.rows.filter(function(t){return e.reduce(function(e,n){return Object(s.isArray)(n.current)||(n.current=[n.current]),e&&Object(s.some)(n.current,function(e){var r=t[n.name];return o.a.isMoment(r)?r.isSame(e):e===r||String(r)===e})},!0)})):this.filteredData=this.query_result.data.rows),this.filteredData}},{key:"isEmpty",value:function(){return null===this.getData()||0===this.getData().length}},{key:"getChartData",value:function(e){var t={};return this.getData().forEach(function(n){var r,a={$raw:n},i=0,o={},l=null,u=null,c=null;Object(s.forOwn)(n,function(t,n){var s=(n=""+n).split("::")||n.split("__"),d=s[0],p=e?e[n]:s[1],f=t;"unused"!==p&&("x"===p&&(i=f,a[p]=f),"y"===p&&(null==f&&(f=0),o[d]=f,a[p]=f),"yError"===p&&(l=f,a[p]=f),"series"===p&&(r=String(f)),"size"===p&&(a[p]=f,u=f),"zVal"===p&&(a[p]=f,c=f),"multiFilter"!==p&&"multi-filter"!==p||(r=String(f)))}),void 0===r?Object(s.each)(o,function(e,n){a={x:i,y:e,$raw:a.$raw},null!==l&&(a.yError=l),null!==u&&(a.size=u),null!==c&&(a.zVal=c),y(a,t,n)}):y(a,t,r)}),Object(s.sortBy)(Object(s.values)(t),"name")}},{key:"getColumns",value:function(){return void 0===this.columns&&this.query_result.data&&(this.columns=this.query_result.data.columns),this.columns}},{key:"getColumnNames",value:function(){return void 0===this.columnNames&&this.query_result.data&&(this.columnNames=this.query_result.data.columns.map(function(e){return e.name})),this.columnNames}},{key:"getColumnCleanNames",value:function(){return this.getColumnNames().map(function(e){return h(e)})}},{key:"getColumnFriendlyNames",value:function(){return this.getColumnNames().map(function(e){return b(e)})}},{key:"getFilters",value:function(){return this.filters||this.prepareFilters(),this.filters}},{key:"prepareFilters",value:function(){if(this.getColumns()){var e=[];this.getColumns().forEach(function(t){var n=t.name,r=n.split("::")[1]||n.split("__")[1];if(Object(s.includes)(p,r)){var a={name:n,friendlyName:b(n),column:t,values:[],multiple:"multiFilter"===r||"multi-filter"===r};e.push(a)}},this),this.getRawData().forEach(function(t){e.forEach(function(e){e.values.push(t[e.name]),1===e.values.length&&(e.multiple?e.current=[t[e.name]]:e.current=t[e.name])})}),e.forEach(function(e){e.multiple&&(e.values.unshift(f),e.values.unshift(m))}),e.forEach(function(e){e.values=Object(s.uniqBy)(e.values,function(e){return o.a.isMoment(e)?e.unix():e})}),this.filters=e}}},{key:"toPromise",value:function(){return this.deferred.promise}},{key:"loadResult",value:function(e){var n=this;this.isLoadingResult=!0,a.get({id:this.job.query_result_id},function(e){n.update(e),n.isLoadingResult=!1},function(r){void 0===e&&(e=0),e>3?(d("Connection error while trying to load result",r),n.update({job:{error:"failed communicating with server. Please check your Internet connection and try again.",status:4}}),n.isLoadingResult=!1):t(function(){n.loadResult(e+1)},1e3*Math.pow(2,e))})}},{key:"refreshStatus",value:function(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;i.get({id:this.job.id},function(a){if(n.update(a),"processing"===n.getStatus()&&n.job.query_result_id&&"None"!==n.job.query_result_id)n.loadResult();else if("failed"!==n.getStatus()){t(function(){n.refreshStatus(e,r+1)},r>10?3e3:500)}},function(e){d("Connection error",e),n.update({job:{error:"failed communicating with server. Please check your Internet connection and try again.",status:4}})})}},{key:"getLink",value:function(e,t,n){var r="api/queries/".concat(e,"/results/").concat(this.getId(),".").concat(t);return n&&(r="".concat(r,"?api_key=").concat(n)),r}},{key:"getName",value:function(e,t){return"".concat(e.replace(/ /g,"_")+o()(this.getUpdatedAt()).format("_YYYY_MM_DD"),".").concat(t)}}])&&c(O.prototype,x),S&&c(O,S),w}()}function w(e){e.factory("QueryResult",v)}w.init=!0},,function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return c});var r=n(1),a=n.n(r),i=n(0),o=n.n(i),s=n(60),l=n(224),u=n(165);function c(e){var t=e.page,n=e.searchTerm,r=e.selectedTags;if(""!==n)return a.a.createElement(s.BigMessage,{message:"Sorry, we couldn't find anything.",icon:"fa-search"});if(r.length>0)return a.a.createElement(l.NoTaggedObjectsFound,{objectType:"dashboards",tags:r});switch(t){case"favorites":return a.a.createElement(s.BigMessage,{message:"Mark dashboards as Favorite to list them here.",icon:"fa-star"});default:return a.a.createElement(u.EmptyState,{icon:"zmdi zmdi-view-quilt",description:"See the big picture",illustration:"dashboard",helpLink:"https://help.redash.io/category/22-dashboards",showDashboardStep:!0})}}c.propTypes={page:o.a.string.isRequired,searchTerm:o.a.string.isRequired,selectedTags:o.a.array.isRequired}},function(e,t,n){"use strict";n.r(t);n(21),n(22),n(35),n(29),n(103);var r=n(2),a=n(1),i=n.n(a),o=n(0),s=n.n(o),l=n(699),u=n.n(l),c=n(43),d=n.n(c),p=n(42),f=n.n(p),m=n(140),g=n.n(m),h=n(11),b=n(34),y=n(139),v=n(223);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k="api/dashboards/{id}/share",_=function(e){function t(e){var n,a,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,i=S(t).call(this,e),n=!i||"object"!==w(i)&&"function"!=typeof i?j(a):i,P(j(n),"formItemProps",{labelCol:{span:8},wrapperCol:{span:16},style:{marginBottom:7}}),P(j(n),"enableAccess",function(){var e=n.props.dashboard;n.setState({saving:!0}),h.$http.post(n.apiUrl).success(function(t){e.publicAccessEnabled=!0,e.public_url=t.public_url}).error(function(){h.toastr.error("Failed to turn on sharing for this dashboard")}).finally(function(){n.setState({saving:!1})})}),P(j(n),"disableAccess",function(){var e=n.props.dashboard;n.setState({saving:!0}),h.$http.delete(n.apiUrl).success(function(){e.publicAccessEnabled=!1,delete e.public_url}).error(function(){h.toastr.error("Failed to turn off sharing for this dashboard")}).finally(function(){n.setState({saving:!1})})}),P(j(n),"onChange",function(e){e?n.enableAccess():n.disableAccess()});var o=n.props.dashboard;return n.state={saving:!1},n.apiUrl=Object(r.replace)(k,"{id}",o.id),n.disabled=n.props.hasQueryParams&&!o.publicAccessEnabled,n}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,i.a.Component),n=t,o=[{key:"headerContent",get:function(){return i.a.createElement(i.a.Fragment,null,"Share Dashboard",i.a.createElement("div",{className:"modal-header-desc"},"Allow public access to this dashboard with a secret address."," ",i.a.createElement(v.HelpTrigger,{type:"SHARE_DASHBOARD"})))}}],(a=[{key:"render",value:function(){var e=this.props,t=e.dialog,n=e.dashboard;return i.a.createElement(d.a,O({},t.props,{title:this.constructor.headerContent,footer:null}),i.a.createElement(f.a,{layout:"horizontal"},this.props.hasQueryParams&&i.a.createElement(f.a.Item,null,i.a.createElement(g.a,{message:"Sharing is currently not supported for dashboards containing queries with parameters.",type:"error"})),i.a.createElement(f.a.Item,O({label:"Allow public access"},this.formItemProps),i.a.createElement(u.a,{checked:n.publicAccessEnabled,onChange:this.onChange,loading:this.state.saving,disabled:this.disabled})),n.public_url&&i.a.createElement(f.a.Item,O({label:"Secret address"},this.formItemProps),i.a.createElement(y.default,{value:n.public_url}))))}}])&&x(n.prototype,a),o&&x(n,o),t}();P(_,"propTypes",{dashboard:s.a.object.isRequired,hasQueryParams:s.a.bool.isRequired,dialog:b.DialogPropType.isRequired}),t.default=Object(b.wrap)(_)},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return c});var r=n(1),a=n.n(r),i=n(0),o=n.n(i),s=n(60),l=n(224),u=n(165);function c(e){var t=e.page,n=e.searchTerm,r=e.selectedTags;if(""!==n)return a.a.createElement(s.BigMessage,{message:"Sorry, we couldn't find anything.",icon:"fa-search"});if(r.length>0)return a.a.createElement(l.NoTaggedObjectsFound,{objectType:"queries",tags:r});switch(t){case"favorites":return a.a.createElement(s.BigMessage,{message:"Mark queries as Favorite to list them here.",icon:"fa-star"});case"archive":return a.a.createElement(s.BigMessage,{message:"Archived queries will be listed here.",icon:"fa-archive"});case"my":return a.a.createElement("div",{className:"tiled bg-white p-15"},a.a.createElement("a",{href:"queries/new",className:"btn btn-primary btn-sm"},"Create your first query")," ","to populate My Queries list. Need help? Check out our"," ",a.a.createElement("a",{href:"https://redash.io/help/user-guide/querying/writing-queries"},"query writing documentation"),".");default:return a.a.createElement(u.EmptyState,{icon:"fa fa-code",illustration:"query",description:"Getting the data from your datasources.",helpLink:"https://help.redash.io/category/21-querying"})}}c.propTypes={page:o.a.string.isRequired,searchTerm:o.a.string.isRequired,selectedTags:o.a.array.isRequired}},,,,,,function(e,t){e.exports='<settings-screen>\n  <div class="row">\n    <type-picker img-root="/static/images/db-logos"\n                 types="types"\n                 title="New Data Source"\n                 on-type-select="setType"\n                 ng-if="dataSource.type === undefined"></type-picker>\n\n    <div ng-if="dataSource.type !== undefined" data-test="DataSource">\n      <div class="creation-container">\n        <div class="col-xs-12 col-sm-4">\n          <a ng-click="resetType()" ng-if="canChangeType"> Change <span class="hidden-xs">Type</span></a>\n        </div>\n\n        <div class="col-xs-12 col-sm-4 text-center">\n          <img ng-src="/static/images/db-logos/{{dataSource.type}}.png" alt="{{type.name}}" width="64">\n          <h3>{{type.name}}</h3>\n        </div>\n\n        <div class="col-xs-12 col-sm-4">\n          <p class="needhelp text-right text-center-xs" ng-if="helpLinks[type.type]">\n            <a ng-href="{{helpLinks[type.type]}}" target="_blank" >\n              Help <span class="hidden-xs">setting up {{type.name}}</span> <i class="fa fa-external-link" aria-hidden="true"></i>\n            </a>\n          </p>\n        </div>\n      </div>\n\n      <div class="clearboth"></div>\n\n      <div class="col-md-4 col-md-offset-4">\n        <dynamic-form target="dataSource" type="type" actions="actions">\n        </dynamic-form>\n      </div>\n    </div>\n  </div>\n</settings-screen>\n'},function(e,t){e.exports='<settings-screen>\n  <div class="row">\n    <type-picker img-root="/static/images/destinations"\n                 types="types"\n                 title="New Alert Destination"\n                 on-type-select="setType"\n                 ng-if="destination.type === undefined"></type-picker>\n\n    <div ng-if="destination.type !== undefined">\n      <div class="creation-container">\n        <div class="col-xs-12 col-sm-4">\n          <a ng-click="resetType()" ng-if="canChangeType"> Change Type</a>\n        </div>\n\n        <div class="col-xs-12 col-sm-4  text-center">\n          <img ng-src="/static/images/destinations/{{destination.type}}.png" alt="{{type.name}}" width="64">\n          <h3>{{type.name}}</h3>\n        </div>\n      </div>\n\n      <div class="clearboth"></div>\n\n      <div class="col-md-4 col-md-offset-4">\n        <dynamic-form target="destination" type="type" actions="actions">\n        </dynamic-form>\n      </div>\n    </div>\n  </div>\n</settings-screen>\n'},,,,,,,,,,,,,function(e,t,n){e.exports=n.p+"images/avatar.svg"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var r=n(17),a=n.n(r),i=n(2),o=n.n(i),s=(n(543),n(1118),n(1119),n(1121),n(300)),l=n.n(s);function u(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(t=o.a.filter(t,o.a.isFunction)).length>0?function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(var a=0;a<t.length;a+=1)t[a].apply(this,n)}:o.a.noop}function c(e){l.a.GridStackDragDropPlugin.call(this,e)}l.a.GridStackDragDropPlugin.registerPlugin(c),c.prototype=Object.create(l.a.GridStackDragDropPlugin.prototype),c.prototype.constructor=c,c.prototype.resizable=function(e,t,n,r){return e=a()(e),"disable"===t||"enable"===t?e.resizable(t):"option"===t?e.resizable(t,n,r):e.resizable(o.a.extend({},this.grid.opts.resizable,{start:u(this.grid.opts.resizable.start,t.start),stop:u(t.stop,this.grid.opts.resizable.stop),resize:u(t.resize,this.grid.opts.resizable.resize)})),this},c.prototype.draggable=function(e,t){return e=a()(e),"disable"===t||"enable"===t?e.draggable(t):e.draggable(o.a.extend({},this.grid.opts.draggable,{containment:this.grid.opts.isNested?this.grid.container.parent():null,start:u(this.grid.opts.draggable.start,t.start),stop:u(t.stop,this.grid.opts.draggable.stop),drag:u(t.drag,this.grid.opts.draggable.drag)})),this},c.prototype.droppable=function(e,t){return e=a()(e),"disable"===t||"enable"===t?e.droppable(t):e.droppable({accept:t.accept}),this},c.prototype.isDroppable=function(e){return Boolean(a()(e).data("droppable"))},c.prototype.on=function(e,t,n){return a()(e).on(t,n),this}},,,,,,function(e,t,n){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},,,,,,,,,,,,,,,,,,,,,,,function(e,t){e.exports='<div class="p-5">\n  <h4>Notifications</h4>\n\n  <div>\n    <ui-select ng-model="newSubscription.destination" ng-disabled="destinations.length == 0">\n      <ui-select-match><span ng-bind-html="destinationsDisplay($select.selected)"></span></ui-select-match>\n      <ui-select-choices repeat="d in destinations">\n        <span ng-bind-html="destinationsDisplay(d)"></span>\n      </ui-select-choices>\n    </ui-select>\n  </div>\n  <div class="m-t-5">\n    <button class="btn btn-default" ng-click="saveSubscriber()" ng-disabled="destinations.length == 0" style="width:50%;">Add</button>\n    <span class="pull-right m-t-5">\n      <a href="destinations/new" ng-if="currentUser.isAdmin">Create New Destination</a>\n    </span>\n  </div>\n\n  <hr/>\n\n  <div>\n    <div class="list-group-item" ng-repeat="subscriber in subscribers">\n      <span ng-bind-html="destinationsDisplay(subscriber)"></span>\n      <button class="btn btn-xs btn-danger pull-right" ng-click="unsubscribe(subscriber)" ng-if="currentUser.isAdmin || currentUser.id == subscriber.user.id">Remove</button>\n    </div>\n  </div>\n</div>\n'},function(e){e.exports="15c815fb5e573349bb7f3cf17ef6f7012ae63592"},function(e,t){e.exports='<nav class="navbar navbar-default app-header" role="navigation">\n  <div class="container">\n    <div class="navbar-header">\n      <button type="button" class="navbar-toggle" ng-click="isNavOpen = !isNavOpen">\n        <span class="sr-only">Toggle navigation</span>\n        <span class="icon-bar"></span>\n        <span class="icon-bar"></span>\n        <span class="icon-bar"></span>\n      </button>\n      \x3c!-- REDASH LOGO --\x3e\n      <a class="navbar-brand" ng-href="{{$ctrl.basePath}}"><img ng-src="{{$ctrl.logoUrl}}"/></a>\n    </div>\n    <div class="collapse navbar-collapse" uib-collapse="!isNavOpen">\n      \x3c!-- Main Left Nav--\x3e\n\n      <ul class="nav navbar-nav nav__main">\n        <li class="dropdown btn-group" ng-show="$ctrl.showDashboardsMenu" uib-dropdown>\n          <a class="btn" href="dashboards">Dashboards</a>\n          <a type="button" class="btn hidden-xs" uib-dropdown-toggle>\n            <span class="caret caret--nav"></span>\n          </a>\n          <ul class="dropdown-menu" uib-dropdown-menu>\n            <li ng-if="$ctrl.dashboards.length == 0">\n              <a>\n                <em>\n                  <span class="btn-favourite">\n                    <i class="fa fa-star" aria-hidden="true"></i>\n                  </span>\n                  Favorite Dashboards will appear here\n                </em>\n              </a>\n            </li>\n            <li ng-repeat="dashboard in $ctrl.dashboards">\n              <a href="dashboard/{{ dashboard.slug }}">\n                {{ dashboard.name }}\n              </a>\n            </li>\n          </ul>\n        </li>\n        <li class="dropdown btn-group" ng-show="$ctrl.showQueriesMenu" uib-dropdown>\n          <a class="btn" href="queries">Queries</a>\n          <a type="button" class="btn hidden-xs" uib-dropdown-toggle>\n            <span class="caret caret--nav"></span>\n          </a>\n          <ul class="dropdown-menu" uib-dropdown-menu>\n            <li ng-if="$ctrl.queries.length == 0">\n              <a>\n                <em>\n                  <span class="btn-favourite">\n                    <i class="fa fa-star" aria-hidden="true"></i>\n                  </span>\n                  Favorite Queries will appear here\n                </em>\n              </a>\n            </li>\n            <li ng-repeat="query in $ctrl.queries">\n              <a href="queries/{{ query.id }}">\n                {{ query.name }}\n              </a>\n            </li>\n          </ul>\n        </li>\n        <li ng-if="$ctrl.showAlertsLink">\n          <a href="alerts">Alerts</a>\n        </li>\n      </ul>\n\n      \x3c!-- Add New Button --\x3e\n      <div class="btn-group navbar-btn navbar-left btn__new hidden-xs" uib-dropdown is-open="status.isopen">\n        <button id="create-button" data-test="CreateButton" type="button" class="btn btn-primary btn--create" uib-dropdown-toggle ng-disabled="disabled">\n          Create <span class="caret caret--nav"></span>\n        </button>\n        <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="create-button">\n          <li role="menuitem" ng-show="$ctrl.showNewQueryMenu"><a href="queries/new">Query</a></li>\n          <li role="menuitem"><a ng-show="$ctrl.currentUser.hasPermission(\'create_dashboard\')" ng-click="$ctrl.newDashboard()">Dashboard</a></li>\n          <li role="menuitem"><a href="alerts/new">Alert</a></li>\n        </ul>\n      </div>\n\n      \x3c!-- Profile --\x3e\n      <ul class="nav navbar-nav navbar-right">\n        <li>\n          <help-trigger type="\'HOME\'" class-name="\'navbar-link-ANGULAR_REMOVE_ME\'"></help-trigger>\n        </li>\n        <li ng-show="$ctrl.currentUser.isAdmin">\n          <a href="data_sources" title="Settings"><i class="fa fa-sliders" aria-hidden="true"></i></a>\n        </li>\n        \x3c!--<li ng-show="$ctrl.showSettingsMenu">--\x3e\n          \x3c!--<a href="users" title="Settings"><i class="fa fa-cog"></i></a>--\x3e\n        \x3c!--</li>--\x3e\n        <li class="dropdown" uib-dropdown>\n          <a href="#" class="dropdown-toggle dropdown--profile" uib-dropdown-toggle data-test="ProfileDropdown">\n            <img ng-src="{{ $ctrl.currentUser.profile_image_url }}" class="profile__image--navbar" width="20"/>\n            <span class="dropdown--profile__username" ng-bind="$ctrl.currentUser.name"></span> <span\n            class="caret caret--nav"></span></a>\n          <ul class="dropdown-menu dropdown-menu--profile">\n            <li>\n              <a ng-href="users/me">Edit Profile</a>\n            </li>\n            <li class="divider" ng-if="$ctrl.currentUser.hasPermission(\'super_admin\')">\n\n            <li ng-show="$ctrl.currentUser.isAdmin">\n              <a href="data_sources" title="Data Sources">Data Sources</a>\n            </li>\n            <li ng-show="$ctrl.showSettingsMenu">\n              <a href="groups" title="Settings">Groups</a>\n            </li>\n            <li ng-show="$ctrl.showSettingsMenu">\n              <a href="users" title="Settings">Users</a>\n            </li>\n            <li>\n              <a ng-href="query_snippets">Query Snippets</a>\n            </li>\n            <li ng-show="$ctrl.showSettingsMenu">\n              <a href="destinations" title="Settings">Alert Destinations</a>\n            </li>\n\n            <li ng-if="$ctrl.currentUser.hasPermission(\'super_admin\')" class="divider"></li>\n\n            <li ng-if="$ctrl.currentUser.hasPermission(\'super_admin\')"><a href="admin/status">System Status</a></li>\n\n            <li class="divider"></li>\n\n            <li>\n              <a ng-click="$ctrl.logout()">Log out</a>\n            </li>\n\n            <li class="divider"></li>\n            <li class="dropdown-menu__version">\n              Version: {{$ctrl.backendVersion}}\n              <span ng-if="$ctrl.frontendVersion !== $ctrl.backendVersion">\n                ({{$ctrl.frontendVersion.substring(0, 8)}})\n              </span>\n              <span class="update-available" ng-if="$ctrl.currentUser.hasPermission(\'super_admin\') && $ctrl.newVersionAvailable">\n                <a href="https://version.redash.io/" target="_blank">\n                  <i class="fa fa-arrow-circle-down"></i>\n                </a>\n              </span>\n            </li>\n          </ul>\n        </li>\n      </ul>\n\n      \x3c!-- Search --\x3e\n      <form class="navbar-form navbar-right" role="search" ng-submit="$ctrl.searchQueries()">\n        <div class="input-group menu-search">\n          <input type="text" ng-model="$ctrl.searchTerm" class="form-control navbar__search__input" placeholder="Search queries...">\n          <span class="input-group-btn">\n            <button type="submit" class="btn btn-default"><span class="zmdi zmdi-search"></span></button>\n          </span>\n        </div>\n      </form>\n    </div>\n  </div>\n</nav>\n'},function(e,t){e.exports='<app-header ng-if="$ctrl.layout.showHeader"></app-header>\n<div ng-if="$ctrl.handler.error" class="fixed-container">\n  <div class="container">\n    <div class="col-md-8 col-md-push-2">\n      <div class="error-state bg-white tiled">\n         <div class="error-state__icon">\n           <i class="zmdi zmdi-alert-circle-o"></i>\n         </div>\n         <div class="error-state__details">\n           <h4>{{ $ctrl.handler.error.message }}</h4>\n         </div>\n       </div>\n    </div>\n  </div>\n</div>\n<div ng-if="!$ctrl.handler.error" ng-view></div>\n<footer ng-if="$ctrl.layout.showFooter"></footer>\n'},function(e,t){e.exports='<div data-test="EditDashboardDialog">\n  <div class="modal-header">\n    <button type="button" class="close" ng-click="$ctrl.dismiss()" ng-disabled="$ctrl.saveInProgress" aria-hidden="true">&times;</button>\n    <h4 class="modal-title">New Dashboard</h4>\n  </div>\n  <div class="modal-body" ng-if="$ctrl.policy.isCreateDashboardEnabled()">\n    <p>\n      <input type="text" class="form-control" placeholder="Dashboard Name" ng-model="$ctrl.dashboard.name" autofocus ng-keyup="$event.keyCode === 13 && $ctrl.saveDashboard()">\n    </p>\n  </div>\n  <div class="modal-footer" ng-if="$ctrl.policy.isCreateDashboardEnabled()">\n    <button type="button" class="btn btn-default" ng-disabled="$ctrl.saveInProgress" ng-click="$ctrl.dismiss()">Close</button>\n    <button type="button" class="btn btn-primary" ng-disabled="$ctrl.saveInProgress || !$ctrl.isFormValid()" ng-click="$ctrl.saveDashboard()" data-test="DashboardSaveButton">Save</button>\n  </div>\n\n  <div class="modal-body" ng-if="!$ctrl.policy.isCreateDashboardEnabled()">\n    <edit-dashboard-dialog-disabled></edit-dashboard-dialog-disabled>\n  </div>\n</div>'},function(e,t){e.exports='<div class="widget-wrapper">\n  <div class="tile body-container widget-visualization" ng-if="$ctrl.type==\'visualization\'" ng-class="$ctrl.type"\n    ng-switch="$ctrl.widget.getQueryResult().getStatus()">\n    <div class="body-row">\n      <div class="t-header widget clearfix">\n        <div class="dropdown pull-right widget-menu-remove"  ng-if="!$ctrl.public && $ctrl.dashboard.canEdit()">\n          <div class="actions">\n            <a ng-click="$ctrl.deleteWidget()" title="Remove From Dashboard"><i class="zmdi zmdi-close"></i></a>\n          </div>\n        </div>\n        <div class="dropdown pull-right widget-menu-regular" ng-if="!$ctrl.public"\n          uib-dropdown dropdown-append-to-body="true"\n        >\n          <div class="actions">\n            <a data-toggle="dropdown" uib-dropdown-toggle><i class="zmdi zmdi-more-vert"></i></a>\n          </div>\n\n          <ul class="dropdown-menu dropdown-menu-right" uib-dropdown-menu>\n            <li ng-class="{\'disabled\': $ctrl.widget.getQueryResult().isEmpty()}"><a ng-href="{{$ctrl.widget.getQueryResult().getLink($ctrl.widget.getQuery().id, \'csv\')}}" download="{{$ctrl.widget.getQueryResult().getName($ctrl.widget.getQuery().name, \'csv\')}}" target="_self">Download as CSV File</a></li>\n            <li ng-class="{\'disabled\': $ctrl.widget.getQueryResult().isEmpty()}"><a ng-href="{{$ctrl.widget.getQueryResult().getLink($ctrl.widget.getQuery().id, \'xlsx\')}}" download="{{$ctrl.widget.getQueryResult().getName($ctrl.widget.getQuery().name, \'xlsx\')}}" target="_self">Download as Excel File</a></li>\n\n            <li ng-if="$ctrl.canViewQuery || ($ctrl.dashboard.canEdit() && $ctrl.hasParameters())" class="divider"></li>\n            <li ng-if="$ctrl.canViewQuery"><a ng-href="{{$ctrl.widget.getQuery().getUrl(true, $ctrl.widget.visualization.id)}}">View Query</a></li>\n            <li ng-if="$ctrl.dashboard.canEdit() && $ctrl.hasParameters()">\n              <li ng-if="$ctrl.dashboard.canEdit() && $ctrl.hasParameters()"><a ng-click="$ctrl.editParameterMappings()">Edit Parameters</a></li>\n            </li>\n\n            <li ng-if="$ctrl.dashboard.canEdit()" class="divider"></li>\n            <li ng-if="$ctrl.dashboard.canEdit()"><a ng-click="$ctrl.deleteWidget()">Remove from Dashboard</a></li>\n          </ul>\n        </div>\n        <div class="th-title">\n          <p>\n            <query-link query="$ctrl.widget.getQuery()" visualization="$ctrl.widget.visualization"\n              readonly="!$ctrl.canViewQuery"></query-link>\n          </p>\n          <div class="text-muted query--description" ng-bind-html="$ctrl.widget.getQuery().description | markdown"></div>\n        </div>\n      </div>\n      <div class="m-b-10" ng-if="$ctrl.localParametersDefs().length > 0">\n        <parameters parameters="$ctrl.localParametersDefs()"></parameters>\n      </div>\n    </div>\n\n    <div ng-switch-when="failed" class="body-row-auto scrollbox">\n      <div class="alert alert-danger m-5" ng-show="$ctrl.widget.getQueryResult().getError()">Error running query: <strong>{{$ctrl.widget.getQueryResult().getError()}}</strong></div>\n    </div>\n    <div ng-switch-when="done" class="body-row-auto scrollbox">\n      <visualization-renderer visualization="$ctrl.widget.visualization" query-result="$ctrl.widget.getQueryResult()" class="t-body"></visualization-renderer>\n    </div>\n    <div ng-switch-default class="body-row-auto spinner-container">\n      <div class="spinner">\n        <i class="zmdi zmdi-refresh zmdi-hc-spin zmdi-hc-5x"></i>\n      </div>\n    </div>\n\n    <div class="body-row clearfix tile__bottom-control">\n      <a class="small hidden-print" ng-click="$ctrl.refresh()" ng-if="!$ctrl.public">\n        <i ng-class=\'{"zmdi-hc-spin": $ctrl.widget.loading}\' class="zmdi zmdi-refresh"></i>\n        <span am-time-ago="$ctrl.widget.getQueryResult().getUpdatedAt()" ng-if="!$ctrl.widget.loading"></span>\n        <rd-timer timestamp="$ctrl.widget.refreshStartedAt" ng-if="$ctrl.widget.loading"></rd-timer>\n      </a>\n      <span class="small hidden-print" ng-if="$ctrl.public">\n        <i class="zmdi zmdi-time-restore"></i> <span am-time-ago="$ctrl.widget.getQueryResult().getUpdatedAt()"></span>\n      </span>\n      <span class="visible-print">\n        <i class="zmdi zmdi-time-restore"></i> {{$ctrl.widget.getQueryResult().getUpdatedAt() | dateTime}}\n      </span>\n\n      <button class="btn btn-sm btn-default pull-right hidden-print btn-transparent btn__refresh" ng-click="$ctrl.refresh()" ng-if="!$ctrl.public"><i class="zmdi zmdi-refresh"></i></button>\n      <button class="btn btn-sm btn-default pull-right hidden-print btn-transparent btn__refresh" ng-click="$ctrl.expandVisualization()"><i class="zmdi zmdi-fullscreen"></i></button>\n    </div>\n  </div>\n\n  <div class="tile body-container widget-restricted" ng-if="$ctrl.type==\'restricted\'" ng-class="$ctrl.type">\n    <div class="t-body body-row-auto scrollbox">\n      <div class="text-center">\n        <h1><span class="zmdi zmdi-lock"></span></h1>\n        <p class="text-muted">\n          This widget requires access to a data source you don\'t have access to.\n        </p>\n      </div>\n    </div>\n  </div>\n\n  <div class="tile body-container widget-text" ng-hide="$ctrl.widget.width === 0" ng-if="$ctrl.type==\'textbox\'" ng-class="$ctrl.type">\n    <div class="body-row clearfix t-body">\n      <div class="dropdown pull-right widget-menu-remove" ng-if="!$ctrl.public && $ctrl.dashboard.canEdit()">\n        <div class="dropdown-header">\n          <a class="actions" ng-click="$ctrl.deleteWidget()" title="Remove From Dashboard"><i class="zmdi zmdi-close"></i></a>\n        </div>\n      </div>\n      <div class="dropdown pull-right widget-menu-regular" ng-if="!$ctrl.public && $ctrl.dashboard.canEdit()" uib-dropdown>\n        <div class="dropdown-header">\n          <a data-toggle="dropdown" uib-dropdown-toggle class="actions"><i class="zmdi zmdi-more"></i></a>\n        </div>\n\n        <ul class="dropdown-menu pull-right" uib-dropdown-menu style="z-index:1000000">\n          <li><a ng-show="$ctrl.dashboard.canEdit()" ng-click="$ctrl.editTextBox()">Edit</a></li>\n          <li><a ng-show="$ctrl.dashboard.canEdit()" ng-click="$ctrl.deleteWidget()">Remove From Dashboard</a></li>\n        </ul>\n      </div>\n    </div>\n    <div class="body-row-auto scrollbox tiled t-body p-15" ng-bind-html="$ctrl.widget.text | markdown"></div>\n  </div>\n</div>\n'},function(e,t){e.exports='<div class="modal-header">\n  <button type="button" class="close" aria-label="Close" ng-click="$ctrl.close()"><span aria-hidden="true">&times;</span></button>\n  <h4 class="modal-title">Edit TextBox</h4>\n</div>\n<div class="modal-body">\n  <div class="form-group">\n    <textarea class="form-control" style="resize: vertical" ng-model="$ctrl.widget.new_text" rows="3"></textarea>\n  </div>\n  <div ng-show="$ctrl.widget.new_text">\n    <strong>Preview:</strong>\n    <p ng-bind-html="$ctrl.widget.new_text | markdown" class="word-wrap-break"></p>\n  </div>\n</div>\n\n<div class="modal-footer">\n  <button type="button" class="btn btn-default" ng-disabled="$ctrl.saveInProgress" ng-click="$ctrl.close()">Close</button>\n  <button type="button" class="btn btn-primary" ng-disabled="$ctrl.saveInProgress" ng-click="$ctrl.saveWidget()">Save</button>\n</div>\n'},function(e,t){e.exports='<div class="modal-header">\n  <button type="button" class="close" aria-hidden="true" ng-click="$ctrl.dismiss()">&times;</button>\n  <div class="visualization-title">\n    <query-link query="$ctrl.widget.getQuery()" visualization="$ctrl.widget.visualization" readonly="true"></query-link>\n  </div>\n</div>\n<div class="modal-body">\n  <visualization-renderer visualization="$ctrl.widget.visualization" query-result="$ctrl.widget.getQueryResult()" class="t-body"></visualization-renderer>\n</div>\n<div class="modal-footer">\n  <button type="button" class="btn btn-default" ng-click="$ctrl.dismiss()">Close</button>\n</div>\n'},,function(e,t){e.exports='<td ng-class="\'content-align-\' + column.alignContent + \' display-as-\' + column.displayAs">\n  <div ng-if="allowHTML" ng-bind-html="value"></div>\n  <div ng-if="!allowHTML" ng-bind="value"></div>\n</td>\n'},function(e,t){e.exports='<div class="dynamic-table-container">\n  <table class="table table-condensed table-hover" data-test="DynamicTable">\n    <thead>\n      <tr>\n        <th ng-repeat="column in $ctrl.columns" ng-click="$ctrl.onColumnHeaderClick($event, column)"\n          class="sortable-column" ng-class="\'content-align-\' + column.alignContent + \' display-as-\' + column.displayAs">\n          <span ng-if="($ctrl.orderBy.length > 1) && ($ctrl.orderByColumnsIndex[column.name] > 0)"\n            class="sort-order-indicator">{{ $ctrl.orderByColumnsIndex[column.name] }}</span>\n          <span>{{column.title}}</span>\n          <i ng-if="$ctrl.orderByColumnsIndex[column.name] > 0"\n            ng-class="{\n              \'fa\': true,\n              \'fa-caret-down\': $ctrl.orderByColumnsDirection[column.name] > 0,\n              \'fa-caret-up\': $ctrl.orderByColumnsDirection[column.name] < 0\n            }"></i>\n        </th>\n        <th class="dynamic-table-spacer"></th>\n      </tr>\n    </thead>\n    <thead ng-if="$ctrl.searchColumns.length > 0">\n      <th class="p-t-10 p-b-10 p-l-15 p-r-15" colspan="{{ $ctrl.columns.length + 1 }}">\n        <input type="text" class="form-control" placeholder="Search..."\n          ng-model="$ctrl.searchTerm" ng-model-options="{ allowInvalid: true, debounce: 200 }"\n          ng-change="$ctrl.onSearchTermChanged()">\n      </th>\n    </thead>\n    <tbody>\n      <tr ng-repeat="row in $ctrl.rowsToDisplay"\n        dynamic-table-row columns="$ctrl.columns" row="row"\n        render="$ctrl.renderSingleRow"\n      ></tr>\n    </tbody>\n  </table>\n</div>\n<paginator paginator="$ctrl.paginatorAdapter"></paginator>\n'},function(e,t){e.exports='<td ng-class="\'display-as-\' + column.displayAs">\n  <div ng-if="!isValid" class="json-cell-invalid">{{ value }}</div>\n  <div ng-show="isValid" class="json-cell-valid"></div>\n</td>\n'},function(e,t){e.exports='<div class="parameter-container container bg-white" ng-show="$ctrl.filters | notEmpty">\n  <div class="row">\n    <div class="col-sm-6 p-l-0 filter-container" ng-repeat="filter in $ctrl.filters">\n      <label>{{filter.friendlyName}}</label>\n\n      <ui-select\n        ng-if="!filter.multiple"\n        ng-model="filter.current"\n        on-select="$ctrl.filterChangeListener(filter, $model)"\n        on-remove="$ctrl.filterChangeListener(filter, $model)"\n        remove-selected="false"\n        append-to-body="true"\n      >\n        <ui-select-match placeholder="Select value for {{filter.friendlyName}}...">{{$select.selected | filterValue:filter}}</ui-select-match>\n        <ui-select-choices repeat="value in filter.values | filter: $select.search">\n          {{value | filterValue:filter }}\n        </ui-select-choices>\n      </ui-select>\n\n      <ui-select\n        ng-if="filter.multiple"\n        multiple\n        ng-model="filter.current"\n        on-select="$ctrl.filterChangeListener(filter, $model)"\n        on-remove="$ctrl.filterChangeListener(filter, $model)"\n        remove-selected="false"\n        append-to-body="true"\n      >\n        <ui-select-match placeholder="Select value for {{filter.friendlyName}}...">{{$item | filterValue:filter}}</ui-select-match>\n        <ui-select-choices repeat="value in filter.values | filter: $select.search" group-by="$ctrl.itemGroup">\n          <span ng-if="value == \'*\'">\n            Select All\n          </span>\n          <span ng-if="value == \'-\'">\n            Clear\n          </span>\n          <span ng-if="value != \'*\' && value != \'-\'">\n            {{value | filterValue:filter }}\n          </span>\n        </ui-select-choices>\n      </ui-select>\n    </div>\n  </div>\n</div>\n'},function(e,t){e.exports='<div class="parameter-container form-inline bg-white"\n  ng-if="parameters | notEmpty"\n  ui-sortable="{ \'ui-floating\': true, \'disabled\': !editable }"\n  ng-model="parameters"\n>\n  <div class="form-group m-r-10" ng-repeat="param in parameters">\n    <label class="parameter-label">{{param.title}}</label>\n    <button class="btn btn-default btn-xs" ng-if="editable" ng-click="showParameterSettings(param, $index)">\n      <i class="zmdi zmdi-settings"></i>\n    </button>\n    <parameter-value-input param="param"></parameter-value-input>\n  </div>\n</div>\n'},function(e,t){e.exports='<div class="modal-header">\n    <button type="button" class="close" aria-label="Close" ng-click="$ctrl.close()"><span aria-hidden="true">&times;</span></button>\n    <h4 class="modal-title">Manage Permissions</h4>\n</div>\n<div class="modal-body">\n  <div style="overflow: auto; height: 300px">\n    <ui-select ng-model="$ctrl.newGrantees.selected" on-select="$ctrl.addGrantee($item)">\n       <ui-select-match placeholder="Add New User"></ui-select-match>\n       <ui-select-choices repeat="user in $ctrl.foundUsers | filter:$select.search"\n                         refresh="$ctrl.findUser($select.search)"\n                         refresh-delay="0"\n                         ui-disable-choice="user.alreadyGrantee">\n        <div class="d-flex align-items-center">\n          <img ng-src="{{ user.profile_image_url }}" class="profile__image" height="24px">&nbsp;\n          <span ng-class="{\'text-muted\': user.is_disabled}">{{user.name}}</span>\n          &nbsp;<small ng-if="user.alreadyGrantee">(already has permission)</small>\n        </div>\n       </ui-select-choices>\n    </ui-select>\n      <br>\n      <h5>Who has access</h5>\n       <table class="table table-condensed table-hover table--permission">\n        <thead>\n          <tr>\n            <th></th>\n            <th>User</th>\n            <th>Permission</th>\n            <th></th>\n          </tr>\n        </thead>\n        <tbody>\n        <tr>\n          <td width="32px"><img ng-src="{{ $ctrl.owner.profile_image_url }}" class="profile__image" height="32px"/></td>\n          <td class="text-muted"> {{ $ctrl.owner.name}}</td>\n          <td class="mp__permission-type">Owner</td>\n          <td></td>\n        </tr>\n        <tr ng-repeat="grantee in $ctrl.grantees" ng-if="grantee.id != $ctrl.owner.id">\n          <td width="32px"><img ng-src="{{ grantee.profile_image_url }}" class="profile__image" height="32px"/></td>\n          <td ng-class="{\'text-muted\': grantee.is_disabled}">{{grantee.name}}</td>\n          <td class="mp__permission-type">{{grantee.access_type}}</td>\n          <td><button class="pull-right btn btn-sm btn-danger" ng-click="$ctrl.removeGrantee(grantee)">Remove</button></td>\n        </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n'},function(e,t){e.exports='<div class="modal-header">\n  <button type="button" class="close" aria-label="Close" ng-click="$ctrl.close()"><span aria-hidden="true">&times;</span></button>\n  <h4 class="modal-title">Embed Code</h4>\n</div>\n<div class="modal-body">\n  <h5>IFrame Embed</h5>\n  <div>\n    <code>&lt;iframe src="{{ $ctrl.embedUrl }}" width="720" height="391"&gt;&lt;/iframe&gt;</code>\n  </div>\n  <span class="text-muted">(height should be adjusted)</span>\n  <div ng-if="$ctrl.snapshotUrl">\n    <h5>Image Embed</h5>\n    <div>\n      <code style="overflow-wrap:break-word;">{{$ctrl.snapshotUrl}}</code>\n    </div>\n  </div>\n</div>'},function(e,t){e.exports='<div class="schema-container" ng-if="$ctrl.schema">\n  <div class="schema-control">\n    <input type="text" placeholder="Search schema..." class="form-control" ng-model="$ctrl.schemaFilter" ng-model-options="{ debounce: 500 }" ng-disabled="$ctrl.isEmpty()" ng-change="$ctrl.splitFilter($ctrl.schemaFilter);">\n    <button class="btn btn-default"\n            title="Refresh Schema"\n            ng-click="$ctrl.onRefresh()">\n      <span class="zmdi zmdi-refresh"></span>\n    </button>\n  </div>\n\n  <div class="schema-browser" vs-repeat vs-size="$ctrl.getSize(table)">\n    <div ng-repeat="table in $ctrl.schema | filter:$ctrl.schemaFilterObject track by table.name">\n      <div class="table-name" ng-click="$ctrl.showTable(table)">\n        <i class="fa fa-table"></i>\n        <strong>\n          <span title="{{table.name}}">{{table.name}}</span>\n          <span ng-if="table.size !== undefined"> ({{table.size}})</span>\n        </strong>\n        <i class="fa fa-angle-double-right copy-to-editor" aria-hidden="true"\n          ng-click="$ctrl.itemSelected($event, [table.name])"></i>\n      </div>\n      <div uib-collapse="table.collapsed">\n        <div ng-repeat="column in table.columns | filter:$ctrl.schemaFilterColumn track by column" class="table-open">{{column}}\n          <i class="fa fa-angle-double-right copy-to-editor" aria-hidden="true"\n            ng-click="$ctrl.itemSelected($event, [column])"></i>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'},function(e,t){e.exports='<div class="tile m-l-10 m-r-10 embed__vis">\n  <div class="embed-heading p-t-10 p-b-10 p-r-15 p-l-15">\n    <h3>\n      <img ng-src="{{$ctrl.logoUrl}}" style="height: 24px;"/>\n      <visualization-name visualization="$ctrl.visualization"/>\n      {{$ctrl.query.name}}\n\n      <small ng-if="$ctrl.showQueryDescription">\n        <div class="text-muted" ng-bind-html="$ctrl.query.description | markdown"></div>\n      </small>\n    </h3>\n  </div>\n\n  <div class="col-md-12 query__vis">\n    <visualization-renderer visualization="$ctrl.visualization" query-result="$ctrl.queryResult" class="t-body">\n    </visualization-renderer>\n  </div>\n\n  <div class="clearfix tile__bottom-control">\n    <div class="row">\n      <div class="col-xs-6">\n        <span class="small hidden-print"><i class="zmdi zmdi-time-restore"></i> <span am-time-ago="$ctrl.queryResult.getUpdatedAt()"></span></span>\n        <span class="small visible-print"><i class="zmdi zmdi-time-restore"></i> {{$ctrl.queryResult.getUpdatedAt() | dateTime}} UTC</span>\n      </div>\n      <div class="col-xs-6 text-right hidden-print">\n        <a class="btn btn-default btn-sm" ng-href="queries/{{$ctrl.query.id}}#{{$ctrl.visualization.id}}" target="_blank" tooltip="Open in Redash">\n          <span class="zmdi zmdi-link"></span>\n        </a>\n\n        <div class="btn-group" uib-dropdown>\n          <button type="button" class="btn btn-default btn-sm dropdown-toggle" aria-haspopup="true" uib-dropdown-toggle\n                  aria-expanded="false">\n            Download Dataset <span class="caret"></span>\n          </button>\n          <ul class="dropdown-menu pull-right" uib-dropdown-menu>\n            <li>\n              <a ng-href="{{$ctrl.queryResult.getLink($ctrl.query.id, \'csv\', $ctrl.apiKey)}}" download="{{$ctrl.queryResult.getName($ctrl.query.name, \'csv\')}}" target="_self">\n                <span class="fa fa-file-o"></span> Download as CSV File\n              </a>\n            </li>\n            <li>\n              <a ng-href="{{$ctrl.queryResult.getLink($ctrl.query.id, \'xlsx\', $ctrl.apiKey)}}" download="{{$ctrl.queryResult.getName($ctrl.query.name, \'xlsx\')}}"  target="_self">\n                <span class="fa fa-file-excel-o"></span> Download as Excel File\n              </a>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'},function(e,t){e.exports='<div class="container">\n  <page-header title="\'Settings\'"></page-header>\n\n  <div class="bg-white tiled">\n    <ul class="tab-nav">\n      <li\n        ng-repeat="menuItem in $ctrl.settingsMenu.items"\n        ng-if="$ctrl.isAvailable(menuItem.permission)"\n        ng-class="{\'active\': $ctrl.isActive(menuItem)}"\n      >\n        <a href="{{menuItem.path}}">{{menuItem.title}}</a>\n      </li>\n\n    </ul>\n    <div class="p-15">\n      <div ng-transclude>\n\n      </div>\n    </div>\n  </div>\n</div>\n'},function(e,t){e.exports='<div class="col-lg-12 creation-container">\n    <h3 class="text-center">{{$ctrl.title}}</h3>\n\n    <div class="row">\n    <div class="col-md-4 col-md-offset-4">\n        <div class="form-group">\n            <input type="text" class="form-control" placeholder="Search..." ng-model="$ctrl.filter.name" autofocus>\n        </div>\n    </div>\n    </div>\n\n    <div class="row">\n        <div class="col-lg-12 database-source" data-test="TypePicker">\n            <div class="visual-card" ng-repeat="type in $ctrl.types | filter:$ctrl.filter:strict" ng-click="$ctrl.onTypeSelect(type)">\n            <img ng-src="{{$ctrl.imgRoot}}/{{type.type}}.png" alt="{{type.name}}">\n            <h3>{{type.name}}</h3>\n        </div>\n    </div>\n</div>\n</div>\n'},function(e,t){e.exports='<div class="form-horizontal">\n  <div class="form-group">\n    <label class="col-lg-6">X Axis Label</label>\n    <div class="col-lg-6">\n      <input type="text" ng-model="visualization.options.xAxisLabel" class="form-control">\n    </div>\n  </div>\n\n  <div class="form-group">\n    <label class="col-lg-6">Y Axis Label</label>\n    <div class="col-lg-6">\n      <input type="text" ng-model="visualization.options.yAxisLabel" class="form-control">\n    </div>\n  </div>\n</div>\n'},function(e,t){e.exports='<div ng-if="plotlyOptions.globalSeriesType != \'custom\'">\n  <plotly-chart options="plotlyOptions" series="chartSeries"></plotly-chart>\n</div>\n<div ng-if="plotlyOptions.globalSeriesType == \'custom\'">\n  <custom-plotly-chart series="chartSeries" options="plotlyOptions"></custom-plotly-chart>\n</div>\n'},function(e,t){e.exports='<div>\n  <ul class="tab-nav">\n    <li ng-class="{active: currentTab == \'general\'}">\n      <a ng-click="changeTab(\'general\')">General</a>\n    </li>\n    <li ng-class="{active: currentTab == \'xAxis\'}" ng-if="options.globalSeriesType != \'custom\'">\n      <a ng-click="changeTab(\'xAxis\')">X Axis</a>\n    </li>\n    <li ng-class="{active: currentTab == \'yAxis\'}" ng-if="options.globalSeriesType != \'custom\'">\n      <a ng-click="changeTab(\'yAxis\')">Y Axis</a>\n    </li>\n    <li ng-class="{active: currentTab == \'series\'}" ng-if="options.globalSeriesType != \'custom\'">\n      <a ng-click="changeTab(\'series\')">Series</a>\n    </li>\n    <li ng-class="{active: currentTab == \'colors\'}" ng-if="options.globalSeriesType != \'custom\'">\n      <a ng-click="changeTab(\'colors\')">Colors</a>\n    </li>\n    <li ng-class="{active: currentTab == \'dataLabels\'}" ng-if="options.globalSeriesType != \'custom\'">\n      <a ng-click="changeTab(\'dataLabels\')">Data Labels</a>\n    </li>\n  </ul>\n  <div ng-if="currentTab == \'general\'" class="m-t-10 m-b-10">\n    <div class="form-group">\n      <label class="control-label">Chart Type</label>\n      <div ng-if="chartTypes">\n        \x3c!--the if is a weird workaround--\x3e\n        <ui-select ng-model="options.globalSeriesType" on-select="chartTypeChanged()">\n          <ui-select-match placeholder="Choose chart type...">\n            <div>\n              <i class="fa fa-{{$select.selected.value.icon}}"></i>\n              {{$select.selected.value.name}}\n            </div>\n          </ui-select-match>\n          <ui-select-choices repeat="info.chartType as (chartType, info) in chartTypes">\n            <div>\n              <i class="fa fa-{{info.value.icon}}"></i>\n              <span> </span>\n              <span ng-bind-html="info.value.name | highlight: $select.search"></span>\n            </div>\n          </ui-select-choices>\n        </ui-select>\n      </div>\n    </div>\n\n    <div class="form-group" ng-class="{\'has-error\': chartEditor.xAxisColumn.$invalid}">\n      <label class="control-label">X Column</label>\n\n      <ui-select name="xAxisColumn" required ng-model="form.xAxisColumn">\n        <ui-select-match placeholder="Choose column...">{{$select.selected}}</ui-select-match>\n        <ui-select-choices repeat="column in columnNames | remove:form.yAxisColumns | remove:form.groupby">\n          <span ng-bind-html="column | highlight: $select.search"></span>\n          <span> </span>\n          <small class="text-muted" ng-bind="columns[column].type"></small>\n        </ui-select-choices>\n      </ui-select>\n    </div>\n\n    \x3c!-- not using regular validation (chartEditor.yAxisColumns.$invalid) due to a bug in ui-select with multiple choices--\x3e\n    <div class="form-group" ng-class="{\'has-error\': !form.yAxisColumns || form.yAxisColumns.length == 0}">\n      <label class="control-label">Y Columns</label>\n\n      <ui-select multiple name="yAxisColumns" required ng-model="form.yAxisColumns">\n        <ui-select-match placeholder="Choose columns...">{{$item}}</ui-select-match>\n        <ui-select-choices repeat="column in columnNames | remove:form.groupby | remove:form.xAxisColumn">\n          <span ng-bind-html="column | highlight: $select.search"></span>\n          <span> </span>\n          <small class="text-muted" ng-bind="columns[column].type"></small>\n        </ui-select-choices>\n      </ui-select>\n\n    </div>\n\n    <div class="form-group" ng-if="[\'custom\', \'heatmap\'].indexOf(options.globalSeriesType) == -1">\n      <label class="control-label">Group by</label>\n      <ui-select name="groupby" ng-model="form.groupby" class="clearable">\n        <ui-select-match allow-clear="true" placeholder="Choose column...">\n          {{$select.selected}}\n        </ui-select-match>\n        <ui-select-choices repeat="column in columnNames | remove:form.yAxisColumns | remove:form.xAxisColumn">\n          <span ng-bind-html="column | highlight: $select.search"></span>\n          <span> </span>\n          <small class="text-muted" ng-bind="columns[column].type"></small>\n        </ui-select-choices>\n      </ui-select>\n    </div>\n\n    <div class="form-group" ng-if="showSizeColumnPicker()">\n      <label class="control-label">Bubble size column</label>\n\n      <ui-select name="sizeColumn" ng-model="form.sizeColumn">\n        <ui-select-match allow-clear="true" placeholder="Choose column...">{{$select.selected}}</ui-select-match>\n        <ui-select-choices repeat="column in columnNames | remove:form.yAxisColumns | remove:form.groupby">\n          <span ng-bind-html="column | highlight: $select.search"></span>\n          <span> </span>\n          <small class="text-muted" ng-bind="columns[column].type"></small>\n        </ui-select-choices>\n      </ui-select>\n    </div>\n\n    <div class="form-group" ng-if="showZColumnPicker()">\n      <label class="control-label">Color Column</label>\n\n      <ui-select name="zValColumn" ng-model="form.zValColumn">\n        <ui-select-match allow-clear="true" placeholder="Choose column...">{{$select.selected}}</ui-select-match>\n        <ui-select-choices repeat="column in columnNames | remove:form.yAxisColumns | remove:form.groupby">\n          <span ng-bind-html="column | highlight: $select.search"></span><span> </span>\n          <small class="text-muted" ng-bind="columns[column].type"></small>\n        </ui-select-choices>\n      </ui-select>\n    </div>\n\n    <div class="form-group" ng-if="[\'custom\', \'heatmap\'].indexOf(options.globalSeriesType) == -1">\n      <label class="control-label">Errors column</label>\n\n      <ui-select name="errorColumn" ng-model="form.errorColumn">\n        <ui-select-match allow-clear="true" placeholder="Choose column...">{{$select.selected}}</ui-select-match>\n        <ui-select-choices repeat="column in columnNames | remove:form.yAxisColumns | remove:form.groupby">\n          <span ng-bind-html="column | highlight: $select.search"></span>\n          <span> </span>\n          <small class="text-muted" ng-bind="columns[column].type"></small>\n        </ui-select-choices>\n      </ui-select>\n    </div>\n\n    <div class="checkbox" ng-if="[\'custom\', \'heatmap\'].indexOf(options.globalSeriesType) == -1">\n      <label>\n        <input type="checkbox" ng-model="options.legend.enabled">\n        <i class="input-helper"></i> Show Legend\n      </label>\n    </div>\n\n    <div class="checkbox" ng-if="options.globalSeriesType == \'box\'">\n      <label>\n        <input type="checkbox" ng-model="options.showpoints">\n        <i class="input-helper"></i> Show All Points\n      </label>\n    </div>\n\n    <div class="form-group" ng-if="[\'custom\', \'heatmap\'].indexOf(options.globalSeriesType) == -1">\n      <label class="control-label">Stacking</label>\n\n      <div ng-if="stackingOptions">\n        \x3c!--the if is a weird workaround--\x3e\n        <ui-select ng-model="options.series.stacking" ng-disabled="[\'line\', \'area\', \'column\'].indexOf(options.globalSeriesType) == -1">\n          <ui-select-match placeholder="Choose stacking...">{{ $select.selected.key }}</ui-select-match>\n          <ui-select-choices repeat="value.value as (key, value) in stackingOptions">\n            <div ng-bind-html="value.key | highlight: $select.search"></div>\n          </ui-select-choices>\n        </ui-select>\n      </div>\n\n      <div ng-if="[\'line\', \'area\', \'column\'].indexOf(options.globalSeriesType) >= 0" class="checkbox">\n        <label class="control-label">\n          <input type="checkbox" ng-model="options.series.percentValues"> Normalize values to percentage\n        </label>\n      </div>\n    </div>\n  </div>\n\n  <div ng-if="options.globalSeriesType == \'custom\'">\n    <div class="form-group">\n      <label class="control-label">Custom code</label>\n      <textarea ng-model="options.customCode" class="form-control v-resizable" rows="10">\n      </textarea>\n    </div>\n\n    <div class="checkbox">\n      <label>\n        <input type="checkbox" ng-model="options.enableConsoleLogs">\n        <i class="input-helper"></i> Show errors in the console\n      </label>\n    </div>\n\n    <div class="checkbox">\n      <label>\n        <input type="checkbox" ng-model="options.autoRedraw">\n        <i class="input-helper"></i> Auto update graph\n      </label>\n    </div>\n  </div>\n\n  <div ng-if="currentTab == \'xAxis\'" class="m-t-10 m-b-10">\n    <div class="form-group">\n      <label class="control-label">Scale</label>\n      <ui-select ng-model="options.xAxis.type">\n        <ui-select-match placeholder="Choose Scale...">{{$select.selected.label}}</ui-select-match>\n        <ui-select-choices repeat="scaleType.value as scaleType in xAxisScales">\n          <div ng-bind-html="scaleType.label | highlight: $select.search"></div>\n        </ui-select-choices>\n      </ui-select>\n    </div>\n\n    <div class="form-group">\n      <label class="control-label">Name</label>\n      <input ng-model="options.xAxis.title.text" type="text" class="form-control">\n    </div>\n\n    <div class="checkbox">\n      <label>\n        <input type="checkbox" ng-model="options.sortX">\n        <i class="input-helper"></i> Sort Values\n      </label>\n    </div>\n\n    <div class="checkbox">\n      <label>\n        <input type="checkbox" ng-model="options.reverseX">\n        <i class="input-helper"></i> Reverse Order\n      </label>\n    </div>\n\n    <div class="checkbox">\n      <label>\n        <input type="checkbox" ng-model="options.xAxis.labels.enabled">\n        <i class="input-helper"></i> Show Labels\n      </label>\n    </div>\n  </div>\n\n  <div ng-if="currentTab == \'yAxis\'" class="m-t-10 m-b-10">\n    <div ng-repeat="yAxis in options.yAxis">\n      <h4>{{$index == 0 ? \'Left\' : \'Right\'}} Y Axis</h4>\n\n      <div class="form-group">\n        <label class="control-label">Scale</label>\n        <ui-select ng-model="yAxis.type">\n          <ui-select-match placeholder="Choose Scale...">{{$select.selected | capitalize}}</ui-select-match>\n          <ui-select-choices repeat="scaleType in yAxisScales">\n            <div ng-bind-html="scaleType | capitalize | highlight: $select.search"></div>\n          </ui-select-choices>\n        </ui-select>\n      </div>\n      <div class="form-group">\n        <label class="control-label">Name</label>\n        <input ng-model="yAxis.title.text" type="text" class="form-control">\n      </div>\n      <div class="form-group">\n        <label class="control-label">Min Value</label>\n        <input ng-model="yAxis.rangeMin" type="number" step="any" placeholder="Auto" class="form-control">\n      </div>\n      <div class="form-group">\n        <label class="control-label">Max Value</label>\n        <input ng-model="yAxis.rangeMax" type="number" step="any" placeholder="Auto" class="form-control">\n      </div>\n\n      <div class="checkbox" ng-if="options.globalSeriesType == \'heatmap\'">\n        <label>\n          <input type="checkbox" ng-model="options.sortY">\n          <i class="input-helper"></i> Sort Values\n        </label>\n      </div>\n\n      <div class="checkbox">\n        <label>\n          <input type="checkbox" ng-model="options.reverseY">\n          <i class="input-helper"></i> Reverse Order\n        </label>\n      </div>\n\n    </div>\n  </div>\n\n  <div ng-if="currentTab == \'series\'" class="m-t-10 m-b-10">\n    <table class="table table-condensed col-table">\n      <thead>\n        <th style="width: 1%;">zIndex</th>\n        <th ng-if="options.globalSeriesType != \'pie\'">Left Y Axis</th>\n        <th ng-if="options.globalSeriesType != \'pie\'">Right Y Axis</th>\n        <th>Label</th>\n        <th ng-if="options.globalSeriesType != \'pie\'">Type</th>\n      </thead>\n      <tbody ui-sortable ng-model="form.seriesList">\n        <tr ng-repeat="name in form.seriesList">\n          <td style="width: 1%; cursor: move;">\n            <i class="fa fa-arrows-v"></i>\n            <span ng-bind="options.seriesOptions[name].zIndex + 1"></span>\n          </td>\n          <td ng-if="options.globalSeriesType != \'pie\'">\n            <input type="radio" ng-value="0" ng-model="options.seriesOptions[name].yAxis">\n          </td>\n          <td ng-if="options.globalSeriesType != \'pie\'">\n            <input type="radio" ng-value="1" ng-model="options.seriesOptions[name].yAxis">\n          </td>\n          <td style="padding: 3px; width: 140px;">\n            <input placeholder="{{name}}" class="form-control input-sm super-small-input" type="text" ng-model="options.seriesOptions[name].name">\n          </td>\n          <td ng-if="options.globalSeriesType != \'pie\'" style="padding: 3px; width: 105px;">\n            <ui-select ng-model="options.seriesOptions[name].type">\n              <ui-select-match placeholder="Chart Type">\n                <div>\n                  <i class="fa fa-{{$select.selected.value.icon}}"></i>\n                  {{$select.selected.value.name}}\n                </div>\n              </ui-select-match>\n              <ui-select-choices repeat="info.chartType as (chartType, info) in chartTypes">\n                <div>\n                  <i class="fa fa-{{info.value.icon}}"></i>\n                  <span> </span>\n                  <span ng-bind-html="info.value.name | highlight: $select.search"></span>\n                </div>\n              </ui-select-choices>\n            </ui-select>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n\n  <div ng-if="(currentTab == \'colors\') && ([\'pie\', \'heatmap\'].indexOf(options.globalSeriesType) == -1)" class="m-t-10 m-b-10">\n    <table class="table table-condensed col-table">\n      <tbody>\n      <tr ng-repeat="name in form.seriesList">\n        <td style="padding: 3px; width: 140px;">\n          <div>{{ name }}</div>\n        </td>\n        <td style="padding: 3px; width: 35px;">\n          <ui-select ng-model="options.seriesOptions[name].color">\n            <ui-select-match>\n              <color-box color="$select.selected.value"></color-box>\n            </ui-select-match>\n            <ui-select-choices repeat="color.value as (key, color) in colors">\n              <color-box color="color.value"></color-box>\n              <span ng-bind-html="color.key | capitalize | highlight: $select.search"></span>\n            </ui-select-choices>\n          </ui-select>\n        </td>\n      </tr>\n      </tbody>\n    </table>\n  </div>\n\n  <div ng-if="(currentTab == \'colors\') && (options.globalSeriesType == \'heatmap\')" class="m-t-10 m-b-10">\n    <div class="form-group" ng-if="options.globalSeriesType == \'heatmap\'">\n      <label class="control-label">Color Scheme</label>\n\n      <ui-select ng-model="options.colorScheme">\n        <ui-select-match allow-clear="true" placeholder="Choose Color Scheme...">{{$select.selected | capitalize}}</ui-select-match>\n        <ui-select-choices repeat="value in colorScheme">\n          <div ng-bind-html="value | highlight: $select.search"></div>\n        </ui-select-choices>\n      </ui-select>\n    </div>\n\n    <div class="row">\n      <div class="col-xs-6">\n        <div class="form-group" ng-if="options.colorScheme == \'Custom...\'">\n          <label class="control-label">Min Color</label>\n          <ui-select ng-model="options.heatMinColor">\n            <ui-select-match>\n              <color-box color="$select.selected.value"></color-box>\n            </ui-select-match>\n            <ui-select-choices repeat="color.value as (key, color) in colors">\n              <color-box color="color.value"></color-box>\n              <span ng-bind-html="color.key | capitalize | highlight: $select.search"></span>\n            </ui-select-choices>\n          </ui-select>\n        </div>\n      </div>\n      <div class="col-xs-6">\n        <div class="form-group" ng-if="options.colorScheme == \'Custom...\'">\n          <label class="control-label">Max Color</label>\n          <ui-select ng-model="options.heatMaxColor">\n            <ui-select-match>\n              <color-box color="$select.selected.value"></color-box>\n            </ui-select-match>\n            <ui-select-choices repeat="color.value as (key, color) in colors">\n              <color-box color="color.value"></color-box>\n              <span ng-bind-html="color.key | capitalize | highlight: $select.search"></span>\n            </ui-select-choices>\n          </ui-select>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div ng-if="(currentTab == \'colors\') && (options.globalSeriesType == \'pie\')" class="m-t-10 m-b-10">\n    <table class="table table-condensed col-table">\n      <tbody>\n      <tr ng-repeat="name in form.valuesList">\n        <td style="padding: 3px; width: 140px;">\n          <div>{{ name }}</div>\n        </td>\n        <td style="padding: 3px; width: 35px;">\n          <ui-select ng-model="options.valuesOptions[name].color">\n            <ui-select-match>\n              <color-box color="$select.selected.value"></color-box>\n            </ui-select-match>\n            <ui-select-choices repeat="color.value as (key, color) in colors">\n              <color-box color="color.value"></color-box>\n              <span ng-bind-html="color.key | capitalize | highlight: $select.search"></span>\n            </ui-select-choices>\n          </ui-select>\n        </td>\n      </tr>\n      </tbody>\n    </table>\n  </div>\n\n  <div ng-if="currentTab == \'dataLabels\'" class="m-t-10 m-b-10">\n    <div ng-if="[\'line\', \'area\', \'column\', \'scatter\', \'pie\', \'heatmap\'].indexOf(options.globalSeriesType) >= 0" class="checkbox">\n      <label>\n        <input type="checkbox" ng-model="options.showDataLabels"> Show Data Labels</label>\n    </div>\n\n    <div class="form-group">\n      <label for="chart-editor-number-format">\n        Number Values Format\n        <span class="m-l-5" uib-popover-html="\'Format <a href=&quot;https://redash.io/help/user-guide/visualizations/formatting-numbers&quot; target=&quot;_blank&quot;>specs.</a>\'"\n          popover-trigger="\'click outsideClick\'">\n          <i class="fa fa-question-circle"></i>\n        </span>\n      </label>\n      <input class="form-control" ng-model="options.numberFormat" ng-model-options="{ allowInvalid: true, debounce: 200 }" id="chart-editor-number-format">\n    </div>\n\n    <div class="form-group">\n      <label for="chart-editor-percent-format">\n        Percent Values Format\n        <span class="m-l-5" uib-popover-html="\'Format <a href=&quot;https://redash.io/help/user-guide/visualizations/formatting-numbers&quot; target=&quot;_blank&quot;>specs.</a>\'"\n          popover-trigger="\'click outsideClick\'">\n          <i class="fa fa-question-circle"></i>\n        </span>\n      </label>\n      <input class="form-control" ng-model="options.percentFormat" ng-model-options="{ allowInvalid: true, debounce: 200 }" id="chart-editor-percent-format">\n    </div>\n\n    <div class="form-group">\n      <label for="chart-editor-datetime-format">\n        Date/Time Values Format\n        <span class="m-l-5" uib-popover-html="\'Format <a href=&quot;https://momentjs.com/docs/#/displaying/format/&quot; target=&quot;_blank&quot;>specs.</a>\'"\n          popover-trigger="\'click outsideClick\'">\n          <i class="fa fa-question-circle"></i>\n        </span>\n      </label>\n      <input class="form-control" ng-model="options.dateTimeFormat" ng-model-options="{ allowInvalid: true, debounce: 200 }" id="chart-editor-datetime-format">\n    </div>\n\n    <div class="form-group">\n      <label for="chart-editor-text">\n        Data Labels\n        <i class="fa fa-question-circle m-l-5" uib-popover-html="templateHint" popover-trigger="\'click outsideClick\'" popover-placement="top-left"></i>\n      </label>\n      <input class="form-control" ng-model="options.textFormat" ng-model-options="{ allowInvalid: true, debounce: 200 }" id="chart-editor-text"\n        placeholder="(auto)">\n    </div>\n  </div>\n</div>\n'},,,,,,function(e,t){e.exports='<div class="map-visualization-container">\n  <div resize-event="handleResize()" ng-style="{ background: options.colors.background }"></div>\n  <div ng-if="options.legend.visible && (legendItems.length > 0)"\n    class="leaflet-bar map-custom-control" ng-class="options.legend.position"\n  >\n    <div ng-repeat="item in legendItems" class="d-flex align-items-center">\n      <color-box color="item.color" class="m-0" style="line-height: 1px"></color-box>\n      <div class="flex-fill text-{{ options.legend.alignText }}">{{ formatValue(item.limit) }}</div>\n    </div>\n  </div>\n</div>\n'},function(e,t){e.exports='<div>\n  <ul class="tab-nav">\n    <li ng-class="{active: currentTab == \'general\'}">\n      <a ng-click="changeTab(\'general\')">General</a>\n    </li>\n    <li ng-class="{active: currentTab == \'colors\'}">\n      <a ng-click="changeTab(\'colors\')">Colors</a>\n    </li>\n    <li ng-class="{active: currentTab == \'bounds\'}">\n      <a ng-click="changeTab(\'bounds\')">Bounds</a>\n    </li>\n  </ul>\n  <div ng-if="currentTab == \'general\'" class="m-t-10 m-b-10">\n    <div class="row">\n      <div class="col-xs-6">\n        <div class="form-group">\n          <label>Country code column</label>\n          <select ng-options="name for name in queryResult.getColumnNames()"\n            ng-model="options.countryCodeColumn" class="form-control"></select>\n        </div>\n      </div>\n      <div class="col-xs-6">\n        <div class="form-group">\n          <label>Country code type</label>\n          <select ng-options="key as value for (key, value) in countryCodeTypes"\n            ng-model="options.countryCodeType" class="form-control"></select>\n        </div>\n      </div>\n    </div>\n\n    <div class="row">\n      <div class="col-xs-6">\n        <div class="form-group">\n          <label>Value column</label>\n          <select ng-options="name for name in queryResult.getColumnNames()"\n            ng-model="options.valueColumn" class="form-control"></select>\n        </div>\n      </div>\n\n      <div class="col-xs-6">\n        <div class="form-group">\n          <label for="legend-value-format">\n            Value format\n            <span class="m-l-5"\n              uib-popover-html="\'Format <a href=&quot;https://redash.io/help/user-guide/visualizations/formatting-numbers&quot; target=&quot;_blank&quot;>specs.</a>\'"\n              popover-trigger="\'click outsideClick\'"><i class="fa fa-question-circle"></i></span>\n          </label>\n          <input class="form-control" id="legend-value-format"\n            ng-model="options.valueFormat" ng-model-options="{ allowInvalid: true, debounce: 200 }">\n        </div>\n      </div>\n\n      <div class="col-xs-6">\n        <div class="form-group">\n          <label for="legend-value-placeholder">Value placeholder</label>\n          <input class="form-control" id="legend-value-placeholder"\n            ng-model="options.noValuePlaceholder" ng-model-options="{ allowInvalid: true, debounce: 200 }">\n        </div>\n      </div>\n    </div>\n\n    <div class="form-group">\n      <label><input type="checkbox" ng-model="options.legend.visible"> Show legend</label>\n    </div>\n    <div class="row">\n      <div class="col-xs-6">\n        <div class="form-group">\n          <label for="legend-position">Legend position</label>\n          <select class="form-control" id="legend-position"\n            ng-options="key as value for (key, value) in legendPositions"\n            ng-model="options.legend.position"\n            ng-disabled="!options.legend.visible"\n          ></select>\n        </div>\n      </div>\n      <div class="col-xs-6">\n        <div class="form-group">\n          <label for="legend-position">Legend text alignment</label>\n          <div class="btn-group d-flex">\n            <button type="button" class="btn btn-default btn-md flex-fill"\n              ng-click="options.legend.alignText = \'left\'"\n              ng-class="{active: options.legend.alignText == \'left\'}"><i class="fa fa-align-left"></i></button>\n            <button type="button" class="btn btn-default btn-md flex-fill"\n              ng-click="options.legend.alignText = \'center\'"\n              ng-class="{active: options.legend.alignText == \'center\'}"><i class="fa fa-align-center"></i></button>\n            <button type="button" class="btn btn-default btn-md flex-fill"\n              ng-click="options.legend.alignText = \'right\'"\n              ng-class="{active: options.legend.alignText == \'right\'}"><i class="fa fa-align-right"></i></button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <label><input type="checkbox" ng-model="options.tooltip.enabled"> Show tooltip</label>\n    <div class="form-group">\n      <label for="tooltip-template">Tooltip template</label>\n      <input class="form-control" id="tooltip-template"\n        ng-model="options.tooltip.template" ng-model-options="{ allowInvalid: true, debounce: 200 }"\n        ng-disabled="!options.tooltip.enabled">\n    </div>\n\n    <label><input type="checkbox" ng-model="options.popup.enabled"> Show popup</label>\n    <div class="form-group">\n      <label for="popup-template">Popup template</label>\n      <textarea class="form-control resize-vertical" id="popup-template" rows="3"\n        ng-model="options.popup.template" ng-model-options="{ allowInvalid: true, debounce: 200 }"\n        ng-disabled="!options.popup.enabled"></textarea>\n    </div>\n\n    <div class="form-group">\n      <label class="ui-sortable-bypass text-muted" style="font-weight: normal; cursor: pointer;"\n        uib-popover-html="templateHint"\n        popover-trigger="\'click outsideClick\'" popover-placement="top-left">\n        Format specs <i class="fa fa-question-circle m-l-5"></i>\n      </label>\n    </div>\n  </div>\n\n  <div ng-if="currentTab == \'colors\'" class="m-t-10 m-b-10">\n    <div class="row">\n      <div class="col-xs-6">\n        <div class="form-group">\n          <label>Steps</label>\n          <input type="number" min="3" max="11" class="form-control"\n            ng-model="options.steps">\n        </div>\n      </div>\n      <div class="col-xs-6">\n        <div class="form-group">\n          <label>Clustering mode</label>\n          <select ng-options="key as value for (key, value) in clusteringModes"\n            ng-model="options.clusteringMode" class="form-control"></select>\n        </div>\n      </div>\n    </div>\n\n    <div class="row">\n      <div class="col-xs-6">\n        <div class="form-group">\n          <label>Min color</label>\n          <ui-select ng-model="options.colors.min">\n            <ui-select-match>\n              <color-box color="$select.selected.value"></color-box>\n              <span ng-bind-html="$select.selected.key | capitalize"></span>\n            </ui-select-match>\n            <ui-select-choices repeat="color.value as (key, color) in colors">\n              <color-box color="color.value"></color-box>\n              <span ng-bind-html="color.key | capitalize | highlight: $select.search"></span>\n            </ui-select-choices>\n          </ui-select>\n        </div>\n      </div>\n\n      <div class="col-xs-6">\n        <div class="form-group">\n          <label>Max color</label>\n          <ui-select ng-model="options.colors.max">\n            <ui-select-match>\n              <color-box color="$select.selected.value"></color-box>\n              <span ng-bind-html="$select.selected.key | capitalize"></span>\n            </ui-select-match>\n            <ui-select-choices repeat="color.value as (key, color) in colors">\n              <color-box color="color.value"></color-box>\n              <span ng-bind-html="color.key | capitalize | highlight: $select.search"></span>\n            </ui-select-choices>\n          </ui-select>\n        </div>\n      </div>\n\n      <div class="col-xs-6">\n        <div class="form-group">\n          <label>No value color</label>\n          <ui-select ng-model="options.colors.noValue">\n            <ui-select-match>\n              <color-box color="$select.selected.value"></color-box>\n              <span ng-bind-html="$select.selected.key | capitalize"></span>\n            </ui-select-match>\n            <ui-select-choices repeat="color.value as (key, color) in colors">\n              <color-box color="color.value"></color-box>\n              <span ng-bind-html="color.key | capitalize | highlight: $select.search"></span>\n            </ui-select-choices>\n          </ui-select>\n        </div>\n      </div>\n    </div>\n\n    <div class="row">\n      <div class="col-xs-6">\n        <div class="form-group">\n          <label>Background color</label>\n          <ui-select ng-model="options.colors.background">\n            <ui-select-match>\n              <color-box color="$select.selected.value"></color-box>\n              <span ng-bind-html="$select.selected.key | capitalize"></span>\n            </ui-select-match>\n            <ui-select-choices repeat="color.value as (key, color) in colors">\n              <color-box color="color.value"></color-box>\n              <span ng-bind-html="color.key | capitalize | highlight: $select.search"></span>\n            </ui-select-choices>\n          </ui-select>\n        </div>\n      </div>\n\n      <div class="col-xs-6">\n        <div class="form-group">\n          <label>Borders color</label>\n          <ui-select ng-model="options.colors.borders">\n            <ui-select-match>\n              <color-box color="$select.selected.value"></color-box>\n              <span ng-bind-html="$select.selected.key | capitalize"></span>\n            </ui-select-match>\n            <ui-select-choices repeat="color.value as (key, color) in colors">\n              <color-box color="color.value"></color-box>\n              <span ng-bind-html="color.key | capitalize | highlight: $select.search"></span>\n            </ui-select-choices>\n          </ui-select>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div ng-if="currentTab == \'bounds\'" class="m-t-10 m-b-10">\n    <div class="form-group">\n      <label>North-East latitude and longitude</label>\n      <div class="row">\n        <div class="col-xs-6">\n          <input class="form-control" type="text"\n            ng-model="options.bounds[1][0]" ng-model-options="{ allowInvalid: true, debounce: 200 }">\n        </div>\n        <div class="col-xs-6">\n          <input class="form-control" type="text"\n            ng-model="options.bounds[1][1]" ng-model-options="{ allowInvalid: true, debounce: 200 }">\n        </div>\n      </div>\n    </div>\n\n    <div class="form-group">\n      <label>South-West latitude and longitude</label>\n      <div class="row">\n        <div class="col-xs-6">\n          <input class="form-control" type="text"\n            ng-model="options.bounds[0][0]" ng-model-options="{ allowInvalid: true, debounce: 200 }">\n        </div>\n        <div class="col-xs-6">\n          <input class="form-control" type="text"\n            ng-model="options.bounds[0][1]" ng-model-options="{ allowInvalid: true, debounce: 200 }">\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'},function(e,t,n){e.exports=n.p+"data/0962607.countries.geo.json"},function(e,t){e.exports='<ul class="tab-nav">\n  <li ng-class="{active: currentTab == \'columns\'}">\n    <a ng-click="setCurrentTab(\'columns\')">Columns</a>\n  </li>\n  <li ng-class="{active: currentTab == \'options\'}">\n    <a ng-click="setCurrentTab(\'options\')">Options</a>\n  </li>\n</ul>\n\n<div ng-if="currentTab == \'options\'" class="m-t-10 m-b-10">\n  <div class="form-group">\n    <label class="control-label">Time Interval</label>\n    <select class="form-control" ng-model="visualization.options.timeInterval">\n      <option value="daily">Daily</option>\n      <option value="weekly">Weekly</option>\n      <option value="monthly">Monthly</option>\n    </select>\n  </div>\n\n  <div class="form-group">\n    <label class="control-label">Mode</label>\n    <select class="form-control" ng-model="visualization.options.mode">\n      <option value="diagonal">Fill gaps with zeros</option>\n      <option value="simple">Show data as is</option>\n    </select>\n  </div>\n</div>\n\n<div ng-if="currentTab == \'columns\'" class="m-t-10 m-b-10">\n  <div class="form-group">\n    <label class="control-label">Date (Bucket)</label>\n    <select class="form-control" ng-model="visualization.options.dateColumn"\n      ng-options="column for column in columnNames"></select>\n  </div>\n\n  <div class="form-group">\n    <label class="control-label">Stage</label>\n    <select class="form-control" ng-model="visualization.options.stageColumn"\n      ng-options="column for column in columnNames"></select>\n  </div>\n\n  <div class="form-group">\n    <label class="control-label">Bucket Population Size</label>\n    <select class="form-control" ng-model="visualization.options.totalColumn"\n      ng-options="column for column in columnNames"></select>\n  </div>\n\n  <div class="form-group">\n    <label class="control-label">Stage Value</label>\n    <select class="form-control" ng-model="visualization.options.valueColumn"\n      ng-options="column for column in columnNames"></select>\n  </div>\n</div>\n'},,function(e,t){e.exports="<counter\n  ng-class=\"{'positive': targetValue && trendPositive, 'negative': targetValue && !trendPositive}\"\n  resize-event=\"handleResize()\"\n>\n  <div ng-style=\"{\n    '-o-transform': 'scale(' + scale + ')',\n    '-ms-transform': 'scale(' + scale + ')',\n    '-moz-transform': 'scale(' + scale + ')',\n    '-webkit-transform': 'scale(' + scale + ')',\n    'transform': 'scale(' + scale + ')'\n  }\">\n    <value ng-if=\"isNumber\">{{stringPrefix}}{{counterValue | number}}{{stringSuffix}}</value>\n    <value ng-if=\"!isNumber\">{{stringPrefix}}{{counterValue}}{{stringSuffix}}</value>\n    <counter-target ng-if=\"targetValue\" title=\"({{targetValue | number}})\">({{targetValue | number}})</counter-target>\n    <counter-name>{{counterLabel}}</counter-name>\n  </div>\n</counter>\n"},function(e,t){e.exports='<div class="form-horizontal">\n  <ul class="tab-nav">\n    <li ng-class="{active: currentTab == \'general\'}">\n      <a ng-click="changeTab(\'general\')">General</a>\n    </li>\n    <li ng-class="{active: currentTab == \'format\'}">\n      <a ng-click="changeTab(\'format\')">Format</a>\n    </li>\n  </ul>\n  <div ng-show="currentTab == \'general\'" class="m-t-10 m-b-10">\n      <div class="form-group">\n          <label class="col-lg-6">Counter Label</label>\n          <div class="col-lg-6">\n            <input type="text" ng-model="visualization.options.counterLabel" placeholder="{{visualization.name}}" class="form-control" ng-trim="false">\n          </div>\n        </div>\n    <div class="form-group">\n      <label class="col-lg-6">Counter Value Column Name</label>\n      <div class="col-lg-6">\n        <select ng-options="name for name in queryResult.getColumnNames()" ng-model="visualization.options.counterColName" class="form-control" ng-disabled="visualization.options.countRow"></select>\n      </div>\n    </div>\n    <div class="form-group">\n      <label class="col-lg-6">Counter Value Row Number</label>\n      <div class="col-lg-6">\n        <input type="number" ng-model="visualization.options.rowNumber" class="form-control" ng-disabled="visualization.options.countRow">\n      </div>\n    </div>\n    <div class="form-group">\n      <label class="col-lg-6">Target Value Column Name</label>\n      <div class="col-lg-6">\n        <select ng-options="name for name in queryResult.getColumnNames()" ng-model="visualization.options.targetColName" class="form-control">\n          <option value="">No target value</option>\n        </select>\n      </div>\n    </div>\n    <div class="form-group" ng-if="visualization.options.targetColName">\n      <label class="col-lg-6">Target Value Row Number</label>\n      <div class="col-lg-6">\n        <input type="number" ng-model="visualization.options.targetRowNumber" class="form-control">\n      </div>\n    </div>\n    <div class="form-group">\n      <div class="col-lg-6">\n        <label>\n          <input type="checkbox" ng-model="visualization.options.countRow">\n          Count Rows\n        </label>\n      </div>\n    </div>\n  </div>\n\n  <div ng-show="currentTab == \'format\'" class="m-t-10 m-b-10">\n    <div class="form-group">\n      <label class="col-lg-6">Formatting Decimal Place</label>\n      <div class="col-lg-6">\n        <input type="number" ng-model="visualization.options.stringDecimal" class="form-control" ng-disabled="!isValueNumber()">\n      </div>\n    </div>\n    <div class="form-group">\n      <label class="col-lg-6">Formatting Decimal Character</label>\n      <div class="col-lg-6">\n        <input type="text" ng-model="visualization.options.stringDecChar" class="form-control" ng-disabled="!isValueNumber()">\n      </div>\n    </div>\n    <div class="form-group">\n      <label class="col-lg-6">Formatting Thousands Separator</label>\n      <div class="col-lg-6">\n        <input type="text" ng-model="visualization.options.stringThouSep" class="form-control" ng-disabled="!isValueNumber()" ng-trim="false">\n      </div>\n    </div>\n    <div class="form-group">\n      <label class="col-lg-6">Formatting String Prefix</label>\n      <div class="col-lg-6">\n        <input type="text" ng-model="visualization.options.stringPrefix" class="form-control" ng-disabled="!isValueNumber()" ng-trim="false">\n      </div>\n    </div>\n    <div class="form-group">\n      <label class="col-lg-6">Formatting String Suffix</label>\n      <div class="col-lg-6">\n        <input type="text" ng-model="visualization.options.stringSuffix" class="form-control" ng-disabled="!isValueNumber()" ng-trim="false">\n      </div>\n    </div>\n  </div>\n</div>\n'},function(e,t){e.exports='<div class="visualization-editor">\n  <div class="modal-header">\n    <button type="button" class="close" aria-label="Close" ng-click="$ctrl.closeDialog()"><span aria-hidden="true">&times;</span>\n    </button>\n    <h4 class="modal-title">Visualization Editor</h4>\n  </div>\n  <div class="modal-body">\n    <div class="row">\n      <div class="col-md-5 p-r-10 p-l-0">\n        <div>\n          <form name="$ctrl.visForm">\n            <div class="form-group">\n              <label class="control-label">Visualization Type</label>\n\n              <select required ng-model="$ctrl.visualization.type"\n                ng-disabled="!$ctrl.canChangeType"\n                ng-options="type.type as type.name for type in $ctrl.visTypes" class="form-control"\n                ng-change="$ctrl.typeChanged(\'{{$ctrl.visualization.type}}\')"></select>\n            </div>\n\n            <div class="form-group">\n              <label class="control-label">Visualization Name</label>\n              <input name="name" type="text" class="form-control" ng-model="$ctrl.visualization.name"\n                     placeholder="{{$ctrl.visualization.type | capitalize}}">\n            </div>\n\n            <visualization-options-editor visualization="$ctrl.visualization"\n                                          query-result="$ctrl.queryResult"\n                                          query="$ctrl.query">\n            </visualization-options-editor>\n          </form>\n        </div>\n      </div>\n      <div class="col-md-7 p-0 visualization-editor__right">\n        <visualization-renderer visualization="$ctrl.visualization" query-result="$ctrl.queryResult"></visualization-renderer>\n      </div>\n    </div>\n  </div>\n  <div class="modal-footer">\n    <button type="button" class="btn btn-default" ng-click="$ctrl.closeDialog()">Cancel</button>\n    <button type="button" class="btn btn-primary" ng-click="$ctrl.submit()">Save</button>\n  </div>\n</div>\n'},function(e,t){e.exports='<div class="form-horizontal">\n  <div style="margin-bottom: 20px;">\n    This visualization constructs funnel chart. Please notice that value column only accept number for values.\n  </div>\n  <div class="form-group">\n    <label class="col-lg-6">Step Column Name</label>\n    <div class="col-lg-6">\n      <select ng-options="name for name in queryResult.getColumnNames()" ng-model="visualization.options.stepCol.colName" class="form-control"></select>\n    </div>\n  </div>\n  <div class="form-group">\n    <label class="col-lg-6">Step Column Display Name</label>\n    <div class="col-lg-6">\n      <input type="text" ng-model="visualization.options.stepCol.displayAs" class="form-control">\n    </div>\n  </div>\n  <div class="form-group">\n    <label class="col-lg-6">Funnel Value Column Name</label>\n    <div class="col-lg-6">\n      <select ng-options="name for name in queryResult.getColumnNames()" ng-model="visualization.options.valueCol.colName" class="form-control"></select>\n    </div>\n  </div>\n  <div class="form-group">\n    <label class="col-lg-6">Funnel Value Column Display Name</label>\n    <div class="col-lg-6">\n      <input type="text" ng-model="visualization.options.valueCol.displayAs" class="form-control">\n    </div>\n  </div>\n  <div class="form-group">\n    <label class="col-lg-6">Auto Sort Record By Value</label>\n    <div class="col-lg-6">\n      <input type="checkbox" ng-model="visualization.options.autoSort">\n    </div>\n  </div>\n  <div ng-show="!visualization.options.autoSort">\n    <div class="form-group">\n      <label class="col-lg-6">Funnel Value Columns Name</label>\n      <div class="col-lg-6">\n        <select ng-options="name for name in queryResult.getColumnNames()" ng-model="visualization.options.sortKeyCol.colName" class="form-control"></select>\n      </div>\n    </div>\n  </div>\n</div>\n'},,,,function(e,t){e.exports='<div class="map-visualization-container">\n  <div resize-event="handleResize()"></div>\n</div>\n'},function(e,t){e.exports='<div>\n  <ul class="tab-nav">\n    <li ng-class="{active: currentTab == \'general\'}"><a ng-click="currentTab=\'general\'">General</a></li>\n    <li ng-class="{active: currentTab == \'groups\'}"><a ng-click="currentTab=\'groups\'">Groups</a></li>\n    <li ng-class="{active: currentTab == \'map\'}"><a ng-click="currentTab=\'map\'">Map Settings</a></li>\n  </ul>\n\n  <div ng-show="currentTab == \'general\'" class="m-t-10 m-b-10">\n    <div class="form-group">\n      <label class="control-label">Latitude Column Name</label>\n      <ui-select name="form-control" required ng-model="visualization.options.latColName">\n        <ui-select-match placeholder="Choose column...">{{$select.selected}}</ui-select-match>\n        <ui-select-choices repeat="column in columnNames | remove:visualization.options.classify | remove:visualization.options.lonColName">\n          <span ng-bind-html="column | highlight: $select.search"></span><span> </span>\n          <small class="text-muted" ng-bind="columns[column].type"></small>\n        </ui-select-choices>\n      </ui-select>\n    </div>\n\n    <div class="form-group">\n      <label class="control-label">Longitude Column Name</label>\n      <ui-select name="form-control" required ng-model="visualization.options.lonColName">\n        <ui-select-match placeholder="Choose column...">{{$select.selected}}</ui-select-match>\n        <ui-select-choices repeat="column in columnNames | remove:visualization.options.classify | remove:visualization.options.latColName">\n          <span ng-bind-html="column | highlight: $select.search"></span><span> </span>\n          <small class="text-muted" ng-bind="columns[column].type"></small>\n        </ui-select-choices>\n      </ui-select>\n    </div>\n\n    <div class="form-group">\n      <label class="control-label">Group By</label>\n      <ui-select name="form-control" required ng-model="visualization.options.classify">\n        <ui-select-match placeholder="Choose column...">{{$select.selected}}</ui-select-match>\n        <ui-select-choices repeat="column in classify_columns | remove:visualization.options.lonColName | remove:visualization.options.latColName">\n          <span ng-bind-html="column | highlight: $select.search"></span><span> </span>\n          <small class="text-muted" ng-bind="columns[column].type"></small>\n        </ui-select-choices>\n      </ui-select>\n    </div>\n  </div>\n\n  <div ng-show="currentTab == \'groups\'" class="m-b-10">\n    <table class="table table-condensed col-table">\n      <thead>\n      <th>Name</th>\n      <th>Color</th>\n      </thead>\n      <tbody>\n      <tr ng-repeat="(name, options) in visualization.options.groups">\n        <td>{{name}}</td>\n        <td>\n          <input class="form-control" type="color" ng-model="options.color"/>\n        </td>\n      </tr>\n      </tbody>\n    </table>\n  </div>\n\n  <div ng-show="currentTab == \'map\'" class="m-t-10 m-b-10">\n    <div class="checkbox">\n      <label>\n        <input type="checkbox" ng-model="visualization.options.clusterMarkers">\n        <i class="input-helper"></i> Cluster Markers\n      </label>\n    </div>\n\n    <div class="form-group">\n      <label class="control-label">Map Tiles</label>\n      <select ng-options="tile.url as tile.name for tile in mapTiles"\n        ng-model="visualization.options.mapTileUrl" class="form-control"></select>\n    </div>\n  </div>\n\n</div>\n'},function(e,t){e.exports='<div class="form-horizontal">\n  <div class="form-group">\n    <div class="col-lg-6">\n      <label>\n        <input type="checkbox" ng-model="visualization.options.controls.enabled">\n        Hide Pivot Controls\n      </label>\n    </div>\n  </div>\n</div>\n'},function(e,t){e.exports='<div class="form-horizontal">\n  <div>\n    This visualization expects the query result to have rows in the following format:\n\n    <ul>\n      <li><strong>stage1</strong> - stage 1 value</li>\n      <li><strong>stage2</strong> - stage 2 value (or null)</li>\n      <li><strong>stage3</strong> - stage 3 value (or null)</li>\n      <li><strong>stage4</strong> - stage 4 value (or null)</li>\n      <li><strong>stage5</strong> - stage 5 value (or null)</li>\n      <li><strong>value</strong> - number of times this sequence occurred</li>\n    </ul>\n  </div>\n</div>\n'},function(e,t){e.exports='<div class="form-horizontal">\n  <div>\n    This visualization expects the query result to have rows in one of the following formats:\n\n    <strong>Option 1:</strong>\n    <ul>\n      <li><strong>sequence</strong> - sequence id</li>\n      <li><strong>stage</strong> - what stage in sequence this is (1, 2, ...)</li>\n      <li><strong>node</strong> - stage name</li>\n      <li><strong>value</strong> - number of times this sequence occurred</li>\n    </ul>\n\n    <strong>Option 2:</strong>\n    <ul>\n      <li><strong>stage1</strong> - stage 1 value</li>\n      <li><strong>stage2</strong> - stage 2 value (or null)</li>\n      <li><strong>stage3</strong> - stage 3 value (or null)</li>\n      <li><strong>stage4</strong> - stage 4 value (or null)</li>\n      <li><strong>stage5</strong> - stage 5 value (or null)</li>\n      <li><strong>value</strong> - number of times this sequence occurred</li>\n    </ul>\n  </div>\n</div>\n'},function(e,t){e.exports='<dynamic-table rows="gridRows" columns="gridColumns" items-per-page="options.itemsPerPage"></dynamic-table>\n'},function(e,t){e.exports='<div class="table-editor-container">\n  <ul class="tab-nav">\n    <li ng-class="{active: currentTab == \'columns\'}" ng-if="options.globalSeriesType != \'custom\'">\n      <a ng-click="setCurrentTab(\'columns\')">Columns</a>\n    </li>\n    <li ng-class="{active: currentTab == \'grid\'}">\n      <a ng-click="setCurrentTab(\'grid\')">Grid</a>\n    </li>\n  </ul>\n\n  <div ng-if="currentTab == \'grid\'" class="m-t-10 m-b-10">\n    <div class="form-group">\n      <label>Items per page</label>\n      <select ng-options="value for value in allowedItemsPerPage"\n        ng-model="visualization.options.itemsPerPage" class="form-control">\n      </select>\n    </div>\n  </div>\n\n  <div ng-if="currentTab == \'columns\'" class="table-editor-query-columns m-t-10 m-b-10"\n    ui-sortable ng-model="visualization.options.columns">\n    <div ng-repeat="column in visualization.options.columns">\n      <div class="table-editor-column-header form-group">\n        <div class="input-group">\n          <span class="input-group-addon"><input type="checkbox" ng-model="column.visible"></span>\n          <input class="form-control" ng-model="column.title" ng-model-options="{ allowInvalid: true, debounce: 200 }">\n        </div>\n      </div>\n      <div class="form-group">\n        <div class="btn-group btn-group-justified">\n          <button type="button" class="btn btn-default btn-xs"\n            ng-click="column.alignContent = \'left\'"\n            ng-class="{active: column.alignContent == \'left\'}"><i class="fa fa-align-left"></i></button>\n          <button type="button" class="btn btn-default btn-xs"\n            ng-click="column.alignContent = \'center\'"\n            ng-class="{active: column.alignContent == \'center\'}"><i class="fa fa-align-center"></i></button>\n          <button type="button" class="btn btn-default btn-xs"\n            ng-click="column.alignContent = \'right\'"\n            ng-class="{active: column.alignContent == \'right\'}"><i class="fa fa-align-right"></i></button>\n        </div>\n      </div>\n\n      <div class="form-group">\n        <label class="ui-sortable-bypass"><input type="checkbox" ng-model="column.allowSearch"> Use for search</label>\n      </div>\n\n      <div class="form-group">\n        <label>Display as:</label>\n        <select ng-options="item.value as item.name for item in displayAsOptions"\n          ng-model="column.displayAs" class="form-control">\n        </select>\n      </div>\n\n      <div ng-if="column.displayAs == \'string\'">\n        <div class="form-group">\n          <label class="ui-sortable-bypass"><input type="checkbox" ng-model="column.allowHTML"> Allow HTML content</label>\n        </div>\n        <div ng-if="column.allowHTML" class="form-group">\n          <label class="ui-sortable-bypass"><input type="checkbox" ng-model="column.highlightLinks"> Highlight links</label>\n        </div>\n      </div>\n\n      <div ng-if="column.displayAs == \'number\'">\n        <div class="form-group">\n          <label for="table-editor-{{ column.name }}-number-format">\n            Number format\n            <span class="m-l-5"\n              uib-popover-html="\'Format <a href=&quot;https://redash.io/help/user-guide/visualizations/formatting-numbers&quot; target=&quot;_blank&quot;>specs.</a>\'"\n              popover-trigger="\'click outsideClick\'"><i class="fa fa-question-circle"></i></span>\n          </label>\n          <input class="form-control" ng-model="column.numberFormat" ng-model-options="{ allowInvalid: true, debounce: 200 }"\n            id="table-editor-{{ column.name }}-number-format">\n        </div>\n      </div>\n\n      <div ng-if="column.displayAs == \'datetime\'">\n        <div class="form-group">\n          <label for="table-editor-{{ column.name }}-datetime-format">\n            Date/Time format\n            <span class="m-l-5"\n              uib-popover-html="\'Format <a href=&quot;https://momentjs.com/docs/#/displaying/format/&quot; target=&quot;_blank&quot;>specs.</a>\'"\n              popover-trigger="\'click outsideClick\'"><i class="fa fa-question-circle"></i></span>\n          </label>\n          <input class="form-control" ng-model="column.dateTimeFormat" ng-model-options="{ allowInvalid: true, debounce: 200 }"\n            id="table-editor-{{ column.name }}-datetime-format">\n        </div>\n      </div>\n\n      <div ng-if="column.displayAs == \'boolean\'">\n        <div class="form-group">\n          <label for="table-editor-{{ column.name }}-boolean-false">Value for <code>false</code></label>\n          <input class="form-control" ng-model="column.booleanValues[0]" ng-model-options="{ allowInvalid: true, debounce: 200 }"\n            id="table-editor-{{ column.name }}-boolean-false">\n        </div>\n        <div class="form-group">\n          <label for="table-editor-{{ column.name }}-boolean-true">Value for <code>true</code></label>\n          <input class="form-control" ng-model="column.booleanValues[1]" ng-model-options="{ allowInvalid: true, debounce: 200 }"\n            id="table-editor-{{ column.name }}-boolean-true">\n        </div>\n      </div>\n\n      <div ng-if="column.displayAs == \'image\'">\n        <div class="form-group">\n          <label for="table-editor-{{ column.name }}-image-url-template">URL template</label>\n          <input class="form-control" ng-model="column.imageUrlTemplate" ng-model-options="{ allowInvalid: true, debounce: 200 }"\n            id="table-editor-{{ column.name }}-image-url-template">\n        </div>\n\n        <div class="form-group">\n          <label>\n            Size\n            <span class="m-l-5"\n              uib-popover-html="\'Any positive integer value that specifies size in pixels. Leave empty to use default value.\'"\n              popover-trigger="\'click outsideClick\'" popover-placement="top-left"><i class="fa fa-question-circle"></i></span>\n          </label>\n          <div class="d-flex">\n            <input class="form-control" ng-model="column.imageWidth" ng-model-options="{ allowInvalid: true, debounce: 200 }"\n              placeholder="Width">\n            <span class="form-control-static m-l-5 m-r-5">&times;</span>\n            <input class="form-control" ng-model="column.imageHeight" ng-model-options="{ allowInvalid: true, debounce: 200 }"\n              placeholder="Height">\n          </div>\n        </div>\n\n        <div class="form-group">\n          <label for="table-editor-{{ column.name }}-image-title-template">Title template</label>\n          <input class="form-control" ng-model="column.imageTitleTemplate" ng-model-options="{ allowInvalid: true, debounce: 200 }"\n            id="table-editor-{{ column.name }}-image-title-template">\n        </div>\n\n        <div class="form-group">\n          <label class="ui-sortable-bypass text-muted" style="font-weight: normal; cursor: pointer;"\n            uib-popover-html="templateHint"\n            popover-trigger="\'click outsideClick\'" popover-placement="top-left">\n            Format specs <i class="fa fa-question-circle m-l-5"></i>\n          </label>\n        </div>\n      </div>\n\n      <div ng-if="column.displayAs == \'link\'">\n        <div class="form-group">\n          <label for="table-editor-{{ column.name }}-link-url-template">URL template</label>\n          <input class="form-control" ng-model="column.linkUrlTemplate" ng-model-options="{ allowInvalid: true, debounce: 200 }"\n            id="table-editor-{{ column.name }}-link-url-template">\n        </div>\n\n        <div class="form-group">\n          <label for="table-editor-{{ column.name }}-link-text-template">Text template</label>\n          <input class="form-control" ng-model="column.linkTextTemplate" ng-model-options="{ allowInvalid: true, debounce: 200 }"\n            id="table-editor-{{ column.name }}-link-text-template">\n        </div>\n\n        <div class="form-group">\n          <label for="table-editor-{{ column.name }}-link-title-template">Title template</label>\n          <input class="form-control" ng-model="column.linkTitleTemplate" ng-model-options="{ allowInvalid: true, debounce: 200 }"\n            id="table-editor-{{ column.name }}-link-title-template">\n        </div>\n\n        <div class="form-group">\n          <label class="ui-sortable-bypass"><input type="checkbox" ng-model="column.linkOpenInNewTab"> Open in new tab</label>\n        </div>\n\n        <div class="form-group">\n          <label class="ui-sortable-bypass text-muted" style="font-weight: normal; cursor: pointer;"\n            uib-popover-html="templateHint"\n            popover-trigger="\'click outsideClick\'" popover-placement="top-left">\n            Format specs <i class="fa fa-question-circle m-l-5"></i>\n          </label>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'},,function(e,t){e.exports='<div class="form-horizontal">\n  <div class="form-group">\n    <label class="col-lg-6">Word Cloud Column Name</label>\n    <div class="col-lg-6">\n      <select ng-options="name for name in queryResult.getColumnNames()" ng-model="visualization.options.column" class="form-control"></select>\n    </div>\n  </div>\n</div>\n'},function(e,t){e.exports='<div class="container">\n  <page-header title="\'Admin\'"></page-header>\n\n  <div class="bg-white tiled">\n    <ul class="tab-nav">\n      <li><a href="admin/status">System Status</a></li>\n      <li><a href="admin/queries/tasks">Celery Status</a></li>\n      <li class="active"><a href="admin/queries/outdated">Outdated Queries</a></li>\n    </ul>\n\n    <div class="">\n      <table class="table table-condensed table-hover">\n        <thead>\n        <tr>\n          <th>Id</th>\n          <th>Name</th>\n          <th>Created By</th>\n          <th>Runtime</th>\n          <th>Last Executed At</th>\n          <th>Created At</th>\n          <th>Update Schedule</th>\n        </tr>\n        </thead>\n        <tbody>\n        <tr ng-repeat="row in $ctrl.queries.getPageRows()">\n          <td>\n            {{row.data_source_id}}\n          </td>\n          <td>\n            <a ng-href="queries/{{row.id}}">{{row.name}}</a>\n          </td>\n          <td>{{row.user.name}}</td>\n          <td>{{row.runtime | durationHumanize}}</td>\n          <td>{{row.retrieved_at | dateTime}}</td>\n          <td>{{row.created_at | dateTime }}</td>\n          <td><schedule-phrase schedule="row.schedule" is-new="row.isNew()" /></td>\n        </tr>\n        </tbody>\n      </table>\n      <paginator paginator="$ctrl.queries"></paginator>\n\n      <div class="p-15">\n        <div class="badge">\n          Last update: <span am-time-ago="updatedAt"></span>\n        </div>\n        (<label><input type="checkbox" ng-model="autoUpdate"> Auto Update</label>)\n      </div>\n    </div>\n  </div>\n</div>\n'},function(e,t){e.exports='<div class="container">\n  <page-header title="\'Admin\'"></page-header>\n\n  <div class="bg-white tiled">\n    <ul class="tab-nav">\n      <li class="active">\n        <a href="admin/status">System Status</a>\n      </li>\n      <li>\n        <a href="admin/queries/tasks">Celery Status</a>\n      </li>\n      <li>\n        <a href="admin/queries/outdated">Outdated Queries</a>\n      </li>\n    </ul>\n\n    <div class="row p-15">\n      <ul class="list-group p-l-15 col-lg-4">\n        <li class="list-group-item active">General</li>\n        <li class="list-group-item" ng-repeat="(name, value) in status">\n          <span class="badge">{{ value }}</span>\n          {{ name | toHuman }}\n        </li>\n      </ul>\n\n      <ul class="list-group col-lg-4">\n        <li class="list-group-item active">Manager</li>\n        <li class="list-group-item">\n          <span\n            class="badge"\n            am-time-ago="manager.last_refresh_at*1000.0"\n          ></span>\n          Last Refresh\n        </li>\n        <li class="list-group-item">\n          <span class="badge" am-time-ago="manager.started_at*1000.0"></span>\n          Started\n        </li>\n        <li class="list-group-item">\n          <span class="badge">{{ manager.outdated_queries_count }}</span>\n          Outdated Queries Count\n        </li>\n      </ul>\n\n      <ul class="list-group col-lg-4">\n        <li class="list-group-item active">Queues</li>\n        <li class="list-group-item" ng-repeat="(name, value) in manager.queues">\n          <span class="badge">{{ value.size }}</span>\n          {{ name }}\n          <span\n            uib-popover="{{ value.data_sources }}"\n            popover-trigger="\'mouseenter\'"\n          >\n            <i class="fa fa-question-circle"></i>\n          </span>\n        </li>\n      </ul>\n    </div>\n    <div class="row p-15">\n      <ul class="list-group col-lg-4">\n        <li class="list-group-item active">Redash Database</li>\n        <li\n          class="list-group-item"\n          ng-repeat="(name, size) in database_metrics.metrics"\n        >\n          <span class="badge">{{ size[1] | prettySize }}</span>\n          <span> {{ size[0] }} </span>\n        </li>\n      </ul>\n    </div>\n  </div>\n</div>\n'},function(e,t){e.exports='<div class="container">\n  <page-header title="\'Admin\'"></page-header>\n\n  <div class="bg-white tiled">\n    <ul class="tab-nav">\n      <li><a href="admin/status">System Status</a></li>\n      <li class="active"><a href="admin/queries/tasks">Celery Status</a></li>\n      <li><a href="admin/queries/outdated">Outdated Queries</a></li>\n    </ul>\n\n    <admin-celery-status></admin-celery-status>\n  </div>\n</div>\n'},function(e,t){e.exports='<div class="container">\n  <page-header title="$ctrl.alert.name || $ctrl.getDefaultName() || \'New Alert\'"></page-header>\n\n  <email-settings-warning feature-name="\'alert emails\'"></email-settings-warning>\n\n  <div class="container">\n    <div class="row bg-white tiled p-10">\n      <div class="col-md-8">\n        <form name="alertForm" class="form">\n          <div class="form-group">\n            <label>Query</label>\n            <query-selector type="\'select\'" selected-query="$ctrl.alert.query" on-change="$ctrl.onQuerySelected" disabled="!$ctrl.canEdit" />\n          </div>\n\n          <div class="form-group" ng-show="$ctrl.selectedQuery">\n            <label>Name</label>\n            <input type="string" placeholder="{{$ctrl.getDefaultName()}}" class="form-control" ng-model="$ctrl.alert.name" ng-disabled="!$ctrl.canEdit">\n          </div>\n\n          <div ng-show="$ctrl.queryResult" class="form-horizontal">\n            <div class="form-group">\n              <label class="control-label col-md-2">Value column</label>\n              <div class="col-md-4">\n                <select ng-options="name for name in $ctrl.queryResult.getColumnNames()" ng-model="$ctrl.alert.options.column"\n                        class="form-control" ng-disabled="!$ctrl.canEdit"></select>\n              </div>\n              <label class="control-label col-md-2">Value</label>\n              <div class="col-md-4">\n                <p class="form-control-static">{{$ctrl.queryResult.getData()[0][$ctrl.alert.options.column]}}</p>\n              </div>\n            </div>\n            <div class="form-group">\n              <label class="control-label col-md-2">Op</label>\n              <div class="col-md-4">\n                <select ng-options="name for name in $ctrl.ops" ng-model="$ctrl.alert.options.op" class="form-control" ng-disabled="!$ctrl.canEdit"></select>\n              </div>\n              <label class="control-label col-md-2">Reference</label>\n              <div class="col-md-4">\n                <input type="number" step="any" class="form-control" ng-model="$ctrl.alert.options.value" placeholder="reference value" ng-disabled="!$ctrl.canEdit"\n                       required/>\n              </div>\n            </div>\n            <div class="form-group">\n              <label class="control-label col-md-2">Rearm seconds</label>\n              <div class="col-md-4">\n                <input type="number" class="form-control" ng-model="$ctrl.alert.rearm" ng-disabled="!$ctrl.canEdit"/>\n              </div>\n            </div>\n          </div>\n\n          <div class="form-group" ng-if="$ctrl.canEdit">\n            <button class="btn btn-primary" ng-disabled="!alertForm.$valid" ng-click="$ctrl.saveChanges()">Save</button>\n            <button class="btn btn-danger" ng-if="$ctrl.alert.id" ng-click="$ctrl.delete()">Delete</button>\n          </div>\n        </form>\n      </div>\n      <div class="col-md-4" ng-if="$ctrl.alert.id">\n        <alert-subscriptions alert-id="$ctrl.alert.id"></alert-subscriptions>\n      </div>\n    </div>\n  </div>\n</div>\n'},,function(e,t){e.exports='<div class="container">\n  <div class="row p-l-15 p-r-15 m-b-10 m-l-0 m-r-0 dashboard-header page-header--new">\n    <div class="page-title col-xs-8 col-sm-7 col-lg-7 p-l-0">\n      <favorites-control item="$ctrl.dashboard"></favorites-control>\n      <h3>\n        <edit-in-place class="edit-in-place" is-editable="$ctrl.layoutEditing" on-done="$ctrl.saveName" ignore-blanks="true" value="$ctrl.dashboard.name" editor="\'input\'"></edit-in-place>\n      </h3>\n\n      <img ng-src="{{$ctrl.dashboard.user.profile_image_url}}" class="profile__image_thumb--dashboard" alt="{{$ctrl.dashboard.user.name}}">\n\n      <dashboard-tags-control class="hidden-xs"\n        tags="$ctrl.dashboard.tags" is-draft="$ctrl.dashboard.is_draft" is-archived="$ctrl.dashboard.is_archived"\n        can-edit="$ctrl.isDashboardOwner" get-available-tags="$ctrl.loadTags" on-edit="$ctrl.saveTags"></dashboard-tags-control>\n\n    </div>\n    <div class="col-xs-4 col-sm-5 col-lg-5 text-right dashboard__control p-r-0">\n      <span ng-if="!$ctrl.dashboard.is_archived && !public" class="hidden-print">\n          <div class="btn-group">\n            <button type="button" class="btn btn-primary btn-sm"\n              ng-disabled="$ctrl.isGridDisabled"\n              ng-click="$ctrl.editLayout(false, true)" ng-if="$ctrl.layoutEditing">\n              <i class="zmdi zmdi-check"></i> Apply Changes\n            </button>\n\n            <button type="button" class="btn btn-default btn-sm"\n              ng-disabled="$ctrl.isGridDisabled"\n              ng-click="$ctrl.editLayout(false, false)" ng-if="$ctrl.layoutEditing">\n              <i class="zmdi zmdi-close"></i> Cancel\n            </button>\n          </div>\n\n          <button type="button" class="btn btn-default btn-sm" ng-click="$ctrl.togglePublished()" tooltip="Publish Dashboard" ng-if="$ctrl.dashboard.is_draft && !$ctrl.layoutEditing">\n            <span class="fa fa-paper-plane"></span> Publish\n          </button>\n\n          <div class="btn-group" uib-dropdown ng-if="!$ctrl.layoutEditing">\n            <button id="split-button" type="button"\n                    ng-class="{\'btn-default btn-sm\': $ctrl.refreshRate === null,\'btn-primary btn-sm\':$ctrl.refreshRate !== null}"\n                    class="btn btn-sm" ng-click="$ctrl.refreshDashboard()">\n              <i class="zmdi zmdi-refresh"></i> {{$ctrl.refreshRate === null ? \'Refresh\' : $ctrl.refreshRate.name}}\n            </button>\n            <button type="button" class="btn hidden-xs" uib-dropdown-toggle\n                    ng-class="{\'btn-default btn-sm\': $ctrl.refreshRate === null,\'btn-primary btn-sm\':$ctrl.refreshRate !== null}">\n              <span class="caret"></span>\n              <span class="sr-only">Split button!</span>\n            </button>\n            <ul class="dropdown-menu pull-right" ng-model="$ctrl.refreshRate" uib-dropdown-menu role="menu" aria-labelledby="split-button">\n              <li role="menuitem" ng-repeat="refreshRate in $ctrl.refreshRates" ng-class="{disabled: !refreshRate.enabled}">\n                <a href="javascript:void(0)" ng-click="$ctrl.setRefreshRate(refreshRate)">{{refreshRate.name}}</a>\n              </li>\n              <li role="menuitem" ng-if="$ctrl.refreshRate !== null">\n                <a href="#" ng-click="$ctrl.setRefreshRate(null)">Stop auto refresh</a>\n              </li>\n            </ul>\n          </div>\n          <button type="button" class="btn btn-sm hidden-xs" ng-class="{\'btn-default\': !$ctrl.isFullscreen, \'btn-primary\': $ctrl.isFullscreen}" tooltip="Enable/Disable Fullscreen display" ng-click="$ctrl.toggleFullscreen()" ng-if="!$ctrl.dashboard.is_draft && !$ctrl.layoutEditing">\n            <span class="zmdi zmdi-fullscreen"></span>\n          </button>\n          <button type="button" class="btn btn-sm hidden-xs" ng-class="{\'btn-default\': !$ctrl.dashboard.publicAccessEnabled, \'btn-primary\': $ctrl.dashboard.publicAccessEnabled}" tooltip="Enable/Disable Share URL" ng-click="$ctrl.openShareForm()" ng-if="($ctrl.dashboard.canEdit() || $ctrl.dashboard.publicAccessEnabled) && !$ctrl.dashboard.is_draft && !$ctrl.layoutEditing">\n            <span class="zmdi zmdi-share"></span>\n          </button>\n      </span>\n\n      <div class="btn-group hidden-print hidden-xs" role="group" ng-show="$ctrl.dashboard.canEdit()" uib-dropdown ng-if="!$ctrl.dashboard.is_archived && !$ctrl.layoutEditing" data-test="DashboardMoreMenu">\n        <button class="btn btn-default btn-sm dropdown-toggle" uib-dropdown-toggle>\n          <span class="zmdi zmdi-more"></span>\n        </button>\n        <ul class="dropdown-menu pull-right" uib-dropdown-menu>\n          <li ng-if="!$ctrl.dashboard.is_archived" ng-class="{hidden: $ctrl.isGridDisabled}"><a ng-click="$ctrl.editLayout(true)">Edit</a></li>\n          <li ng-if="$ctrl.showPermissionsControl"><a ng-click="$ctrl.showManagePermissionsModal()">Manage Permissions</a></li>\n          <li ng-if="!$ctrl.dashboard.is_draft"><a ng-click="$ctrl.togglePublished()">Unpublish</a></li>\n          <li ng-if="!$ctrl.dashboard.is_archived"><a ng-click="$ctrl.archiveDashboard()">Archive</a></li>\n        </ul>\n      </div>\n    </div>\n  </div>\n\n  <div class="m-b-10 p-15 bg-white tiled" ng-if="$ctrl.layoutEditing">\n    <label>\n        <input name="input" type="checkbox" ng-model="$ctrl.dashboard.dashboard_filters_enabled" ng-change="$ctrl.updateDashboardFiltersState()">\n        Use Dashboard Level Filters\n    </label>\n  </div>\n\n  <div class="m-b-10 p-15 bg-white tiled" ng-if="$ctrl.globalParameters.length > 0">\n    <parameters parameters="$ctrl.globalParameters"></parameters>\n  </div>\n\n  <div class="m-b-10 p-15 bg-white tiled" ng-if="$ctrl.filters | notEmpty">\n    <filters filters="$ctrl.filters" on-change="$ctrl.filtersOnChange(filter, $modal)"></filters>\n  </div>\n\n  <div style="padding-bottom: 5px;" ng-if="$ctrl.dashboard.widgets.length > 0">\n    <div gridstack editing="$ctrl.layoutEditing && !$ctrl.saveInProgress" batch-update="$ctrl.updateGridItems"\n      is-one-column-mode="$ctrl.isGridDisabled" class="dashboard-wrapper"\n      ng-class="{\'preview-mode\': !$ctrl.layoutEditing, \'editing-mode\': $ctrl.layoutEditing}">\n      <div class="dashboard-widget-wrapper"\n        ng-repeat="widget in $ctrl.dashboard.widgets track by widget.id"\n        gridstack-item="widget.options.position" gridstack-item-id="{{ widget.id }}">\n        <div class="grid-stack-item-content" data-test="WidgetId{{ widget.id }}">\n          <dashboard-widget widget="widget" dashboard="$ctrl.dashboard" on-delete="$ctrl.removeWidget(widget.id)"></dashboard-widget>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class="add-widget-container" ng-if="$ctrl.layoutEditing">\n    <h2>\n      <i class="zmdi zmdi-widgets"></i>\n      <span class="hidden-xs hidden-sm">Widgets are individual query visualizations or text boxes you can place on your dashboard in various arrangements.</span>\n    </h2>\n    <div>\n      <a class="btn btn-default" ng-click="$ctrl.showAddTextboxDialog()">Add Textbox</a>\n      <a class="btn btn-primary m-l-10" ng-click="$ctrl.showAddWidgetDialog()">Add Widget</a>\n    </div>\n  </div>\n</div>\n'},function(e,t){e.exports='<div class="container p-t-10 p-b-20">\n  <page-header title="$ctrl.dashboard.name"></page-header>\n\n  <div class="m-b-5">\n    <filters ng-if="$ctrl.dashboard.dashboard_filters_enabled"></filters>\n  </div>\n\n  <div style="padding-bottom: 5px" ng-if="$ctrl.dashboard.widgets.length > 0">\n    <div gridstack editing="false" class="dashboard-wrapper preview-mode">\n      <div class="dashboard-widget-wrapper"\n        ng-repeat="widget in $ctrl.dashboard.widgets"\n        gridstack-item="widget.options.position" gridstack-item-id="{{ widget.id }}">\n        <div class="grid-stack-item-content">\n          <dashboard-widget widget="widget" dashboard="$ctrl.dashboard" public="true"></dashboard-widget>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div id="footer">\n  <div class="text-center">\n    <a href="https://redash.io"><img ng-src="{{$ctrl.logoUrl}}" width="38"/></a>\n  </div>\n  Powered by <a href="https://redash.io/?ref=public-dashboard">Redash</a>\n</div>\n'},function(e,t){e.exports='<settings-screen>\n  <div class="row">\n    <div class="col-md-12">\n      <p>\n        <a href="data_sources/new" class="btn btn-default" ng-class="{\'disabled\': !$ctrl.policy.isCreateDataSourceEnabled()}">\n          <i class="fa fa-plus"></i> New Data Source</a>\n        <datasources-list-extra></datasources-list-extra>\n      </p>\n      <div class="database-source">\n        <a class="visual-card" ng-href="data_sources/{{dataSource.id}}" ng-repeat="dataSource in $ctrl.dataSources" title="{{dataSource.name}}">\n          <img ng-src="/static/images/db-logos/{{dataSource.type}}.png" alt="{{dataSource.name}}">\n          <h3>{{dataSource.name}}</h3>\n        </a>\n      </div>\n    </div>\n  </div>\n</settings-screen>'},function(e,t){e.exports='<settings-screen>\n  <div class="row">\n    <div class="col-md-12">\n      <p>\n        <a href="destinations/new" class="btn btn-default"><i class="fa fa-plus"></i> New Alert Destination</a>\n      </p>\n      <div class="database-source">\n        <a class="visual-card" ng-href="destinations/{{destination.id}}" ng-repeat="destination in destinations">\n          <img ng-src="/static/images/destinations/{{destination.type}}.png" alt="{{destination.name}}">\n          <h3>{{destination.name}}</h3>\n        </a>\n      </div>\n    </div>\n  </div>\n</settings-screen>\n'},function(e,t){e.exports='<div class="container">\n  <div ng-if="!$ctrl.isEmailVerified" class="alert alert-warning">\n      We have sent an email with a confirmation link to your email address. Please follow the link to verify your email address. <a ng-click="$ctrl.verifyEmail()">Resend email</a>.\n  </div>\n  <empty-state\n    title="\'Welcome to Redash \'"\n    description="\'Connect to any data source, easily visualize and share your data\'"\n    illustration="\'dashboard\'"\n    help-link="\'https://redash.io/help/user-guide/getting-started\'"\n    show-dashboard-step="true"\n    show-invite-step="true"\n    onboarding-mode="true"\n  ></empty-state>\n\n  <home-extra></home-extra>\n\n  <div class="tile">\n    <div class="t-body tb-padding">\n      <div class="row">\n        <div class="col-sm-6">\n          <p class="f-500 m-b-20 c-black">Favorite Dashboards</p>\n\n          <p ng-if="$ctrl.noDashboards">\n            <span class="btn-favourite">\n              <i class="fa fa-star" aria-hidden="true"></i>\n            </span>\n            Favorite <a href="dashboards">Dashboards</a> will appear here\n          </p>\n\n          <div class="list-group">\n            <a ng-href="dashboard/{{dashboard.slug}}" class="list-group-item" ng-repeat="dashboard in $ctrl.favoriteDashboards"\n              ng-if="dashboard.is_favorite">\n              <span class="btn-favourite">\n                <i class="fa fa-star" aria-hidden="true"></i>\n              </span>\n              {{dashboard.name}}\n              <span class="label label-default" ng-if="dashboard.is_draft">Unpublished</span>\n            </a>\n          </div>\n        </div>\n\n        <div class="col-sm-6">\n          <p class="f-500 m-b-20 c-black">Favorite Queries</p>\n          <p ng-if="$ctrl.noQueries">\n            <span class="btn-favourite">\n              <i class="fa fa-star" aria-hidden="true"></i>\n            </span>\n            Favorite <a href="queries">Queries</a> will appear here\n          </p>\n          <div class="list-group">\n            <a ng-href="queries/{{query.id}}" class="list-group-item" ng-repeat="query in $ctrl.favoriteQueries" ng-if="query.is_favorite">\n              <span class="btn-favourite">\n                <i class="fa fa-star" aria-hidden="true"></i>\n              </span>\n              {{query.name}}\n              <span class="label label-default" ng-if="query.is_draft">Unpublished</span>\n            </a>\n          </div>\n        </div>\n      </div>\n\n    </div>\n  </div>\n</div>\n'},function(e,t){e.exports='<div class="modal-header">\n    <button type="button" class="close" aria-label="Close" ng-click="$ctrl.close()"><span aria-hidden="true">&times;</span></button>\n    <h4 class="modal-title">Add to Dashboard</h4>\n</div>\n<div class="modal-body">\n    <form name="alertForm" class="form">\n      <div class="form-group">\n        <label>Choose the dashboard to add this query to:</label>\n        <ui-select ng-model="$ctrl.dashboardList" reset-search-input="false" on-select="$ctrl.onDashboardSelected($item)" ng-disabled="$ctrl.saveInProgress">\n          <ui-select-match placeholder="Search a dashboard by name">{{$select.selected.name}}</ui-select-match>\n          <ui-select-choices repeat="q in $ctrl.dashboards"\n                             refresh="$ctrl.searchDashboards($select.search, $ctrl.limitToUsersDashboards)"\n                             refresh-delay="0">\n            <div ng-bind-html="$ctrl.trustAsHtml(q.name | highlight: $select.search)"></div>\n          </ui-select-choices>\n        </ui-select>\n      </div>\n    </form>\n</div>'},function(e,t){e.exports='<settings-screen>\n  <div class="">\n    <form name="snippetForm" class="form">\n      <div class="form-group">\n        <label>Trigger</label>\n        <input type="string" class="form-control" ng-model="$ctrl.snippet.trigger" ng-disabled="!$ctrl.canEdit" required autofocus>\n      </div>\n\n      <div class="form-group">\n        <label>Description</label>\n        <input type="string" class="form-control" ng-model="$ctrl.snippet.description" ng-disabled="!$ctrl.canEdit">\n      </div>\n\n      <div class="form-group">\n        <label>Snippet</label>\n        <pre ng-if="!$ctrl.canEdit">{{$ctrl.snippet.snippet}}</pre>\n        <div ui-ace="$ctrl.editorOptions" ng-model="$ctrl.snippet.snippet" style="height:300px" ng-if="$ctrl.canEdit"></div>\n      </div>\n\n      <div class="form-group" ng-if="$ctrl.canEdit">\n        <button class="btn btn-primary" ng-disabled="!snippetForm.$valid" ng-click="$ctrl.saveChanges()">Save</button>\n        <button class="btn btn-danger" ng-if="$ctrl.snippet.id" ng-click="$ctrl.delete()">Delete</button>\n      </div>\n      <small ng-if="$ctrl.snippet.user">\n        Created by:\n        <img ng-src="{{ $ctrl.snippet.user.profile_image_url }}" class="profile__image_thumb"/>\n        <span ng-class="{\'text-muted\': $ctrl.snippet.user.is_disabled}">{{$ctrl.snippet.user.name}}</span>\n      </small>\n    </form>\n  </div>\n</settings-screen>\n'},function(e,t){e.exports='<settings-screen>\n    <div class="row">\n        <div class="col-md-12">\n          <p>\n            <a href="query_snippets/new" class="btn btn-default"><i class="fa fa-plus"></i> New Snippet</a>\n          </p>\n\n          <table class="table table-border table-hover">\n            <thead>\n              <tr>\n                <th>Trigger</th>\n                <th>Description</th>\n                <th>Snippet</th>\n                <th>Created By</th>\n                <th>Updated At</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr ng-repeat="snippet in $ctrl.snippets.getPageRows()">\n                <td>\n                  <a href="query_snippets/{{snippet.id}}">{{snippet.trigger}}</a>\n                </td>\n                <td>\n                  {{snippet.description}}\n                </td>\n                <td>\n                  {{snippet.snippet}}\n                </td>\n                <td>\n                  <img ng-src="{{ snippet.user.profile_image_url }}" class="profile__image_thumb"/>\n                  <span ng-class="{\'text-muted\': snippet.user.is_disabled}">{{snippet.user.name}}</span>\n                </td>\n                <td>\n                  <span am-time-ago="snippet.created_at"></span>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n          <paginator paginator="$ctrl.snippets"></paginator>\n        </div>\n    </div>\n</settings-screen>\n'},function(e,t){e.exports='<settings-screen>\n    <div class="row" data-test="OrganizationSettings">\n        <div class="col-md-offset-4 col-md-4">\n            <h3 class="m-t-0">General</h3>\n            <p>\n                <label>\n                    Date Format\n                </label>\n                <select class="form-control" ng-model="$ctrl.settings.date_format" ng-change="$ctrl.update(\'date_format\')">\n                    <option ng-repeat="date_format in $ctrl.dateFormatList" value="{{date_format}}">{{date_format}}</option>\n                </select>\n            </p>\n\n            <p>\n                <h4>Feature Flags</h4>\n\n                <label>\n                    <input name="input" type="checkbox" ng-model="$ctrl.settings.feature_show_permissions_control" ng-change="$ctrl.update(\'feature_show_permissions_control\')"\n                        accesskey="tab"> Enable experimental multiple owners support\n                </label>\n            </p>\n            <hr>\n            <h3>Authentication</h3>\n            <p>\n                <label>\n                    <input name="input" type="checkbox" ng-model="$ctrl.settings.auth_password_login_enabled" ng-change="$ctrl.update(\'auth_password_login_enabled\')"\n                        accesskey="tab" ng-disabled="$ctrl.disablePasswordLoginToggle()"> Password Login Enabled\n                    <span uib-popover="Password login can be disabled only if another login method is enabled." popover-trigger="\'mouseenter\'"\n                        ng-if="$ctrl.disablePasswordLoginToggle()">\n                        <i class="fa fa-question-circle"></i>\n                    </span>\n                </label>\n\n                <div class="callout callout-warning" ng-if="!$ctrl.settings.auth_password_login_enabled">\n                    Password based login is currently disabled and users will be able to login only with the enabled SSO options.\n                </div>\n            </p>\n\n            <div ng-if="$ctrl.googleLoginEnabled">\n                <h4>Google Login</h4>\n                <label>\n                    Allowed Google Apps Domains\n                </label>\n                <ui-select multiple tagging tagging-label="false" ng-model="$ctrl.settings.auth_google_apps_domains" tagging-tokens="SPACE|,"\n                    title="Google Apps Domain(s)"\n                    ng-change="$ctrl.update(\'auth_google_apps_domains\')">\n                    <ui-select-match placeholder="Google Apps Domain(s)">{{$item}}</ui-select-match>\n                    \x3c!-- the ui-select-choices is here just to make ui-select work --\x3e\n                    <ui-select-choices repeat="domain in $ctrl.domains">\n                        {{domain}}\n                    </ui-select-choices>\n                </ui-select>\n\n                <div class="callout callout-info m-t-5" ng-if="$ctrl.settings.auth_google_apps_domains | notEmpty">\n                    Any user registered with a <strong>{{$ctrl.settings.auth_google_apps_domains | join}}</strong> Google Apps account will be able to login. If they don\'t have an existing user, a new user will be created and join the <strong>Default</strong> group.\n                </div>\n            </div>\n\n            <h4>SAML</h4>\n            <p>\n                <label>\n                    <input name="input" type="checkbox" ng-model="$ctrl.settings.auth_saml_enabled" ng-change="$ctrl.update(\'auth_saml_enabled\')"\n                        accesskey="tab"> SAML Enabled\n                </label>\n\n                <div ng-show="$ctrl.settings.auth_saml_enabled">\n                    <div class="form-group">\n                        <label>SAML Metadata URL</label>\n                        <input name="input" type="string" class="form-control" ng-model="$ctrl.settings.auth_saml_metadata_url" accesskey="tab" ng-change="$ctrl.update(\'auth_saml_metadata_url\')"\n                            ng-model-options="{ debounce: 200 }">\n                    </div>\n                    <div class="form-group">\n                        <label>SAML Entity ID</label>\n                        <input name="input" type="string" class="form-control" ng-model="$ctrl.settings.auth_saml_entity_id" accesskey="tab" ng-change="$ctrl.update(\'auth_saml_entity_id\')"\n                            ng-model-options="{ debounce: 200 }">\n                    </div>\n                    <div class="form-group">\n                        <label>SAML NameID Format</label>\n                        <input name="input" type="string" class="form-control" ng-model="$ctrl.settings.auth_saml_nameid_format" accesskey="tab"\n                            ng-change="$ctrl.update(\'auth_saml_nameid_format\')" ng-model-options="{ debounce: 200 }">\n                    </div>\n                </div>\n            </p>\n        </div>\n    </div>\n</settings-screen>\n'},function(e,t,n){n(1431),n(1425),e.exports=n(1426)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var r={"./en-SG":462,"./en-SG.js":462,"./en-au":463,"./en-au.js":463,"./en-ca":464,"./en-ca.js":464,"./en-gb":465,"./en-gb.js":465,"./en-ie":466,"./en-ie.js":466,"./en-il":467,"./en-il.js":467,"./en-nz":468,"./en-nz.js":468};function a(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=i,e.exports=a,a.id=749},,,,,function(e,t,n){var r={"./avatar.svg":450,"./db-logos/Cassandra.png":755,"./db-logos/athena.png":756,"./db-logos/aws_es.png":757,"./db-logos/axibasetsd.png":758,"./db-logos/bigquery.png":759,"./db-logos/clickhouse.png":760,"./db-logos/cockroach.png":761,"./db-logos/csv.png":762,"./db-logos/databricks.png":763,"./db-logos/db2.png":764,"./db-logos/drill.png":765,"./db-logos/druid.png":766,"./db-logos/dynamodb_sql.png":767,"./db-logos/elasticsearch.png":768,"./db-logos/google_analytics.png":769,"./db-logos/google_spreadsheets.png":770,"./db-logos/graphite.png":771,"./db-logos/hive.png":772,"./db-logos/hive_http.png":773,"./db-logos/impala.png":774,"./db-logos/influxdb.png":775,"./db-logos/jirajql.png":776,"./db-logos/kibana.png":777,"./db-logos/kylin.png":778,"./db-logos/mapd.png":779,"./db-logos/memsql.png":780,"./db-logos/mongodb.png":781,"./db-logos/mssql.png":782,"./db-logos/mysql.png":783,"./db-logos/oracle.png":784,"./db-logos/pg.png":785,"./db-logos/presto.png":786,"./db-logos/prometheus.png":787,"./db-logos/python.png":788,"./db-logos/qubole.png":789,"./db-logos/rds_mysql.png":790,"./db-logos/redshift.png":791,"./db-logos/results.png":792,"./db-logos/rockset.png":793,"./db-logos/salesforce.png":794,"./db-logos/scylla.png":795,"./db-logos/snowflake.png":796,"./db-logos/sqlite.png":797,"./db-logos/treasuredata.png":798,"./db-logos/uptycs.png":799,"./db-logos/url.png":800,"./db-logos/vertica.png":801,"./db-logos/yandex_appmetrika.png":802,"./db-logos/yandex_metrika.png":803,"./destinations/chatwork.png":804,"./destinations/email.png":805,"./destinations/hangouts_chat.png":806,"./destinations/hipchat.png":807,"./destinations/mattermost.png":808,"./destinations/pagerduty.png":809,"./destinations/slack.png":810,"./destinations/webhook.png":811,"./favicon-16x16.png":812,"./favicon-32x32.png":813,"./favicon-96x96.png":814,"./google_logo.svg":815,"./illustrations/alert.svg":816,"./illustrations/dashboard.svg":817,"./illustrations/query.svg":818,"./logo.png":819,"./logo_white.png":820,"./redash_icon_small.png":162};function a(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=i,e.exports=a,a.id=754},function(e,t,n){e.exports=n.p+"images/db-logos/Cassandra.png"},function(e,t,n){e.exports=n.p+"images/db-logos/athena.png"},function(e,t,n){e.exports=n.p+"images/db-logos/aws_es.png"},function(e,t,n){e.exports=n.p+"images/db-logos/axibasetsd.png"},function(e,t,n){e.exports=n.p+"images/db-logos/bigquery.png"},function(e,t,n){e.exports=n.p+"images/db-logos/clickhouse.png"},function(e,t,n){e.exports=n.p+"images/db-logos/cockroach.png"},function(e,t,n){e.exports=n.p+"images/db-logos/csv.png"},function(e,t,n){e.exports=n.p+"images/db-logos/databricks.png"},function(e,t,n){e.exports=n.p+"images/db-logos/db2.png"},function(e,t,n){e.exports=n.p+"images/db-logos/drill.png"},function(e,t,n){e.exports=n.p+"images/db-logos/druid.png"},function(e,t,n){e.exports=n.p+"images/db-logos/dynamodb_sql.png"},function(e,t,n){e.exports=n.p+"images/db-logos/elasticsearch.png"},function(e,t,n){e.exports=n.p+"images/db-logos/google_analytics.png"},function(e,t,n){e.exports=n.p+"images/db-logos/google_spreadsheets.png"},function(e,t,n){e.exports=n.p+"images/db-logos/graphite.png"},function(e,t,n){e.exports=n.p+"images/db-logos/hive.png"},function(e,t,n){e.exports=n.p+"images/db-logos/hive_http.png"},function(e,t,n){e.exports=n.p+"images/db-logos/impala.png"},function(e,t,n){e.exports=n.p+"images/db-logos/influxdb.png"},function(e,t,n){e.exports=n.p+"images/db-logos/jirajql.png"},function(e,t,n){e.exports=n.p+"images/db-logos/kibana.png"},function(e,t,n){e.exports=n.p+"images/db-logos/kylin.png"},function(e,t,n){e.exports=n.p+"images/db-logos/mapd.png"},function(e,t,n){e.exports=n.p+"images/db-logos/memsql.png"},function(e,t,n){e.exports=n.p+"images/db-logos/mongodb.png"},function(e,t,n){e.exports=n.p+"images/db-logos/mssql.png"},function(e,t,n){e.exports=n.p+"images/db-logos/mysql.png"},function(e,t,n){e.exports=n.p+"images/db-logos/oracle.png"},function(e,t,n){e.exports=n.p+"images/db-logos/pg.png"},function(e,t,n){e.exports=n.p+"images/db-logos/presto.png"},function(e,t,n){e.exports=n.p+"images/db-logos/prometheus.png"},function(e,t,n){e.exports=n.p+"images/db-logos/python.png"},function(e,t,n){e.exports=n.p+"images/db-logos/qubole.png"},function(e,t,n){e.exports=n.p+"images/db-logos/rds_mysql.png"},function(e,t,n){e.exports=n.p+"images/db-logos/redshift.png"},function(e,t,n){e.exports=n.p+"images/db-logos/results.png"},function(e,t,n){e.exports=n.p+"images/db-logos/rockset.png"},function(e,t,n){e.exports=n.p+"images/db-logos/salesforce.png"},function(e,t,n){e.exports=n.p+"images/db-logos/scylla.png"},function(e,t,n){e.exports=n.p+"images/db-logos/snowflake.png"},function(e,t,n){e.exports=n.p+"images/db-logos/sqlite.png"},function(e,t,n){e.exports=n.p+"images/db-logos/treasuredata.png"},function(e,t,n){e.exports=n.p+"images/db-logos/uptycs.png"},function(e,t,n){e.exports=n.p+"images/db-logos/url.png"},function(e,t,n){e.exports=n.p+"images/db-logos/vertica.png"},function(e,t,n){e.exports=n.p+"images/db-logos/yandex_appmetrika.png"},function(e,t,n){e.exports=n.p+"images/db-logos/yandex_metrika.png"},function(e,t,n){e.exports=n.p+"images/destinations/chatwork.png"},function(e,t,n){e.exports=n.p+"images/destinations/email.png"},function(e,t,n){e.exports=n.p+"images/destinations/hangouts_chat.png"},function(e,t,n){e.exports=n.p+"images/destinations/hipchat.png"},function(e,t,n){e.exports=n.p+"images/destinations/mattermost.png"},function(e,t,n){e.exports=n.p+"images/destinations/pagerduty.png"},function(e,t,n){e.exports=n.p+"images/destinations/slack.png"},function(e,t,n){e.exports=n.p+"images/destinations/webhook.png"},function(e,t,n){e.exports=n.p+"images/favicon-16x16.png"},function(e,t,n){e.exports=n.p+"images/favicon-32x32.png"},function(e,t,n){e.exports=n.p+"images/favicon-96x96.png"},function(e,t,n){e.exports=n.p+"images/google_logo.svg"},function(e,t,n){e.exports=n.p+"images/illustrations/alert.svg"},function(e,t,n){e.exports=n.p+"images/illustrations/dashboard.svg"},function(e,t,n){e.exports=n.p+"images/illustrations/query.svg"},function(e,t,n){e.exports=n.p+"images/logo.png"},function(e,t,n){e.exports=n.p+"images/logo_white.png"},function(e,t,n){var r={"./AutocompleteToggle.jsx":392,"./BigMessage.jsx":60,"./DateInput.jsx":394,"./DateRangeInput.jsx":397,"./DateTimeInput.jsx":291,"./DateTimeRangeInput.jsx":292,"./DialogWrapper.jsx":34,"./DynamicComponent.jsx":219,"./EditInPlace.jsx":398,"./EditParameterSettingsDialog.jsx":220,"./EmailSettingsWarning.jsx":402,"./FavoritesControl.jsx":403,"./Footer.jsx":1039,"./HelpTrigger.jsx":223,"./InputWithCopy.jsx":139,"./NoTaggedObjectsFound.jsx":224,"./PageHeader.jsx":163,"./Paginator.jsx":79,"./ParameterMappingInput.jsx":72,"./ParameterValueInput.jsx":404,"./PreviewCard.jsx":106,"./QueryBasedParameterInput.jsx":405,"./QueryEditor.jsx":1442,"./QuerySelector.jsx":221,"./SelectItemsDialog.jsx":225,"./SortIcon.jsx":1093,"./TagsList.jsx":409,"./TimeAgo.jsx":410,"./admin/CeleryStatus.jsx":411,"./alerts/alert-subscriptions/index.js":1109,"./app-header/index.js":1110,"./app-view/error-handler.js":412,"./app-view/index.js":1112,"./cancel-query-button/index.js":1113,"./dashboards/AddTextboxDialog.jsx":413,"./dashboards/AddWidgetDialog.jsx":414,"./dashboards/EditParameterMappingsDialog.jsx":415,"./dashboards/edit-dashboard-dialog.js":1115,"./dashboards/gridstack/gridstack.js":542,"./dashboards/gridstack/index.js":1122,"./dashboards/widget.js":1124,"./dynamic-form/DynamicForm.jsx":226,"./dynamic-form/dynamicFormHelper.js":171,"./dynamic-table/default-cell/index.js":1147,"./dynamic-table/default-cell/utils.js":234,"./dynamic-table/dynamic-table-row.js":1148,"./dynamic-table/index.js":1149,"./dynamic-table/json-cell/index.js":1152,"./dynamic-table/json-cell/json-view-interactive.js":417,"./empty-state/EmptyState.jsx":165,"./filters.js":1155,"./groups/CreateGroupDialog.jsx":418,"./groups/DeleteGroupButton.jsx":227,"./groups/DetailsPageSidebar.jsx":228,"./groups/GroupName.jsx":229,"./groups/ListItemAddon.jsx":169,"./items-list/ItemsList.jsx":48,"./items-list/classes/ItemsFetcher.js":296,"./items-list/classes/ItemsSource.js":80,"./items-list/classes/Paginator.js":419,"./items-list/classes/Sorter.js":168,"./items-list/classes/StateStorage.js":69,"./items-list/components/EmptyState.jsx":230,"./items-list/components/ItemsTable.jsx":24,"./items-list/components/LoadingState.jsx":59,"./items-list/components/Sidebar.jsx":52,"./keywordBuilder.js":408,"./layouts/ContentWithSidebar.jsx":54,"./overlay.js":1157,"./parameters.js":1158,"./permissions-editor/index.js":1159,"./proptypes.js":36,"./queries/ScheduleDialog.jsx":420,"./queries/SchedulePhrase.jsx":421,"./queries/alert-unsaved-changes.js":1160,"./queries/api-key-dialog.js":1161,"./queries/embed-code-dialog.js":1162,"./queries/query-results-link.js":1163,"./queries/schema-browser.js":1164,"./queries/visualization-embed.js":1165,"./query-link.js":1166,"./rd-tab/index.js":1167,"./rd-timer.js":1168,"./settings-screen.js":1169,"./tab-nav/index.js":1170,"./tags-control/EditTagsDialog.jsx":399,"./tags-control/TagsControl.jsx":120,"./type-picker.js":1171,"./users/ChangePasswordDialog.jsx":422,"./users/CreateUserDialog.jsx":423,"./users/UserEdit.jsx":424,"./users/UserShow.jsx":425};function a(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=i,e.exports=a,a.id=821},function(e,t,n){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"Footer",function(){return o}),n.d(t,"default",function(){return s});var r=n(1),a=n.n(r),i=n(14);function o(){return a.a.createElement("div",{id:"footer"},a.a.createElement("a",{href:"https://redash.io"},"Redash"),"  ",a.a.createElement("a",{href:"https://redash.io/help/"},"Documentation"),"  ",a.a.createElement("a",{href:"https://github.com/getredash/redash"},"Contribute"))}function s(e){e.component("footer",Object(i.react2angular)(o))}s.init=!0},function(e,t,n){},,,,function(e,t,n){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},,function(e,t,n){"use strict";n.r(t),n.d(t,"SortIcon",function(){return l}),n.d(t,"default",function(){return u});var r=n(1),a=n.n(r),i=n(0),o=n.n(i),s=n(14);function l(e){var t=e.column,n=e.sortColumn,r=e.reverse;return t!==n?null:a.a.createElement("span",null,a.a.createElement("i",{className:"fa fa-sort-"+(r?"desc":"asc")}))}function u(e){e.component("sortIcon",Object(s.react2angular)(l))}l.propTypes={column:o.a.string,sortColumn:o.a.string,reverse:o.a.bool},l.defaultProps={column:null,sortColumn:null,reverse:!1},u.init=!0},,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return s});n(19);var r=n(2),a=n(646),i=n.n(a);function o(e,t,n,a,i,o,s){e.newSubscription={},e.subscribers=[],e.destinations=[],e.currentUser=a,t.all([o.query().$promise,i.query({alertId:e.alertId}).$promise]).then(function(t){var n=t[0],i=t[1],o=Object(r.compact)(i.map(function(e){return e.destination&&e.destination.id})),s=Object(r.compact)(i.map(function(e){return!e.destination&&e.user.id}));e.destinations=n.filter(function(e){return!Object(r.includes)(o,e.id)}),Object(r.includes)(s,a.id)||e.destinations.unshift({user:{name:a.name}}),e.newSubscription.destination=e.destinations[0],e.subscribers=i}),e.destinationsDisplay=function(e){if(!e)return"";var t=e;return e.destination?t=t.destination:t.user&&(t={name:"".concat(e.user.name," (Email)"),icon:"fa-envelope",type:"user"}),n.trustAsHtml('<i class="fa '.concat(t.icon,'"></i>&nbsp;').concat(t.name))},e.saveSubscriber=function(){var t=new i({alert_id:e.alertId});e.newSubscription.destination.id&&(t.destination_id=e.newSubscription.destination.id),t.$save(function(){s.success("Subscribed."),e.subscribers.push(t),e.destinations=Object(r.without)(e.destinations,e.newSubscription.destination),e.destinations.length>0?e.newSubscription.destination=e.destinations[0]:e.newSubscription.destination=void 0},function(){s.error("Failed saving subscription.")})},e.unsubscribe=function(t){var n=t.destination,i=t.user;t.$delete(function(){s.success("Unsubscribed"),e.subscribers=Object(r.without)(e.subscribers,t),n?e.destinations.push(n):i.id===a.id&&e.destinations.push({user:{name:a.name}}),1===e.destinations.length&&(e.newSubscription.destination=e.destinations[0])},function(){s.error("Failed unsubscribing.")})}}function s(e){e.directive("alertSubscriptions",function(){return{restrict:"E",replace:!0,scope:{alertId:"="},template:i.a,controller:o}})}o.$inject=["$scope","$q","$sce","currentUser","AlertSubscription","Destination","toastr"],s.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return p});n(97);var r=n(64),a=n.n(r),i=n(162),o=n.n(i),s=n(647),l=n(648),u=n.n(l);n(1111);d.$inject=["$rootScope","$location","$route","$uibModal","Auth","currentUser","clientConfig","Dashboard","Query"];var c=a()("redash:appHeader");function d(e,t,n,r,a,i,l,u,d){var p=this;this.logoUrl=o.a,this.basePath=l.basePath,this.currentUser=i,this.showQueriesMenu=i.hasPermission("view_query"),this.showAlertsLink=i.hasPermission("list_alerts"),this.showNewQueryMenu=i.hasPermission("create_query"),this.showSettingsMenu=i.hasPermission("list_users"),this.showDashboardsMenu=i.hasPermission("list_dashboards"),this.frontendVersion=s,this.backendVersion=l.version,this.newVersionAvailable=l.newVersionAvailable&&i.isAdmin,this.reload=function(){c("Reloading dashboards and queries."),u.favorites().$promise.then(function(e){p.dashboards=e.results}),d.favorites().$promise.then(function(e){p.queries=e.results})},this.reload(),e.$on("reloadFavorites",this.reload),this.newDashboard=function(){r.open({component:"editDashboardDialog",resolve:{dashboard:function(){return{name:null,layout:null}}}})},this.searchQueries=function(){t.path("/queries").search({q:p.searchTerm}),n.reload()},this.logout=function(){a.logout()}}function p(e){e.component("appHeader",{template:u.a,controller:d})}p.init=!0},function(e,t,n){},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return m});var r=n(64),a=n.n(r),i=n(121),o=n(412),s=n(649),l=n.n(s);function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=a()("redash:app-view"),d=new o.ErrorHandler,p={default:{showHeader:!0,showFooter:!0,bodyClass:!1},fixed:{showHeader:!0,showFooter:!1,bodyClass:"fixed-layout"},defaultSignedOut:{showHeader:!1,showFooter:!1}};var f=function(){function e(t,n,r){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$rootScope=t,this.showHeaderAndFooter=!1,this.layout=p.defaultSignedOut,this.handler=d,t.$on("$routeChangeStart",function(e,t){a.handler.reset();var i=t.$$route||{authenticated:!0};i.authenticated&&(c("Requested authenticated route: ",t),r.isAuthenticated()||(e.preventDefault(),r.requireSession().then(function(){a.applyLayout(i),n.reload()})))}),t.$on("$routeChangeSuccess",function(e,t){var n=t.$$route||{authenticated:!0};a.applyLayout(n)}),t.$on("$routeChangeError",function(e,t,n,r){var o=t.$$route||{authenticated:!0};throw a.applyLayout(o),new i.a(r)})}var t,n,r;return e.$inject=["$rootScope","$route","Auth"],t=e,(n=[{key:"applyLayout",value:function(e){this.layout=function(e){var t=p.default;return e.layout?t=p[e.layout]||p.default:e.authenticated||(t=p.defaultSignedOut),t}(e),this.$rootScope.bodyClass=this.layout.bodyClass}}])&&u(t.prototype,n),r&&u(t,r),e}();function m(e){e.factory("$exceptionHandler",function(){return function(e){d.process(e)}}),e.component("appView",{template:l.a,controller:f})}m.init=!0},function(e,t,n){"use strict";function r(){return{restrict:"E",scope:{queryId:"=",taskId:"="},transclude:!0,template:'<button class="btn btn-default" ng-disabled="inProgress" ng-click="cancelExecution()"><i class="zmdi zmdi-spinner zmdi-hc-spin" ng-if="inProgress"></i> Cancel</button>',replace:!0,controller:["$scope","$http","currentUser","Events",function(e,t,n,r){e.inProgress=!1,e.cancelExecution=function(){t.delete("api/jobs/".concat(e.taskId)).success(function(){});var n=e.queryId;"adhoc"===e.queryId&&(n=null),r.record("cancel_execute","query",n,{admin:!0}),e.inProgress=!0}}]}}function a(e){e.directive("cancelQueryButton",r)}n.r(t),n.d(t,"default",function(){return a}),a.init=!0},function(e,t,n){},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return s});n(97),n(66),n(19);var r=n(2),a=n(82),i=n(650),o={bindings:{resolve:"<",close:"&",dismiss:"&"},template:n.n(i).a,controller:["$location","$http","Events",function(e,t,n){var i=this;this.dashboard=this.resolve.dashboard,this.policy=a.policy,this.isFormValid=function(){return!Object(r.isEmpty)(i.dashboard.name)},this.saveDashboard=function(){i.isFormValid()&&(i.saveInProgress=!0,t.post("api/dashboards",{name:i.dashboard.name}).success(function(t){i.close(),e.path("/dashboard/".concat(t.slug)).search("edit").replace()}),n.record("create","dashboard"))}}]};function s(e){e.component("editDashboardDialog",o)}s.init=!0},,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return c});var r=n(17),a=n.n(r),i=n(2),o=n.n(i);n(542),n(1123);function s(e,t){t?e.addClass("widget-auto-height-enabled"):e.removeClass("widget-auto-height-enabled")}function l(e,t){return{restrict:"A",replace:!1,scope:{editing:"=",batchUpdate:"=",isOneColumnMode:"="},controller:function(){var e=this;this.$el=null,this.resizingWidget=null,this.draggingWidget=null,this.grid=function(){return e.$el?e.$el.data("gridstack"):null},this._updateStyles=function(){var t=e.grid();if(t){var n=o.a.chain(t.grid.nodes).map(function(e){return e.y+e.height}).max().value();o.a.isObject(t._styles)&&(t._styles._max=0),t._updateStyles(n+10)}},this.addWidget=function(t,n,r){var a=e.grid();a&&(a.addWidget(t,n.col,n.row,n.sizeX,n.sizeY,!1,n.minSizeX,n.maxSizeX,n.minSizeY,n.maxSizeY,r),e._updateStyles())},this.updateWidget=function(t,n){e.update(function(e){e.update(t,n.col,n.row,n.sizeX,n.sizeY),e.minWidth(t,n.minSizeX),e.maxWidth(t,n.maxSizeX),e.minHeight(t,n.minSizeY),e.maxHeight(t,n.maxSizeY)})},this.batchUpdateWidgets=function(t){e.update(function(e){o.a.each(e.grid.nodes,function(e){var n=t[e.id];n&&(o.a.isNumber(n.col)&&(e.x=parseFloat(n.col),e.el.attr("data-gs-x",e.x),e._dirty=!0),o.a.isNumber(n.row)&&(e.y=parseFloat(n.row),e.el.attr("data-gs-y",e.y),e._dirty=!0),o.a.isNumber(n.sizeX)&&(e.width=parseFloat(n.sizeX),e.el.attr("data-gs-width",e.width),e._dirty=!0),o.a.isNumber(n.sizeY)&&(e.height=parseFloat(n.sizeY),e.el.attr("data-gs-height",e.height),e._dirty=!0),o.a.isNumber(n.minSizeX)&&(e.minWidth=parseFloat(n.minSizeX),e.el.attr("data-gs-min-width",e.minWidth),e._dirty=!0),o.a.isNumber(n.maxSizeX)&&(e.maxWidth=parseFloat(n.maxSizeX),e.el.attr("data-gs-max-width",e.maxWidth),e._dirty=!0),o.a.isNumber(n.minSizeY)&&(e.minHeight=parseFloat(n.minSizeY),e.el.attr("data-gs-min-height",e.minHeight),e._dirty=!0),o.a.isNumber(n.maxSizeY)&&(e.maxHeight=parseFloat(n.maxSizeY),e.el.attr("data-gs-max-height",e.maxHeight),e._dirty=!0))})})},this.removeWidget=function(t){var n=e.grid();n&&(n.removeWidget(t,!1),e._updateStyles())},this.getNodeByElement=function(t){var n=e.grid();if(n&&n.grid)return n.grid.getNodeDataByDOMEl(a()(t))},this.setWidgetId=function(t,n){var r=e.getNodeByElement(t);r&&(r.id=n,t.attr("data-gs-id",o.a.isUndefined(n)?null:n))},this.setEditing=function(t){var n=e.grid();n&&(t?n.enable():n.disable())},this.update=function(t){var n=e.grid();if(n){n.batchUpdate();try{o.a.isFunction(t)&&t(n)}finally{n.commit(),e._updateStyles()}}}},link:function(n,r,i,s){var l=o.a.isFunction(e(i.batchUpdate).assign),u=o.a.isFunction(e(i.batchUpdate).assign),c=!0;r.addClass("grid-stack"),r.gridstack({auto:!1,verticalMargin:t.margins,cellHeight:t.rowHeight-t.margins,width:t.columns,height:0,animate:!0,float:!1,minWidth:t.mobileBreakPoint,resizable:{handles:"e, se, s, sw, w",start:function(e,t){s.resizingWidget=t.element,a()(t.element).trigger("gridstack.resize-start",s.getNodeByElement(t.element))},stop:function(e,t){s.resizingWidget=null,a()(t.element).trigger("gridstack.resize-end",s.getNodeByElement(t.element)),s.update()}},draggable:{start:function(e,t){s.draggingWidget=t.helper,a()(t.helper).trigger("gridstack.drag-start",s.getNodeByElement(t.helper))},stop:function(e,t){s.draggingWidget=null,a()(t.helper).trigger("gridstack.drag-end",s.getNodeByElement(t.helper)),s.update()}}}),s.$el=r;var d={},p=o.a.debounce(function(){o.a.each(d,function(e){e.el&&a()(e.el).trigger("gridstack.changed",e)}),d={}});r.on("change",function(e,t){t=o.a.isArray(t)?t:[],o.a.each(t,function(e){d[e.id]=e}),p()}),n.$watch("editing",function(e){s.setEditing(!!e)}),l&&(n.batchUpdate=s.batchUpdateWidgets),n.$on("$destroy",function(){c=!1,s.$el=null}),u&&function e(){var t=s.grid();if(t){var a=r.hasClass(t.opts.oneColumnModeClass);n.isOneColumnMode!==a&&(n.isOneColumnMode=a,n.$applyAsync())}c&&setTimeout(e,150)}()}}}function u(e){return{restrict:"A",replace:!1,require:"^gridstack",scope:{gridstackItem:"=",gridstackItemId:"@"},link:function(t,n,r,a){var i=!0,l=null;a.addWidget(n,t.gridstackItem,t.gridstackItemId),n.on("gridstack.resize-start",function(){var e=a.getNodeByElement(n);l=o.a.isObject(e)?e.height:null}),n.on("gridstack.resize-end",function(e,r){var a=t.gridstackItem;o.a.isObject(r)&&o.a.isObject(a)&&r.height!==l&&null!==l&&(a.autoHeight=!1,s(n,a.autoHeight),t.$applyAsync())}),n.on("gridstack.changed",function(e,n){var r=t.gridstackItem;if(o.a.isObject(n)&&o.a.isObject(r)){var a=!1;n.x!==r.col&&(r.col=n.x,a=!0),n.y!==r.row&&(r.row=n.y,a=!0),n.width!==r.sizeX&&(r.sizeX=n.width,a=!0),n.height!==r.sizeY&&(r.sizeY=n.height,a=!0),a&&t.$applyAsync()}}),t.$watch("gridstackItem.autoHeight",function(){var e=t.gridstackItem;o.a.isObject(e)?s(n,e.autoHeight):s(n,!1)}),t.$watch("gridstackItemId",function(){a.setWidgetId(n,t.gridstackItemId)}),t.$on("$destroy",function(){i=!1,e(function(){a.removeWidget(n)})}),function e(){if(!a.resizingWidget&&!a.draggingWidget){var r=t.gridstackItem,s=a.grid();if(s&&o.a.isObject(r)&&r.autoHeight){var l=function(e,t,n,r,a){var i=e[0],s=i.querySelector(".scrollbox, .spinner-container"),l=o.a.isObject(n)?n.height:1;if(s){var u=o.a.chain(s.children).map(function(e){var t=e.getBoundingClientRect(),n=window.getComputedStyle(e);return{top:t.top-parseFloat(n.marginTop),bottom:t.bottom+parseFloat(n.marginBottom)}}).reduce(function(e,t){return{top:Math.min(e.top,t.top),bottom:Math.max(e.bottom,t.bottom)}}).value()||{top:0,bottom:0},c=i.querySelector(".body-container");if(c){var d=window.getComputedStyle(s),p=o.a.chain(c.children).filter(function(e){return e!==s}).reduce(function(e,t){var n=t.getBoundingClientRect();return e+(n.bottom-n.top)},0).value(),f=t.opts.verticalMargin+parseFloat(d.paddingTop)+parseFloat(d.paddingBottom)+(s.scrollWidth>s.offsetWidth?16:0),m=u.bottom-u.top,g=t.cellHeight()+t.opts.verticalMargin;l=Math.ceil(Math.round(p+m+f)/g)}}return Math.min(Math.max(r,l),a)}(n,s,a.getNodeByElement(n),r.minSizeY,r.maxSizeY);l!==r.sizeY&&(r.sizeY=l,a.updateWidget(n,{sizeY:l}),t.$applyAsync())}}i&&setTimeout(e,150)}()}}}function c(e){e.directive("gridstack",l),e.directive("gridstackItem",u)}u.$inject=["$timeout"],l.$inject=["$parse","dashboardGridOptions"],c.init=!0},function(e,t,n){},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return m});n(97),n(103);var r=n(2),a=n(651),i=n.n(a),o=n(652),s=n.n(o),l=n(653),u=n.n(l),c=n(415);n(1125),n(1126);f.$inject=["$scope","$location","$uibModal","$window","$rootScope","$timeout","Events","currentUser"];var d={template:u.a,bindings:{resolve:"<",close:"&",dismiss:"&"},controller:function(){this.widget=this.resolve.widget}},p={template:s.a,bindings:{resolve:"<",close:"&",dismiss:"&"},controller:["toastr",function(e){var t=this;this.saveInProgress=!1,this.widget=this.resolve.widget,this.saveWidget=function(){t.saveInProgress=!0,t.widget.new_text!==t.widget.existing_text?(t.widget.text=t.widget.new_text,t.widget.save().then(function(){t.close()}).catch(function(){e.error("Widget can not be updated")}).finally(function(){t.saveInProgress=!1})):t.close()}}]};function f(e,t,n,a,i,o,s,l){var u=this;this.canViewQuery=l.hasPermission("view_query"),this.editTextBox=function(){u.widget.existing_text=u.widget.text,u.widget.new_text=u.widget.text,n.open({component:"editTextBox",resolve:{widget:u.widget}})},this.expandVisualization=function(){n.open({component:"widgetDialog",resolve:{widget:u.widget},size:"lg"})},this.hasParameters=function(){return u.widget.query.getParametersDefs().length>0},this.editParameterMappings=function(){c.default.showModal({dashboard:u.dashboard,widget:u.widget}).result.then(function(t){u.localParameters=null,t&&o(function(){return u.refresh()}),e.$applyAsync(),i.$broadcast("dashboard.update-parameters")})},this.localParametersDefs=function(){return u.localParameters||(u.localParameters=Object(r.filter)(u.widget.getParametersDefs(),function(e){return!u.widget.isStaticParam(e)})),u.localParameters},this.deleteWidget=function(){a.confirm('Are you sure you want to remove "'.concat(u.widget.getName(),'" from the dashboard?'))&&u.widget.delete().then(function(){u.deleted&&u.deleted({})})},s.record("view","widget",this.widget.id),this.load=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=t.search().maxAge;u.widget.load(e,n)},this.refresh=function(){u.load(!0)},this.widget.visualization?(s.record("view","query",this.widget.visualization.query.id,{dashboard:!0}),s.record("view","visualization",this.widget.visualization.id,{dashboard:!0}),this.type="visualization",this.load()):this.widget.restricted?this.type="restricted":this.type="textbox"}function m(e){e.component("editTextBox",p),e.component("widgetDialog",d),e.component("dashboardWidget",{template:i.a,controller:f,bindings:{widget:"<",public:"<",dashboard:"<",deleted:"&onDelete"}})}m.init=!0},function(e,t,n){},function(e,t,n){},,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return l});var r=n(2),a=n(234),i=n(655),o=n.n(i),s={image:a.renderImage,link:a.renderLink};function l(e){e.directive("dynamicTableDefaultCell",["$sanitize",function(e){return{template:o.a,restrict:"E",replace:!0,scope:{column:"=",row:"="},link:function(t){"string"===t.column.displayAs?t.allowHTML=t.column.allowHTML:t.allowHTML=Object(r.includes)(["image","link"],t.column.displayAs);var n=t.allowHTML?e:r.identity,i=s[t.column.displayAs]||a.renderDefault;t.value=n(i(t.column,t.row)),t.$watch("row",function(e,r){e!==r&&(t.value=n(i(t.column,t.row)))})}}}])}l.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return a});var r=n(2);function a(e){e.directive("dynamicTableRow",function(){return{template:"",restrict:"A",replace:!1,scope:{columns:"=",row:"=",render:"="},link:function(e,t){e.$watch("render",function(){Object(r.isFunction)(e.render)&&e.render(e,function(e){t.empty().append(e).append("<td></td>")})})}}})}a.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return f});n(188),n(19);var r=n(2),a=n(656),i=n.n(a);n(1151);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e){return null==e}function l(e,t,n){return""===t||0===n.length||0===e.length?e:(t=t.toUpperCase(),Object(r.filter)(e,function(e){for(var r=0;r<n.length;r+=1){var a=n[r].name,i=n[r].formatFunction;if(void 0!==e[a]){var o=i?i(e[a]):e[a];if((o=(""+o).toUpperCase()).indexOf(t)>=0)return!0}}return!1}))}function u(e,t){return 0===t.length||0===e.length?e:[].concat(e).sort(function(e,n){for(var r,a,i=0;i<t.length;i+=1){if(r=e[t[i].name],a=n[t[i].name],s(r)||r<a)return-1*t[i].direction;if(r>a||s(a))return 1*t[i].direction}return 0})}function c(e,t){return t=t||25,(e=parseInt(e,10)||t)>0?e:t}p.$inject=["$scope","$compile"];var d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$ctrl=t}var t,n,r;return t=e,(n=[{key:"setPage",value:function(e){this.$ctrl.onPageChanged(e)}},{key:"page",get:function(){return this.$ctrl.currentPage}},{key:"itemsPerPage",get:function(){return this.$ctrl.itemsPerPage}},{key:"totalCount",get:function(){return this.$ctrl.preparedRows.length}}])&&o(t.prototype,n),r&&o(t,r),e}();function p(e,t){var n=this;this.paginatorAdapter=new d(this),this.itemsPerPage=c(this.itemsPerPage),this.currentPage=1,this.searchTerm="",this.columns=[],this.rows=[],this.preparedRows=[],this.rowsToDisplay=[],this.orderBy=[],this.orderByColumnsIndex={},this.orderByColumnsDirection={},this.searchColumns=[];var a=function(){n.orderByColumnsIndex={},n.orderByColumnsDirection={},Object(r.each)(n.orderBy,function(e,t){n.orderByColumnsIndex[e.name]=t+1,n.orderByColumnsDirection[e.name]=e.direction})},i=function(e){e&&(n.preparedRows=u(l(n.rows,n.searchTerm,n.searchColumns),n.orderBy));var t=(n.currentPage-1)*n.itemsPerPage,r=t+n.itemsPerPage;n.rowsToDisplay=n.preparedRows.slice(t,r)},o=function(e){n.columns=e,a(),n.orderBy=[],n.currentPage=1,n.searchTerm="",n.searchColumns=Object(r.filter)(n.columns,"allowSearch"),n.renderSingleRow=function(e,t){return t(Object(r.map)(e,function(e,t){switch(e.displayAs){case"json":return'\n          <dynamic-table-json-cell column="columns['.concat(t,']" \n            value="row[columns[').concat(t,'].name]"></dynamic-table-json-cell>\n        ');default:return'\n          <dynamic-table-default-cell column="columns['.concat(t,']" \n            row="row"></dynamic-table-default-cell>\n        ')}}).join(""))}(n.columns,t),i(!0)};this.renderSingleRow=null,this.onColumnHeaderClick=function(e,t){var o=Object(r.find)(n.orderBy,function(e){return e.name===t.name});o?1===o.direction?(o.direction=-1,e.shiftKey||(n.orderBy=[o])):e.shiftKey?n.orderBy=Object(r.filter)(n.orderBy,function(e){return e.name!==t.name}):n.orderBy=[]:(e.shiftKey||(n.orderBy=[]),n.orderBy.push({name:t.name,direction:1})),a(),i(!0),e.shiftKey&&document.getSelection().removeAllRanges()},this.onPageChanged=function(t){n.currentPage=t,i(!1),e.$applyAsync()},this.onSearchTermChanged=function(){n.preparedRows=u(l(n.rows,n.searchTerm,n.searchColumns),n.orderBy),n.currentPage=1,i(!0)},this.$onChanges=function(e){var t;e.columns&&(e.rows&&(n.rows=[]),o(e.columns.currentValue)),e.rows&&(t=e.rows.currentValue,n.rows=t,n.currentPage=1,i(!0)),e.itemsPerPage&&(n.itemsPerPage=c(n.itemsPerPage),n.currentPage=1,i(!1))}}function f(e){e.component("dynamicTable",{template:i.a,controller:p,bindings:{rows:"<",columns:"<",itemsPerPage:"<"}})}f.init=!0},,function(e,t,n){},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return l});n(179);var r=n(2),a=n(417),i=n(657),o=n.n(i);function s(e){return{template:o.a,restrict:"E",replace:!0,scope:{column:"=",value:"="},link:function(t,n){var i=n.find(".json-cell-valid");t.isValid=!1,t.parsedValue=null,t.$watch("value",function(){t.parsedValue=function(e,t){if(Object(r.isString)(e)&&e.length<=t.tableCellMaxJSONSize)try{return JSON.parse(e)}catch(e){return}}(t.value,e),t.isValid=!Object(r.isUndefined)(t.parsedValue),i.empty(),Object(a.default)(i,t.parsedValue)})}}}function l(e){e.directive("dynamicTableJsonCell",s)}s.$inject=["clientConfig"],l.init=!0},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return i});var r=n(658),a={template:n.n(r).a,bindings:{onChange:"&",filters:"<"},controller:function(){var e=this;this.filterChangeListener=function(t,n){e.onChange({filter:t,$modal:n})},this.itemGroup=function(e){return"*"===e||"-"===e?"":"Values"}}};function i(e){e.component("filters",a)}i.init=!0},function(e,t,n){},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return a});var r={template:'\n  <div>\n    <div class="overlay"></div>\n    <div style="width: 100%; position:absolute; top:50px; z-index:2000">\n      <div class="well well-lg" style="width: 70%; margin: auto;" ng-transclude>\n      </div>\n    </div>\n  </div>\n  ',transclude:!0};function a(e){e.component("overlay",r)}a.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return l});n(18),n(97);var r=n(2),a=n(659),i=n.n(a),o=n(220);function s(e){return{restrict:"E",transclude:!0,scope:{parameters:"=",syncValues:"=?",editable:"=?",changed:"&onChange",onUpdated:"="},template:i.a,link:function(t){!1!==t.syncValues&&t.$watch("parameters",function(){t.changed&&t.changed({});var n=Object(r.extend)({},e.search());t.parameters.forEach(function(e){Object(r.extend)(n,e.toUrlParams())}),e.search(n)},!0),t.showParameterSettings=function(e,n){o.default.showModal({parameter:e}).result.then(function(a){t.parameters[n]=Object(r.extend)(e,a),t.onUpdated()})}}}}function l(e){e.directive("parameters",s)}s.$inject=["$location"],l.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return o});n(18);var r=n(2),a=n(660),i={template:n.n(a).a,bindings:{resolve:"<",close:"&",dismiss:"&"},controller:["$http","User","toastr",function(e,t,n){var a=this;this.grantees=[],this.newGrantees={},this.aclUrl=this.resolve.aclUrl.url,this.owner=this.resolve.owner;var i=function(){e.get(a.aclUrl).success(function(e){a.grantees=[],Object(r.each)(e,function(e,t){e.forEach(function(e){e.access_type=t,a.grantees.push(e)})})})};i(),this.findUser=function(e){""!==e?t.query({q:e},function(e){var t=Object(r.filter)(e.results,function(e){return e.id!==a.owner.id}),n=a.grantees.map(function(e){return e.id});t.forEach(function(e){e.alreadyGrantee=Object(r.includes)(n,e.id)}),a.foundUsers=t}):a.foundUsers=[]},this.addGrantee=function(t){a.newGrantees={};var r={access_type:"modify",user_id:t.id};e.post(a.aclUrl,r).success(function(){t.alreadyGrantee=!0,i()}).catch(function(e){403===e.status?n.error("You cannot add a user to this dashboard. Ask the dashboard owner to grant them permissions."):n.error("Something went wrong.")})},this.removeGrantee=function(t){var n={access_type:"modify",user_id:t.id};e({url:a.aclUrl,method:"DELETE",data:n,headers:{"Content-Type":"application/json"}}).success(function(){a.grantees=a.grantees.filter(function(e){return e!==t}),a.foundUsers&&a.foundUsers.forEach(function(e){e.id===t.id&&(e.alreadyGrantee=!1)})})}}]};function o(e){e.component("permissionsEditor",i)}o.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return a});n(110);function r(e){return{restrict:"E",replace:!0,scope:{isDirty:"="},link:function(t){var n="".concat("You will lose your changes if you leave","\n\nAre you sure you want to leave this page?"),r=e.onbeforeunload;e.onbeforeunload=function(){return t.isDirty?"You will lose your changes if you leave":null},t.$on("$locationChangeStart",function(r,a,i){a.split("?")[0]!==i.split("?")[0]&&a.split("#")[0]!==i.split("#")[0]&&t.isDirty&&!e.confirm(n)&&r.preventDefault()}),t.$on("$destroy",function(){e.onbeforeunload=r})}}}function a(e){e.directive("alertUnsavedChanges",r)}r.$inject=["$window"],a.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return a});var r={template:'<div class="modal-header">\n    <button type="button" class="close" aria-label="Close" ng-click="$ctrl.close()"><span aria-hidden="true">&times;</span></button>\n</div>\n<div class="modal-body">\n    <h5>API Key</h5>\n    <pre>{{$ctrl.apiKey}}</pre>\n\n    <h5>Example API Calls:</h5>\n\n    <div>\n        Results in CSV format:\n\n        <pre>{{$ctrl.csvUrl}}</pre>\n\n        Results in JSON format:\n\n        <pre>{{$ctrl.jsonUrl}}</pre>\n    </div>\n</div>',controller:["clientConfig",function(e){this.apiKey=this.resolve.query.api_key,this.csvUrl="".concat(e.basePath,"api/queries/").concat(this.resolve.query.id,"/results.csv?api_key=").concat(this.apiKey),this.jsonUrl="".concat(e.basePath,"api/queries/").concat(this.resolve.query.id,"/results.json?api_key=").concat(this.apiKey)}],bindings:{resolve:"<",close:"&",dismiss:"&"}};function a(e){e.component("apiKeyDialog",r)}a.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return i});var r=n(661),a={controller:["clientConfig",function(e){this.query=this.resolve.query,this.visualization=this.resolve.visualization,this.embedUrl="".concat(e.basePath,"embed/query/").concat(this.query.id,"/visualization/").concat(this.visualization.id,"?api_key=").concat(this.query.api_key),window.snapshotUrlBuilder&&(this.snapshotUrl=window.snapshotUrlBuilder(this.query,this.visualization))}],bindings:{resolve:"<",close:"&",dismiss:"&"},template:n.n(r).a};function i(e){e.component("embedCodeDialog",a)}i.init=!0},function(e,t,n){"use strict";function r(){return{restrict:"A",link:function(e,t,n){var r=n.fileType?n.fileType:"csv";e.$watch("queryResult && queryResult.getData() && query.name",function(n){var a;n&&(null==e.queryResult.getId()?t.attr("href",""):(a=e.query.id?"api/queries/".concat(e.query.id,"/results/").concat(e.queryResult.getId(),".").concat(r).concat(e.embed?"?api_key=".concat(e.apiKey):""):"api/query_results/".concat(e.queryResult.getId(),".").concat(r),t.attr("href",a)))})}}}function a(e){e.directive("queryResultLink",r)}n.r(t),n.d(t,"default",function(){return a}),a.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return s});n(110),n(204),n(205),n(66);var r=n(662),a=n.n(r);function i(e,t){var n=this;this.showTable=function(e){e.collapsed=!e.collapsed,t.$broadcast("vsRepeatTrigger")},this.getSize=function(e){var t=22;return e.collapsed||(t+=18*e.columns.length),t},this.isEmpty=function(){return void 0===this.schema||0===this.schema.length},this.itemSelected=function(t,n){e.$broadcast("query-editor.command","paste",n.join(".")),t.preventDefault(),t.stopPropagation()},this.splitFilter=function(e){if((e=e.replace(/ {2}/g," ")).includes(" ")){var t=e.split(" ");n.schemaFilterObject={name:t[0],columns:t[1]},n.schemaFilterColumn=t[1]}else n.schemaFilterObject=e,n.schemaFilterColumn=""}}i.$inject=["$rootScope","$scope"];var o={bindings:{schema:"<",onRefresh:"&"},controller:i,template:a.a};function s(e){e.component("schemaBrowser",o)}s.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return l});n(97);var r=n(2),a=n(162),i=n.n(a),o=n(663),s={template:n.n(o).a,bindings:{data:"<"},controller:["$routeParams","Query","QueryResult",function(e,t,n){document.querySelector("body").classList.add("headless");var a=parseInt(e.visualizationId,10);this.showQueryDescription=e.showDescription,this.apiKey=e.api_key,this.logoUrl=i.a,this.query=new t(this.data[0]),this.queryResult=new n(this.data[1]),this.visualization=Object(r.find)(this.query.visualizations,function(e){return e.id===a})}]};function l(e){function t(e,t,n){var r=t.current.params.api_key;return n.setApiKey(r),n.loadConfig()}function n(e,n,r,a){return t(0,n,a).then(function(){var t=n.current.params.queryId,a=e.get("api/queries/".concat(t)).then(function(e){return e.data}),i=e.get("api/queries/".concat(t,"/results.json").concat(location.search)).then(function(e){return e.data});return r.all([a,i])})}n.$inject=["$http","$route","$q","Auth"],t.$inject=["$http","$route","Auth"],e.component("visualizationEmbed",s),e.config(["$routeProvider",function(e){e.when("/embed/query/:queryId/visualization/:visualizationId",{template:'<visualization-embed data="$resolve.data"></visualization-embed>',resolve:{data:n}})}])}l.init=!0},function(e,t,n){"use strict";function r(e){e.component("queryLink",{bindings:{query:"<",visualization:"<",readonly:"<"},template:'\n      <a ng-href="{{$ctrl.readonly ? undefined : $ctrl.getUrl()}}" class="query-link">\n        <visualization-name visualization="$ctrl.visualization"/>\n        <span>{{$ctrl.query.name}}</span>\n      </a>\n    ',controller:function(){var e=this;this.getUrl=function(){var t=null;return e.visualization&&(t="TABLE"===e.visualization.type?"table":e.visualization.id),e.query.getUrl(!1,t)}}})}n.r(t),n.d(t,"default",function(){return r}),r.init=!0},function(e,t,n){"use strict";function r(e){return{restrict:"E",scope:{tabId:"@",name:"@",basePath:"=?"},transclude:!0,template:'<li class="rd-tab" ng-class="{active: tabId==selectedTab}"><a href="{{basePath}}#{{tabId}}">{{name}}<span ng-transclude></span></a></li>',replace:!0,link:function(t){t.basePath=t.basePath||e.path().substring(1),t.$watch(function(){return t.$parent.selectedTab},function(e){t.selectedTab=e})}}}function a(e){e.directive("rdTab",r)}n.r(t),n.d(t,"default",function(){return a}),r.$inject=["$location"],a.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return o});var r=n(10),a=n.n(r);function i(){return{restrict:"E",scope:{timestamp:"="},template:"{{currentTime}}",controller:["$scope",function(e){e.currentTime="00:00:00";var t=setInterval(function(){e.currentTime=a()(a()()-a()(e.timestamp)).utc().format("HH:mm:ss"),e.$digest()},1e3);e.$on("$destroy",function(){t&&(clearInterval(t),t=null)})}]}}function o(e){e.directive("rdTimer",i)}o.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return o});var r=n(70),a=n(664),i=n.n(a);function o(e){e.component("settingsScreen",{transclude:!0,template:i.a,controller:["$location","currentUser",function(e,t){this.settingsMenu=r.default,this.isActive=function(t){return t.isActive(e.path())},this.isAvailable=function(e){return void 0===e||t.hasPermission(e)}}]})}o.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return a});n(270),n(18);function r(e){this.tabs.forEach(function(t){t.isActive?t.active=t.isActive(e.path()):t.active=e.path().startsWith("/".concat(t.path))})}function a(e){e.component("tabNav",{template:'<ul class="tab-nav bg-white"><li ng-repeat="tab in $ctrl.tabs" ng-class="{\'active\': tab.active }"><a ng-href="{{tab.path}}">{{tab.name}}</a></li></ul>',controller:r,bindings:{tabs:"<"}})}r.$inject=["$location"],a.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return i});var r=n(665),a=n.n(r);function i(e){e.component("typePicker",{template:a.a,bindings:{types:"<",title:"@",imgRoot:"@",onTypeSelect:"="},controller:function(){this.filter={}}})}i.init=!0},function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=1172},function(e,t,n){var r={"./alert-dialog.js":1174,"./alert-subscription.js":1175,"./alert.js":235,"./auth.js":13,"./dashboard.js":172,"./data-source.js":170,"./destination.js":1176,"./events.js":1177,"./getTags.js":164,"./group.js":55,"./keyboard-shortcuts.js":407,"./navigateTo.js":129,"./ng.js":11,"./notifications.js":236,"./offline-listener.js":1178,"./organizationStatus.js":130,"./policy/DefaultPolicy.js":416,"./policy/index.js":82,"./query-result.js":426,"./query-snippet.js":406,"./query.js":47,"./recordEvent.js":127,"./settingsMenu.js":70,"./user.js":45,"./utils.js":231,"./widget.js":91};function a(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=i,e.exports=a,a.id=1173},function(e,t,n){"use strict";n.r(t),n.d(t,"AlertDialog",function(){return a}),n.d(t,"default",function(){return s});n(35);function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}o.$inject=["$uibModal"];var a=null,i={template:'\n<div class="modal-header">\n    <h4 class="modal-title" ng-if="$ctrl.title">{{$ctrl.title}}</h4>\n</div>\n<div class="modal-body">\n  <p ng-bind-html="$ctrl.message"></p>\n</div>\n<div class="modal-footer">\n  <button class="btn btn-default" ng-click="$ctrl.dismiss()">Cancel</button>\n  <button class="btn" ng-class="$ctrl.confirm.class" ng-click="$ctrl.close()" ng-if="$ctrl.confirm.show">{{$ctrl.confirm.title}}</button>\n</div>\n  ',bindings:{close:"&",dismiss:"&",resolve:"<"},controller:function(){this.title=this.resolve.title,this.message=this.resolve.message,this.confirm=r({},{class:"btn-sucess",show:!0,title:"OK"},this.resolve.confirm)}};function o(e){return{open:function(t,n,r){return e.open({component:"alertDialog",resolve:{title:function(){return t},message:function(){return n},confirm:function(){return r}}}).result}}}function s(e){e.component("alertDialog",i),e.factory("AlertDialog",o),e.run(["$injector",function(e){a=e.get("AlertDialog")}])}s.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"AlertSubscription",function(){return r}),n.d(t,"default",function(){return i}),a.$inject=["$resource"];var r=null;function a(e){return e("api/alerts/:alertId/subscriptions/:subscriberId",{alertId:"@alert_id",subscriberId:"@id"})}function i(e){e.factory("AlertSubscription",a),e.run(["$injector",function(e){r=e.get("AlertSubscription")}])}i.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"Destination",function(){return r}),n.d(t,"default",function(){return i}),a.$inject=["$resource"];var r=null;function a(e){return e("api/destinations/:id",{id:"@id"},{get:{method:"GET",cache:!1,isArray:!1},query:{method:"GET",cache:!1,isArray:!0}})}function i(e){e.factory("Destination",a),e.run(["$injector",function(e){r=e.get("Destination")}])}i.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return i});var r=n(127);function a(){this.record=r.default}function i(e){e.service("Events",a)}i.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return a});var r=n(11);function a(e){e.run(function(){window.addEventListener("offline",function(){!function(e){window.addEventListener("online",function t(){r.toastr.remove(e.toastId),window.removeEventListener("online",t)})}(r.toastr.warning("<div>Please check your Internet connection.</div>","",{allowHtml:!0,autoDismiss:!1,timeOut:!1,tapToDismiss:!0}))})})}a.init=!0},function(e,t,n){var r={"./box-plot/index.js":1443,"./chart/index.js":1182,"./chart/plotly/index.js":1183,"./chart/plotly/utils.js":83,"./choropleth/index.js":1371,"./choropleth/utils.js":107,"./cohort/index.js":1372,"./counter/index.js":1375,"./edit-visualization-dialog.js":1376,"./funnel/index.js":1377,"./index.js":1379,"./map/index.js":1380,"./pivot/index.js":1384,"./sankey/index.js":1445,"./sunburst/index.js":1444,"./table/index.js":1390,"./word-cloud/index.js":1392};function a(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=i,e.exports=a,a.id=1179},,,function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return p});n(31),n(67),n(187),n(18),n(19);var r=n(2),a=n(667),i=n.n(a),o=n(668),s=n.n(o);c.$inject=["ColorPalette","clientConfig"];var l={globalSeriesType:"column",sortX:!0,legend:{enabled:!0},yAxis:[{type:"linear"},{type:"linear",opposite:!0}],xAxis:{type:"-",labels:{enabled:!0}},error_y:{type:"data",visible:!0},series:{stacking:null,error_y:{type:"data",visible:!0}},seriesOptions:{},valuesOptions:{},columnMapping:{},numberFormat:"0,0[.]00000",percentFormat:"0[.]00%",textFormat:"",defaultColumns:3,defaultRows:8,minColumns:1,minRows:5};function u(){return{restrict:"E",scope:{queryResult:"=",options:"=?"},template:i.a,replace:!1,controller:["$scope","clientConfig",function(e,t){function n(t){return e.options.seriesOptions[t.name]?e.options.seriesOptions[t.name].zIndex:0}function a(){if(!Object(r.isUndefined)(e.queryResult)&&e.queryResult.getData()){var t=e.queryResult.getChartData(e.options.columnMapping);e.chartSeries=Object(r.sortBy)(t,n)}}e.chartSeries=[],e.$watch("options",function(){a(),e.plotlyOptions=Object(r.extend)({showDataLabels:"pie"===e.options.globalSeriesType,dateTimeFormat:t.dateTimeFormat},l,e.options)},!0),e.$watch("queryResult && queryResult.getData()",a)}]}}function c(e,t){return{restrict:"E",template:s.a,scope:{queryResult:"=",options:"=?"},link:function(n){function a(){n.columns=n.queryResult.getColumns(),n.columnNames=Object(r.map)(n.columns,function(e){return e.name}),n.columnNames.length>0&&Object(r.each)(Object(r.difference)(Object(r.keys)(n.options.columnMapping),n.columnNames),function(e){delete n.options.columnMapping[e]})}function i(){var e=n.queryResult.getChartData(n.options.columnMapping),t=Object(r.map)(e,function(e){return e.name}),a=Object(r.keys)(n.options.seriesOptions);if(Object(r.each)(Object(r.difference)(t,a),function(e){n.options.seriesOptions[e]={type:n.options.globalSeriesType,yAxis:0},n.form.seriesList.push(e)}),Object(r.each)(Object(r.difference)(a,t),function(e){n.form.seriesList=Object(r.without)(n.form.seriesList,e),delete n.options.seriesOptions[e]}),"pie"===n.options.globalSeriesType){var i=new Set;Object(r.each)(e,function(e){Object(r.each)(e.data,function(e){i.add(e.x)})});var o=[];i.forEach(function(e){return o.push(e)});var s=Object(r.difference)(o,Object(r.keys)(n.options.valuesOptions));Object(r.each)(s,function(e){n.options.valuesOptions[e]={},n.form.valuesList.push(e)}),Object(r.each)(Object(r.keys)(n.options.valuesOptions),function(e){-1===o.indexOf(e)&&delete n.options.valuesOptions[e]}),n.form.valuesList=Object(r.intersection)(n.form.valuesList,o)}}function o(e,t){n.options.columnMapping[t]=e}function s(e){o("unused",e)}function u(){n.options&&Object(r.defaults)(n.options,Object(r.extend)({},l,{showDataLabels:"pie"===n.options.globalSeriesType,dateTimeFormat:t.dateTimeFormat}))}n.currentTab="general",n.colors=Object(r.extend)({Automatic:null},e),n.stackingOptions={Disabled:null,Stack:"stack"},n.changeTab=function(e){n.currentTab=e},n.chartTypes={line:{name:"Line",icon:"line-chart"},column:{name:"Bar",icon:"bar-chart"},area:{name:"Area",icon:"area-chart"},pie:{name:"Pie",icon:"pie-chart"},scatter:{name:"Scatter",icon:"circle-o"},bubble:{name:"Bubble",icon:"circle-o"},heatmap:{name:"Heatmap",icon:"th"},box:{name:"Box",icon:"square-o"}},t.allowCustomJSVisualizations&&(n.chartTypes.custom={name:"Custom",icon:"code"}),n.xAxisScales=[{label:"Auto Detect",value:"-"},{label:"Datetime",value:"datetime"},{label:"Linear",value:"linear"},{label:"Logarithmic",value:"logarithmic"},{label:"Category",value:"category"}],n.yAxisScales=["linear","logarithmic","datetime","category"],n.chartTypeChanged=function(){Object(r.keys)(n.options.seriesOptions).forEach(function(e){n.options.seriesOptions[e].type=n.options.globalSeriesType}),n.options.showDataLabels="pie"===n.options.globalSeriesType,n.$applyAsync()},n.colorScheme=["Blackbody","Bluered","Blues","Earth","Electric","Greens","Greys","Hot","Jet","Picnic","Portland","Rainbow","RdBu","Reds","Viridis","YlGnBu","YlOrRd","Custom..."],n.showSizeColumnPicker=function(){return Object(r.some)(n.options.seriesOptions,function(e){return"bubble"===e.type})},n.showZColumnPicker=function(){return Object(r.some)(n.options.seriesOptions,function(e){return"heatmap"===e.type})},void 0===n.options.customCode&&(n.options.customCode="// Available variables are x, ys, element, and Plotly\n// Type console.log(x, ys); for more info about x and ys\n// To plot your graph call Plotly.plot(element, ...)\n// Plotly examples and docs: https://plot.ly/javascript/"),a(),n.$watch("options.columnMapping",function(){"done"===n.queryResult.status&&i()},!0),n.$watch(function(){return[n.queryResult.getId(),n.queryResult.status]},function(e){e[0]&&"done"===e[1]&&(a(),n.queryResult.getData()&&0!==n.queryResult.getData().length&&0!==n.columns.length&&(n.form.yAxisColumns=Object(r.intersection)(n.form.yAxisColumns,n.columnNames),Object(r.includes)(n.columnNames,n.form.xAxisColumn)||(n.form.xAxisColumn=void 0),Object(r.includes)(n.columnNames,n.form.groupby)||(n.form.groupby=void 0)),i())},!0),n.form={yAxisColumns:[],seriesList:Object(r.sortBy)(Object(r.keys)(n.options.seriesOptions),function(e){return n.options.seriesOptions[e].zIndex}),valuesList:Object(r.keys)(n.options.valuesOptions)},n.$watchCollection("form.seriesList",function(e){Object(r.each)(e,function(e,t){n.options.seriesOptions[e].zIndex=t,n.options.seriesOptions[e].index=0})}),n.$watchCollection("form.yAxisColumns",function(e,t){Object(r.each)(t,s),Object(r.each)(e,Object(r.partial)(o,"y"))}),n.$watch("form.xAxisColumn",function(e,t){void 0!==t&&s(t),void 0!==e&&o("x",e)}),n.$watch("form.errorColumn",function(e,t){void 0!==t&&s(t),void 0!==e&&o("yError",e)}),n.$watch("form.sizeColumn",function(e,t){void 0!==t&&s(t),void 0!==e&&o("size",e)}),n.$watch("form.zValColumn",function(e,t){void 0!==t&&s(t),void 0!==e&&o("zVal",e)}),n.$watch("form.groupby",function(e,t){void 0!==t&&s(t),void 0!==e&&o("series",e)}),Object(r.has)(n.options,"legend")||(n.options.legend={enabled:!0}),n.columnNames&&Object(r.each)(n.options.columnMapping,function(e,t){n.columnNames.length>0&&!Object(r.includes)(n.columnNames,t)||("x"===e?n.form.xAxisColumn=t:"y"===e?n.form.yAxisColumns.push(t):"series"===e?n.form.groupby=t:"yError"===e?n.form.errorColumn=t:"size"===e?n.form.sizeColumn=t:"zVal"===e&&(n.form.zValColumn=t))}),u(),n.$watch("options",u),n.templateHint='\n        <div class="p-b-5">Use special names to access additional properties:</div>\n        <div><code>{{ @@name }}</code> series name;</div>\n        <div><code>{{ @@x }}</code> x-value;</div>\n        <div><code>{{ @@y }}</code> y-value;</div>\n        <div><code>{{ @@yPercent }}</code> relative y-value;</div>\n        <div><code>{{ @@yError }}</code> y deviation;</div>\n        <div><code>{{ @@size }}</code> bubble size;</div>\n        <div class="p-t-5">Also, all query result columns can be referenced using\n          <code class="text-nowrap">{{ column_name }}</code> syntax.</div>\n      '}}}var d={bindings:{color:"<"},template:"<span style='width: 12px; height: 12px; background-color: {{$ctrl.color}}; display: inline-block; margin-right: 5px;'></span>"};function p(e){e.component("colorBox",d),e.directive("chartRenderer",u),e.directive("chartEditor",c),e.config(["VisualizationProvider",function(e){e.registerVisualization({type:"CHART",name:"Chart",renderTemplate:'<chart-renderer options="visualization.options" query-result="queryResult"></chart-renderer>',editorTemplate:'<chart-editor options="visualization.options" query-result="queryResult"></chart-editor>',defaultOptions:l})}])}p.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return v});n(19);var r=n(2),a=n(131),i=n.n(a),o=n(669),s=n.n(o),l=n(670),u=n.n(l),c=n(671),d=n.n(c),p=n(672),f=n.n(p),m=n(673),g=n.n(m),h=n(83);i.a.register([s.a,u.a,d.a,f.a,g.a]),i.a.setPlotConfig({modeBarButtonsToRemove:["sendDataToCloud"]});var b=function(){return{restrict:"E",template:'<div class="plotly-chart-container" resize-event="handleResize()"></div>',scope:{options:"=",series:"="},link:function(e,t){var n=t[0].querySelector(".plotly-chart-container"),a={showLink:!1,displaylogo:!1},o={},s=[];function l(){["normal","percent"].indexOf(e.options.series.stacking)>=0&&(e.options.series.percentValues="percent"===e.options.series.stacking,e.options.series.stacking="stack"),s=Object(h.prepareData)(e.series,e.options),Object(h.updateData)(s,e.options),o=Object(h.prepareLayout)(n,e.series,e.options,s),i.a.newPlot(n,s,o,a).then(function(){Object(h.updateLayout)(n,o,function(e,t){return i.a.relayout(e,t)})}),n.on("plotly_restyle",function(t){Object(r.isArray)(t)&&Object(r.isObject)(t[0])&&t[0].visible&&(Object(h.updateData)(s,e.options),i.a.relayout(n,o))})}l(),e.$watch("series",function(e,t){e!==t&&l()}),e.$watch("options",function(e,t){e!==t&&l()},!0),e.handleResize=Object(r.debounce)(function(){Object(h.updateLayout)(n,o,function(e,t){return i.a.relayout(e,t)})},50)}}},y=function(e){return{restrict:"E",template:'<div class="plotly-chart-container" resize-event="handleResize()"></div>',scope:{series:"=",options:"="},link:function(t,n){if(e.allowCustomJSVisualizations){var a=function(){i.a.newPlot(n[0].firstChild);try{new Function("x, ys, element, Plotly",t.options.customCode)(t.x,t.ys,n[0].children[0],i.a)}catch(e){t.options.enableConsoleLogs&&console.log("Error while executing custom graph: ".concat(e))}};t.handleResize=function(){a()},t.$watch("[options.customCode, options.autoRedraw]",function(){a()},!0),t.$watch("series",function(){t.x=[],t.ys={},Object(r.each)(t.series,function(e){t.ys[e.name]=[],Object(r.each)(e.data,function(n){t.x.push(Object(h.normalizeValue)(n.x)),t.ys[e.name].push(Object(h.normalizeValue)(n.y))})}),a()},!0)}}}};function v(e){e.constant("ColorPalette",h.ColorPalette),e.directive("plotlyChart",b),e.directive("customPlotlyChart",y)}y.$inject=["clientConfig"],v.init=!0},,,function(e,t){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return y});var r=n(2),a=n.n(r),i=n(76),o=n.n(i),s=(n(620),n(71)),l=(n(621),n(622),n(107)),u=n(674),c=n.n(u),d=n(675),p=n.n(d),f=n(676),m=n.n(f);b.$inject=["ChoroplethPalette"],h.$inject=["$sanitize","$http"];var g=a.a.bind(function(e,t){return this[t]||(this[t]=e.get(t).then(function(e){return e.data})),this[t]},{});function h(e,t){return{restrict:"E",template:c.a,scope:{queryResult:"=",options:"=?"},link:function(n,r){var i=null,u=null,c=null,d=!1;function p(){if(!d){var e=u.getBounds();n.options.bounds=[[e._southWest.lat,e._southWest.lng],[e._northEast.lat,e._northEast.lng]],n.$applyAsync()}}function f(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).disableAnimation,t=void 0!==e&&e;if(u&&c){var r=n.options.bounds||c.getBounds(),a=t?{animate:!1,duration:0}:null;u.fitBounds(r,a)}}function h(){if(u&&(u.remove(),u=null,c=null),i){n.formatValue=Object(l.createNumberFormatter)(n.options.valueFormat,n.options.noValuePlaceholder);var t=Object(l.prepareData)(n.queryResult.getData(),n.options.countryCodeColumn,n.options.valueColumn),a=Object(l.createScale)(i.features,t,n.options),d=a.limits,m=a.colors,g=a.legend;n.legendItems=g;var h=(c=o.a.geoJson(i,{onEachFeature:function(r,a){var i=Object(l.getValueForFeature)(r,t,n.options.countryCodeType),o=n.formatValue(i),u=Object(l.prepareFeatureProperties)(r,o,t,n.options.countryCodeType),c=Object(l.getColorByValue)(i,d,m,n.options.colors.noValue);a.setStyle({color:n.options.colors.borders,weight:1,fillColor:c,fillOpacity:1}),n.options.tooltip.enabled&&a.bindTooltip(e(Object(s.b)(n.options.tooltip.template,u))),n.options.popup.enabled&&a.bindPopup(e(Object(s.b)(n.options.popup.template,u))),a.on("mouseover",function(){a.setStyle({weight:2,fillColor:Object(l.darkenColor)(c)})}),a.on("mouseout",function(){a.setStyle({weight:1,fillColor:c})})}})).getBounds();(u=o.a.map(r[0].children[0].children[0],{center:h.getCenter(),zoom:1,zoomSnap:0,layers:[c],scrollWheelZoom:!1,maxBounds:h,maxBoundsViscosity:1,attributionControl:!1,fullscreenControl:!0})).on("focus",function(){u.on("moveend",p)}),u.on("blur",function(){u.off("moveend",p)}),f({disableAnimation:!0})}}g(t,m.a).then(function(e){a.a.isObject(e)&&(i=e,h())}),n.handleResize=a.a.debounce(function(){u&&(u.invalidateSize(!1),f({disableAnimation:!0}))},50),n.$watch("queryResult && queryResult.getData()",h),n.$watch(function(){return a.a.omit(n.options,"bounds")},h,!0),n.$watch("options.bounds",function(){var e=d;d=!0,f(),d=e},!0)}}}function b(e){return{restrict:"E",template:p.a,scope:{queryResult:"=",options:"=?"},link:function(t){function n(){t.options.countryCodeType=Object(l.inferCountryCodeType)(t.queryResult.getData(),t.options.countryCodeColumn)||t.options.countryCodeType}t.currentTab="general",t.changeTab=function(e){t.currentTab=e},t.colors=e,t.clusteringModes={q:"quantile",e:"equidistant",k:"k-means"},t.legendPositions={"top-left":"top / left","top-right":"top / right","bottom-left":"bottom / left","bottom-right":"bottom / right"},t.countryCodeTypes={name:"Short name",name_long:"Full name",abbrev:"Abbreviated name",iso_a2:"ISO code (2 letters)",iso_a3:"ISO code (3 letters)",iso_n3:"ISO code (3 digits)"},t.templateHint='\n        <div class="p-b-5">All query result columns can be referenced using <code>{{ column_name }}</code> syntax.</div>\n        <div class="p-b-5">Use special names to access additional properties:</div>\n        <div><code>{{ @@value }}</code> formatted value;</div>\n        <div><code>{{ @@name }}</code> short country name;</div>\n        <div><code>{{ @@name_long }}</code> full country name;</div>\n        <div><code>{{ @@abbrev }}</code> abbreviated country name;</div>\n        <div><code>{{ @@iso_a2 }}</code> two-letter ISO country code;</div>\n        <div><code>{{ @@iso_a3 }}</code> three-letter ISO country code;</div>\n        <div><code>{{ @@iso_n3 }}</code> three-digit ISO country code.</div>\n        <div class="p-t-5">This syntax is applicable to tooltip and popup templates.</div>\n      ',t.$watch("options.countryCodeColumn",n),t.$watch("queryResult.getData()",n)}}}function y(e){e.constant("ChoroplethPalette",{}),e.directive("choroplethRenderer",h),e.directive("choroplethEditor",b),e.config(["VisualizationProvider","ColorPalette","ChoroplethPalette",function(e,t,n){a.a.extend(n,l.AdditionalColors,t);var r={defaultColumns:3,defaultRows:8,minColumns:2,countryCodeColumn:"",countryCodeType:"iso_a3",valueColumn:"",clusteringMode:"e",steps:5,valueFormat:"0,0.00",noValuePlaceholder:"N/A",colors:{min:n["Light Blue"],max:n["Dark Blue"],background:n.White,borders:n.White,noValue:n["Light Gray"]},legend:{visible:!0,position:"bottom-left",alignText:"right"},tooltip:{enabled:!0,template:"<b>{{ @@name }}</b>: {{ @@value }}"},popup:{enabled:!0,template:"Country: <b>{{ @@name_long }} ({{ @@iso_a2 }})</b>\n<br>\nValue: <b>{{ @@value }}</b>"}};e.registerVisualization({type:"CHOROPLETH",name:"Map (Choropleth)",renderTemplate:'<choropleth-renderer options="visualization.options" query-result="queryResult"></choropleth-renderer>',editorTemplate:'<choropleth-editor options="visualization.options" query-result="queryResult"></choropleth-editor>',defaultOptions:r})}])}y.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return g});n(204),n(205),n(19),n(18),n(31);var r=n(2),a=n.n(r),i=n(10),o=n.n(i),s=(n(1373),n(1374),n(677)),l=n.n(s),u={weekly:"weeks",daily:"days",monthly:"months"},c={timeInterval:"daily",mode:"diagonal",dateColumn:"date",stageColumn:"day_number",totalColumn:"total",valueColumn:"value",autoHeight:!0,defaultRows:8};function d(e){var t={};return a.a.each(e,function(e){var n=e.date+0;t[n]=t[n]||{date:o()(e.date),total:parseInt(e.total,10),values:{}},t[n].values[e.stage]=parseInt(e.value,10)}),a.a.values(t)}function p(e,t){e=a.a.map(e,function(e){return{date:e[t.dateColumn],stage:parseInt(e[t.stageColumn],10),total:parseFloat(e[t.totalColumn]),value:parseFloat(e[t.valueColumn])}});var n,r=a.a.sortBy(e,function(e){return e.date+e.stage}),i=o()(r[0].date).toDate();switch(t.mode){case"simple":n=function(e,t){var n=t.timeInterval,r=d(e),i=a.a.map(e,function(e){return e.stage}),o=a.a.min(i),s=a.a.max(i),l=null,c=[];return a.a.each(r,function(e){if(null!==l)for(var t=Math.abs(l.diff(e.date,u[n]));t>1;)c.push([0]),t-=1;l=e.date;for(var r=[e.total],a=o;a<=s;a+=1)r.push(e.values[a]);c.push(r)}),c}(r,t);break;default:n=function(e,t){var n=t.timeInterval,r=d(e),i=a.a.min(a.a.map(e,function(e){return e.stage})),s=o()(a.a.last(r).date).diff(a.a.first(r).date,u[n]),l=i+s,c=null,p=[];return a.a.each(r,function(e){if(null!==c)for(var t=Math.abs(c.diff(e.date,u[n]));t>1;){for(var r=[0],a=i;a<=l;a+=1)r.push(e.values[a]||0);p.push(r),l-=1,t-=1}c=e.date;for(var o=[e.total],s=i;s<=l;s+=1)o.push(e.values[s]||0);l-=1,p.push(o)}),p}(r,t)}return{data:n,initialDate:i}}function f(){return{restrict:"E",scope:{queryResult:"=",options:"="},template:"",replace:!1,link:function(e,t){function n(){if(t.empty(),null!==e.queryResult.getData()){var n=a.a.map(e.queryResult.getColumns(),function(e){return e.name});if(a.a.includes(n,e.options.dateColumn)&&a.a.includes(n,e.options.stageColumn)&&a.a.includes(n,e.options.totalColumn)&&a.a.includes(n,e.options.valueColumn)){var r=p(e.queryResult.getData(),e.options),i=r.data,o=r.initialDate;Cornelius.draw({initialDate:o,container:t[0],cohort:i,title:null,timeInterval:e.options.timeInterval,labels:{time:"Time",people:"Users",weekOf:"Week of"}})}}}e.options=a.a.extend({},c,e.options),e.$watch("queryResult && queryResult.getData()",n),e.$watch("options",n,!0)}}}function m(){return{restrict:"E",template:l.a,link:function(e){function t(){e.columns=e.queryResult.getColumns(),e.columnNames=a.a.map(e.columns,function(e){return e.name})}e.visualization.options=a.a.extend({},c,e.visualization.options),e.currentTab="columns",e.setCurrentTab=function(t){e.currentTab=t},t(),e.$watch(function(){return[e.queryResult.getId(),e.queryResult.status]},function(e){e[0]&&"done"===e[1]&&t()},!0)}}}function g(e){e.directive("cohortRenderer",f),e.directive("cohortEditor",m),e.config(["VisualizationProvider",function(e){e.registerVisualization({type:"COHORT",name:"Cohort",renderTemplate:'<cohort-renderer options="visualization.options" query-result="queryResult"></cohort-renderer>',editorTemplate:"<cohort-editor></cohort-editor>",defaultOptions:c})}])}g.init=!0},,,function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return f});n(19);var r=n(678),a=n.n(r),i=n(2),o=n(679),s=n.n(o),l=n(680),u=n.n(l);function c(e,t){return e>=0?e-1:(Math.abs(e)>t&&(e%=t),t+e)}function d(e){return{restrict:"E",template:s.a,link:function(t,n){t.fontSize="1em",t.scale=1;var r=n[0].querySelector("counter"),o=n[0].querySelector("counter > div");t.handleResize=function(){var e=Math.min(r.offsetWidth/o.offsetWidth,r.offsetHeight/o.offsetHeight);t.scale=Math.floor(100*e)/100};var s=function(){var n=t.queryResult.getData();if(n){var r=c(t.visualization.options.rowNumber,n.length),o=c(t.visualization.options.targetRowNumber,n.length),s=t.visualization.options.counterColName,l=t.visualization.options.targetColName,u=t.visualization.options.counterLabel;if(t.counterLabel=u||t.visualization.name,t.visualization.options.countRow?t.counterValue=n.length:s&&(t.counterValue=n[r][s]),l?(t.targetValue=n[o][l],t.targetValue&&(t.delta=t.counterValue-t.targetValue,t.trendPositive=t.delta>=0)):t.targetValue=null,t.isNumber=Object(i.isNumber)(t.counterValue),t.isNumber){t.stringPrefix=t.visualization.options.stringPrefix,t.stringSuffix=t.visualization.options.stringSuffix;var d=t.visualization.options.stringDecimal,p=t.visualization.options.stringDecChar,f=t.visualization.options.stringThouSep;(d||p||f)&&(t.counterValue=a()(t.counterValue,d,p,f),t.isNumber=!1)}else t.stringPrefix=null,t.stringSuffix=null}e(function(){t.handleResize()})};t.$watch("visualization.options",s,!0),t.$watch("queryResult && queryResult.getData()",s)}}}function p(){return{restrict:"E",template:u.a,link:function(e){e.currentTab="general",e.changeTab=function(t){e.currentTab=t},e.isValueNumber=function(){var t=e.queryResult.getData();if(t){var n=c(e.visualization.options.rowNumber,t.length),r=e.visualization.options.counterColName;e.visualization.options.countRow?e.counterValue=t.length:r&&(e.counterValue=t[n][r])}return Object(i.isNumber)(e.counterValue)}}}}function f(e){e.directive("counterEditor",p),e.directive("counterRenderer",d),e.config(["VisualizationProvider",function(e){e.registerVisualization({type:"COUNTER",name:"Counter",renderTemplate:'<counter-renderer options="visualization.options" query-result="queryResult"></counter-renderer>',editorTemplate:"<counter-editor></counter-editor>",defaultOptions:{counterColName:"counter",rowNumber:1,targetRowNumber:1,stringDecimal:0,stringDecChar:".",stringThouSep:",",defaultColumns:2,defaultRows:5}})}])}d.$inject=["$timeout"],f.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return s});n(19);var r=n(2),a=n(46),i=n(681),o={template:n.n(i).a,bindings:{resolve:"<",close:"&",dismiss:"&"},controller:["$window","currentUser","Events","Visualization","toastr",function(e,t,n,i,o){var s=this;this.query=this.resolve.query,this.queryResult=this.resolve.queryResult,this.originalVisualization=this.resolve.visualization,this.onNewSuccess=this.resolve.onNewSuccess,this.visualization=Object(a.copy)(this.originalVisualization),this.visTypes=i.visualizationTypes,this.canChangeType=!(this.visualization&&this.visualization.id),this.newVisualization=function(){return{type:i.defaultVisualization.type,name:i.defaultVisualization.name,description:"",options:i.defaultVisualization.defaultOptions}},this.visualization||(this.visualization=this.newVisualization()),this.typeChanged=function(e){var t=s.visualization.type;t&&e!==t&&s.visualization&&!s.visForm.name.$dirty&&(s.visualization.name=i.visualizations[s.visualization.type].name),t&&e!==t&&s.visualization&&(s.visualization.options=i.visualizations[s.visualization.type].defaultOptions)},this.submit=function(){s.visualization.id?n.record("update","visualization",s.visualization.id,{type:s.visualization.type}):n.record("create","visualization",null,{type:s.visualization.type}),s.visualization.query_id=s.query.id,i.save(s.visualization,function(e){o.success("Visualization saved");var t=Object(r.map)(s.query.visualizations,function(e){return e.id}).indexOf(e.id);t>-1?s.query.visualizations[t]=e:(s.query.visualizations.push(e),s.onNewSuccess&&s.onNewSuccess(e)),s.close()},function(){o.error("Visualization could not be saved")})},this.closeDialog=function(){s.visForm.$dirty?e.confirm("Are you sure you want to close the editor without saving?")&&s.close():s.close()}}]};function s(e){e.component("editVisualizationDialog",o)}s.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return g});n(18),n(549);var r=n(2),a=n(9),i=n.n(a),o=n(46),s=n.n(o),l=n(83),u=n(682),c=n.n(u);n(1378);function d(e){return e<.01?"<0.01%":e>1e3?">1000%":e.toFixed(2)+"%"}function p(e,t){this.element=t,this.watches=[];var n=i.a.select(t),a=e.visualization.options;function o(e){!function(e){var t=i.a.max(e,function(e){return e.pctPrevious}),r=n.append("table").attr("class","table table-condensed table-hover table-borderless"),o=r.append("thead").append("tr");o.append("th").text(a.stepCol.displayAs),o.append("th").attr("class","text-center").text(a.valueCol.displayAs),o.append("th").attr("class","text-center").text("% Max"),o.append("th").attr("class","text-center").text("% Previous");var s=r.append("tbody").selectAll("tr").data(e).enter().append("tr");s.append("td").attr("class","col-xs-3 step").text(function(e){return e.step}).append("div").attr("class","step-name").text(function(e){return e.step});var u=s.append("td").attr("class","col-xs-5").append("div").attr("class","container");u.append("div").attr("class","bar centered").style("background-color",l.ColorPalette.Cyan).style("width",function(e){return e.pctMax+"%"}),u.append("div").attr("class","value").text(function(e){return e.value.toLocaleString()}),s.append("td").attr("class","col-xs-2 text-center").text(function(e){return d(e.pctMax)});var c=s.append("td").attr("class","col-xs-2").append("div").attr("class","container");c.append("div").attr("class","bar").style("background-color",l.ColorPalette.Gray).style("opacity","0.2").style("width",function(e){return e.pctPrevious/t*100+"%"}),c.append("div").attr("class","value").text(function(e){return d(e.pctPrevious)})}(e)}function s(e){var t,n=e.map(function(e){return{step:Object(l.normalizeValue)(e[a.stepCol.colName]),value:Number(e[a.valueCol.colName]),sortVal:a.autoSort?"":e[a.sortKeyCol.colName]}},[]);if(0!==(t=a.autoSort?Object(r.sortBy)(n,"value").reverse():Object(r.sortBy)(n,"sortVal"))[0].value&&Object(r.every)(t,function(e){return t=e.value,!(!Object(r.isNumber)(t)||isNaN(t));var t})){var o=i.a.max(n,function(e){return e.value});return t.forEach(function(e,n){e.pctMax=e.value/o*100,e.pctPrevious=0===n?100:e.value/t[n-1].value*100}),t.slice(0,100)}}function u(){if(n.selectAll("table").remove(),t=e.queryResult.getColumnNames(),i=[a.stepCol.colName,a.valueCol.colName],a.autoSort||i.push(a.sortKeyCol.colName),!(Object(r.difference)(i,t).length>0)){var t,i,l=s(e.queryResult.getData());l&&o(l)}}u(),this.watches.push(e.$watch("visualization.options",u,!0)),this.watches.push(e.$watch("queryResult && queryResult.getData()",u))}function f(){return{restrict:"E",template:'<div class="funnel-visualization-container resize-event="handleResize()"></div>',link:function(e,t){var n=t[0].querySelector(".funnel-visualization-container"),a=new p(e,n);function i(){a.remove(),a=new p(e,n)}e.handleResize=Object(r.debounce)(i,50),e.$watch("visualization.options",function(e,t){e!==t&&i()})}}}function m(){return{restrict:"E",template:c.a}}function g(e){e.directive("funnelRenderer",f),e.directive("funnelEditor",m),e.config(["VisualizationProvider",function(e){e.registerVisualization({type:"FUNNEL",name:"Funnel",renderTemplate:'<funnel-renderer options="visualization.options" query-result="queryResult"></funnel-renderer>',editorTemplate:"<funnel-editor></funnel-editor>",defaultOptions:{stepCol:{colName:"",displayAs:"Steps"},valueCol:{colName:"",displayAs:"Value"},sortKeyCol:{colName:""},autoSort:!0,defaultRows:10}})}])}p.prototype.remove=function(){this.watches.forEach(function(e){e()}),s.a.element(this.element).empty(".vis-container")},g.init=!0},function(e,t,n){},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return p});n(35),n(66),n(19),n(350);var r=n(10),a=n.n(r),i=n(2);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(){var e=this;this.visualizations={},this.visualizationTypes=[];var t={defaultOptions:{},skipTypes:!1,editorTemplate:null};this.registerVisualization=function(n){var r=o({},t,n);void 0!==e.defaultVisualization||r.name.match(/Deprecated/)||(e.defaultVisualization=r),e.visualizations[n.type]=r,n.skipTypes||e.visualizationTypes.push({name:n.name,type:n.type})},this.getSwitchTemplate=function(t){var n=/(<[a-zA-Z0-9-]*?)( |>)/,r=Object(i.reduce)(e.visualizations,function(e,r){if(r[t]){var a='$1 ng-switch-when="'.concat(r.type,'" $2'),i=r[t].replace(n,a);return"".concat(e,"\n").concat(i)}return e},"");return r='<div ng-switch on="visualization.type">'.concat(r,"</div>")},this.$get=["$resource",function(t){var n=t("api/visualizations/:id",{id:"@id"});return n.visualizations=e.visualizations,n.visualizationTypes=e.visualizationTypes,n.renderVisualizationsTemplate=e.getSwitchTemplate("renderTemplate"),n.editorTemplate=e.getSwitchTemplate("editorTemplate"),n.defaultVisualization=e.defaultVisualization,n}]}function l(e){return{restrict:"E",scope:{visualization:"="},template:"{{name}}",replace:!1,link:function(t){e.visualizations[t.visualization.type]&&(e.visualizations[t.visualization.type].name!==t.visualization.name&&(t.name=t.visualization.name))}}}function u(e){return{restrict:"E",scope:{visualization:"=",queryResult:"="},template:'<filters filters="filters"></filters>\n'.concat(e.renderVisualizationsTemplate),replace:!1,link:function(e){e.$watch("queryResult && queryResult.getFilters()",function(t){t&&(e.filters=t)})}}}function c(e){return{restrict:"E",template:e.editorTemplate,replace:!1,scope:{visualization:"=",query:"=",queryResult:"="}}}function d(e){return function(t,n){var r=t;if(Object(i.isArray)(t)&&(r=t[0]),"date"===n.column.type){if(r&&a.a.isMoment(r))return r.format(e.dateFormat)}else if("datetime"===n.column.type&&r&&a.a.isMoment(r))return r.format(e.dateTimeFormat);return r}}function p(e){e.provider("Visualization",s),e.directive("visualizationRenderer",u),e.directive("visualizationOptionsEditor",c),e.directive("visualizationName",l),e.filter("filterValue",d)}d.$inject=["clientConfig"],l.$inject=["Visualization"],c.$inject=["Visualization"],u.$inject=["Visualization"],p.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return O});n(19),n(18),n(31);var r=n(2),a=n.n(r),i=n(9),o=n.n(i),s=n(76),l=n.n(s),u=(n(1381),n(620),n(1382),n(1383),n(683)),c=n.n(u),d=n(684),p=n.n(d),f=n(685),m=n.n(f),g=(n(621),n(622),n(686)),h=n.n(g),b=n(687),y=n.n(b);function v(){return{restrict:"E",template:h.a,link:function(e,t){var n=o.a.scale.category10(),r=l.a.map(t[0].children[0].children[0],{scrollWheelZoom:!1,fullscreenControl:!0}),i=l.a.control.layers().addTo(r),s={},u=l.a.tileLayer("//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(r);function c(){e.visualization.options.bounds=r.getBounds()}function d(){var t=e.visualization.options.bounds;if(t)r.fitBounds([[t._southWest.lat,t._southWest.lng],[t._northEast.lat,t._northEast.lng]]);else if(s){var n=a.a.flatten(a.a.map(a.a.values(s),function(e){return e.getLayers()})),i=new l.a.featureGroup(n);r.fitBounds(i.getBounds())}}r.on("focus",function(){r.on("moveend",c)}),r.on("blur",function(){r.off("moveend",c)});var p=function(e,t){return l.a.marker([e,t])},f=function(e,t,n){var r={fillColor:n,fillOpacity:.9,stroke:!1};return l.a.circleMarker([e,t],r)};function m(t,n){var o,u=e.visualization.options.latColName||"lat",c=e.visualization.options.lonColName||"lon",d=e.visualization.options.classify;if(e.visualization.options.clusterMarkers){var m=e.visualization.options.groups[t].color,g={};d&&(g.iconCreateFunction=function(e){var t=e.getChildCount(),n=" marker-cluster-";n+=t<10?"small":t<100?"medium":"large",n="";var r="color: white; background-color: ".concat(m,";");return l.a.divIcon({html:'<div style="'.concat(r,'"><span>').concat(t,"</span></div>"),className:"marker-cluster".concat(n),iconSize:new l.a.Point(40,40)})}),o=l.a.markerClusterGroup(g)}else o=l.a.layerGroup();a.a.each(n,function(n){var r,i=n[u],s=n[c];if(null!==i&&null!==s){if(d&&"none"!==d){var l=e.visualization.options.groups[t].color;r=f(i,s,l)}else r=p(i,s);r.bindPopup(function(e,t,n){var r=n[e],i=n[t],o='<ul style="list-style-type: none;padding-left: 0">';return o+="<li><strong>".concat(r,", ").concat(i,"</strong>"),a.a.each(n,function(n,r){r!==e&&r!==t&&(o+="<li>".concat(r,": ").concat(n,"</li>"))}),o}(u,c,n)),o.addLayer(r)}}),o.addTo(r),s[t]=o,i.addOverlay(o,t)}function g(){var t=e.queryResult.getData(),o=e.visualization.options.classify;if(e.visualization.options.mapTileUrl=e.visualization.options.mapTileUrl||"//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",u.setUrl(e.visualization.options.mapTileUrl),void 0===e.visualization.options.clusterMarkers&&(e.visualization.options.clusterMarkers=!0),t){var l;l=o&&"none"!==o?a.a.groupBy(t,o):{All:t};var c=a.a.keys(l),p=a.a.map(c,function(t){return e.visualization.options.groups&&e.visualization.options.groups[t]?e.visualization.options.groups[t]:{color:n(t)}});e.visualization.options.groups=a.a.zipObject(c,p),a.a.each(s,function(e){var t;(t=e)&&(i.removeLayer(t),r.removeLayer(t))}),a.a.each(l,function(e,t){m(t,e)}),d()}}e.handleResize=function(){r&&(r.invalidateSize(!1),d())},e.$watch("queryResult && queryResult.getData()",g),e.$watch("visualization.options",g,!0)}}}function w(){return{restrict:"E",template:y.a,link:function(e){e.currentTab="general",e.columns=e.queryResult.getColumns(),e.columnNames=a.a.map(e.columns,function(e){return e.name}),e.classify_columns=e.columnNames.concat("none"),e.mapTiles=[{name:"OpenStreetMap",url:"//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"},{name:"OpenStreetMap BW",url:"//{s}.tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png"},{name:"OpenStreetMap DE",url:"//{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png"},{name:"OpenStreetMap FR",url:"//{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png"},{name:"OpenStreetMap Hot",url:"//{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png"},{name:"Thunderforest",url:"//{s}.tile.thunderforest.com/cycle/{z}/{x}/{y}.png"},{name:"Thunderforest Spinal",url:"//{s}.tile.thunderforest.com/spinal-map/{z}/{x}/{y}.png"},{name:"OpenMapSurfer",url:"//korona.geog.uni-heidelberg.de/tiles/roads/x={x}&y={y}&z={z}"},{name:"Stamen Toner",url:"//stamen-tiles-{s}.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"},{name:"Stamen Toner Background",url:"//stamen-tiles-{s}.a.ssl.fastly.net/toner-background/{z}/{x}/{y}.png"},{name:"Stamen Toner Lite",url:"//stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}.png"},{name:"OpenTopoMap",url:"//{s}.tile.opentopomap.org/{z}/{x}/{y}.png"}]}}}function O(e){e.directive("mapRenderer",v),e.directive("mapEditor",w),e.config(["VisualizationProvider",function(e){e.registerVisualization({type:"MAP",name:"Map (Markers)",renderTemplate:'<map-renderer options="visualization.options" query-result="queryResult"></map-renderer>',editorTemplate:"<map-editor></map-editor>",defaultOptions:{defaultColumns:3,defaultRows:8,minColumns:2,classify:"none",clusterMarkers:!0}})}])}l.a.Icon.Default.mergeOptions({iconUrl:c.a,iconRetinaUrl:p.a,shadowUrl:m.a}),delete l.a.Icon.Default.prototype._getIconUrl,O.init=!0},,,,function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return p});n(35),n(18);var r=n(46),a=n.n(r),i=n(17),o=n.n(i),s=(n(1385),n(1386),n(688)),l=n.n(s);n(1387);function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(){return{restrict:"E",scope:{queryResult:"=",visualization:"="},template:"",replace:!1,link:function(e,t){function n(){var n=e.visualization.options.controls&&e.visualization.options.controls.enabled;t[0].querySelectorAll(".pvtAxisContainer, .pvtRenderer, .pvtVals").forEach(function(e){e.style.display=n?"none":""})}e.$watch("queryResult && queryResult.getData()",function(){e.$watch("queryResult && queryResult.getData()",function(r){if(r&&null!==e.queryResult.getData()){r=a.a.copy(e.queryResult.getData());var i={renderers:o.a.pivotUtilities.renderers,onRefresh:function(t){var n=u({},t);delete n.aggregators,delete n.renderers,delete n.onRefresh,delete n.rendererOptions,delete n.localeStrings,e.visualization&&(e.visualization.options=n)}};e.visualization&&u(i,e.visualization.options),o()(t).pivotUI(r,i,!0),n()}})}),e.$watch("visualization.options.controls.enabled",n)}}}function d(){return{restrict:"E",template:l.a}}function p(e){e.directive("pivotTableRenderer",c),e.directive("pivotTableEditor",d),e.config(["VisualizationProvider",function(e){e.registerVisualization({type:"PIVOT",name:"Pivot Table",renderTemplate:'<pivot-table-renderer visualization="visualization" query-result="queryResult"></pivot-table-renderer>',editorTemplate:"<pivot-table-editor></pivot-table-editor>",defaultOptions:{defaultRows:10,defaultColumns:3,minColumns:2}})}])}p.init=!0},,,function(e,t,n){},,,function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return y});n(204),n(205),n(19);var r=n(2),a=n.n(r),i=n(426),o=n(71),s=n(691),l=n.n(s),u=n(692),c=n.n(u);n(1391);b.$inject=["clientConfig"],h.$inject=["clientConfig"];var d=[5,10,15,20,25,50,100,150,200,250],p=[{name:"Text",value:"string"},{name:"Number",value:"number"},{name:"Date/Time",value:"datetime"},{name:"Boolean",value:"boolean"},{name:"JSON",value:"json"},{name:"Image",value:"image"},{name:"Link",value:"link"}],f={itemsPerPage:25,autoHeight:!0,defaultRows:14,defaultColumns:3,minColumns:2};function m(e,t){var n={date:t.dateFormat||"DD/MM/YYYY",datetime:t.dateTimeFormat||"DD/MM/YYYY HH:mm"},r={integer:t.integerFormat||"0,0",float:t.floatFormat||"0,0.00"};return{dateTimeFormat:n[e.type],numberFormat:r[e.type],booleanValues:t.booleanValues||["false","true"],imageUrlTemplate:"{{ @ }}",imageTitleTemplate:"{{ @ }}",imageWidth:"",imageHeight:"",linkUrlTemplate:"{{ @ }}",linkTextTemplate:"{{ @ }}",linkTitleTemplate:"{{ @ }}",linkOpenInNewTab:!0}}function g(e,t){var n=function(e){var t={integer:"number",float:"number",boolean:"boolean",date:"datetime",datetime:"datetime"};return a.a.map(e,function(e,n){return{name:e.name,type:e.type,displayAs:t[e.type]||"string",visible:!0,order:1e5+n,title:Object(i.getColumnCleanName)(e.name),allowSearch:!1,alignContent:(r=e.type,["integer","float","boolean","date","datetime"].indexOf(r)>=0?"right":"left"),allowHTML:!0,highlightLinks:!1};var r})}(e);return t=function(e,t){e=a.a.map(e,function(e){return e.name}),t=a.a.map(t,function(e){return e.name}),t=a.a.filter(t,function(t){return a.a.includes(e,t)}),e=a.a.filter(e,function(e){return a.a.includes(t,e)});for(var n=0;n<e.length;n+=1)if(t[n]!==e[n])return!0;return!1}(e,t)?a.a.fromPairs(a.a.map(t,function(e,t){return[e.name,a.a.extend({},e,{order:t})]})):a.a.fromPairs(a.a.map(t,function(e){return[e.name,a.a.omit(e,"order")]})),a.a.each(n,function(e){return a.a.extend(e,t[e.name])}),a.a.sortBy(n,"order")}function h(e){return{restrict:"E",scope:{queryResult:"=",options:"="},template:l.a,replace:!1,controller:["$scope",function(t){function n(){if(null==t.queryResult.getData())t.gridColumns=[],t.filters=[];else{t.filters=t.queryResult.getFilters(),t.gridRows=t.queryResult.getData();var n=t.queryResult.getColumns(),r=g(n,a.a.extend({},t.options).columns);t.gridColumns=function(e,t,n){e=a.a.fromPairs(a.a.map(e,function(e){return[e.name,e]}));var r=a.a.map(t,function(t){return a.a.extend(m(t,n),t,e[t.name])});return r=a.a.map(r,function(e){return a.a.extend(e,{formatFunction:Object(o.a)(e)})}),a.a.sortBy(a.a.filter(r,"visible"),"order")}(n,r,e)}}t.gridColumns=[],t.gridRows=[],t.$watch("queryResult && queryResult.getData()",function(e){e&&n()}),t.$watch("options",function(e,t){e!==t&&n()},!0)}]}}function b(e){return{restrict:"E",template:c.a,link:function(t){t.allowedItemsPerPage=d,t.displayAsOptions=p,t.currentTab="columns",t.setCurrentTab=function(e){t.currentTab=e},t.$watch("visualization",function(){t.visualization&&(t.visualization.options=a.a.extend({},f,t.visualization.options))}),t.$watch("queryResult && queryResult.getData()",function(n){if(n){var r=null!==t.queryResult.getData()?t.queryResult.getColumns():[];t.visualization.options.columns=a.a.map(g(r,t.visualization.options.columns),function(t){return a.a.extend(m(t,e),t)})}}),t.templateHint="\n        All columns can be referenced using <code>{{ column_name }}</code> syntax.\n        Use <code>{{ @ }}</code> to reference current (this) column.\n        This syntax is applicable to URL, Title and Size options.\n      "}}}function y(e){e.directive("gridRenderer",h),e.directive("gridEditor",b),e.config(["VisualizationProvider",function(e){var t=f;e.registerVisualization({type:"TABLE",name:"Table",renderTemplate:'<grid-renderer options="visualization.options" query-result="queryResult"></grid-renderer>',editorTemplate:"<grid-editor></grid-editor>",defaultOptions:t})}])}y.init=!0},function(e,t,n){},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return m});n(117),n(110),n(18);var r=n(9),a=n.n(r),i=n(46),o=n.n(i),s=n(693),l=n.n(s),u=n(2),c=n(694),d=n.n(c);function p(){return{restrict:"E",link:function(e,t){function n(){if(o.a.isDefined(e.queryResult)){var n=e.queryResult.getData(),r={};e.visualization.options.column&&(r=function(e,t){var n={};return e.forEach(function(e){e[t].toString().split(" ").forEach(function(e){e in n?n[e]+=1:n[e]=1})}),n}(n,e.visualization.options.column));var i=[];Object(u.each)(r,function(e,t){i.push({text:t,size:10+Math.pow(e,2)})});var s=a.a.scale.category20(),c=l()().size([500,500]).words(i).padding(5).rotate(function(){return 90*Math.floor(2*Math.random())}).font("Impact").fontSize(function(e){return e.size});c.on("end",function(e){a.a.select(t[0].parentNode).select("svg").remove(),a.a.select(t[0].parentNode).append("svg").attr("width",c.size()[0]).attr("height",c.size()[1]).append("g").attr("transform","translate(".concat(c.size()[0]/2,",").concat(c.size()[1]/2,")")).selectAll("text").data(e).enter().append("text").style("font-size",function(e){return"".concat(e.size,"px")}).style("font-family","Impact").style("fill",function(e,t){return s(t)}).attr("text-anchor","middle").attr("transform",function(e){return"translate(".concat([e.x,e.y],")rotate(").concat(e.rotate,")")}).text(function(e){return e.text})}),c.start()}}e.$watch("queryResult && queryResult.getData()",n),e.$watch("visualization.options.column",n)}}}function f(){return{restrict:"E",template:d.a}}function m(e){e.directive("wordCloudEditor",f),e.directive("wordCloudRenderer",p);var t={defaultRows:8};e.config(["VisualizationProvider",function(e){e.registerVisualization({type:"WORD_CLOUD",name:"Word Cloud",renderTemplate:'<word-cloud-renderer options="visualization.options" query-result="queryResult"></word-cloud-renderer>',editorTemplate:"<word-cloud-editor></word-cloud-editor>",defaultOptions:t})}])}m.init=!0},function(e,t,n){var r={"./admin/outdated-queries/index.js":1394,"./admin/status/index.js":1395,"./admin/tasks/index.js":1396,"./alert/index.js":1397,"./alerts/AlertsList.jsx":1398,"./dashboards/DashboardList.jsx":1399,"./dashboards/DashboardListEmptyState.jsx":428,"./dashboards/ShareDashboardDialog.jsx":429,"./dashboards/dashboard.js":1403,"./dashboards/public-dashboard-page.js":1404,"./data-sources/list.js":1405,"./data-sources/show.js":237,"./destinations/list.js":1406,"./destinations/show.js":1407,"./groups/GroupDataSources.jsx":1408,"./groups/GroupMembers.jsx":1409,"./groups/GroupsList.jsx":1410,"./home/index.js":1411,"./queries-list/QueriesList.jsx":1412,"./queries-list/QueriesListEmptyState.jsx":430,"./queries/add-to-dashboard.js":1414,"./queries/source-view.js":1415,"./queries/view.js":1416,"./query-snippets/edit.js":1417,"./query-snippets/list.js":1419,"./settings/organization.js":1420,"./users/UserProfile.jsx":1421,"./users/UsersList.jsx":1423,"./users/index.js":1424};function a(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=i,e.exports=a,a.id=1393},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return u});var r=n(10),a=n.n(r),i=n(297),o=n(695),s=n.n(o);function l(e,t,n){var r=this;e.autoUpdate=!0,this.queries=new i.a([],{itemsPerPage:50});!function i(){e.autoUpdate&&(e.refresh_time=a()().add(1,"minutes"),t.get("/api/admin/queries/outdated").success(function(t){r.queries.updateRows(t.queries),e.updatedAt=1e3*t.updated_at}));var o=n(i,59e3);e.$on("$destroy",function(){o&&n.cancel(o)})}()}function u(e){return e.component("outdatedQueriesPage",{template:s.a,controller:l}),{"/admin/queries/outdated":{template:"<outdated-queries-page></outdated-queries-page>",title:"Outdated Queries"}}}l.$inject=["$scope","$http","$timeout"],u.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return o});var r=n(696),a=n.n(r);function i(e,t,n,r,a){a.record("view","page","admin/status");!function r(){t.get("/status.json").success(function(t){e.workers=t.workers,delete t.workers,e.manager=t.manager,delete t.manager,e.database_metrics=t.database_metrics,delete t.database_metrics,e.status=t});var a=n(r,59e3);e.$on("$destroy",function(){a&&n.cancel(a)})}()}function o(e){return e.component("statusPage",{template:a.a,controller:i}),{"/admin/status":{template:"<status-page></status-page>",title:"System Status"}}}i.$inject=["$scope","$http","$timeout","currentUser","Events"],o.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return l});var r=n(14),a=n(411),i=n(697),o=n.n(i);function s(e){e.record("view","page","admin/tasks")}function l(e){return e.component("adminCeleryStatus",Object(r.react2angular)(a.default)),e.component("tasksPage",{template:o.a,controller:s}),{"/admin/queries/tasks":{template:"<tasks-page></tasks-page>",title:"Celery Status"}}}s.$inject=["Events"],l.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return s});n(66),n(19);var r=n(2),a=n(698),i=n.n(a);function o(e,t,n,a,i,o,s,l,u){var c=this;this.alertId=t.alertId,"new"===this.alertId&&l.record("view","page","alerts/new"),this.trustAsHtml=function(e){return a.trustAsHtml(e)},this.onQuerySelected=function(t){c.alert.query=t,c.selectedQuery=new s(t),c.selectedQuery.getQueryResultPromise().then(function(e){c.queryResult=e,c.alert.options.column=c.alert.options.column||e.getColumnNames()[0]}),e.$applyAsync()},"new"===this.alertId?(this.alert=new u({options:{}}),this.canEdit=!0):this.alert=u.get({id:this.alertId},function(e){c.onQuerySelected(e.query),c.canEdit=o.canEdit(c.alert)}),this.ops=["greater than","less than","equals"],this.selectedQuery=null;var d=Object(r.template)("<%= query.name %>: <%= options.column %> <%= options.op %> <%= options.value %>");this.getDefaultName=function(){if(c.alert.query)return d(c.alert)},this.searchQueries=function(e){!e||e.length<3||s.query({q:e},function(e){c.queries=e.results})},this.saveChanges=function(){void 0!==c.alert.name&&""!==c.alert.name||(c.alert.name=c.getDefaultName()),""!==c.alert.rearm&&0!==c.alert.rearm||(c.alert.rearm=null),c.alert.$save(function(e){i.success("Saved."),"new"===c.alertId&&n.path("/alerts/".concat(e.id)).replace()},function(){i.error("Failed saving alert.")})},this.delete=function(){c.alert.$delete(function(){n.path("/alerts"),i.success("Alert deleted.")},function(){i.error("Failed deleting alert.")})}}function s(e){return e.component("alertPage",{template:i.a,controller:o}),{"/alerts/:alertId":{template:"<alert-page></alert-page>",title:"Alerts"}}}o.$inject=["$scope","$routeParams","$location","$sce","toastr","currentUser","Query","Events","Alert"],s.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return E});n(21),n(22),n(29),n(19);var r=n(1),a=n.n(r),i=n(14),o=n(2),s=n(163),l=n(79),u=n(165),c=n(48),d=n(80),p=n(69),f=n(59),m=n(24),g=n(235),h=n(81);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S={unknown:"label-warning",ok:"label-success",triggered:"label-danger"},j=function(e){function t(){var e,n,r,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];return r=this,n=!(i=(e=v(t)).call.apply(e,[this].concat(l)))||"object"!==b(i)&&"function"!=typeof i?w(r):i,x(w(n),"listColumns",[m.Columns.custom.sortable(function(e,t){return a.a.createElement("div",null,a.a.createElement("a",{className:"table-main-title",href:"alerts/"+t.id},t.name))},{title:"Name",field:"name"}),m.Columns.custom.sortable(function(e,t){return a.a.createElement("div",null,a.a.createElement("span",{className:"label ".concat(S[t.state])},Object(o.toUpper)(t.state)))},{title:"State",field:"state",width:"1%"}),m.Columns.timeAgo.sortable({title:"Last Updated At",field:"updated_at",className:"text-nowrap",width:"1%"}),m.Columns.avatar({field:"user",className:"p-l-0 p-r-0"},function(e){return"Created by ".concat(e)}),m.Columns.dateTime.sortable({title:"Created At",field:"created_at",className:"text-nowrap",width:"1%"})]),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props.controller;return a.a.createElement("div",{className:"container"},a.a.createElement(s.PageHeader,{title:e.params.title}),a.a.createElement("div",{className:"m-l-15 m-r-15"},!e.isLoaded&&a.a.createElement(f.default,{className:""}),e.isLoaded&&e.isEmpty&&a.a.createElement(u.EmptyState,{icon:"fa fa-bell-o",illustration:"alert",description:"Get notified on certain events",helpLink:"https://redash.io/help/user-guide/alerts/",showAlertStep:!0}),e.isLoaded&&!e.isEmpty&&a.a.createElement("div",{className:"table-responsive bg-white tiled"},a.a.createElement(m.default,{items:e.pageItems,columns:this.listColumns,orderByField:e.orderByField,orderByReverse:e.orderByReverse,toggleSorting:e.toggleSorting}),a.a.createElement(l.Paginator,{totalCount:e.totalItemsCount,itemsPerPage:e.itemsPerPage,page:e.page,onChange:function(t){return e.updatePagination({page:t})}}))))}}])&&y(n.prototype,r),i&&y(n,i),t}();function E(e){return e.component("pageAlertsList",Object(i.react2angular)(Object(c.wrap)(j,new d.ResourceItemsSource({isPlainList:!0,getRequest:function(){return{}},getResource:function(){return g.Alert.query.bind(g.Alert)},getItemProcessor:function(){return function(e){return new g.Alert(e)}}}),new p.StateStorage({orderByField:"created_at",orderByReverse:!0,itemsPerPage:20})))),Object(h.a)([{path:"/alerts",title:"Alerts",key:"alerts"}],{reloadOnSearch:!1,template:'<page-alerts-list on-error="handleError"></page-alerts-list>',controller:["$scope","$exceptionHandler",function(e,t){e.handleError=t}]})}x(j,"propTypes",{controller:c.ControllerType.isRequired}),E.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return P});n(21),n(22),n(29),n(19);var r=n(1),a=n.n(r),i=n(14),o=n(163),s=n(79),l=n(120),u=n(48),c=n(80),d=n(69),p=n(59),f=n(52),m=n(24),g=n(54),h=n(172),b=n(81),y=n(428);n(1400);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=function(e){function t(){var e,n,r,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,s=new Array(o),u=0;u<o;u++)s[u]=arguments[u];return r=this,n=!(i=(e=O(t)).call.apply(e,[this].concat(s)))||"object"!==v(i)&&"function"!=typeof i?x(r):i,j(x(n),"sidebarMenu",[{key:"all",href:"dashboards",title:"All Dashboards"},{key:"favorites",href:"dashboards/favorites",title:"Favorites",icon:function(){return a.a.createElement(f.MenuIcon,{icon:"fa fa-star"})}}]),j(x(n),"listColumns",[m.Columns.favorites({className:"p-r-0"}),m.Columns.custom.sortable(function(e,t){return a.a.createElement(a.a.Fragment,null,a.a.createElement("a",{className:"table-main-title",href:"dashboard/"+t.slug,"data-test":t.slug},t.name),a.a.createElement(l.DashboardTagsControl,{className:"d-block",tags:t.tags,isDraft:t.is_draft,isArchived:t.is_archived}))},{title:"Name",field:"name",width:null}),m.Columns.avatar({field:"user",className:"p-l-0 p-r-0"},function(e){return"Created by ".concat(e)}),m.Columns.dateTime.sortable({title:"Created At",field:"created_at",className:"text-nowrap",width:"1%"})]),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props.controller;return a.a.createElement("div",{className:"container"},a.a.createElement(o.PageHeader,{title:e.params.title}),a.a.createElement(g.default,{className:"m-l-15 m-r-15"},a.a.createElement(g.default.Sidebar,{className:"m-b-0"},a.a.createElement(f.SearchInput,{placeholder:"Search Dashboards...",value:e.searchTerm,onChange:e.updateSearch}),a.a.createElement(f.Menu,{items:this.sidebarMenu,selected:e.params.currentPage}),a.a.createElement(f.Tags,{url:"api/dashboards/tags",onChange:e.updateSelectedTags}),a.a.createElement(f.PageSizeSelect,{options:e.pageSizeOptions,value:e.itemsPerPage,onChange:function(t){return e.updatePagination({itemsPerPage:t})}})),a.a.createElement(g.default.Content,null,e.isLoaded?a.a.createElement("div",{"data-test":"DashboardLayoutContent"},e.isEmpty?a.a.createElement(y.default,{page:e.params.currentPage,searchTerm:e.searchTerm,selectedTags:e.selectedTags}):a.a.createElement("div",{className:"bg-white tiled table-responsive"},a.a.createElement(m.default,{items:e.pageItems,columns:this.listColumns,orderByField:e.orderByField,orderByReverse:e.orderByReverse,toggleSorting:e.toggleSorting}),a.a.createElement(s.Paginator,{totalCount:e.totalItemsCount,itemsPerPage:e.itemsPerPage,page:e.page,onChange:function(t){return e.updatePagination({page:t})}}))):a.a.createElement(p.default,null))))}}])&&w(n.prototype,r),i&&w(n,i),t}();function P(e){return e.component("pageDashboardList",Object(i.react2angular)(Object(u.wrap)(E,new c.ResourceItemsSource({getResource:function(e){var t=e.params.currentPage;return{all:h.Dashboard.query.bind(h.Dashboard),favorites:h.Dashboard.favorites.bind(h.Dashboard)}[t]},getItemProcessor:function(){return function(e){return new h.Dashboard(e)}}}),new d.UrlStateStorage({orderByField:"created_at",orderByReverse:!0})))),Object(b.a)([{path:"/dashboards",title:"Dashboards",key:"all"},{path:"/dashboards/favorites",title:"Favorite Dashboards",key:"favorites"}],{reloadOnSearch:!1,template:'<page-dashboard-list on-error="handleError"></page-dashboard-list>',controller:["$scope","$exceptionHandler",function(e,t){e.handleError=t}]})}j(E,"propTypes",{controller:u.ControllerType.isRequired}),P.init=!0},function(e,t,n){},,,function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return y});n(115),n(117),n(21),n(22),n(98),n(67),n(31),n(19),n(97),n(18),n(103),n(179);var r=n(2),a=n(121),i=n(164),o=n(82),s=n(91),l=n(72),u=n(39),c=n(700),d=n.n(c),p=n(429),f=n(414),m=n(413);n(623);function g(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function h(e){return r.filter(e,function(e){return!r.isObject(e.$originalPosition)||(t=e.$originalPosition,n=e.options.position,a=["col","row","sizeX","sizeY","autoHeight"],t=r.pick(t,a),n=r.pick(n,a),!!r.find(a,function(e){return n[e]!==t[e]}));var t,n,a})}function b(e,t,n,c,d,b,y,v,w,O,x,S,j){var E=this;this.saveInProgress=!1;var P=function(e){if(E.dashboard.canEdit()){E.saveInProgress=!0;return c.all(r.map(e,function(e){return e.save()})).then(function(){j.success("Changes saved."),r.each(e,function(e){r.extend(e.$originalPosition,e.options.position)})}).catch(function(){j.error("Error saving changes.")}).finally(function(){E.saveInProgress=!1})}};this.layoutEditing=!1,this.isFullscreen=!1,this.refreshRate=null,this.isGridDisabled=!1,this.updateGridItems=null,this.showPermissionsControl=x.showPermissionsControl,this.globalParameters=[],this.isDashboardOwner=!1,this.refreshRates=x.dashboardRefreshIntervals.map(function(e){return{name:Object(u.durationHumanize)(e),rate:e,enabled:!0}});var k=o.policy.getDashboardRefreshIntervals();r.isArray(k)&&r.each(this.refreshRates,function(e){e.enabled=k.indexOf(e.rate)>=0}),this.setRefreshRate=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];E.refreshRate=e,null!==e&&(t&&E.refreshDashboard(),E.autoRefresh())},this.extractGlobalParameters=function(){E.globalParameters=E.dashboard.getParametersDefs()},b.$on("dashboard.update-parameters",function(){E.extractGlobalParameters()});var _=function(e,n){var a=r.compact(E.dashboard.widgets.map(function(e){return e.getParametersDefs(),e.load(n)}));c.all(a).then(function(n){var a={};n.forEach(function(n){n.getFilters().forEach(function(n){var i=r.has(t.search(),n.name);if(i||e.dashboard_filters_enabled){if(i&&(n.current=t.search()[n.name]),!r.has(a,n.name)){var o=r.extend({},n);a[o.name]=o,a[o.name].originFilters=[]}a[n.name].originFilters.push(n)}})}),E.filters=r.values(a),E.filtersOnChange=function(e){r.each(e.originFilters,function(t){t.current=e.current})}})},q=function(e,t){y.set(e.name),E.extractGlobalParameters(),_(e,t)};this.loadDashboard=r.throttle(function(n){w.get({slug:e.dashboardSlug},function(e){if(E.dashboard=e,E.isDashboardOwner=O.id===e.user.id||O.hasPermission("admin"),S.record("view","dashboard",e.id),q(e,n),!0===t.search().edit&&(t.search("edit",null),E.editLayout(!0)),void 0!==t.search().refresh&&null===E.refreshRate){var r=Math.max(30,parseFloat(t.search().refresh));E.setRefreshRate({name:Object(u.durationHumanize)(r),rate:r},!1)}},function(e){if(5!==Math.floor(e.status/100))throw new a.a(e);E.loadDashboard()})},1e3),this.loadDashboard(),this.refreshDashboard=function(){q(E.dashboard,!0)},this.autoRefresh=function(){n(function(){E.refreshDashboard()},1e3*E.refreshRate.rate).then(function(){return E.autoRefresh()})},this.archiveDashboard=function(){var e='Are you sure you want to archive the "'.concat(E.dashboard.name,'" dashboard?');v.open("Archive Dashboard",e,{class:"btn-warning",title:"Archive"}).then(function(){S.record("archive","dashboard",E.dashboard.id),E.dashboard.$delete()})},this.showManagePermissionsModal=function(){d.open({component:"permissionsEditor",resolve:{aclUrl:{url:"api/dashboards/".concat(E.dashboard.id,"/acl")},owner:E.dashboard.user}})},this.editLayout=function(e,t){if(!E.isGridDisabled){if(!e)if(t){var n=h(E.dashboard.widgets);P(n)}else{var a={};r.each(E.dashboard.widgets,function(e){r.extend(e.options.position,e.$originalPosition),a[e.id]=e.options.position}),E.dashboard.widgets=w.prepareWidgetsForDashboard(E.dashboard.widgets),E.updateGridItems&&E.updateGridItems(a)}E.layoutEditing=e}},this.loadTags=function(){return Object(i.default)("api/dashboards/tags").then(function(e){return r.map(e,function(e){return e.name})})};var C=function(e){r.extend(E.dashboard,e),e=r.extend({},e,{slug:E.dashboard.id,version:E.dashboard.version}),w.save(e,function(t){r.extend(E.dashboard,r.pick(t,r.keys(e)))},function(e){403===e.status?j.error("Dashboard update failed: Permission Denied."):409===e.status&&j.error("It seems like the dashboard has been modified by another user. Please copy/backup your changes and reload this page.",{autoDismiss:!1})})};this.saveName=function(e){C({name:e})},this.saveTags=function(e){C({tags:e})},this.updateDashboardFiltersState=function(){_(E.dashboard,!1),w.save({slug:E.dashboard.id,version:E.dashboard.version,dashboard_filters_enabled:E.dashboard.dashboard_filters_enabled},function(e){E.dashboard=e},function(e){403===e.status?j.error("Name update failed: Permission denied."):409===e.status&&j.error("It seems like the dashboard has been modified by another user. Please copy/backup your changes and reload this page.",{autoDismiss:!1})})},this.showAddTextboxDialog=function(){m.default.showModal({dashboard:E.dashboard,onConfirm:E.addTextbox})},this.addTextbox=function(e){var t=new s.Widget({dashboard_id:E.dashboard.id,options:{isHidden:!1,position:{}},text:e,visualization:null,visualization_id:null}),n=E.dashboard.calculateNewWidgetPosition(t);return t.options.position.col=n.col,t.options.position.row=n.row,t.save().then(function(){E.dashboard.widgets.push(t),E.onWidgetAdded()})},this.showAddWidgetDialog=function(){f.default.showModal({dashboard:E.dashboard,onConfirm:E.addWidget})},this.addWidget=function(e,t){var n=new s.Widget({visualization_id:e&&e.id,dashboard_id:E.dashboard.id,options:{isHidden:!1,position:{},parameterMappings:Object(l.editableMappingsToParameterMappings)(t)},visualization:e,text:""}),r=E.dashboard.calculateNewWidgetPosition(n);n.options.position.col=r.col,n.options.position.row=r.row;var a=[n].concat(g(Object(l.synchronizeWidgetTitles)(n.options.parameterMappings,E.dashboard.widgets)));return Promise.all(a.map(function(e){return e.save()})).then(function(){E.dashboard.widgets.push(n),E.onWidgetAdded()})},this.onWidgetAdded=function(){E.extractGlobalParameters();var e=r.last(E.dashboard.widgets);if(r.isObject(e))return e.save();b.$applyAsync()},this.removeWidget=function(e){E.dashboard.widgets=E.dashboard.widgets.filter(function(t){return void 0!==t.id&&t.id!==e}),E.extractGlobalParameters(),E.layoutEditing||n(function(){var e=h(E.dashboard.widgets);P(e)},50)},this.toggleFullscreen=function(){E.isFullscreen=!E.isFullscreen,document.querySelector("body").classList.toggle("headless"),E.isFullscreen?t.search("fullscreen",!0):t.search("fullscreen",null)},this.togglePublished=function(){S.record("toggle_published","dashboard",E.dashboard.id),E.dashboard.is_draft=!E.dashboard.is_draft,E.saveInProgress=!0,w.save({slug:E.dashboard.id,name:E.dashboard.name,is_draft:E.dashboard.is_draft},function(e){E.saveInProgress=!1,E.dashboard.version=e.version})},r.has(t.search(),"fullscreen")&&this.toggleFullscreen(),this.openShareForm=function(){var e=r.some(E.dashboard.widgets,function(e){return!r.isEmpty(e.getQuery()&&e.getQuery().getParametersDefs())});p.default.showModal({dashboard:E.dashboard,hasQueryParams:e})}}function y(e){return e.component("dashboardPage",{template:d.a,controller:b}),{"/dashboard/:dashboardSlug":{template:"<dashboard-page></dashboard-page>",reloadOnSearch:!1}}}b.$inject=["$routeParams","$location","$timeout","$q","$uibModal","$scope","Title","AlertDialog","Dashboard","currentUser","clientConfig","Events","toastr"],y.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return c});n(35),n(97);var r=n(162),a=n.n(r),i=n(701),o=n.n(i);n(623);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e,t){var n=t.current.params.token;return e.get("api/dashboards/public/".concat(n)).then(function(e){return e.data})}var u={template:o.a,bindings:{dashboard:"<"},controller:["$timeout","$location","$http","$route","dashboardGridOptions","Dashboard",function(e,t,n,r,i,o){var u=this;this.dashboardGridOptions=s({},i,{resizable:{enabled:!1},draggable:{enabled:!1}}),this.logoUrl=a.a,this.public=!0,this.dashboard.widgets=o.prepareDashboardWidgets(this.dashboard.widgets);var c=Math.max(30,parseFloat(t.search().refresh));if(c){e(function t(){l(n,r).then(function(n){u.dashboard=n,u.dashboard.widgets=o.prepareDashboardWidgets(u.dashboard.widgets),e(t,1e3*c)})},1e3*c)}}]};function c(e){function t(e,t){return l(e,t)}function n(e,t,n){var r=t.current.params.token;return n.setApiKey(r),n.loadConfig()}return n.$inject=["$http","$route","Auth"],t.$inject=["$http","$route"],e.component("publicDashboardPage",u),e.config(["$routeProvider",function(e){e.when("/public/dashboards/:token",{template:'<public-dashboard-page dashboard="$resolve.dashboard"></public-dashboard-page>',reloadOnSearch:!1,resolve:{dashboard:t,session:n}})}]),[]}c.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return l});var r=n(70),a=n(82),i=n(702),o=n.n(i);function s(e){this.policy=a.policy,this.dataSources=e.query()}function l(e){return r.default.add({permission:"admin",title:"Data Sources",path:"data_sources",order:1}),e.component("dsListPage",{controller:s,template:o.a}),{"/data_sources":{template:"<ds-list-page></ds-list-page>",title:"Data Sources"}}}s.$inject=["DataSource"],l.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return s});var r=n(70),a=n(703),i=n.n(a);function o(e,t,n,r,a){e.destinations=a.query()}function s(e){return r.default.add({permission:"admin",title:"Alert Destinations",path:"destinations",order:4}),e.controller("DestinationsCtrl",o),{"/destinations":{template:i.a,controller:"DestinationsCtrl",title:"Destinations"}}}o.$inject=["$scope","$location","toastr","currentUser","Destination"],s.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return l});n(19),n(66);var r=n(2),a=n(437),i=n.n(a),o=n(237);function s(e,t,n,a,i,s,l,u,c){e.destination=t.current.locals.destination,e.destinationId=n.destinationId,e.types=t.current.locals.types,e.type=Object(r.find)(e.types,{type:e.destination.type}),e.canChangeType=void 0===e.destination.id,e.$watch("destination.id",function(t){t!==e.destinationId&&void 0!==t&&i.path("/destinations/".concat(t)).replace()}),e.setType=function(t){e.type=t,e.destination.type=t.type},e.resetType=function(){e.type=void 0,e.destination=new c({options:{}})},e.actions=[{name:"Delete",type:"danger",callback:function(t){var n='Are you sure you want to delete the "'.concat(e.destination.name,'" destination?');u.open("Delete Destination",n,o.deleteConfirm).then(function(){e.destination.$delete(function(){Object(o.toastrSuccessAndPath)("Destination","destinations",s,i)},function(e){Object(o.logAndToastrError)("destination",e,s)})},t)}}]}function l(e){return e.controller("DestinationCtrl",s),{"/destinations/new":{template:i.a,controller:"DestinationCtrl",title:"Destinations",resolve:{destination:["Destination",function(e){return new e({options:{}})}],types:["$http",function(e){return e.get("api/destinations/types").then(function(e){return e.data})}]}},"/destinations/:destinationId":{template:i.a,controller:"DestinationCtrl",title:"Destinations",resolve:{destination:["Destination","$route",function(e,t){return e.get({id:t.current.params.destinationId}).$promise}],types:["$http",function(e){return e.get("api/destinations/types").then(function(e){return e.data})}]}}}}s.$inject=["$scope","$route","$routeParams","$http","$location","toastr","currentUser","AlertDialog","Destination"],l.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return F});n(21),n(22),n(29),n(98),n(18),n(31),n(67),n(19),n(204),n(205),n(103);var r=n(2),a=n(1),i=n.n(a),o=n(14),s=n(25),l=n.n(s),u=n(285),c=n.n(u),d=n(232),p=n.n(d),f=n(30),m=n.n(f),g=n(79),h=n(48),b=n(80),y=n(69),v=n(59),w=n(24),O=n(225),x=n(106),S=n(229),j=n(169),E=n(228),P=n(54),k=n(11),_=n(13),q=n(55),C=n(170),T=n(129),$=n(81);function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var M=function(e){function t(){var e,n,a,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s=arguments.length,u=new Array(s),d=0;d<s;d++)u[d]=arguments[d];return a=this,o=(e=D(t)).call.apply(e,[this].concat(u)),n=!o||"object"!==R(o)&&"function"!=typeof o?A(a):o,I(A(n),"groupId",parseInt(n.props.controller.params.groupId,10)),I(A(n),"group",null),I(A(n),"sidebarMenu",[{key:"users",href:"groups/".concat(n.groupId),title:"Members"},{key:"datasources",href:"groups/".concat(n.groupId,"/data_sources"),title:"Data Sources",isAvailable:function(){return _.currentUser.isAdmin}}]),I(A(n),"listColumns",[w.Columns.custom(function(e,t){return i.a.createElement(x.DataSourcePreviewCard,{dataSource:t,withLink:!0})},{title:"Name",field:"name",width:null}),w.Columns.custom(function(e,t){var r=i.a.createElement(p.a,{selectedKeys:[t.view_only?"viewonly":"full"],onClick:function(e){return n.setDataSourcePermissions(t,e.key)}},i.a.createElement(p.a.Item,{key:"full"},"Full Access"),i.a.createElement(p.a.Item,{key:"viewonly"},"View Only"));return i.a.createElement(c.a,{trigger:["click"],overlay:r},i.a.createElement(l.a,{className:"w-100"},t.view_only?"View Only":"Full Access",i.a.createElement(m.a,{type:"down"})))},{width:"1%",className:"p-r-0",isAvailable:function(){return _.currentUser.isAdmin}}),w.Columns.custom(function(e,t){return i.a.createElement(l.a,{className:"w-100",type:"danger",onClick:function(){return n.removeGroupDataSource(t)}},"Remove")},{width:"1%",isAvailable:function(){return _.currentUser.isAdmin}})]),I(A(n),"removeGroupDataSource",function(e){q.Group.removeDataSource({id:n.groupId,dataSourceId:e.id}).$promise.then(function(){n.props.controller.updatePagination({page:1}),n.props.controller.update()}).catch(function(){k.toastr.error("Failed to remove data source from group.")})}),I(A(n),"setDataSourcePermissions",function(e,t){var r="full"!==t;q.Group.updateDataSource({id:n.groupId,dataSourceId:e.id},{view_only:r}).$promise.then(function(){e.view_only=r,n.forceUpdate()}).catch(function(){k.toastr.error("Failed change data source permissions.")})}),I(A(n),"addDataSources",function(){var e=C.DataSource.query().$promise,t=Object(r.map)(n.props.controller.allItems,function(e){return e.id});O.default.showModal({dialogTitle:"Add Data Sources",inputPlaceholder:"Search data sources...",selectedItemsTitle:"New Data Sources",searchItems:function(t){return t=t.toLowerCase(),e.then(function(e){return Object(r.filter)(e,function(e){return e.name.toLowerCase().includes(t)})})},renderItem:function(e,n){var a=n.isSelected,o=Object(r.includes)(t,e.id);return{content:i.a.createElement(x.DataSourcePreviewCard,{dataSource:e},i.a.createElement(j.default,{isSelected:a,alreadyInGroup:o})),isDisabled:o,className:a||o?"selected":""}},renderStagedItem:function(e,t){var n=t.isSelected;return{content:i.a.createElement(x.DataSourcePreviewCard,{dataSource:e},i.a.createElement(j.default,{isSelected:n,isStaged:!0}))}},save:function(e){var t=Object(r.map)(e,function(e){return q.Group.addDataSource({id:n.groupId,data_source_id:e.id}).$promise});return Promise.all(t)}}).result.finally(function(){n.props.controller.update()})}),n}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(t,i.a.Component),n=t,(a=[{key:"componentDidMount",value:function(){var e=this;q.Group.get({id:this.groupId}).$promise.then(function(t){e.group=t,e.forceUpdate()}).catch(function(t){e.props.controller.handleError(t)})}},{key:"render",value:function(){var e=this,t=this.props.controller;return i.a.createElement("div",{"data-test":"Group"},i.a.createElement(S.default,{className:"d-block m-t-0 m-b-15",group:this.group,onChange:function(){return e.forceUpdate()}}),i.a.createElement(P.default,null,i.a.createElement(P.default.Sidebar,null,i.a.createElement(E.default,{controller:t,group:this.group,items:this.sidebarMenu,canAddDataSources:_.currentUser.isAdmin,onAddDataSourcesClick:this.addDataSources,onGroupDeleted:function(){return Object(T.default)("/groups",!0)}})),i.a.createElement(P.default.Content,null,!t.isLoaded&&i.a.createElement(v.default,{className:""}),t.isLoaded&&t.isEmpty&&i.a.createElement("div",{className:"text-center"},"There are no data sources in this group yet.",_.currentUser.isAdmin&&i.a.createElement("div",{className:"m-t-5"},i.a.createElement("a",{href:"javascript:void(0)",onClick:this.addDataSources},"Click here")," "," to add data sources.")),t.isLoaded&&!t.isEmpty&&i.a.createElement("div",{className:"table-responsive"},i.a.createElement(w.default,{items:t.pageItems,columns:this.listColumns,showHeader:!1,context:this.actions,orderByField:t.orderByField,orderByReverse:t.orderByReverse,toggleSorting:t.toggleSorting}),i.a.createElement(g.Paginator,{totalCount:t.totalItemsCount,itemsPerPage:t.itemsPerPage,page:t.page,onChange:function(e){return t.updatePagination({page:e})}})))))}}])&&z(n.prototype,a),o&&z(n,o),t}();function F(e){return e.component("pageGroupDataSources",Object(o.react2angular)(Object(h.wrap)(M,new b.ResourceItemsSource({isPlainList:!0,getRequest:function(e,t){return{id:t.params.groupId}},getResource:function(){return q.Group.dataSources.bind(q.Group)},getItemProcessor:function(){return function(e){return new C.DataSource(e)}}}),new y.StateStorage({orderByField:"name"})))),Object($.a)([{path:"/groups/:groupId/data_sources",title:"Group Data Sources",key:"datasources"}],{reloadOnSearch:!1,template:'<settings-screen><page-group-data-sources on-error="handleError"></page-group-data-sources></settings-screen>',controller:["$scope","$exceptionHandler",function(e,t){e.handleError=t}]})}I(M,"propTypes",{controller:h.ControllerType.isRequired}),F.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return z});n(21),n(22),n(29),n(98),n(18),n(31),n(67),n(103);var r=n(2),a=n(1),i=n.n(a),o=n(14),s=n(25),l=n.n(s),u=n(79),c=n(48),d=n(80),p=n(69),f=n(59),m=n(24),g=n(225),h=n(106),b=n(229),y=n(169),v=n(228),w=n(54),O=n(11),x=n(13),S=n(55),j=n(45),E=n(129),P=n(81);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var R=function(e){function t(){var e,n,a,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s=arguments.length,u=new Array(s),c=0;c<s;c++)u[c]=arguments[c];return a=this,o=(e=q(t)).call.apply(e,[this].concat(u)),n=!o||"object"!==k(o)&&"function"!=typeof o?C(a):o,$(C(n),"groupId",parseInt(n.props.controller.params.groupId,10)),$(C(n),"group",null),$(C(n),"sidebarMenu",[{key:"users",href:"groups/".concat(n.groupId),title:"Members"},{key:"datasources",href:"groups/".concat(n.groupId,"/data_sources"),title:"Data Sources",isAvailable:function(){return x.currentUser.isAdmin}}]),$(C(n),"listColumns",[m.Columns.custom(function(e,t){return i.a.createElement(h.UserPreviewCard,{user:t,withLink:!0})},{title:"Name",field:"name",width:null}),m.Columns.custom(function(e,t){return n.group?"builtin"===n.group.type&&x.currentUser.id===t.id?null:i.a.createElement(l.a,{className:"w-100",type:"danger",onClick:function(e){return n.removeGroupMember(e,t)}},"Remove"):null},{width:"1%",isAvailable:function(){return x.currentUser.isAdmin}})]),$(C(n),"removeGroupMember",function(e,t){return S.Group.removeMember({id:n.groupId,userId:t.id}).$promise.then(function(){n.props.controller.updatePagination({page:1}),n.props.controller.update()}).catch(function(){O.toastr.error("Failed to remove member from group.")})}),$(C(n),"addMembers",function(){var e=Object(r.map)(n.props.controller.allItems,function(e){return e.id});g.default.showModal({dialogTitle:"Add Members",inputPlaceholder:"Search users...",selectedItemsTitle:"New Members",searchItems:function(e){return j.User.query({q:e}).$promise.then(function(e){return e.results})},renderItem:function(t,n){var a=n.isSelected,o=Object(r.includes)(e,t.id);return{content:i.a.createElement(h.UserPreviewCard,{user:t},i.a.createElement(y.default,{isSelected:a,alreadyInGroup:o})),isDisabled:o,className:a||o?"selected":""}},renderStagedItem:function(e,t){var n=t.isSelected;return{content:i.a.createElement(h.UserPreviewCard,{user:e},i.a.createElement(y.default,{isSelected:n,isStaged:!0}))}},save:function(e){var t=Object(r.map)(e,function(e){return S.Group.addMember({id:n.groupId},{user_id:e.id}).$promise});return Promise.all(t)}}).result.finally(function(){n.props.controller.update()})}),n}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(t,i.a.Component),n=t,(a=[{key:"componentDidMount",value:function(){var e=this;S.Group.get({id:this.groupId}).$promise.then(function(t){e.group=t,e.forceUpdate()}).catch(function(t){e.props.controller.handleError(t)})}},{key:"render",value:function(){var e=this,t=this.props.controller;return i.a.createElement("div",{"data-test":"Group"},i.a.createElement(b.default,{className:"d-block m-t-0 m-b-15",group:this.group,onChange:function(){return e.forceUpdate()}}),i.a.createElement(w.default,null,i.a.createElement(w.default.Sidebar,null,i.a.createElement(v.default,{controller:t,group:this.group,items:this.sidebarMenu,canAddMembers:x.currentUser.isAdmin,onAddMembersClick:this.addMembers,onGroupDeleted:function(){return Object(E.default)("/groups",!0)}})),i.a.createElement(w.default.Content,null,!t.isLoaded&&i.a.createElement(f.default,{className:""}),t.isLoaded&&t.isEmpty&&i.a.createElement("div",{className:"text-center"},"There are no members in this group yet.",x.currentUser.isAdmin&&i.a.createElement("div",{className:"m-t-5"},i.a.createElement("a",{href:"javascript:void(0)",onClick:this.addMembers},"Click here")," "," to add members.")),t.isLoaded&&!t.isEmpty&&i.a.createElement("div",{className:"table-responsive"},i.a.createElement(m.default,{items:t.pageItems,columns:this.listColumns,showHeader:!1,context:this.actions,orderByField:t.orderByField,orderByReverse:t.orderByReverse,toggleSorting:t.toggleSorting}),i.a.createElement(u.Paginator,{totalCount:t.totalItemsCount,itemsPerPage:t.itemsPerPage,page:t.page,onChange:function(e){return t.updatePagination({page:e})}})))))}}])&&_(n.prototype,a),o&&_(n,o),t}();function z(e){return e.component("pageGroupMembers",Object(o.react2angular)(Object(c.wrap)(R,new d.ResourceItemsSource({isPlainList:!0,getRequest:function(e,t){return{id:t.params.groupId}},getResource:function(){return S.Group.members.bind(S.Group)},getItemProcessor:function(){return function(e){return new j.User(e)}}}),new p.StateStorage({orderByField:"name"})))),Object(P.a)([{path:"/groups/:groupId",title:"Group Members",key:"users"}],{reloadOnSearch:!1,template:'<settings-screen><page-group-members on-error="handleError"></page-group-members></settings-screen>',controller:["$scope","$exceptionHandler",function(e,t){e.handleError=t}]})}$(R,"propTypes",{controller:c.ControllerType.isRequired}),z.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return q});n(21),n(22),n(29),n(19);var r=n(1),a=n.n(r),i=n(14),o=n(25),s=n.n(o),l=n(79),u=n(48),c=n(80),d=n(69),p=n(59),f=n(230),m=n(24),g=n(418),h=n(227),b=n(55),y=n(70),v=n(13),w=n(129),O=n(81);function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=function(e){function t(){var e,n,r,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];return r=this,i=(e=j(t)).call.apply(e,[this].concat(l)),n=!i||"object"!==x(i)&&"function"!=typeof i?E(r):i,k(E(n),"listColumns",[m.Columns.custom(function(e,t){return a.a.createElement("div",null,a.a.createElement("a",{href:"groups/"+t.id},t.name),"builtin"===t.type&&a.a.createElement("span",{className:"label label-default m-l-10"},"built-in"))},{field:"name",width:null}),m.Columns.custom(function(e,t){return a.a.createElement(s.a.Group,null,a.a.createElement(s.a,{href:"groups/".concat(t.id)},"Members"),v.currentUser.isAdmin&&a.a.createElement(s.a,{href:"groups/".concat(t.id,"/data_sources")},"Data Sources"))},{width:"1%",className:"text-nowrap"}),m.Columns.custom(function(e,t){var r="builtin"!==t.type;return a.a.createElement(h.default,{className:"w-100",disabled:!r,group:t,title:r?null:"Cannot delete built-in group",onClick:function(){return n.onGroupDeleted()}},"Delete")},{width:"1%",className:"text-nowrap p-l-0",isAvailable:function(){return v.currentUser.isAdmin}})]),k(E(n),"createGroup",function(){g.default.showModal().result.then(function(e){e.$save().then(function(e){return Object(w.default)("/groups/".concat(e.id))})})}),k(E(n),"onGroupDeleted",function(){n.props.controller.updatePagination({page:1}),n.props.controller.update()}),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props.controller;return a.a.createElement("div",{"data-test":"GroupList"},v.currentUser.isAdmin&&a.a.createElement("div",{className:"m-b-15"},a.a.createElement(s.a,{type:"primary",onClick:this.createGroup},a.a.createElement("i",{className:"fa fa-plus m-r-5"}),"New Group")),!e.isLoaded&&a.a.createElement(p.default,{className:""}),e.isLoaded&&e.isEmpty&&a.a.createElement(f.default,{className:""}),e.isLoaded&&!e.isEmpty&&a.a.createElement("div",{className:"table-responsive"},a.a.createElement(m.default,{items:e.pageItems,columns:this.listColumns,showHeader:!1,context:this.actions,orderByField:e.orderByField,orderByReverse:e.orderByReverse,toggleSorting:e.toggleSorting}),a.a.createElement(l.Paginator,{totalCount:e.totalItemsCount,itemsPerPage:e.itemsPerPage,page:e.page,onChange:function(t){return e.updatePagination({page:t})}})))}}])&&S(n.prototype,r),i&&S(n,i),t}();function q(e){return y.default.add({permission:"list_users",title:"Groups",path:"groups",order:3}),e.component("pageGroupsList",Object(i.react2angular)(Object(u.wrap)(_,new c.ResourceItemsSource({isPlainList:!0,getRequest:function(){return{}},getResource:function(){return b.Group.query.bind(b.Group)},getItemProcessor:function(){return function(e){return new b.Group(e)}}}),new d.StateStorage({orderByField:"name",itemsPerPage:10})))),Object(O.a)([{path:"/groups",title:"Groups",key:"groups"}],{reloadOnSearch:!1,template:'<settings-screen><page-groups-list on-error="handleError"></page-groups-list></settings-screen>',controller:["$scope","$exceptionHandler",function(e,t){e.handleError=t}]})}k(_,"propTypes",{controller:u.ControllerType.isRequired}),q.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return o});var r=n(704),a=n.n(r);function i(e,t,n,r,a,i){var o=this;e.record("view","page","personal_homepage"),this.noDashboards=!1,this.noQueries=!1,this.isEmailVerified=a.is_email_verified,t.favorites().$promise.then(function(e){o.favoriteDashboards=e.results,o.noDashboards=0===e.results.length}),n.favorites().$promise.then(function(e){o.favoriteQueries=e.results,o.noQueries=0===e.results.length}),this.verifyEmail=function(){r.post("verification_email/").success(function(e){var t=e.message;i.success(t)})}}function o(e){return e.component("homePage",{template:a.a,controller:i}),{"/":{template:"<home-page></home-page>",title:"Redash"}}}i.$inject=["Events","Dashboard","Query","$http","currentUser","toastr"],o.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return _});n(21),n(22),n(29),n(19);var r=n(1),a=n.n(r),i=n(14),o=n(163),s=n(79),l=n(120),u=n(421),c=n(48),d=n(80),p=n(69),f=n(59),m=n(52),g=n(24),h=n(54),b=n(47),y=n(13),v=n(81),w=n(430);n(1413);function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k=function(e){function t(){var e,n,r,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];return r=this,n=!(i=(e=S(t)).call.apply(e,[this].concat(s)))||"object"!==O(i)&&"function"!=typeof i?j(r):i,P(j(n),"sidebarMenu",[{key:"all",href:"queries",title:"All Queries"},{key:"favorites",href:"queries/favorites",title:"Favorites",icon:function(){return a.a.createElement(m.MenuIcon,{icon:"fa fa-star"})}},{key:"archive",href:"queries/archive",title:"Archived",icon:function(){return a.a.createElement(m.MenuIcon,{icon:"fa fa-archive"})}},{key:"my",href:"queries/my",title:"My Queries",icon:function(){return a.a.createElement(m.ProfileImage,{user:y.currentUser})},isAvailable:function(){return y.currentUser.hasPermission("create_query")}}]),P(j(n),"listColumns",[g.Columns.favorites({className:"p-r-0"}),g.Columns.custom.sortable(function(e,t){return a.a.createElement(a.a.Fragment,null,a.a.createElement("a",{className:"table-main-title",href:"queries/"+t.id},t.name),a.a.createElement(l.QueryTagsControl,{className:"d-block",tags:t.tags,isDraft:t.is_draft,isArchived:t.is_archived}))},{title:"Name",field:"name",width:null}),g.Columns.avatar({field:"user",className:"p-l-0 p-r-0"},function(e){return"Created by ".concat(e)}),g.Columns.dateTime.sortable({title:"Created At",field:"created_at"}),g.Columns.duration.sortable({title:"Runtime",field:"runtime"}),g.Columns.dateTime.sortable({title:"Last Executed At",field:"retrieved_at",orderByField:"executed_at"}),g.Columns.custom.sortable(function(e,t){return a.a.createElement(u.SchedulePhrase,{schedule:t.schedule,isNew:t.isNew()})},{title:"Update Schedule",field:"schedule"})]),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props.controller;return a.a.createElement("div",{className:"container"},a.a.createElement(o.PageHeader,{title:e.params.title}),a.a.createElement(h.default,{className:"m-l-15 m-r-15"},a.a.createElement(h.default.Sidebar,{className:"m-b-0"},a.a.createElement(m.SearchInput,{placeholder:"Search Queries...",value:e.searchTerm,onChange:e.updateSearch}),a.a.createElement(m.Menu,{items:this.sidebarMenu,selected:e.params.currentPage}),a.a.createElement(m.Tags,{url:"api/queries/tags",onChange:e.updateSelectedTags}),a.a.createElement(m.PageSizeSelect,{options:e.pageSizeOptions,value:e.itemsPerPage,onChange:function(t){return e.updatePagination({itemsPerPage:t})}})),a.a.createElement(h.default.Content,null,!e.isLoaded&&a.a.createElement(f.default,null),e.isLoaded&&e.isEmpty&&a.a.createElement(w.default,{page:e.params.currentPage,searchTerm:e.searchTerm,selectedTags:e.selectedTags}),e.isLoaded&&!e.isEmpty&&a.a.createElement("div",{className:"bg-white tiled table-responsive"},a.a.createElement(g.default,{items:e.pageItems,columns:this.listColumns,orderByField:e.orderByField,orderByReverse:e.orderByReverse,toggleSorting:e.toggleSorting}),a.a.createElement(s.Paginator,{totalCount:e.totalItemsCount,itemsPerPage:e.itemsPerPage,page:e.page,onChange:function(t){return e.updatePagination({page:t})}})))))}}])&&x(n.prototype,r),i&&x(n,i),t}();function _(e){return e.component("pageQueriesList",Object(i.react2angular)(Object(c.wrap)(k,new d.ResourceItemsSource({getResource:function(e){var t=e.params.currentPage;return{all:b.Query.query.bind(b.Query),my:b.Query.myQueries.bind(b.Query),favorites:b.Query.favorites.bind(b.Query),archive:b.Query.archive.bind(b.Query)}[t]},getItemProcessor:function(){return function(e){return new b.Query(e)}}}),new p.UrlStateStorage({orderByField:"created_at",orderByReverse:!0})))),Object(v.a)([{path:"/queries",title:"Queries",key:"all"},{path:"/queries/favorites",title:"Favorite Queries",key:"favorites"},{path:"/queries/archive",title:"Archived Queries",key:"archive"},{path:"/queries/my",title:"My Queries",key:"my"}],{reloadOnSearch:!1,template:'<page-queries-list on-error="handleError"></page-queries-list>',controller:["$scope","$exceptionHandler",function(e,t){e.handleError=t}]})}P(k,"propTypes",{controller:c.ControllerType.isRequired}),_.init=!0},function(e,t,n){},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return i});n(103);var r=n(705),a={controller:["$sce","Dashboard","currentUser","toastr","Widget",function(e,t,n,r,a){var i=this;this.vis=this.resolve.vis,this.saveInProgress=!1,this.trustAsHtml=function(t){return e.trustAsHtml(t)},this.onDashboardSelected=function(e){i.saveInProgress=!0,i.selected_query=i.resolve.query.id,new a({visualization_id:i.vis&&i.vis.id,dashboard_id:e.id,options:{},width:1,type:"visualization"}).save().then(function(){i.close(),r.success("Widget added to dashboard.")}).catch(function(){r.error("Widget not added.")}).finally(function(){i.saveInProgress=!1})},this.selectedDashboard=null,this.searchDashboards=function(e){!e||e.length<3||t.get({search_term:e},function(e){i.dashboards=e.results})}}],bindings:{resolve:"<",close:"&",dismiss:"&",vis:"<"},template:n.n(r).a};function i(e){e.component("addToDashboardDialog",a)}i.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return l});n(19);var r=n(2),a=n(238),i=n.n(a),o=n(220);function s(e,t,n,a,i,s,l,u){t("QueryViewCtrl",{$scope:n}),e.record("view_source","query",n.query.id);var c=!n.query.id,d=n.query.query,p=n.saveQuery;n.sourceMode=!0,n.isDirty=!1,n.base_url="".concat(a.protocol(),"://").concat(a.host(),":").concat(a.port()),n.modKey=l.modKey,Object.defineProperty(n,"showDataset",{get:function(){return n.queryResult&&"done"===n.queryResult.getStatus()}});var f={"mod+s":function(){n.canEdit&&n.saveQuery()},"mod+p":function(){n.addNewParameter()}};l.bind(f),n.$on("$destroy",function(){l.unbind(f)}),n.canForkQuery=function(){return s.hasPermission("edit_query")&&!n.dataSource.view_only},n.updateQuery=function(e){return Object(r.defer)(function(){return n.$apply(function(){n.query.query=e})})},n.saveQuery=function(e,t){var r=p(e,t);return r.then(function(e){d=e.query,n.isDirty=n.query.query!==d,n.query.version=e.version,c&&a.path(e.getSourceLink())}),r},n.addNewParameter=function(){o.default.showModal({parameter:{title:null,name:"",type:"text",value:null},existingParams:Object(r.map)(n.query.getParameters().get(),function(e){return e.name})}).result.then(function(e){e=n.query.getParameters().add(e),u.$broadcast("query-editor.command","paste",e.toQueryTextFragment()),u.$broadcast("query-editor.command","focus")})},n.onParametersUpdated=function(){n.isDirty||n.saveQuery()},n.listenForEditorCommand=function(e){return n.$on("query-editor.command",e)},n.listenForResize=function(e){return n.$parent.$on("angular-resizable.resizing",e)},n.$watch("query.query",function(e){n.isDirty=e!==d})}function l(e){return e.controller("QuerySourceCtrl",s),{"/queries/new":{template:i.a,layout:"fixed",controller:"QuerySourceCtrl",reloadOnSearch:!1,resolve:{query:["Query",function(e){return e.newQuery()}],dataSources:["DataSource",function(e){return e.query().$promise}]}},"/queries/:queryId/source":{template:i.a,layout:"fixed",controller:"QuerySourceCtrl",reloadOnSearch:!1,resolve:{query:["Query","$route",function(e,t){return e.get({id:t.current.params.queryId}).$promise}]}}}}s.$inject=["Events","$controller","$scope","$location","$uibModal","currentUser","KeyboardShortcuts","$rootScope"],l.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return m});n(35),n(19),n(117),n(18),n(97);var r=n(2),a=n(170),i=n(164),o=n(82),s=n(236),l=n(420),u=n(238),c=n.n(u);function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}f.$inject=["$scope","Events","$route","$routeParams","$location","$window","$q","KeyboardShortcuts","Title","AlertDialog","clientConfig","toastr","$uibModal","currentUser","Query","DataSource","Visualization"];var p="table";function f(e,t,n,u,c,f,m,g,h,b,y,v,w,O,x,S,j){function E(t,n){void 0===t&&(t=c.search().maxAge),void 0===t&&(t=-1),e.showLog=!1,e.isDirty?e.queryResult=e.query.getQueryResultByText(t,n):e.queryResult=e.query.getQueryResult(t)}function P(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;e.schema=[],e.dataSource.getSchema(t).then(function(t){t.schema?(e.schema=t.schema,e.schema.forEach(function(e){e.collapsed=!0})):t.error.code===a.SCHEMA_NOT_SUPPORTED?e.schema=void 0:(t.error.code,a.SCHEMA_LOAD_ERROR,v.error("Schema refresh failed. Please try again later."))})}function k(t){var n;(e.dataSources=t.filter(function(t){return!t.view_only||t.id===e.query.data_source_id}),0!==e.dataSources.length)?(e.query.isNew()&&(e.query.data_source_id=(void 0===(n=e.query.data_source_id)&&(n=parseInt(localStorage.lastSelectedDataSourceId,10)),!isNaN(n)&&Object(r.some)(e.dataSources,function(e){return e.id===n})||(n=e.dataSources[0].id),n)),e.dataSource=Object(r.find)(t,function(t){return t.id===e.query.data_source_id}),e.canCreateQuery=Object(r.some)(t,function(e){return!e.view_only}),P()):e.noDataSources=!0}e.refreshSchema=function(){return P(!0)},e.updateSelectedQuery=function(t){e.selectedQueryText=t},e.executeQuery=function(){e.canExecuteQuery()&&e.query.query&&(E(0,e.selectedQueryText),e.lockButton(!0),e.cancelling=!1,t.record("execute","query",e.query.id),s.default.getPermissions())},e.selectedTab=p,e.currentUser=O,e.dataSource={},e.query=n.current.locals.query,e.showPermissionsControl=y.showPermissionsControl;var _={"mod+enter":e.executeQuery,"alt+enter":e.executeQuery};function q(t){return Object(r.find)(e.query.visualizations,function(e){return e.id==t})}g.bind(_),e.$on("$destroy",function(){g.unbind(_)}),(e.query.hasResult()||e.query.paramsRequired())&&E(),e.queryExecuting=!1,e.isQueryOwner=O.id===e.query.user.id||O.hasPermission("admin"),e.canEdit=O.canEdit(e.query)||e.query.can_edit,e.canViewSource=O.hasPermission("view_source"),e.canExecuteQuery=function(){return e.query.is_safe||O.hasPermission("execute_query")&&!e.dataSource.view_only},e.canForkQuery=function(){return O.hasPermission("edit_query")&&!e.dataSource.view_only},e.canScheduleQuery=O.hasPermission("schedule_query"),n.current.locals.dataSources?(e.dataSources=n.current.locals.dataSources,k(n.current.locals.dataSources)):e.dataSources=S.query(k),e.showDataset=!0,e.showLog=!1,e.lockButton=function(t){e.queryExecuting=t},e.showApiKey=function(){w.open({component:"apiKeyDialog",resolve:{query:e.query}})},e.duplicateQuery=function(){var t="duplicatedQueryTab"+Math.random().toString();f.open("",t),x.fork({id:e.query.id},function(e){var n=e.getUrl(!0);f.open(n,t)})},e.saveTags=function(t){e.query.tags=t,e.saveQuery({},{tags:e.query.tags})},e.loadTags=function(){return Object(i.default)("api/queries/tags").then(function(e){return Object(r.map)(e,function(e){return e.name})})},e.saveQuery=function(t,n){var a=n;if(a){if(e.query.isNew())return m.reject();a.id=e.query.id,a.version=e.query.version}else a=Object(r.pick)(e.query,["schedule","query","id","description","name","data_source_id","options","latest_query_data_id","version","is_draft"]);var i=d({},{successMessage:"Query saved",errorMessage:"Query could not be saved"},t);function o(){i.force=!0,e.saveQuery(i,n)}return i.force&&delete a.version,x.save(a,function(t){v.success(i.successMessage),e.query.version=t.version},function(t){if(409===t.status){var n="It seems like the query has been modified by another user.";if(e.isQueryOwner){b.open("Overwrite Query","It seems like the query has been modified by another user.<br>Are you sure you want to overwrite the query with your version?",{class:"btn-warning",title:"Overwrite"}).then(o)}else v.error(n+" Please copy/backup your changes and reload this page.",{autoDismiss:!1})}else v.error(i.errorMessage)}).$promise},e.togglePublished=function(){t.record("toggle_published","query",e.query.id),e.query.is_draft=!e.query.is_draft,e.saveQuery(void 0,{is_draft:e.query.is_draft})},e.saveDescription=function(n){e.query.description=n,t.record("edit_description","query",e.query.id),e.saveQuery(void 0,{description:e.query.description})},e.saveName=function(n){e.query.name=n,t.record("edit_name","query",e.query.id),e.query.is_draft&&y.autoPublishNamedQueries&&"New Query"!==e.query.name&&(e.query.is_draft=!1),e.saveQuery(void 0,{name:e.query.name,is_draft:e.query.is_draft})},e.cancelExecution=function(){e.cancelling=!0,e.queryResult.cancelExecution(),t.record("cancel_execute","query",e.query.id)},e.archiveQuery=function(){b.open("Archive Query","Are you sure you want to archive this query?<br/> All alerts and dashboard widgets created with its visualizations will be deleted.",{class:"btn-warning",title:"Archive"}).then(function(){x.delete({id:e.query.id},function(){e.query.is_archived=!0,e.query.schedule=null},function(){v.error("Query could not be archived.")})})},e.updateDataSource=function(){t.record("update_data_source","query",e.query.id),localStorage.lastSelectedDataSourceId=e.query.data_source_id,e.query.latest_query_data=null,e.query.latest_query_data_id=null,e.query.id&&x.save({id:e.query.id,data_source_id:e.query.data_source_id,latest_query_data_id:null},function(t){e.query.version=t.version}),e.dataSource=Object(r.find)(e.dataSources,function(t){return t.id===e.query.data_source_id}),P(),e.executeQuery()},e.setVisualizationTab=function(t){e.selectedTab=t.id,c.hash(t.id)},e.deleteVisualization=function(t,n){t.preventDefault();var r="Are you sure you want to delete ".concat(n.name," ?");b.open(void 0,r,{class:"btn-danger",title:"Delete"}).then(function(){j.delete({id:n.id},function(){e.selectedTab===String(n.id)&&(e.selectedTab=p,c.hash(e.selectedTab)),e.query.visualizations=e.query.visualizations.filter(function(e){return n.id!==e.id})},function(){v.error("Error deleting visualization. Maybe it's used in a dashboard?")})})},e.$watch("query.name",function(){h.set(e.query.name)}),e.$watch("queryResult && queryResult.getData()",function(t){t&&(e.filters=e.queryResult.getFilters())}),e.$watch("queryResult && queryResult.getStatus()",function(t){if(t){if("done"===t)e.query.query!==e.queryResult.query_result.query||(e.query.latest_query_data_id=e.queryResult.getId(),e.query.queryResult=e.queryResult),s.default.showNotification("Redash","".concat(e.query.name," updated."));else"failed"===t&&s.default.showNotification("Redash","".concat(e.query.name," failed to run: ").concat(e.queryResult.getError()));"done"!==t&&"failed"!==t||e.lockButton(!1),null!=e.queryResult.getLog()&&(e.showLog=!0)}}),e.openVisualizationEditor=function(t){var n=q(t);e.query.isNew()?e.saveQuery().then(function(e){c.path(e.getSourceLink()).hash("add")}):w.open({windowClass:"modal-xl",component:"editVisualizationDialog",resolve:{query:e.query,visualization:n,queryResult:e.queryResult,onNewSuccess:function(){return e.setVisualizationTab}}})},"add"===c.hash()&&(c.hash(null),e.openVisualizationEditor());var C=y.queryRefreshIntervals,T=o.policy.getQueryRefreshIntervals();e.refreshOptions=Object(r.isArray)(T)?Object(r.intersection)(C,T):C,e.showScheduleForm=!1,e.editSchedule=function(){e.canEdit&&e.canScheduleQuery&&l.default.showModal({schedule:e.query.schedule,refreshOptions:e.refreshOptions}).result.then(function(t){e.query.schedule=t,e.saveQuery()})},e.closeScheduleForm=function(){e.$apply(function(){e.showScheduleForm=!1})},e.openAddToDashboardForm=function(t){var n=q(t);w.open({component:"addToDashboardDialog",size:"sm",resolve:{query:e.query,vis:n}})},e.showEmbedDialog=function(e,t){var n=q(t);w.open({component:"embedCodeDialog",resolve:{query:e,visualization:n}})},e.$watch(function(){return c.hash()},function(t){var n=Object(r.find)(e.query.visualizations,function(e){return e.id==t}),a=Object(r.minBy)(e.query.visualizations,function(e){return e.id});Object(r.isObject)(a)||(a={}),e.selectedTab=(n?t:a.id)||p}),e.showManagePermissionsModal=function(){w.open({component:"permissionsEditor",resolve:{aclUrl:{url:"api/queries/".concat(u.queryId,"/acl")},owner:e.query.user}})}}function m(e){return e.controller("QueryViewCtrl",f),{"/queries/:queryId":{template:c.a,layout:"fixed",controller:"QueryViewCtrl",reloadOnSearch:!1,resolve:{query:["Query","$route",function(e,t){return e.get({id:t.current.params.queryId}).$promise}]}}}}m.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return o});n(66),n(1418);var r=n(706),a=n.n(r);function i(e,t,n,r,a,i,o){var s=this;this.snippetId=e.snippetId,this.editorOptions={mode:"snippets",advanced:{behavioursEnabled:!0,enableSnippets:!1,autoScrollEditorIntoView:!0},onLoad:function(e){e.$blockScrolling=1/0,e.getSession().setUseWrapMode(!0),e.setShowPrintMargin(!1)}},this.saveChanges=function(){s.snippet.$save(function(e){r.success("Saved."),"new"===s.snippetId&&n.path("/query_snippets/".concat(e.id)).replace()},function(){r.error("Failed saving snippet.")})},this.delete=function(){var e='Are you sure you want to delete the "'.concat(s.snippet.trigger,'" snippet?');i.open("Delete Snippet",e,{class:"btn-warning",title:"Delete"}).then(function(){s.snippet.$delete(function(){n.path("/query_snippets"),r.success("Query snippet deleted.")},function(){r.error("Failed deleting query snippet.")})})},"new"===this.snippetId?(this.snippet=new o({description:""}),this.canEdit=!0):this.snippet=o.get({id:this.snippetId},function(e){s.canEdit=a.canEdit(e)})}function o(e){return e.component("snippetPage",{template:a.a,controller:i}),{"/query_snippets/:snippetId":{template:"<snippet-page></snippet-page>",title:"Query Snippets"}}}i.$inject=["$routeParams","$http","$location","toastr","currentUser","AlertDialog","QuerySnippet"],o.init=!0},,function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return l});var r=n(70),a=n(297),i=n(707),o=n.n(i);function s(e,t,n){var r=this;this.snippets=new a.a([],{itemsPerPage:20}),n.query(function(e){r.snippets.updateRows(e)})}function l(e){return r.default.add({permission:"create_query",title:"Query Snippets",path:"query_snippets",order:5}),e.component("snippetsListPage",{template:o.a,controller:s}),{"/query_snippets":{template:"<snippets-list-page></snippets-list-page>",title:"Query Snippets"}}}s.$inject=["$location","currentUser","QuerySnippet"],l.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return s});var r=n(70),a=n(708),i=n.n(a);function o(e,t,n,r){var a=this;r.record("view","page","org_settings"),this.settings={},e.get("api/settings/organization").then(function(e){a.settings=e.data.settings}),this.update=function(n){e.post("api/settings/organization",function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},n,a.settings[n])).then(function(e){a.settings=e.data.settings,t.success("Settings changes saved."),a.disablePasswordLoginToggle()&&!1===a.settings.auth_password_login_enabled&&(a.settings.auth_password_login_enabled=!0,a.update("auth_password_login_enabled"))}).catch(function(){t.error("Failed saving changes.")})},this.dateFormatList=n.dateFormatList,this.googleLoginEnabled=n.googleLoginEnabled,this.disablePasswordLoginToggle=function(){return!1===(n.googleLoginEnabled||a.settings.auth_saml_enabled)}}function s(e){return r.default.add({permission:"admin",title:"Settings",path:"settings/organization",order:6}),e.component("organizationSettingsPage",{template:i.a,controller:o}),{"/settings/organization":{template:"<organization-settings-page></organization-settings-page>",title:"Organization Settings"}}}o.$inject=["$http","toastr","clientConfig","Events"],s.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return j});n(21),n(22),n(29);var r=n(1),a=n.n(r),i=n(0),o=n.n(i),s=n(14),l=n(402),u=n(424),c=n(425),d=n(59),p=n(45),f=n(70),m=n(11),g=n(13),h=n(121);n(1422);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=v(this,w(t).call(this,e))).state={user:null},n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,a.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){var e=this,t=m.$route.current.params.userId||g.currentUser.id;p.User.get({id:t}).$promise.then(function(t){return e.setState({user:p.User.convertUserInfo(t)})}).catch(function(t){t.status&&t.data&&(t=new h.a(t)),e.props.onError(t)})}},{key:"render",value:function(){var e=this.state.user,t=e&&(g.currentUser.isAdmin||g.currentUser.id===e.id)?u.default:c.default;return a.a.createElement(a.a.Fragment,null,a.a.createElement(l.EmailSettingsWarning,{featureName:"invite emails"}),a.a.createElement("div",{className:"row"},e?a.a.createElement(t,{user:e}):a.a.createElement(d.default,{className:""})))}}])&&y(n.prototype,r),i&&y(n,i),t}();function j(e){f.default.add({title:"Account",path:"users/me",order:7}),e.component("pageUserProfile",Object(s.react2angular)(S))}x(S,"propTypes",{onError:o.a.func}),x(S,"defaultProps",{onError:function(){}}),j.init=!0},function(e,t,n){},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return U});n(270),n(21),n(22),n(29),n(103),n(98),n(19);var r=n(2),a=n(1),i=n.n(a),o=n(0),s=n.n(o),l=n(14),u=n(25),c=n.n(u),d=n(43),p=n.n(d),f=n(79),m=n(219),g=n(106),h=n(139),b=n(48),y=n(80),v=n(69),w=n(59),O=n(230),x=n(52),S=n(24),j=n(54),E=n(423),P=n(70),k=n(13),_=n(82),q=n(45),C=n(129),T=n(11),$=n(231);function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e){var t=e.user,n=e.enableUser,r=e.disableUser,a=e.deleteUser;return t.id===k.currentUser.id?null:t.is_invitation_pending?i.a.createElement(c.a,{type:"danger",className:"w-100",onClick:function(e){return a(e,t)}},"Delete"):t.is_disabled?i.a.createElement(c.a,{type:"primary",className:"w-100",onClick:function(e){return n(e,t)}},"Enable"):i.a.createElement(c.a,{className:"w-100",onClick:function(e){return r(e,t)}},"Disable")}M.propTypes={user:s.a.shape({id:s.a.number,is_invitation_pending:s.a.bool,is_disabled:s.a.bool}).isRequired,enableUser:s.a.func.isRequired,disableUser:s.a.func.isRequired,deleteUser:s.a.func.isRequired};var F=function(e){function t(){var e,n,a,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];return a=this,o=(e=D(t)).call.apply(e,[this].concat(l)),n=!o||"object"!==R(o)&&"function"!=typeof o?A(a):o,I(A(n),"sidebarMenu",[{key:"active",href:"users",title:"Active Users"},{key:"pending",href:"users/pending",title:"Pending Invitations"},{key:"disabled",href:"users/disabled",title:"Disabled Users",isAvailable:function(){return _.policy.canCreateUser()}}]),I(A(n),"listColumns",[S.Columns.custom.sortable(function(e,t){return i.a.createElement(g.UserPreviewCard,{user:t,withLink:!0})},{title:"Name",field:"name",width:null}),S.Columns.custom.sortable(function(e,t){return Object(r.map)(t.groups,function(e){return i.a.createElement("a",{key:"group"+e.id,className:"label label-tag",href:"groups/"+e.id},e.name)})},{title:"Groups",field:"groups"}),S.Columns.timeAgo.sortable({title:"Joined",field:"created_at",className:"text-nowrap",width:"1%"}),S.Columns.timeAgo.sortable({title:"Last Active At",field:"active_at",className:"text-nowrap",width:"1%"}),S.Columns.custom(function(e,t){return i.a.createElement(M,{user:t,enableUser:n.enableUser,disableUser:n.disableUser,deleteUser:n.deleteUser})},{width:"1%",isAvailable:function(){return _.policy.canCreateUser()}})]),I(A(n),"createUser",function(e){return q.User.create(e).$promise.then(function(e){T.toastr.success("Saved."),e.invite_link&&p.a.warning({title:"Email not sent!",content:i.a.createElement(i.a.Fragment,null,i.a.createElement("p",null,"The mail server is not configured, please send the following link to ",i.a.createElement("b",null,e.name),":"),i.a.createElement(h.default,{value:Object($.absoluteUrl)(e.invite_link),readOnly:!0}))})}).catch(function(e){return e instanceof Error||(e=new Error(Object(r.get)(e,"data.message","Failed saving."))),Promise.reject(e)})}),I(A(n),"showCreateUserDialog",function(){_.policy.isCreateUserEnabled()&&E.default.showModal({onCreate:n.createUser}).result.then(function(){return n.props.controller.update()}).finally(function(){n.props.controller.params.isNewUserPage&&Object(C.default)("users")})}),I(A(n),"enableUser",function(e,t){return q.User.enableUser(t).then(function(){return n.props.controller.update()})}),I(A(n),"disableUser",function(e,t){return q.User.disableUser(t).then(function(){return n.props.controller.update()})}),I(A(n),"deleteUser",function(e,t){return q.User.deleteUser(t).then(function(){return n.props.controller.update()})}),n}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(t,i.a.Component),n=t,(a=[{key:"componentDidMount",value:function(){this.props.controller.params.isNewUserPage&&this.showCreateUserDialog()}},{key:"renderPageHeader",value:function(){return _.policy.canCreateUser()?i.a.createElement("div",{className:"m-b-15"},i.a.createElement(c.a,{type:"primary",disabled:!_.policy.isCreateUserEnabled(),onClick:this.showCreateUserDialog},i.a.createElement("i",{className:"fa fa-plus m-r-5"}),"New User"),i.a.createElement(m.default,{name:"UsersListExtra"})):null}},{key:"render",value:function(){var e=this.props.controller;return i.a.createElement(i.a.Fragment,null,this.renderPageHeader(),i.a.createElement(j.default,null,i.a.createElement(j.default.Sidebar,{className:"m-b-0"},i.a.createElement(x.SearchInput,{value:e.searchTerm,onChange:e.updateSearch}),i.a.createElement(x.Menu,{items:this.sidebarMenu,selected:e.params.currentPage}),i.a.createElement(x.PageSizeSelect,{options:e.pageSizeOptions,value:e.itemsPerPage,onChange:function(t){return e.updatePagination({itemsPerPage:t})}})),i.a.createElement(j.default.Content,null,!e.isLoaded&&i.a.createElement(w.default,{className:""}),e.isLoaded&&e.isEmpty&&i.a.createElement(O.default,{className:""}),e.isLoaded&&!e.isEmpty&&i.a.createElement("div",{className:"table-responsive"},i.a.createElement(S.default,{items:e.pageItems,columns:this.listColumns,context:this.actions,orderByField:e.orderByField,orderByReverse:e.orderByReverse,toggleSorting:e.toggleSorting}),i.a.createElement(f.Paginator,{totalCount:e.totalItemsCount,itemsPerPage:e.itemsPerPage,page:e.page,onChange:function(t){return e.updatePagination({page:t})}})))))}}])&&z(n.prototype,a),o&&z(n,o),t}();function U(e){P.default.add({permission:"list_users",title:"Users",path:"users",isActive:function(e){return e.startsWith("/users")&&"/users/me"!==e},order:2}),e.component("pageUsersList",Object(l.react2angular)(Object(b.wrap)(F,new y.ResourceItemsSource({getRequest:function(e,t){switch(t.params.currentPage){case"active":e.pending=!1;break;case"pending":e.pending=!0;break;case"disabled":e.disabled=!0}return e},getResource:function(){return q.User.query.bind(q.User)},getItemProcessor:function(){return function(e){return new q.User(e)}}}),new v.UrlStateStorage({orderByField:"created_at",orderByReverse:!0}))))}I(F,"propTypes",{controller:b.ControllerType.isRequired}),U.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return i});var r=n(2),a=n(81);function i(){var e=Object(a.a)([{path:"/users",title:"Users",key:"active"},{path:"/users/new",title:"Users",key:"active",isNewUserPage:!0},{path:"/users/pending",title:"Pending Invitations",key:"pending"},{path:"/users/disabled",title:"Disabled Users",key:"disabled"}],{template:'<settings-screen><page-users-list on-error="handleError"></page-users-list></settings-screen>',reloadOnSearch:!1,controller:["$scope","$exceptionHandler",function(e,t){e.handleError=t}]}),t=Object(a.a)([{path:"/users/me",title:"Account",key:"users"},{path:"/users/:userId",title:"Users",key:"users"}],{reloadOnSearch:!1,template:'<settings-screen><page-user-profile on-error="handleError"></page-user-profile></settings-screen>',controller:["$scope","$exceptionHandler",function(e,t){e.handleError=t}]});return Object(r.extend)(e,t)}i.init=!0},function(e,t,n){},function(e,t,n){},,,,,function(e,t,n){"use strict";n.r(t);n(35),n(66),n(21),n(22),n(18),n(31),n(110),n(717),n(450);var r=n(627),a=n(64),i=n.n(a),o=n(46),s=n.n(o),l=n(628),u=n.n(l),c=n(629),d=n.n(c),p=n(630),f=n.n(p),m=n(631),g=n.n(m),h=n(632),b=n.n(h),y=n(633),v=n.n(y),w=n(287),O=n.n(w),x=n(634),S=n.n(x),j=n(635),E=n.n(j),P=(n(161),n(734),n(735),n(2)),k=(n(179),n(17)),_=n.n(k),q=n(636),C=n.n(q);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}s.a.module("ui.sortable",[]).value("uiSortableConfig",{items:"> [ng-repeat],> [data-ng-repeat],> [x-ng-repeat]",cancel:"input, textarea, button, select, option, .ui-sortable-bypass"}).directive("uiSortable",["uiSortableConfig","$timeout","$log",function(e,t,n){return{require:"?ngModel",scope:{ngModel:"=",uiSortable:"="},link:function(r,a,i,o){var l;function u(e,t){var n="function"==typeof t;return"function"==typeof e&&n?function(){e.apply(this,arguments),t.apply(this,arguments)}:n?t:e}function c(e){var t=e.data("ui-sortable");return t&&"object"===T(t)&&"ui-sortable"===t.widgetFullName?t:null}function d(t,n){return y[t]?("stop"===t&&(n=u(n,function(){r.$apply()}),n=u(n,m)),n=u(y[t],n)):v[t]&&(n=v[t](n)),n||"items"!==t&&"ui-model-items"!==t||(n=e.items),n}function p(e,t,n){s.a.forEach(y,function(e,t){t in h||(h[t]=null)});var r,a=null;t&&s.a.forEach(t,function(t,n){if(!(e&&n in e)){if(n in b)return void(h[n]="ui-floating"===n?"auto":d(n,void 0));r||(r=C()().options);var i=r[n];i=d(n,i),a||(a={}),a[n]=i,h[n]=i}});return s.a.forEach(e,function(e,t){if(t in b)return"ui-floating"!==t||!1!==e&&!0!==e||!n||(n.floating=e),void(h[t]=d(t,e));e=d(t,e),a||(a={}),a[t]=e,h[t]=e}),a}function f(e,t,n){var r=null;return function(e,t){var n=e.sortable("option","helper");return"clone"===n||"function"==typeof n&&t.item.sortable.isCustomHelperUsed()}(e,t)&&"parent"===e.sortable("option","appendTo")&&(r=n.last()),r}function m(e,t){t.item.sortable._destroy()}function g(e){return e.parent().find(h["ui-model-items"]).index(e)}a=_()(a);var h={},b={"ui-floating":void 0,"ui-model-items":e.items},y={receive:null,remove:null,start:null,stop:null,update:null},v={helper:null};function w(){r.$watchCollection("ngModel",function(){t(function(){c(a)&&a.sortable("refresh")},0,!1)}),y.start=function(e,t){if("auto"===h["ui-floating"]){var n=t.item.siblings();c(_()(e.target)).floating=/left|right/.test((r=n).css("float"))||/inline|table-cell/.test(r.css("display"))}var r,a=g(t.item);t.item.sortable={model:o.$modelValue[a],index:a,source:t.item.parent(),sourceModel:o.$modelValue,cancel:function(){t.item.sortable._isCanceled=!0},isCanceled:function(){return t.item.sortable._isCanceled},isCustomHelperUsed:function(){return!!t.item.sortable._isCustomHelperUsed},_isCanceled:!1,_isCustomHelperUsed:t.item.sortable._isCustomHelperUsed,_destroy:function(){s.a.forEach(t.item.sortable,function(e,n){t.item.sortable[n]=void 0})}}},y.activate=function(e,t){l=a.contents();var n=function(e){var t=e.sortable("option","placeholder");if(t&&t.element&&"function"==typeof t.element){var n=t.element();return n=_()(n)}return null}(a);if(n&&n.length){var i=function(e,t){var n=h["ui-model-items"].replace(/[^,]*>/g,"");return e.find('[class="'.concat(t.attr("class"),'"]:not(').concat(n,")"))}(a,n);l=l.not(i)}var o=t.item.sortable._connectedSortables||[];o.push({element:a,scope:r}),t.item.sortable._connectedSortables=o},y.update=function(e,t){if(!t.item.sortable.received){t.item.sortable.dropindex=g(t.item);var n=t.item.parent();t.item.sortable.droptarget=n;var i=function(e,t){for(var n=null,r=0;r<e.length;r++){var a=e[r];if(a.element[0]===t[0]){n=a.scope;break}}return n}(t.item.sortable._connectedSortables,n);t.item.sortable.droptargetModel=i.ngModel,a.sortable("cancel")}var s=!t.item.sortable.received&&f(a,t,l);s&&s.length&&(l=l.not(s)),l.appendTo(a),t.item.sortable.received&&(l=null),t.item.sortable.received&&!t.item.sortable.isCanceled()&&r.$apply(function(){o.$modelValue.splice(t.item.sortable.dropindex,0,t.item.sortable.moved)})},y.stop=function(e,t){if(!t.item.sortable.received&&"dropindex"in t.item.sortable&&!t.item.sortable.isCanceled())r.$apply(function(){o.$modelValue.splice(t.item.sortable.dropindex,0,o.$modelValue.splice(t.item.sortable.index,1)[0])});else if((!("dropindex"in t.item.sortable)||t.item.sortable.isCanceled())&&!s.a.equals(a.contents(),l)){var n=f(a,t,l);n&&n.length&&(l=l.not(n)),l.appendTo(a)}l=null},y.receive=function(e,t){t.item.sortable.received=!0},y.remove=function(e,t){"dropindex"in t.item.sortable||(a.sortable("cancel"),t.item.sortable.cancel()),t.item.sortable.isCanceled()||r.$apply(function(){t.item.sortable.moved=o.$modelValue.splice(t.item.sortable.index,1)[0]})},v.helper=function(e){return e&&"function"==typeof e?function(t,n){var r=n.sortable,a=g(n);n.sortable={model:o.$modelValue[a],index:a,source:n.parent(),sourceModel:o.$modelValue,_restore:function(){s.a.forEach(n.sortable,function(e,t){n.sortable[t]=void 0}),n.sortable=r}};var i=e.apply(this,arguments);return n.sortable._restore(),n.sortable._isCustomHelperUsed=n!==i,i}:e},r.$watchCollection("uiSortable",function(e,t){var n=c(a);if(n){var r=p(e,t,n);r&&a.sortable("option",r)}},!0),p(h)}function O(){return(!r.uiSortable||!r.uiSortable.disabled)&&(o?w():n.info("ui.sortable: ngModel not provided!",a),a.sortable(h),O.cancelWatcher(),O.cancelWatcher=s.a.noop,!0)}s.a.extend(h,b,e,r.uiSortable),O.cancelWatcher=s.a.noop,O()||(O.cancelWatcher=r.$watch("uiSortable.disabled",O))}}}]);var $=n(34),R=n(130),z=n(39);function D(e){return{link:function(t,n){e(function(){n[0].focus()})}}}function A(e){e.directive("autofocus",D)}function N(){return{require:"ngModel",scope:{otherModelValue:"=compareTo"},link:function(e,t,n,r){var a=function(t){r.$setValidity("compareTo",t===e.otherModelValue)};e.$watch("otherModelValue",function(){a(r.$modelValue)}),r.$parsers.push(function(e){return a(e),e})}}}function I(e){e.directive("compareTo",N)}D.$inject=["$timeout"],A.init=!0,I.init=!0;var M=i()("redash:directives");window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame;function F(e){return{title:"Redash",set:function(t){this.title=t,e.$broadcast("$titleChange")},get:function(){return this.title}}}function U(e,t){return{restrict:"E",link:function(n,r){e.$on("$routeChangeSuccess",function(e,n){n.title&&t.set(n.title)}),e.$on("$titleChange",function(){var e=t.get();M("Updating title to: %s",e),r.text(e)})}}}function L(e){e.factory("Title",F).directive("title",U)}U.$inject=["$rootScope","Title"],F.$inject=["$rootScope"],L.init=!0;n(67),n(317);var V=new Map;function Q(){return{restrict:"A",link:function(e,t,n){var r=t[0];V.has(r)||(V.set(r,{callback:function(){e.$evalAsync(n.resizeEvent)}}),e.$on("$destroy",function(){var e=Object(P.findIndex)(V,function(e){return e.node===r});e>=0&&V.splice(e,1)}))}}}function B(e){e.directive("resizeEvent",Q)}function H(){return(H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G(e,t){return isNaN(e)&&isNaN(t)||e===t}!function e(){V.forEach(function(e,t){var n=t.offsetWidth,r=t.offsetHeight;e.offsetWidth===n&&e.offsetHeight===r||(e.offsetWidth=n,e.offsetHeight=r,e.callback(t))}),setTimeout(e,50)}(),B.init=!0,X.$inject=["KeyboardShortcuts"];var Y=Object(P.find)(["flexBasis","webkitFlexBasis","msFlexPreferredSize"],function(e){return e in document.documentElement.style})||"flexBasis",K=5;function X(e){return{link:function(t,n,r){if("false"!==r.resizable){var a=!1,i=null,o=!0,s=!0,l=n.width(),u=n.height(),c=t.$eval(r.rFlex),d=W({},r.toggleShortcut,function(){n.find(".rg-left, .rg-right, .rg-top, .rg-bottom").click()});e.bind(d),t.$on("$destroy",function(){e.unbind(d)}),t.$on("angular-resizable.resizeStart",function(e,t){a||(i=H({},t))}),t.$on("angular-resizable.resizeEnd",function(e,t){a||(o=!0,!1!==t.width&&(o=G(t.width,i.width)),s=!0,!1!==t.height&&(s=G(t.height,i.height)))}),n.on("click",".rg-left, .rg-right",function(){if(o){var e=parseFloat(n.css("min-width"))+K,t=n.width(),r=c?Y:"width";t<=e?n.animate(W({},r,l+"px"),300,function(){p(l,!1)}):(l=t,n.css(W({},r,t+"px")).animate(W({},r,0),300,function(){p(0,!1)}))}}),n.on("click",".rg-top, .rg-bottom",function(){if(s){var e=parseFloat(n.css("min-height"))+K,t=n.height(),r=c?Y:"height";t<=e?n.animate(W({},r,u+"px"),300,function(){p(!1,u)}):(u=t,n.css(W({},r,t+"px")).animate(W({},r,0),300,function(){p(!1,0)}))}})}function p(e,r){a=!0;var i={width:e,height:r,id:n.attr("id"),evt:null};t.$emit("angular-resizable.resizeStart",i),t.$emit("angular-resizable.resizing",i),t.$emit("angular-resizable.resizeEnd",i),a=!1}}}}function J(e){e.directive("resizableToggle",X)}function Z(e){A(e),I(e),L(e),B(e),J(e)}J.init=!0,Z.init=!0;var ee=n(288);function te(e){e.filter("markdown",["$sce","clientConfig",function(e,t){return function(n){if(!n)return"";var r=ee.markdown.toHTML(String(n));return t.allowScriptsInUserInput&&(r=e.trustAsHtml(r)),r}}])}te.init=!0;var ne=n(289),re={columns:6,rowHeight:50,margins:15,mobileBreakPoint:800,defaultSizeX:3,defaultSizeY:3,minSizeX:1,maxSizeX:6,minSizeY:1,maxSizeY:1e3};function ae(e){e.constant("dashboardGridOptions",re)}function ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}ae.init=!0;var oe=i()("redash:config");r.options.shouldHandlePushState=function(e,t){return ie(e.split("?"),1)[0]!==ie(t.split("?"),1)[0]};var se,le=[d.a,f.a,u.a,g.a,v.a,b.a,O.a,"ui.ace",S.a,"angularResizable",E.a,"ui.sortable"],ue=s.a.module("app",le);function ce(e){return e.keys().map(e).map(function(e){return e.default}).filter(P.isFunction).filter(function(e){return e.init}).map(function(e){return e(ue)})}ae(ue),(se=n(754)).keys().forEach(se),Z(ue),ce(n(1173)),Object(P.each)(z,function(e,t){ue.filter(t,function(){return e})}),te(ue),Object(ne.a)(ue),ce(n(821)),ce(n(1393)).forEach(function(e){ue.config(["$routeProvider",function(t){Object(P.each)(e,function(e,n){oe("Registering route: %s",n),e.authenticated=!0,e.resolve=Object(P.extend)({__organizationStatus:function(){return R.default.refresh()}},e.resolve),t.when(n,e)})}])}),ue.config(["$routeProvider",function(e){e.otherwise({resolve:{error:function(){throw{status:404}}}})}]),ce(n(1172)),ce(n(1179)),ue.run(["$q",function(e){$.default.Promise=e}]);var de=ue;function pe(){return(pe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}de.config(["$locationProvider","$compileProvider","uiSelectConfig","toastrConfig",function(e,t,n,r){t.debugInfoEnabled(!1),t.aHrefSanitizationWhitelist(/^\s*(https?|data|tel|sms|mailto):/),e.html5Mode(!0),n.theme="bootstrap",pe(r,{positionClass:"toast-bottom-right",timeOut:2e3})}]),de.run(["$templateCache",function(e){var t=e.get("bootstrap/match.tpl.html");t=t.replace("glyphicon glyphicon-remove","fa fa-remove"),e.put("bootstrap/match.tpl.html",t)}]);t.default=de},,,,,,,,,,,function(e,t,n){"use strict";n.r(t);n(21),n(22),n(29),n(66),n(18),n(19);var r=n(1),a=n.n(r),i=n(0),o=n.n(i),s=n(44),l=n.n(s),u=n(14),c=n(643),d=n.n(c),p=n(161),f=n.n(p),m=n(287),g=n.n(m),h=(n(1082),n(1083),n(1085),n(1086),n(1087),n(1088),n(1089),n(47)),b=n(406),y=n(407),v="localOptions:";var w={get:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=v+e;return n in window.localStorage?JSON.parse(window.localStorage.getItem(n)):t},set:function(e,t){var n=v+e;window.localStorage.setItem(n,JSON.stringify(t))}},O=n(392),x=n(408),S=n(36);n(1091);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"default",function(){return z});var C=f.a.acequire("ace/ext/language_tools"),T=f.a.acequire("ace/snippets");function $(e){f.a.define("ace/snippets/".concat(e),["require","exports","module"],function(t,n){n.snippetText="",n.scope=e})}$("python"),$("sql"),$("json"),$("yaml");var R=function(e){function t(e){var n,r,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,i=P(t).call(this,e),n=!i||"object"!==j(i)&&"function"!=typeof i?k(r):i,q(k(n),"onLoad",function(e){e.commands.bindKey("Cmd+L",null),e.commands.bindKey("Ctrl+P",null),e.commands.bindKey("Ctrl+L",null),e.commands.bindKey({win:"Ctrl+P",mac:null},null),e.commands.bindKey({win:null,mac:"Ctrl+P"},"golineup"),e.commands.on("afterExec",function(t){"insertstring"===t.command.name&&"."===t.args&&e.completer&&e.completer.showPopup(e)}),b.QuerySnippet.query(function(e){var t=T.snippetManager,n={snippetText:""};n.snippets=t.parseSnippetFile(n.snippetText),e.forEach(function(e){n.snippets.push(e.getSnippet())}),t.register(n.snippets||[],n.scope)}),e.focus(),n.props.listenForResize(function(){return e.resize()}),n.props.listenForEditorCommand(function(t,r){switch(r){case"focus":e.focus();break;case"paste":for(var a=arguments.length,i=new Array(a>2?a-2:0),o=2;o<a;o++)i[o-2]=arguments[o];var s=i[0];e.session.doc.replace(e.selection.getRange(),s);var l=e.selection.getRange();n.props.updateQuery(e.session.getValue()),e.selection.setRange(l)}})}),q(k(n),"updateSelectedQuery",function(e){var t=n.refEditor.current.editor.getSession().doc.getTextRange(e.getRange()),r=t.length>1?t:null;n.setState({selectedQueryText:r}),n.props.updateSelectedQuery(r)}),q(k(n),"updateQuery",function(e){n.props.updateQuery(e),n.setState({queryText:e})}),q(k(n),"formatQuery",function(){h.Query.format(n.props.dataSource.syntax||"sql",n.props.queryText).then(n.updateQuery).catch(function(e){return g.a.error(e)})}),q(k(n),"toggleAutocomplete",function(e){n.setState({autocompleteQuery:e}),w.set("liveAutocomplete",e)}),q(k(n),"componentDidUpdate",function(){n.refEditor.current.editor.resize()}),n.refEditor=a.a.createRef(),n.state={schema:null,keywords:{table:[],column:[],tableColumn:[]},autocompleteQuery:w.get("liveAutocomplete",!0),liveAutocompleteDisabled:!1,queryText:e.queryText,selectedQueryText:null};var o={identifierRegexps:[/[a-zA-Z_0-9.\-\u00A2-\uFFFF]/],getCompletions:function(e,t,r,a,i){var o=n.state.keywords.table,s=n.state.keywords.column,l=n.state.keywords.tableColumn;if(0!==a.length&&0!==o.length)if("."!==a[a.length-1])i(null,o.concat(s));else{var u=a.substring(0,a.length-1);i(null,o.concat(l[u]))}else i(null,[])}};return C.setCompleters([C.snippetCompleter,C.keyWordCompleter,C.textCompleter,o]),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,a.a.Component),n=t,i=[{key:"getDerivedStateFromProps",value:function(e,t){if(!e.schema)return{keywords:{table:[],column:[],tableColumn:[]},liveAutocompleteDisabled:!1};if(e.schema!==t.schema){var n=e.schema.reduce(function(e,t){return e+t.columns.length},0);return{schema:e.schema,keywords:x.default.buildKeywordsFromSchema(e.schema),liveAutocompleteDisabled:n>5e3}}return null}}],(r=[{key:"render",value:function(){var e=y.KeyboardShortcuts.modKey,t=this.props.queryExecuting||!this.props.canExecuteQuery();return a.a.createElement("section",{style:{height:"100%"},"data-test":"QueryEditor"},a.a.createElement("div",{className:"container p-15 m-b-10",style:{height:"100%"}},a.a.createElement("div",{"data-executing":this.props.queryExecuting,style:{height:"calc(100% - 40px)",marginBottom:"0px"},className:"editor__container"},a.a.createElement(d.a,{ref:this.refEditor,theme:"textmate",mode:this.props.dataSource.syntax||"sql",value:this.state.queryText,editorProps:{$blockScrolling:1/0},width:"100%",height:"100%",setOptions:{behavioursEnabled:!0,enableSnippets:!0,enableBasicAutocompletion:!0,enableLiveAutocompletion:!this.state.liveAutocompleteDisabled&&this.state.autocompleteQuery,autoScrollEditorIntoView:!0},showPrintMargin:!1,wrapEnabled:!1,onLoad:this.onLoad,onPaste:this.onPaste,onChange:this.updateQuery,onSelectionChange:this.updateSelectedQuery})),a.a.createElement("div",{className:"editor__control"},a.a.createElement("div",{className:"form-inline d-flex"},a.a.createElement(l.a,{placement:"top",title:a.a.createElement("span",null,"Add New Parameter (",a.a.createElement("i",null,e," + P"),")")},a.a.createElement("button",{type:"button",className:"btn btn-default m-r-5",onClick:this.props.addNewParameter},"{{}}")),a.a.createElement(l.a,{placement:"top",title:"Format Query"},a.a.createElement("button",{type:"button",className:"btn btn-default m-r-5",onClick:this.formatQuery},a.a.createElement("span",{className:"zmdi zmdi-format-indent-increase"}))),a.a.createElement(O.default,{state:this.state.autocompleteQuery,onToggle:this.toggleAutocomplete,disabled:this.state.liveAutocompleteDisabled}),a.a.createElement("select",{className:"form-control datasource-small flex-fill w-100",onChange:this.props.updateDataSource,disabled:!this.props.isQueryOwner},this.props.dataSources.map(function(e){return a.a.createElement("option",{label:e.name,value:e.id,key:"ds-option-".concat(e.id)},e.name)})),this.props.canEdit?a.a.createElement(l.a,{placement:"top",title:e+" + S"},a.a.createElement("button",{type:"button",className:"btn btn-default m-l-5",onClick:this.props.saveQuery,title:"Save"},a.a.createElement("span",{className:"fa fa-floppy-o"}),a.a.createElement("span",{className:"hidden-xs m-l-5"},"Save"),this.props.isDirty?"*":null)):null,a.a.createElement(l.a,{placement:"top",title:e+" + Enter"},a.a.createElement("button",{type:"button",className:"btn btn-primary m-l-5"+(t?" disabled":""),disabled:t,onClick:this.props.executeQuery,"data-test":"ExecuteButton"},a.a.createElement("span",{className:"zmdi zmdi-play"}),a.a.createElement("span",{className:"hidden-xs m-l-5"},null==this.state.selectedQueryText?"Execute":"Execute Selected")))))))}}])&&E(n.prototype,r),i&&E(n,i),t}();function z(e){e.component("queryEditor",Object(u.react2angular)(R))}q(R,"propTypes",{queryText:o.a.string.isRequired,schema:S.Schema,addNewParameter:o.a.func.isRequired,dataSources:o.a.arrayOf(S.DataSource),dataSource:S.DataSource,canEdit:o.a.bool.isRequired,isDirty:o.a.bool.isRequired,isQueryOwner:o.a.bool.isRequired,updateDataSource:o.a.func.isRequired,canExecuteQuery:o.a.func.isRequired,executeQuery:o.a.func.isRequired,queryExecuting:o.a.bool.isRequired,saveQuery:o.a.func.isRequired,updateQuery:o.a.func.isRequired,updateSelectedQuery:o.a.func.isRequired,listenForResize:o.a.func.isRequired,listenForEditorCommand:o.a.func.isRequired}),q(R,"defaultProps",{schema:null,dataSource:{},dataSources:[]}),z.init=!0},function(e,t,n){"use strict";n.r(t);n(18);var r=n(9),a=n.n(r);n(188),n(549);function i(e){return[0,e.length-1]}function o(e){return[d3.quantile(e,.25),d3.quantile(e,.5),d3.quantile(e,.75)]}var s=function(){var e=1,t=1,n=0,r=null,a=Number,s=i,l=o,u=null;function c(i){i.each(function(i,o){i=i.map(a).sort(d3.ascending);var c=d3.select(this),d=i.length,p=i[0],f=i[d-1],m=i.quartiles=l(i),g=s&&s.call(this,i,o),h=g&&g.map(function(e){return i[e]}),b=g?d3.range(0,g[0]).concat(d3.range(g[1]+1,d)):d3.range(d),y=d3.scale.linear().domain(r&&r.call(this,i,o)||[p,f]).range([t,0]),v=this.__chart__||d3.scale.linear().domain([0,1/0]).range(y.range());this.__chart__=y;var w=c.selectAll("line.center").data(h?[h]:[]);w.enter().insert("line","rect").attr("class","center").attr("x1",e/2).attr("y1",function(e){return v(e[0])}).attr("x2",e/2).attr("y2",function(e){return v(e[1])}).style("opacity",1e-6).transition().duration(n).style("opacity",1).attr("y1",function(e){return y(e[0])}).attr("y2",function(e){return y(e[1])}),w.transition().duration(n).style("opacity",1).attr("y1",function(e){return y(e[0])}).attr("y2",function(e){return y(e[1])}),w.exit().transition().duration(n).style("opacity",1e-6).attr("y1",function(e){return y(e[0])}).attr("y2",function(e){return y(e[1])}).remove();var O=c.selectAll("rect.box").data([m]);O.enter().append("rect").attr("class","box").attr("x",0).attr("y",function(e){return v(e[2])}).attr("width",e).attr("height",function(e){return v(e[0])-v(e[2])}).transition().duration(n).attr("y",function(e){return y(e[2])}).attr("height",function(e){return y(e[0])-y(e[2])}),O.transition().duration(n).attr("y",function(e){return y(e[2])}).attr("height",function(e){return y(e[0])-y(e[2])}),O.exit().remove();var x=c.selectAll("line.median").data([m[1]]);x.enter().append("line").attr("class","median").attr("x1",0).attr("y1",v).attr("x2",e).attr("y2",v).transition().duration(n).attr("y1",y).attr("y2",y),x.transition().duration(n).attr("y1",y).attr("y2",y),x.exit().remove();var S=c.selectAll("line.whisker").data(h||[]);S.enter().insert("line","circle, text").attr("class","whisker").attr("x1",0).attr("y1",v).attr("x2",e).attr("y2",v).style("opacity",1e-6).transition().duration(n).attr("y1",y).attr("y2",y).style("opacity",1),S.transition().duration(n).attr("y1",y).attr("y2",y).style("opacity",1),S.exit().transition().duration(n).attr("y1",y).attr("y2",y).style("opacity",1e-6).remove();var j=c.selectAll("circle.outlier").data(b,Number);j.enter().insert("circle","text").attr("class","outlier").attr("r",5).attr("cx",e/2).attr("cy",function(e){return v(i[e])}).style("opacity",1e-6).transition().duration(n).attr("cy",function(e){return y(i[e])}).style("opacity",1),j.transition().duration(n).attr("cy",function(e){return y(i[e])}).style("opacity",1),j.exit().transition().duration(n).attr("cy",function(e){return y(i[e])}).style("opacity",1e-6).remove();var E=u||y.tickFormat(8),P=c.selectAll("text.box").data(m);P.enter().append("text").attr("class","box").attr("dy",".3em").attr("dx",function(e,t){return 1&t?6:-6}).attr("x",function(t,n){return 1&n?e:0}).attr("y",v).attr("text-anchor",function(e,t){return 1&t?"start":"end"}).text(E).transition().duration(n).attr("y",y),P.transition().duration(n).text(E).attr("y",y),P.exit().remove();var k=c.selectAll("text.whisker").data(h||[]);k.enter().append("text").attr("class","whisker").attr("dy",".3em").attr("dx",6).attr("x",e).attr("y",v).text(E).style("opacity",1e-6).transition().duration(n).attr("y",y).style("opacity",1),k.transition().duration(n).text(E).attr("y",y).style("opacity",1),k.exit().transition().duration(n).attr("y",y).style("opacity",1e-6).remove()}),d3.timer.flush()}return c.width=function(t){return arguments.length?(e=t,c):e},c.height=function(e){return arguments.length?(t=e,c):t},c.tickFormat=function(e){return arguments.length?(u=e,c):u},c.duration=function(e){return arguments.length?(n=e,c):n},c.domain=function(e){return arguments.length?(r=null==e?e:d3.functor(e),c):r},c.value=function(e){return arguments.length?(a=e,c):a},c.whiskers=function(e){return arguments.length?(s=e,c):s},c.quartiles=function(e){return arguments.length?(l=e,c):l},c},l=n(666),u=n.n(l);function c(){return{restrict:"E",template:"<div></div>",link:function(e,t){e.$watch("[queryResult && queryResult.getData(), visualization.options]",function(){if(null!==e.queryResult.getData()){var n,r=e.queryResult.getData(),i=a.a.select(t[0].parentNode).node().getBoundingClientRect().width,o={top:10,right:50,bottom:40,left:50,inner:25},l=i-o.right-o.left,u=500-o.top-o.bottom,c=1/0,d=-1/0,p=[],f=0,m=[],g=e.visualization.options.xAxisLabel,h=e.visualization.options.yAxisLabel,b=e.queryResult.getColumnNames(),y=a.a.scale.ordinal().domain(b).rangeBands([0,i-o.left-o.right]);n=b.length>1?Math.min(y(b[1]),120):120,o.inner=n/3,b.forEach(function(e,t){m=p[t]=[],r.forEach(function(t){f=t[e],m.push(f),f>d&&(d=Math.ceil(f)),f<c&&(c=Math.floor(f))})});var v,w=a.a.scale.linear().domain([.99*c,1.01*d]).range([u,0]),O=s().whiskers((v=1.5,function(e){for(var t=e.quartiles[0],n=e.quartiles[2],r=(n-t)*v,a=-1,i=e.length;e[++a]<t-r;);for(;e[--i]>n+r;);return[a,i]})).width(n-2*o.inner).height(u).domain([.99*c,1.01*d]),x=a.a.svg.axis().scale(y).orient("bottom"),S=a.a.svg.axis().scale(w).orient("left"),j=a.a.svg.axis().scale(y).tickSize(u).orient("bottom"),E=a.a.svg.axis().scale(w).tickSize(l).orient("right");a.a.select(t[0]).selectAll("svg").remove();var P=a.a.select(t[0]).append("svg").attr("width",i).attr("height",u+o.bottom+o.top).append("g").attr("width",i-o.left-o.right).attr("transform","translate(".concat(o.left,",").concat(o.top,")"));a.a.select("svg").append("text").attr("class","box").attr("x",i/2).attr("text-anchor","middle").attr("y",u+o.bottom).text(g),a.a.select("svg").append("text").attr("class","box").attr("transform","translate(10,".concat((u+o.top+o.bottom)/2,")rotate(-90)")).attr("text-anchor","middle").text(h),P.append("rect").attr("class","grid-background").attr("width",l).attr("height",u),P.append("g").attr("class","grid").call(E),P.append("g").attr("class","grid").call(j),P.append("g").attr("class","x axis").attr("transform","translate(0,".concat(u,")")).call(x),P.append("g").attr("class","y axis").call(S),P.selectAll(".box").data(p).enter().append("g").attr("class","box").attr("width",n).attr("height",u).attr("transform",function(e,t){return"translate(".concat(function(e){return y(b[e])+(y(b[1])-o.inner)/2}(t),",",0,")")}).call(O)}},!0)}}}function d(){return{restrict:"E",template:u.a}}function p(e){e.directive("boxplotRenderer",c),e.directive("boxplotEditor",d),e.config(["VisualizationProvider",function(e){e.registerVisualization({type:"BOXPLOT",name:"Boxplot (Deprecated)",defaultOptions:{defaultRows:8,minRows:5},renderTemplate:'<boxplot-renderer options="visualization.options" query-result="queryResult"></boxplot-renderer>',editorTemplate:"<boxplot-editor></boxplot-editor>"})}])}n.d(t,"default",function(){return p}),p.init=!0},function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),i=(n(179),n(31),n(18),n(19),n(9)),o=n(46),s=n.n(o),l="<<<Exit>>>",u=i.scale.category10();function c(e){return u(e.name)}function d(e,t){this.element=t,this.watches=[];var n=t.clientWidth,r=t.offsetHeight,o={w:n/6,h:30,s:3,t:10},s=Math.min(n-o.h,r-o.h)/2-5;if(!(s<=0)){var d={top:s,bottom:50,left:s,right:0},p=0,f=i.layout.partition().size([2*Math.PI,s*s]).value(function(e){return e.size}),m=i.svg.arc().startAngle(function(e){return e.x}).endAngle(function(e){return e.x+e.dx}).innerRadius(function(e){return Math.sqrt(e.y)}).outerRadius(function(e){return Math.sqrt(e.y+e.dy)}),g=i.select(t),h=g.append("div").classed("breadcrumbs-container",!0).append("svg").attr("width",n).attr("height",o.h).attr("fill","white").attr("font-weight",600),b=g.append("div"),y=b.append("div").classed("summary-container",!0),v=b.append("div").classed("sunburst-container",!0).append("svg").attr("width",2*s).attr("height",2*s).append("g").attr("transform","translate(".concat(d.left,",").concat(d.top,")")),w=h.append("text").classed("lastCrumb",!0);k(),this.watches.push(e.$watch("visualization.options",k,!0)),this.watches.push(e.$watch("queryResult && queryResult.getData()",k))}function O(e,t){var n=[];return n.push("0,0"),n.push("".concat(o.w,",0")),n.push("".concat(o.w+o.t,",").concat(o.h/2)),n.push("".concat(o.w,",").concat(o.h)),n.push("0,".concat(o.h)),t>0&&n.push("".concat(o.t,",").concat(o.h/2)),n.join(" ")}function x(e){var t=(100*e.value/p).toPrecision(3),n="".concat(t,"%");t<1&&(n="< 1.0%");var r=function(e){for(var t=[],n=e;n.parent;)t.unshift(n),n=n.parent;return t}(e);!function(e,t){var n=h.selectAll("g").data(e,function(e){return e.name+e.depth}),r=n.enter().append("g");r.append("polygon").classed("breadcrumbs-shape",!0).attr("points",O).attr("fill",c),r.append("text").classed("breadcrumbs-text",!0).attr("x",(o.w+o.t)/2).attr("y",o.h/2).attr("dy","0.35em").attr("font-size","10px").attr("text-anchor","middle").text(function(e){return e.name}),n.attr("transform",function(e,t){return"translate(".concat(t*(o.w+o.s),", 0)")}),n.exit().remove(),w.attr("x",(e.length+.5)*(o.w+o.s)).attr("y",o.h/2).attr("dy","0.35em").attr("text-anchor","middle").attr("fill","black").attr("font-weight",600).text(t)}(r,n),v.selectAll("path").attr("opacity",.3),v.selectAll("path").filter(function(e){return r.indexOf(e)>=0}).attr("opacity",1),y.html("\n      <span>Stage: ".concat(e.depth,"</span>\n      <span class='percentage' style='font-size: 2em;'>").concat(n,"</span>\n      <span>").concat(e.value," of ").concat(p,"</span>\n    ")),y.style("visibility",""),h.style("visibility","")}function S(){v.selectAll("path").on("mouseover",null),v.selectAll("path").transition().duration(1e3).attr("opacity",1).each("end",function(){i.select(this).on("mouseover",x)}),h.style("visibility","hidden"),y.style("visibility","hidden")}function j(e){!function(e){var t,n=f.nodes(e).filter(function(e){return e.dx>.005&&e.name!==l}),r=(t=[],n.forEach(function(e){-1===t.indexOf(e.name)&&t.push(e.name)}),t);u.domain(r);var a=v.data([e]).selectAll("path").data(n).enter().append("path").classed("nodePath",!0).attr("display",function(e){return e.depth?null:"none"}).attr("d",m).attr("fill",c).attr("opacity",1).attr("stroke","white").on("mouseover",x);g.on("click",S),p=a.node().__data__.value}(e)}function E(e){var t=function(e){var t;if(a.a.has(e[0],"sequence")&&a.a.has(e[0],"stage")&&a.a.has(e[0],"node")&&a.a.has(e[0],"value")){var n=a.a.groupBy(e,"sequence");t=a.a.map(n,function(e){var t=a.a.sortBy(e,"stage");return{size:e[0].value,sequence:e[0].sequence,nodes:a.a.map(t,function(e){return e.node})}})}else{var r=a.a.sortBy(a.a.filter(a.a.keys(e[0]),function(e){return"value"!==e&&0!==e.indexOf("$$")}),a.a.identity);t=a.a.map(e,function(e,t){return{size:e.value,sequence:t,nodes:a.a.compact(a.a.map(r,function(t){return e[t]}))}})}return t}(e),n={name:"root",children:[]};return t.forEach(function(e){for(var t=e.nodes,r=parseInt(e.size,10),i=n,o=function(e){var n=i.children,o=t[e],s=e+1===t.length;n||(i.children=n=[],n.push({name:l,size:i.size}));var u=a.a.find(n,function(e){return e.name===o});s&&u?u.children.push({name:l,size:r}):s?n.push({name:o,size:r}):(u||(u={name:o,children:[]},n.push(u)),i=u)},s=0;s<t.length;s+=1)o(s)}),n}function P(e){var t=E(e);v.selectAll(".nodePath").remove(),j(t)}function k(){var t=e.queryResult.getData();t&&P(t)}}d.prototype.remove=function(){this.watches.forEach(function(e){e()}),s.a.element(this.element).empty(".vis-container")};var p=d,f=n(690),m=n.n(f);function g(){return{restrict:"E",template:'<div class="sunburst-visualization-container" resize-event="handleResize()"></div>',link:function(e,t){var n=t[0].querySelector(".sunburst-visualization-container"),a=new p(e,n);function i(){a.remove(),a=new p(e,n)}e.handleResize=Object(r.debounce)(i,50),e.$watch("visualization.options.height",function(e,t){e!==t&&i()})}}}function h(){return{restrict:"E",template:m.a}}function b(e){e.directive("sunburstSequenceRenderer",g),e.directive("sunburstSequenceEditor",h),e.config(["VisualizationProvider",function(e){e.registerVisualization({type:"SUNBURST_SEQUENCE",name:"Sunburst Sequence",renderTemplate:'<sunburst-sequence-renderer options="visualization.options" query-result="queryResult"></sunburst-sequence-renderer>',editorTemplate:"<sunburst-sequence-editor></sunburst-sequence-editor>",defaultOptions:{defaultRows:7}})}])}n.d(t,"default",function(){return b}),b.init=!0},function(e,t,n){"use strict";n.r(t);n(204),n(205),n(188),n(1388),n(66),n(19),n(31),n(18);var r=n(46),a=n.n(r),i=n(2),o=n.n(i),s=n(9),l=n.n(s);function u(e){return e.y+e.dy/2}function c(e){return e.value}var d=function(){var e={},t=24,n=8,r=[1,1],a=[],i=[];function o(){var e,n,i=a,o=0;function s(n){n.x=o,n.dx=t,n.sourceLinks.forEach(function(t){e.indexOf(t.target)<0&&e.push(t.target)})}for(;i.length;)e=[],i.forEach(s),i=e,o+=1;!function(e){a.forEach(function(t){t.sourceLinks.length||(t.x=e-1)})}(o),n=(r[0]-t)/(o-1),a.forEach(function(e){e.x*=n})}function s(){function e(e,t){return e.source.y-t.source.y}function t(e,t){return e.target.y-t.target.y}a.forEach(function(n){n.sourceLinks.sort(t),n.targetLinks.sort(e)}),a.forEach(function(e){var t=0,n=0;e.sourceLinks.forEach(function(e){e.sy=t,t+=e.dy}),e.targetLinks.forEach(function(e){e.ty=n,n+=e.dy})})}return e.nodeWidth=function(n){return arguments.length?(t=+n,e):t},e.nodePadding=function(t){return arguments.length?(n=+t,e):n},e.nodes=function(t){return arguments.length?(a=t,e):a},e.links=function(t){return arguments.length?(i=t,e):i},e.size=function(t){return arguments.length?(r=t,e):r},e.layout=function(t){return a.forEach(function(e){e.sourceLinks=[],e.targetLinks=[]}),i.forEach(function(e){var t=e.source,n=e.target;"number"==typeof t&&(t=e.source=a[e.source]),"number"==typeof n&&(n=e.target=a[e.target]),t.sourceLinks.push(e),n.targetLinks.push(e)}),a.forEach(function(e){e.value=Math.max(l.a.sum(e.sourceLinks,c),l.a.sum(e.targetLinks,c))}),o(),function(e){var t,o=l.a.nest().key(function(e){return e.x}).sortKeys(l.a.ascending).entries(a).map(function(e){return e.values});function s(e){function t(e){return u(e.source)*e.value}o.forEach(function(n){n.forEach(function(n){if(n.targetLinks.length){var r=l.a.sum(n.targetLinks,t)/l.a.sum(n.targetLinks,c);n.y+=(r-u(n))*e}})})}function d(){o.forEach(function(e){var t,a,i,o=e.length,s=0;for(e.sort(m),i=0;i<o;++i)(a=s-(t=e[i]).y)>0&&(t.y+=a),s=t.y+t.dy+n;if((a=s-n-r[1])>0)for(s=t.y-=a,i=o-2;i>=0;--i)(a=(t=e[i]).y+t.dy+n-s)>0&&(t.y-=a),s=t.y})}function d(){o.forEach(function(e){var t,a,i,o=0,s=e.length;for(e.sort(m),i=0;i<s;++i)(a=o-(t=e[i]).y)>0&&(t.y+=a),o=t.y+t.dy+n;if((a=o-n-r[1])>0)for(o=t.y-=a,i=s-2;i>=0;--i)(a=(t=e[i]).y+t.dy+n-o)>0&&(t.y-=a),o=t.y})}t=l.a.min(o,function(e){return(r[1]-(e.length-1)*n)/l.a.sum(e,c)}),o.forEach(function(e){e.forEach(function(e,n){e.y=n,e.dy=e.value*t})}),i.forEach(function(e){e.dy=e.value*t}),d();for(var p=1;e>0;e-=1)f(p*=.99),d(),s(p),d();function f(e){function t(e){return u(e.target)*e.value}o.slice().reverse().forEach(function(n){n.forEach(function(n){if(n.sourceLinks.length){var r=l.a.sum(n.sourceLinks,t)/l.a.sum(n.sourceLinks,c);n.y+=(r-u(n))*e}})})}function m(e,t){return e.y-t.y}}(t),s(),e},e.relayout=function(){return s(),e},e.link=function(){var e=arguments,t=.5;function n(e){var n=e.source.x+e.source.dx,r=e.target.x,a=l.a.interpolateNumber(n,r),i=a(t),o=a(1-t),s=e.source.y+e.sy+e.dy/2,u=e.target.y+e.ty+e.dy/2;return"M".concat(n,",").concat(s,"C").concat(i,",").concat(s," ").concat(o,",").concat(u," ").concat(r,",").concat(u)}return n.curvature=function(r){return e.length?(t=+r,n):t},n},e},p=n(689),f=n.n(p);function m(e){var t={},n={},r=[],a=o.a.sortBy(o.a.filter(o.a.keys(e[0]),function(e){return"value"!==e&&0!==e.indexOf("$$")}),o.a.identity);function i(e,n){e=function(e){return e||"Exit"}(e);var a="".concat(e,":").concat(String(n)),i=t[a];if(!i){i={name:e};var o=r.push(i)-1;i.id=o,t[a]=i}return i}function s(e,t,r,a){if(""!==e&&e||!(a>1)){var o=i(e,a),s=i(t,a+1);(function(e,t){var r=n[[e,t]];return r||(r={target:t,source:e,value:0},n[[e,t]]=r),r}(o.id,s.id)).value+=parseInt(r,10)}}return e.forEach(function(e){s(e[a[0]],e[a[1]],e.value,1),s(e[a[1]],e[a[2]],e.value,2),s(e[a[2]],e[a[3]],e.value,3),s(e[a[3]],e[a[4]],e.value,4)}),{nodes:r,links:o.a.values(n)}}function g(e,t){var n=10,r=10,a=10,i=10,s=e.offsetWidth-i-r,u=e.offsetHeight-n-a;if(!(s<=0||u<=0)){var c=function(e){return l.a.format(",.0f")(e)},p=l.a.scale.category20();(t=m(t)).nodes=o.a.map(t.nodes,function(e){return o.a.extend(e,{color:p(e.name.replace(/ .*/,""))})});var f=l.a.select(e).append("svg").attr("class","sankey").attr("width",s+i+r).attr("height",u+n+a).append("g").attr("transform","translate(".concat(i,",").concat(n,")")),g=d().nodeWidth(15).nodePadding(10).size([s,u]),h=g.link();g.nodes(t.nodes).links(t.links).layout(0),function(e,t){l.a.nest().key(function(e){return e.x}).entries(t.nodes).map(function(e){return e.values}).forEach(function(t){t=o.a.filter(o.a.sortBy(t,function(e){return-e.value}),function(e){return"Exit"!==e.name});var n=l.a.sum(t,function(e){return e.dy}),r=(e-n)/t.length;o.a.reduce(t,function(e,t){return t.y=e,e+t.dy+r},0)})}(u,t),g.relayout();var b=f.append("g").selectAll(".link").data(t.links).enter().append("path").filter(function(e){return"Exit"!==e.target.name}).attr("class","link").attr("d",h).style("stroke-width",function(e){return Math.max(1,e.dy)}).sort(function(e,t){return t.dy-e.dy});b.append("title").text(function(e){return"".concat(e.source.name,"  ").concat(e.target.name,"\n").concat(c(e.value))});var y=f.append("g").selectAll(".node").data(t.nodes).enter().append("g").filter(function(e){return"Exit"!==e.name}).attr("class","node").attr("transform",function(e){return"translate(".concat(e.x,",").concat(e.y,")")});y.on("mouseover",function(e){var t=function(e){var t=[];return e.sourceLinks.forEach(function(e){t.push(e.target)}),e.targetLinks.forEach(function(e){t.push(e.source)}),t}(e);t=o.a.map(t,function(e){return e.id}),y.filter(function(n){return n!==e&&!o.a.includes(t,n.id)}).style("opacity",.2),b.filter(function(t){return!(o.a.includes(e.sourceLinks,t)||o.a.includes(e.targetLinks,t))}).style("opacity",.2)}).on("mouseout",function(){y.style("opacity",1),b.style("opacity",1)}),y.append("rect").attr("height",function(e){return e.dy}).attr("width",g.nodeWidth()).style("fill",function(e){return e.color}).style("stroke",function(e){return l.a.rgb(e.color).darker(2)}).append("title").text(function(e){return"".concat(e.name,"\n").concat(c(e.value))}),y.append("text").attr("x",-6).attr("y",function(e){return e.dy/2}).attr("dy",".35em").attr("text-anchor","end").attr("transform",null).text(function(e){return e.name}).filter(function(e){return e.x<s/2}).attr("x",6+g.nodeWidth()).attr("text-anchor","start")}}function h(){return{restrict:"E",template:'<div class="sankey-visualization-container" resize-event="handleResize()"></div>',link:function(e,t){var n=t[0].querySelector(".sankey-visualization-container");function r(){var t=e.queryResult.getData();t&&(a.a.element(n).empty(),g(n,t))}e.handleResize=o.a.debounce(r,50),e.$watch("queryResult && queryResult.getData()",r),e.$watch("visualization.options.height",function(e,t){e!==t&&r()})}}}function b(){return{restrict:"E",template:f.a}}function y(e){e.directive("sankeyRenderer",h),e.directive("sankeyEditor",b),e.config(["VisualizationProvider",function(e){e.registerVisualization({type:"SANKEY",name:"Sankey",renderTemplate:'<sankey-renderer options="visualization.options" query-result="queryResult"></sankey-renderer>',editorTemplate:"<sankey-editor></sankey-editor>",defaultOptions:{defaultRows:7}})}])}n.d(t,"default",function(){return y}),y.init=!0}]);
//# sourceMappingURL=app.435ded10d8730a744feb.js.map