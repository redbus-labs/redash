{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./client/app/services/ng.js","webpack:///./client/app/services/auth.js","webpack:///./client/app/components/items-list/components/ItemsTable.jsx","webpack:///./client/app/components/DialogWrapper.jsx","webpack:///./client/app/components/proptypes.js","webpack:///./client/app/filters/index.js","webpack:///./client/app/services/user.js","webpack:///./client/app/services/query.js","webpack:///./client/app/components/items-list/ItemsList.jsx","webpack:///./client/app/components/items-list/components/Sidebar.jsx","webpack:///./client/app/components/layouts/ContentWithSidebar.jsx","webpack:///./client/app/services/group.js","webpack:///./client/app/components/items-list/components/LoadingState.jsx","webpack:///./client/app/components/BigMessage.jsx","webpack:///./client/app/components/items-list/classes/StateStorage.js","webpack:///./client/app/services/settingsMenu.js","webpack:///./client/app/lib/value-format.js","webpack:///./client/app/components/ParameterMappingInput.jsx","webpack:///./client/app/components/Paginator.jsx","webpack:///./client/app/components/items-list/classes/ItemsSource.js","webpack:///./client/app/lib/utils.js","webpack:///./client/app/services/policy/index.js","webpack:///./client/app/visualizations/chart/plotly/utils.js","webpack:///./client/app/services/widget.js","webpack:///./client/app/components/PreviewCard.jsx","webpack:///./client/app/visualizations/choropleth/utils.js","webpack:///./client/app/components/tags-control/TagsControl.jsx","webpack:///./client/app/lib/promise-rejection-error.js","webpack:///./client/app/services/recordEvent.js","webpack:///./client/app/services/navigateTo.js","webpack:///./client/app/services/organizationStatus.js","webpack:///./client/app/components/InputWithCopy.jsx","webpack:///./client/app/assets/images/redash_icon_small.png","webpack:///./client/app/components/PageHeader.jsx","webpack:///./client/app/services/getTags.js","webpack:///./client/app/components/empty-state/EmptyState.jsx","webpack:///./client/app/components/items-list/classes/Sorter.js","webpack:///./client/app/components/groups/ListItemAddon.jsx","webpack:///./client/app/services/data-source.js","webpack:///./client/app/components/dynamic-form/dynamicFormHelper.js","webpack:///./client/app/services/dashboard.js","webpack:///./client/app/components/DynamicComponent.jsx","webpack:///./client/app/components/EditParameterSettingsDialog.jsx","webpack:///./client/app/components/QuerySelector.jsx","webpack:///./client/app/components/HelpTrigger.jsx","webpack:///./client/app/components/NoTaggedObjectsFound.jsx","webpack:///./client/app/components/SelectItemsDialog.jsx","webpack:///./client/app/components/dynamic-form/DynamicForm.jsx","webpack:///./client/app/components/groups/DeleteGroupButton.jsx","webpack:///./client/app/components/groups/DetailsPageSidebar.jsx","webpack:///./client/app/components/groups/GroupName.jsx","webpack:///./client/app/components/items-list/components/EmptyState.jsx","webpack:///./client/app/services/utils.js","webpack:///./client/app/components/dynamic-table/default-cell/utils.js","webpack:///./client/app/services/alert.js","webpack:///./client/app/services/notifications.js","webpack:///./client/app/pages/data-sources/show.js","webpack:///./client/app/pages/queries/query.html","webpack:///./client/app/filters/datetime.js","webpack:///./client/app/components/DateTimeInput.jsx","webpack:///./client/app/components/DateTimeRangeInput.jsx","webpack:///./client/app/components/items-list/classes/ItemsFetcher.js","webpack:///./client/app/lib/pagination/paginator.js","webpack:///./client/app/lib/pagination/index.js","webpack:///./client/app/components/AutocompleteToggle.jsx","webpack:///./client/app/components/DateInput.jsx","webpack:///./client/app/components/DateRangeInput.jsx","webpack:///./client/app/components/EditInPlace.jsx","webpack:///./client/app/components/tags-control/EditTagsDialog.jsx","webpack:///./client/app/components/EmailSettingsWarning.jsx","webpack:///./client/app/components/FavoritesControl.jsx","webpack:///./client/app/components/ParameterValueInput.jsx","webpack:///./client/app/components/QueryBasedParameterInput.jsx","webpack:///./client/app/services/query-snippet.js","webpack:///./client/app/services/keyboard-shortcuts.js","webpack:///./client/app/components/keywordBuilder.js","webpack:///./client/app/components/TagsList.jsx","webpack:///./client/app/components/TimeAgo.jsx","webpack:///./client/app/components/admin/CeleryStatus.jsx","webpack:///./client/app/components/app-view/error-handler.js","webpack:///./client/app/components/dashboards/AddTextboxDialog.jsx","webpack:///./client/app/components/dashboards/AddWidgetDialog.jsx","webpack:///./client/app/components/dashboards/EditParameterMappingsDialog.jsx","webpack:///./client/app/services/policy/DefaultPolicy.js","webpack:///./client/app/components/dynamic-table/json-cell/json-view-interactive.js","webpack:///./client/app/components/groups/CreateGroupDialog.jsx","webpack:///./client/app/components/items-list/classes/Paginator.js","webpack:///./client/app/components/queries/ScheduleDialog.jsx","webpack:///./client/app/components/queries/SchedulePhrase.jsx","webpack:///./client/app/components/users/ChangePasswordDialog.jsx","webpack:///./client/app/components/users/CreateUserDialog.jsx","webpack:///./client/app/components/users/UserEdit.jsx","webpack:///./client/app/components/users/UserShow.jsx","webpack:///./client/app/services/query-result.js","webpack:///./client/app/pages/dashboards/DashboardListEmptyState.jsx","webpack:///./client/app/pages/dashboards/ShareDashboardDialog.jsx","webpack:///./client/app/pages/queries-list/QueriesListEmptyState.jsx","webpack:///./client/app/pages/data-sources/show.html","webpack:///./client/app/pages/destinations/show.html","webpack:///./client/app/assets/images/avatar.svg","webpack:///./client/app/components/dashboards/gridstack/gridstack.js","webpack:///./client/app/components/alerts/alert-subscriptions/alert-subscriptions.html","webpack:///./client/app/components/app-header/app-header.html","webpack:///./client/app/components/app-view/template.html","webpack:///./client/app/components/dashboards/edit-dashboard-dialog.html","webpack:///./client/app/components/dashboards/widget.html","webpack:///./client/app/components/dashboards/edit-text-box.html","webpack:///./client/app/components/dashboards/widget-dialog.html","webpack:///./client/app/components/dynamic-table/default-cell/template.html","webpack:///./client/app/components/dynamic-table/dynamic-table.html","webpack:///./client/app/components/dynamic-table/json-cell/template.html","webpack:///./client/app/components/filters.html","webpack:///./client/app/components/parameters.html","webpack:///./client/app/components/permissions-editor/permissions-editor.html","webpack:///./client/app/components/queries/embed-code-dialog.html","webpack:///./client/app/components/queries/schema-browser.html","webpack:///./client/app/components/queries/visualization-embed.html","webpack:///./client/app/components/settings-screen.html","webpack:///./client/app/components/type-picker.html","webpack:///./client/app/visualizations/box-plot/box-plot-editor.html","webpack:///./client/app/visualizations/chart/chart.html","webpack:///./client/app/visualizations/chart/chart-editor.html","webpack:///./client/app/visualizations/choropleth/choropleth.html","webpack:///./client/app/visualizations/choropleth/choropleth-editor.html","webpack:///./client/app/visualizations/choropleth/countries.geo.json","webpack:///./client/app/visualizations/cohort/cohort-editor.html","webpack:///./client/app/visualizations/counter/counter.html","webpack:///./client/app/visualizations/counter/counter-editor.html","webpack:///./client/app/visualizations/edit-visualization-dialog.html","webpack:///./client/app/visualizations/funnel/funnel-editor.html","webpack:///./client/app/visualizations/map/map.html","webpack:///./client/app/visualizations/map/map-editor.html","webpack:///./client/app/visualizations/pivot/pivottable-editor.html","webpack:///./client/app/visualizations/sankey/sankey-editor.html","webpack:///./client/app/visualizations/sunburst/sunburst-sequence-editor.html","webpack:///./client/app/visualizations/table/table.html","webpack:///./client/app/visualizations/table/table-editor.html","webpack:///./client/app/visualizations/word-cloud/word-cloud-editor.html","webpack:///./client/app/pages/admin/outdated-queries/outdated-queries.html","webpack:///./client/app/pages/admin/status/status.html","webpack:///./client/app/pages/admin/tasks/tasks.html","webpack:///./client/app/pages/alert/alert.html","webpack:///./client/app/pages/dashboards/dashboard.html","webpack:///./client/app/pages/dashboards/public-dashboard-page.html","webpack:///./client/app/pages/data-sources/list.html","webpack:///./client/app/pages/destinations/list.html","webpack:///./client/app/pages/home/home.html","webpack:///./client/app/pages/queries/add-to-dashboard.html","webpack:///./client/app/pages/query-snippets/edit.html","webpack:///./client/app/pages/query-snippets/list.html","webpack:///./client/app/pages/settings/organization.html","webpack:///./node_modules/moment/locale sync en","webpack:///./client/app/assets/images sync \\.(png|jpe","webpack:///./client/app/assets/images/db-logos/Cassandra.png","webpack:///./client/app/assets/images/db-logos/athena.png","webpack:///./client/app/assets/images/db-logos/aws_es.png","webpack:///./client/app/assets/images/db-logos/axibasetsd.png","webpack:///./client/app/assets/images/db-logos/bigquery.png","webpack:///./client/app/assets/images/db-logos/clickhouse.png","webpack:///./client/app/assets/images/db-logos/cockroach.png","webpack:///./client/app/assets/images/db-logos/csv.png","webpack:///./client/app/assets/images/db-logos/databricks.png","webpack:///./client/app/assets/images/db-logos/db2.png","webpack:///./client/app/assets/images/db-logos/drill.png","webpack:///./client/app/assets/images/db-logos/druid.png","webpack:///./client/app/assets/images/db-logos/dynamodb_sql.png","webpack:///./client/app/assets/images/db-logos/elasticsearch.png","webpack:///./client/app/assets/images/db-logos/google_analytics.png","webpack:///./client/app/assets/images/db-logos/google_spreadsheets.png","webpack:///./client/app/assets/images/db-logos/graphite.png","webpack:///./client/app/assets/images/db-logos/hive.png","webpack:///./client/app/assets/images/db-logos/hive_http.png","webpack:///./client/app/assets/images/db-logos/impala.png","webpack:///./client/app/assets/images/db-logos/influxdb.png","webpack:///./client/app/assets/images/db-logos/jirajql.png","webpack:///./client/app/assets/images/db-logos/kibana.png","webpack:///./client/app/assets/images/db-logos/kylin.png","webpack:///./client/app/assets/images/db-logos/mapd.png","webpack:///./client/app/assets/images/db-logos/memsql.png","webpack:///./client/app/assets/images/db-logos/mongodb.png","webpack:///./client/app/assets/images/db-logos/mssql.png","webpack:///./client/app/assets/images/db-logos/mysql.png","webpack:///./client/app/assets/images/db-logos/oracle.png","webpack:///./client/app/assets/images/db-logos/pg.png","webpack:///./client/app/assets/images/db-logos/presto.png","webpack:///./client/app/assets/images/db-logos/prometheus.png","webpack:///./client/app/assets/images/db-logos/python.png","webpack:///./client/app/assets/images/db-logos/qubole.png","webpack:///./client/app/assets/images/db-logos/rds_mysql.png","webpack:///./client/app/assets/images/db-logos/redshift.png","webpack:///./client/app/assets/images/db-logos/results.png","webpack:///./client/app/assets/images/db-logos/rockset.png","webpack:///./client/app/assets/images/db-logos/salesforce.png","webpack:///./client/app/assets/images/db-logos/scylla.png","webpack:///./client/app/assets/images/db-logos/snowflake.png","webpack:///./client/app/assets/images/db-logos/sqlite.png","webpack:///./client/app/assets/images/db-logos/treasuredata.png","webpack:///./client/app/assets/images/db-logos/uptycs.png","webpack:///./client/app/assets/images/db-logos/url.png","webpack:///./client/app/assets/images/db-logos/vertica.png","webpack:///./client/app/assets/images/db-logos/yandex_appmetrika.png","webpack:///./client/app/assets/images/db-logos/yandex_metrika.png","webpack:///./client/app/assets/images/destinations/chatwork.png","webpack:///./client/app/assets/images/destinations/email.png","webpack:///./client/app/assets/images/destinations/hangouts_chat.png","webpack:///./client/app/assets/images/destinations/hipchat.png","webpack:///./client/app/assets/images/destinations/mattermost.png","webpack:///./client/app/assets/images/destinations/pagerduty.png","webpack:///./client/app/assets/images/destinations/slack.png","webpack:///./client/app/assets/images/destinations/webhook.png","webpack:///./client/app/assets/images/favicon-16x16.png","webpack:///./client/app/assets/images/favicon-32x32.png","webpack:///./client/app/assets/images/favicon-96x96.png","webpack:///./client/app/assets/images/google_logo.svg","webpack:///./client/app/assets/images/illustrations/alert.svg","webpack:///./client/app/assets/images/illustrations/dashboard.svg","webpack:///./client/app/assets/images/illustrations/query.svg","webpack:///./client/app/assets/images/logo.png","webpack:///./client/app/assets/images/logo_white.png","webpack:///[\\\\\\/.]test[\\\\.\\/]).)*\\.jsx?33e3","webpack:///./client/app/components/Footer.jsx","webpack:///./client/app/components/SortIcon.jsx","webpack:///./client/app/components/alerts/alert-subscriptions/index.js","webpack:///./client/app/components/app-header/index.js","webpack:///./client/app/components/app-view/index.js","webpack:///./client/app/components/cancel-query-button/index.js","webpack:///./client/app/components/dashboards/edit-dashboard-dialog.js","webpack:///./client/app/components/dashboards/gridstack/index.js","webpack:///./client/app/components/dashboards/widget.js","webpack:///./client/app/components/dynamic-table/default-cell/index.js","webpack:///./client/app/components/dynamic-table/dynamic-table-row.js","webpack:///./client/app/components/dynamic-table/index.js","webpack:///./client/app/components/dynamic-table/json-cell/index.js","webpack:///./client/app/components/filters.js","webpack:///./client/app/components/overlay.js","webpack:///./client/app/components/parameters.js","webpack:///./client/app/components/permissions-editor/index.js","webpack:///./client/app/components/queries/alert-unsaved-changes.js","webpack:///./client/app/components/queries/api-key-dialog.js","webpack:///./client/app/components/queries/embed-code-dialog.js","webpack:///./client/app/components/queries/query-results-link.js","webpack:///./client/app/components/queries/schema-browser.js","webpack:///./client/app/components/queries/visualization-embed.js","webpack:///./client/app/components/query-link.js","webpack:///./client/app/components/rd-tab/index.js","webpack:///./client/app/components/rd-timer.js","webpack:///./client/app/components/settings-screen.js","webpack:///./client/app/components/tab-nav/index.js","webpack:///./client/app/components/type-picker.js","webpack:///[\\\\\\/.]test[\\\\.\\/]).)*\\.jsx?d577","webpack:///[\\\\\\/.]test[\\\\.\\/]).)*\\.js$","webpack:///./client/app/services/alert-dialog.js","webpack:///./client/app/services/alert-subscription.js","webpack:///./client/app/services/destination.js","webpack:///./client/app/services/events.js","webpack:///./client/app/services/offline-listener.js","webpack:///[\\\\\\/.]test[\\\\.\\/]).)*\\.jsx?d376","webpack:///./client/app/visualizations/chart/index.js","webpack:///./client/app/visualizations/chart/plotly/index.js","webpack:///./client/app/visualizations/choropleth/index.js","webpack:///./client/app/visualizations/cohort/index.js","webpack:///./client/app/visualizations/counter/index.js","webpack:///./client/app/visualizations/edit-visualization-dialog.js","webpack:///./client/app/visualizations/funnel/index.js","webpack:///./client/app/visualizations/index.js","webpack:///./client/app/visualizations/map/index.js","webpack:///./client/app/visualizations/pivot/index.js","webpack:///./client/app/visualizations/table/index.js","webpack:///./client/app/visualizations/word-cloud/index.js","webpack:///[\\\\\\/.]test[\\\\.\\/]).)*\\.jsx","webpack:///./client/app/pages/admin/outdated-queries/index.js","webpack:///./client/app/pages/admin/status/index.js","webpack:///./client/app/pages/admin/tasks/index.js","webpack:///./client/app/pages/alert/index.js","webpack:///./client/app/pages/alerts/AlertsList.jsx","webpack:///./client/app/pages/dashboards/DashboardList.jsx","webpack:///./client/app/pages/dashboards/dashboard.js","webpack:///./client/app/pages/dashboards/public-dashboard-page.js","webpack:///./client/app/pages/data-sources/list.js","webpack:///./client/app/pages/destinations/list.js","webpack:///./client/app/pages/destinations/show.js","webpack:///./client/app/pages/groups/GroupDataSources.jsx","webpack:///./client/app/pages/groups/GroupMembers.jsx","webpack:///./client/app/pages/groups/GroupsList.jsx","webpack:///./client/app/pages/home/index.js","webpack:///./client/app/pages/queries-list/QueriesList.jsx","webpack:///./client/app/pages/queries/add-to-dashboard.js","webpack:///./client/app/pages/queries/source-view.js","webpack:///./client/app/pages/queries/view.js","webpack:///./client/app/pages/query-snippets/edit.js","webpack:///./client/app/pages/query-snippets/list.js","webpack:///./client/app/pages/settings/organization.js","webpack:///./client/app/pages/users/UserProfile.jsx","webpack:///./client/app/pages/users/UsersList.jsx","webpack:///./client/app/pages/users/index.js","webpack:///./client/app/lib/sortable.js","webpack:///./client/app/directives/autofocus.js","webpack:///./client/app/directives/compare-to.js","webpack:///./client/app/directives/utils.js","webpack:///./client/app/directives/title.js","webpack:///./client/app/directives/resize-event.js","webpack:///./client/app/directives/resizable-toggle.js","webpack:///./client/app/directives/index.js","webpack:///./client/app/filters/markdown.js","webpack:///./client/app/config/dashboard-grid-options.js","webpack:///./client/app/config/index.js","webpack:///./client/app/index.js","webpack:///./client/app/lib/localOptions.js","webpack:///./client/app/components/QueryEditor.jsx","webpack:///./client/app/lib/visualizations/d3box.js","webpack:///./client/app/visualizations/box-plot/index.js","webpack:///./client/app/lib/visualizations/sunburst.js","webpack:///./client/app/visualizations/sunburst/index.js","webpack:///./client/app/lib/visualizations/d3sankey.js","webpack:///./client/app/visualizations/sankey/index.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","0","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","__webpack_exports__","$http","$sanitize","$location","$route","$routeParams","$q","$rootScope","$uibModal","toastr","init","ngModule","run","$injector","Auth","currentUser","canEdit","userId","user_id","user","id","this","hasPermission","permission","includes","permissions","isAdmin","clientConfig","logger","debug","session","loaded","updateSession","sessionData","extend","client_config","AuthService","$window","isAuthenticated","login","next","encodeURI","url","location","href","concat","logout","loadSession","resolve","setApiKey","then","response","loadConfig","apiKey","getApiKey","requireSession","_this","when","catch","apiKeyHttpInterceptor","request","config","headers","Authorization","factory","$httpProvider","interceptors","sortable","arguments","sorter","Columns","favorites","overrides","width","render","text","item","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","_components_FavoritesControl__WEBPACK_IMPORTED_MODULE_9__","avatar","formatTitle","isFunction","identity","src","profile_image_url","className","alt","title","dateTime","formatDateTime","duration","durationHumanize","timeAgo","_components_TimeAgo__WEBPACK_IMPORTED_MODULE_10__","date","custom","ItemsTable","React","Component","_this$props","props","orderByField","orderByReverse","toggleSorting","orderByDirection","map","filter","columns","column","isAvailable","field","index","onHeaderCell","onClick","row","omit","dataIndex","JSON","stringify","defaultSortOrder","prepareColumns","rows","items","onTableRow","onRowClick","event","showHeader","antd_lib_table__WEBPACK_IMPORTED_MODULE_8___default","classNames","ant-table-headerless","dataSource","rowKey","pagination","onRow","PropTypes","arrayOf","shape","string","func","bool","DialogPropType","visible","onOk","onCancel","afterClose","isRequired","close","dismiss","DialogWrapper","Promise","wrap","openDialog","DialogComponent","dialog","dialogResult","reject","container","document","ReactDOM","react__WEBPACK_IMPORTED_MODULE_6___default","_extends","closeDialog","dismissDialog","reason","body","appendChild","setTimeout","unmountComponentAtNode","removeChild","update","newProps","_objectSpread","suppressUnhandledRejections","showModal","DataSource","Table","Schema","RefreshScheduleType","RefreshScheduleDefault","Field","Action","AntdForm","UserProfile","Moment","prop_types__WEBPACK_IMPORTED_MODULE_0__","prop_types__WEBPACK_IMPORTED_MODULE_0___default","lodash__WEBPACK_IMPORTED_MODULE_1__","moment__WEBPACK_IMPORTED_MODULE_2__","moment__WEBPACK_IMPORTED_MODULE_2___default","syntax","options","doc","doc_url","type_name","interval","number","time","day_of_week","until","type","oneOf","initialValue","oneOfType","required","readOnly","minLength","placeholder","callback","pullRight","disabledWhenDirty","validateFieldsAndScroll","email","profileImageUrl","isDisabled","checkMoment","propName","componentName","isRequiredValid","isOptionalValid","moment","isMoment","Error","IntervalEnum","NEVER","SECONDS","MINUTES","HOURS","DAYS","WEEKS","localizeTime","_time$split2","_slicedToArray","split","hrs","mins","utc","hour","minute","local","format","secondsToInterval","count","intervalToSeconds","intervalInSeconds","pluralize","undefined","ret","_secondsToInterval","rounded","Math","round","omitSingleValueNumber","toHuman","replace","toUpperCase","colWidth","widgetWidth","capitalize","_capitalize","remove","notEquals","Array","other","indexOf","filtered","notEmpty","collection","isEmpty","showError","$touched","$invalid","units","prettySize","bytes","isNaN","parseFloat","isFinite","unit","toFixed","join","arr","User","disableResource","enableUser","userName","delete","success","allowHtml","is_disabled","message","statusText","isString","error","disableUser","post","warning","deleteUser","convertUserInfo","api_key","isInvitationPending","is_invitation_pending","regenerateApiKey","_ref","sendPasswordReset","_ref2","mailSettingsMissing","reset_link","resendInvitation","_ref3","invite_link","UserService","$resource","UserResource","method","save","query","isArray","disable","enable","Mustache","escape","Query","DATETIME_FORMATS","date-range","datetime-local","datetime-range","datetime-with-seconds","datetime-range-with-seconds","normalizeNumericValue","defaultValue","isDateRangeParameter","paramType","Parameter","parameter","_classCallCheck","useCurrentDateTime","global","enumOptions","queryId","locals","setValue","configurable","writable","_createClass","constructor","getValue","$$value","isObject","start","end","isValid","each","prefix","urlPrefix","_defineProperty","keyStart","keyEnd","has","isNull","normalizedValue","set","param","isUndefined","Parameters","queryString","updateParameters","initFromQueryString","parameters","parts","parse","uniq","collectParams","forEach","part","union","e","_this2","cachedQueryText","parameterNames","parseQuery","parametersMap","fromUrlParams","parameterDef","params","zipObject","QueryResultErrorFactory","QueryResultError","errorMessage","updatedAt","QueryResource","QueryResult","QueryService","recent","archive","myQueries","fork","resultById","dropdownOptions","favorite","transformRequest","unfavorite","newQuery","schedule","formatted","err","String","getSourceLink","isNew","hasDailySchedule","match","scheduleInLocalTime","hasResult","latest_query_data","latest_query_data_id","paramsRequired","getParameters","prepareQueryResultExecution","execute","maxAge","missingParams","getMissing","paramsWord","valuesWord","job","status","queryResult","query_result","getById","data_source_id","getQueryResult","_this3","getByQueryId","getValues","getQueryResultByText","selectedQueryText","_this4","queryText","getUrl","source","hash","getParametersDefs","toUrlParams","encodeURIComponent","getQueryResultPromise","toPromise","$parameters","search","ControllerType","isLoaded","searchTerm","updateSearch","selectedTags","array","updateSelectedTags","page","itemsPerPage","totalItemsCount","pageSizeOptions","pageItems","updatePagination","handleError","WrappedComponent","itemsSource","stateStorage","ItemsListWrapper","_React$Component","_possibleConstructorReturn","_getPrototypeOf","StateStorage","setState","getState","validate","getCallbackContext","state","onBeforeUpdate","onAfterUpdate","onError","initialState","debounce","_inherits","totalCount","rest","_objectWithoutProperties","current","children","controller","react__WEBPACK_IMPORTED_MODULE_7___default","propTypes","node","defaultProps","hoistNonReactStatics","SearchInput","showIcon","onChange","InputControl","Input","Search","react__WEBPACK_IMPORTED_MODULE_2___default","target","autoFocus","Menu","selected","active","icon","aria-hidden","MenuIcon","ProfileImage","_ref4","Tags","_ref5","_components_TagsList__WEBPACK_IMPORTED_MODULE_7__","tagsUrl","onUpdate","PageSizeSelect","_ref6","antd_lib_select__WEBPACK_IMPORTED_MODULE_6___default","option","Option","Sidebar","react__WEBPACK_IMPORTED_MODULE_4___default","Content","Layout","Group","GroupService","cache","members","addMember","removeMember","dataSources","addDataSource","removeDataSource","updateDataSource","LoadingState","react__WEBPACK_IMPORTED_MODULE_1___default","_components_BigMessage__WEBPACK_IMPORTED_MODULE_2__","BigMessage","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","prop_types__WEBPACK_IMPORTED_MODULE_1__","prop_types__WEBPACK_IMPORTED_MODULE_1___default","react2angular__WEBPACK_IMPORTED_MODULE_2__","component","react2angular","_state","defaults","pageSize","tags","UrlStateStorage","_StateStorage","defaultState","_get","q","defaultOrderBy","compileOrderBy","_parseOrderBy","parseOrderBy","order","reverse","parseInt","page_size","SettingsMenuItem","menuItem","pathPrefix","path","isActive","startsWith","SettingsMenu","sortBy","numeral","scalePercentBy100","urlPattern","createFormatter","displayAs","_","createNumberFormatter","numberFormat","values","createBooleanFormatter","booleanValues","dateTimeFormat","allowHTML","highlightLinks","formatSimpleTemplate","str","prop","Select","MappingType","DashboardAddNew","DashboardMapToExisting","WidgetLevel","StaticValue","parameterMappingsToEditableMappings","mappings","existingParameterNames","mapping","alreadyExists","mapTo","find","ParameterMappingType","DashboardLevel","clone","editableMappingsToParameterMappings","fromPairs","synchronizeWidgetTitles","sourceMappings","widgets","affectedWidgets","sourceMapping","widget","widgetMappings","parameterMappings","widgetMapping","ParameterMappingInput","_getPrototypeOf2","_len","args","_key","_assertThisInitialized","labelCol","span","wrapperCol","existingParamNames","updateParamMapping","noExisting","react__WEBPACK_IMPORTED_MODULE_10___default","antd_lib_radio__WEBPACK_IMPORTED_MODULE_20___default","updateSourceType","disabled","antd_lib_tooltip__WEBPACK_IMPORTED_MODULE_22___default","antd_lib_icon__WEBPACK_IMPORTED_MODULE_17___default","theme","antd_lib_input__WEBPACK_IMPORTED_MODULE_19___default","_this$props2","antd_lib_select__WEBPACK_IMPORTED_MODULE_13___default","dropdownMatchSelectWidth","_this5","_components_ParameterValueInput__WEBPACK_IMPORTED_MODULE_23__","onSelect","renderDashboardAddNew","renderDashboardMapToExisting","renderStaticValue","inputError","_this$renderInputBloc2","renderInputBlock","label","help","input","antd_lib_form__WEBPACK_IMPORTED_MODULE_21___default","layout","Item","formItemProps","renderMappingTypeSelector","style","height","visibility","validateStatus","any","MappingEditor","_this6","show","hide","_this$state","_components_HelpTrigger__WEBPACK_IMPORTED_MODULE_27__","antd_lib_button__WEBPACK_IMPORTED_MODULE_16___default","antd_lib_popover__WEBPACK_IMPORTED_MODULE_15___default","placement","trigger","content","renderContent","onVisibleChange","size","TitleEditor","showPopup","_this7","getMappingTitle","newMapping","existingParams","paramTitle","onEditingTitleChange","onPressEnter","maxLength","renderPopover","onPopupVisibleChange","renderEditButton","ParameterMappingListInput","_React$Component4","oldMapping","_toConsumableArray","findIndex","_this8","antd_lib_table__WEBPACK_IMPORTED_MODULE_14___default","record","idx","Column","getDefaultValue","existingParamsNames","react__WEBPACK_IMPORTED_MODULE_10__","getSourceTypeLabel","_this9","_typeof","v","getStringValue","toString","mappedTo","antd_lib_tag__WEBPACK_IMPORTED_MODULE_18___default","Paginator","antd_lib_pagination__WEBPACK_IMPORTED_MODULE_3__","antd_lib_pagination__WEBPACK_IMPORTED_MODULE_3___default","defaultCurrent","defaultPageSize","total","template","bindings","paginator","$scope","onPageChanged","setPage","$applyAsync","ItemsSource","getRequest","doRequest","processResults","_ref2$isPlainList","isPlainList","_this2$_paginator","_paginator","prevPage","prevItemsPerPage","setItemsPerPage","_changed","_sorter","toggleField","_savedOrderByField","sorting","_searchTerm","setField","_selectedTags","PromiseRejectionError","_fetcher","PlainListFetcher","PaginatedListFetcher","_pageItems","changes","context","_beforeUpdate","fetch","results","allResults","_allItems","setTotalCount","_afterUpdate","allItems","Sorter","ResourceItemsSource","_ItemsSource","getResource","getItemProcessor","resource","$promise","processItem","routesToAngularRoutes","routes","currentPage","policy","setPolicy","DefaultPolicy","newPolicy","BaseColors","Blue","Red","Green","Purple","Cyan","Orange","Light Blue","Lilac","Light Green","Brown","Black","Gray","Pink","Dark Blue","ColorPalette","Indian Red","Green 2","Green 3","DarkTurquoise","Dark Violet","Pink 2","ColorPaletteArray","cleanNumber","plotlyCleanNumber","defaultFormatSeriesText","defaultFormatSeriesTextForPie","getFontColor","bgcolor","g","b","matches","exec","normalizeValue","axisType","naturalSort","$a","$b","calculateAxisRange","seriesList","minValue","maxValue","isNumber","min","series","y","max","getScaleType","scale","getTitle","axis","calculateDimensions","cellsInRow","ceil","cellWidth","cellHeight","xPadding","yPadding","hasX","columnMapping","hasY2","serie","seriesOptions","globalSeriesType","yAxis","stacking","prepareChartData","sortX","formatNumber","formatPercent","percentFormat","formatText","textFormat","hoverinfo","test","getHoverInfoPattern","seriesColor","seriesIndex","color","getSeriesColor","x","xAxis","cleanYValue","sourceData","Map","xValues","yValues","yErrorValues","yError","yPercent","raw","$raw","@@x","plotlySeries","error_y","marker","insidetextfont","yaxis","showDataLabels","textposition","fill","setType","boxpoints","showpoints","jitter","pointpos","prepareData","_calculateDimensions","getPieHoverInfoPattern","getDefaultColor","d3","ordinal","domain","range","valuesColors","valuesOptions","xPosition","yPosition","floor","seriesTotal","reduce","abs","labels","hole","colors","textinfo","textfont","preparePieData","flatten","colorScheme","heatMinColor","heatMaxColor","z","colorscale","sort","sortY","reverseX","reverseY","zMax","dataLabels","showlegend","datum","zValue","zVal","prepareHeatmapData","prepareLayout","element","_calculateDimensions2","margin","pad","offsetWidth","offsetHeight","autosize","legend","enabled","hasName","annotations","xanchor","yanchor","showarrow","boxmode","boxgroupgap","xaxis","automargin","categoryorder","showticklabels","rangeMin","rangeMax","yaxis2","overlaying","side","barmode","updateSeriesText","hover","@@name","percentValues","updateUnifiedXAxisValues","sorted","defaultY","unifiedX","Set","add","getUnifiedXAxisValues","updateData","sumOfCorrespondingPoints","sum","sign","updatePercentValues","prevSeries","updateLayout","plotlyElement","updatePlot","transformName","orientation","querySelector","parentNode","tagName","toLowerCase","overflow","fixLegendContainer","pick","bounds","querySelectorAll","getBoundingClientRect","top","bottom","Widget","WidgetFactory","Visualization","dashboardGridOptions","WidgetService","k","visualizationOptions","autoHeight","sizeX","sizeY","defaultSizeY","minSizeX","maxSizeX","minSizeY","maxSizeY","visualization","visualizations","defaultOptions","minColumns","maxColumns","rowHeight","minRows","maxRows","defaultWidth","defaultColumns","defaultHeight","defaultRows","calculatePositionOptions","position","$originalPosition","truncate","force","loading","refreshStartedAt","getQuery","getParameterMappings","queryParams","localTypes","removedParams","difference","keys","PreviewCard","imageUrl","UserPreviewCard","withLink","DataSourcePreviewCard","AdditionalColors","darkenColor","prepareFeatureProperties","getValueForFeature","getColorByValue","createScale","inferCountryCodeType","chroma_js__WEBPACK_IMPORTED_MODULE_0__","chroma_js__WEBPACK_IMPORTED_MODULE_0___default","lodash__WEBPACK_IMPORTED_MODULE_1___default","_lib_value_format__WEBPACK_IMPORTED_MODULE_2__","White","Light Gray","chroma","darken","hex","formatter","countryCodeField","valueField","code","feature","valueFormatted","countryCodeType","properties","limits","defaultColor","features","steps","limit","first","clusteringMode","regex","iso_a2","iso_a3","iso_n3","chain","memo","toPairs","TagsControl","getAvailableTags","EditTagsDialog","onEdit","trim","react__WEBPACK_IMPORTED_MODULE_8___default","role","editTags","Fragment","tag","modelTagsControl","archivedTooltip","ModelTagsControl","isDraft","isArchived","antd_lib_tooltip__WEBPACK_IMPORTED_MODULE_11___default","QueryTagsControl","DashboardTagsControl","rejection","recordEvent","lodash__WEBPACK_IMPORTED_MODULE_0__","_services_ng__WEBPACK_IMPORTED_MODULE_1__","events","eventsToSend","action","objectType","objectId","additionalProperties","object_type","object_id","timestamp","Date","now","screen_resolution","screen","navigateTo","OrganizationStatus","objectCounters","object_counters","InputWithCopy","ref","select","execCommand","copied","resetCopyState","createRef","copyFeatureSupported","queryCommandSupported","clearTimeout","copyButton","antd_lib_tooltip__WEBPACK_IMPORTED_MODULE_7___default","antd_lib_icon__WEBPACK_IMPORTED_MODULE_6___default","cursor","copy","antd_lib_input__WEBPACK_IMPORTED_MODULE_5___default","addonAfter","PageHeader","getTags","_services_ng__WEBPACK_IMPORTED_MODULE_0__","EmptyState","react__WEBPACK_IMPORTED_MODULE_1__","prop_types__WEBPACK_IMPORTED_MODULE_2__","prop_types__WEBPACK_IMPORTED_MODULE_2___default","react2angular__WEBPACK_IMPORTED_MODULE_3__","classnames__WEBPACK_IMPORTED_MODULE_4__","classnames__WEBPACK_IMPORTED_MODULE_4___default","_services_ng__WEBPACK_IMPORTED_MODULE_5__","_services_auth__WEBPACK_IMPORTED_MODULE_6__","_services_organizationStatus__WEBPACK_IMPORTED_MODULE_7__","createDashboard","open","dashboard","Step","completed","urlText","done","description","illustration","helpLink","onboardingMode","alert","showAlertStep","showDashboardStep","inviteUsers","showInviteStep","isCompleted","organizationStatus","data_sources","queries","alerts","dashboards","users","some","step","rel","ORDER_BY_REVERSE","compile","compiled","substring","setReverse","_parse","ListItemAddon","antd_lib_tooltip__WEBPACK_IMPORTED_MODULE_2__","antd_lib_tooltip__WEBPACK_IMPORTED_MODULE_2___default","isSelected","isStaged","alreadyInGroup","SCHEMA_NOT_SUPPORTED","SCHEMA_LOAD_ERROR","DataSourceService","DataSourceResource","getSchema","refresh","_schema","dataSourceId","fetchSchema","getFields","configurationSchema","endsWith","normalizeSchema","default","setDefaultValueForCheckboxes","targetOptions","inputs","orderedInputs","updateTargetWithValues","getBase64","file","reader","FileReader","readAsDataURL","onload","substr","onerror","Dashboard","prepareWidgetsForDashboard","defaultWidgetSizeY","w","groupBy","widgetsAtRow","col","DashboardService","prepareDashboardWidgets","transformSingle","publicAccessEnabled","public_url","transform","transformResponse","slug","can_edit","calculateNewWidgetPosition","defaultSizeX","bottomLine","left","right","from","to","constant","globalParams","componentsRegistry","activeInstances","registerComponent","dynamicComponent","forceUpdate","unregisterComponent","DynamicComponent","RealComponent","react__WEBPACK_IMPORTED_MODULE_11___default","getDefaultTitle","words","isTypeDateRange","NameInput","existingNames","setValidation","helpText","display","antd_lib_form__WEBPACK_IMPORTED_MODULE_11___default","antd_lib_input__WEBPACK_IMPORTED_MODULE_15___default","EditParameterSettingsDialog","_useState2","useState","setParam","_useState4","isNameValid","setIsNameValid","_useState6","initialQuery","setInitialQuery","useEffect","antd_lib_modal__WEBPACK_IMPORTED_MODULE_10___default","footer","antd_lib_button__WEBPACK_IMPORTED_MODULE_13___default","htmlType","form","onSubmit","preventDefault","antd_lib_select__WEBPACK_IMPORTED_MODULE_14___default","antd_lib_divider__WEBPACK_IMPORTED_MODULE_16___default","colon","antd_lib_checkbox__WEBPACK_IMPORTED_MODULE_12___default","defaultChecked","checked","TextArea","_components_QuerySelector__WEBPACK_IMPORTED_MODULE_18__","selectedQuery","wrapDialog","SEARCH_DEBOUNCE_DURATION","StaleSearchError","QuerySelector","setSearchTerm","searching","setSearching","searchResults","setSearchResults","_useState8","setSelectedQuery","isStaleSearch","debouncedSearch","term","filteredResults","is_draft","rejectStale","clearIcon","react__WEBPACK_IMPORTED_MODULE_9___default","selectQuery","spinIcon","cx","hidden","cancel","antd_lib_input__WEBPACK_IMPORTED_MODULE_14___default","suffixIcon","antd_lib_select__WEBPACK_IMPORTED_MODULE_15___default","showSearch","onSearch","notFoundContent","filterOption","defaultActiveFirstOption","_components_tags_control_TagsControl__WEBPACK_IMPORTED_MODULE_18__","suffix","maxHeight","marginTop","inactive","DOMAIN","HELP_PATH","IFRAME_TIMEOUT","TYPES","HOME","VALUE_SOURCE_OPTIONS","SHARE_DASHBOARD","HelpTrigger","iframeLoadingTimeout","iframeRef","pagePath","loadIframe","tooltip","antd_lib_tooltip__WEBPACK_IMPORTED_MODULE_10___default","openDrawer","antd_lib_drawer__WEBPACK_IMPORTED_MODULE_11___default","onClose","closeDrawer","destroyOnClose","ready","onLoad","onIframeLoaded","_components_BigMessage__WEBPACK_IMPORTED_MODULE_12__","_components_DynamicComponent__WEBPACK_IMPORTED_MODULE_13__","onLeave","openPageUrl","NoTaggedObjectsFound","_components_BigMessage__WEBPACK_IMPORTED_MODULE_8__","_components_tags_control_TagsControl__WEBPACK_IMPORTED_MODULE_9__","objectOf","SelectItemsDialog","saveInProgress","searchItems","loadItems","itemKey","selectedItems","isStagedList","renderItem","renderStagedItem","_render","antd_lib_list__WEBPACK_IMPORTED_MODULE_16___default","clickable","toggleItem","dialogTitle","inputPlaceholder","selectedItemsTitle","hasResults","antd_lib_modal__WEBPACK_IMPORTED_MODULE_14___default","okText","okButtonProps","minHeight","_components_items_list_components_LoadingState__WEBPACK_IMPORTED_MODULE_19__","_components_BigMessage__WEBPACK_IMPORTED_MODULE_18__","fieldRules","rule","DynamicForm","Form","_temp","_class","actionName","inProgress","prevState","inProgressActions","isSubmitting","msg","_this$props$form","setFieldsValue","getFieldsValue","dataset","setActionInProgress","actionCallbacks","fieldName","fileList","helper","actions","acc","cur","_this$props$form2","getFieldDecorator","getFieldValue","fileOptions","rules","getValueFromEvent","base64File","upload","antd_lib_upload__WEBPACK_IMPORTED_MODULE_15___default","beforeUpload","antd_lib_button__WEBPACK_IMPORTED_MODULE_14___default","antd_lib_icon__WEBPACK_IMPORTED_MODULE_16___default","fieldLabel","valuePropName","antd_lib_checkbox__WEBPACK_IMPORTED_MODULE_13___default","renderUpload","antd_lib_input_number__WEBPACK_IMPORTED_MODULE_12___default","antd_lib_input__WEBPACK_IMPORTED_MODULE_11___default","fields","firstField","FormItem","feedbackIcons","hasFeedback","fieldProps","data-test","renderField","isFieldsTouched","actionProps","disableWhenDirty","handleAction","data-action","submitProps","hideSubmitButton","saveText","saveButton","antd_lib_form__WEBPACK_IMPORTED_MODULE_10___default","handleSubmit","renderFields","renderActions","updatedProps","configuration_schema","onSuccess","$save","DeleteGroupButton","group","button","antd_lib_button__WEBPACK_IMPORTED_MODULE_7___default","onGroupDeleted","Modal","confirm","okType","cancelText","$delete","deleteGroup","antd_lib_tooltip__WEBPACK_IMPORTED_MODULE_9___default","mouseLeaveDelay","DetailsPageSidebar","antd_lib_button__WEBPACK_IMPORTED_MODULE_2__","antd_lib_button__WEBPACK_IMPORTED_MODULE_2___default","antd_lib_divider__WEBPACK_IMPORTED_MODULE_3__","antd_lib_divider__WEBPACK_IMPORTED_MODULE_3___default","_components_items_list_components_Sidebar__WEBPACK_IMPORTED_MODULE_4__","_components_items_list_ItemsList__WEBPACK_IMPORTED_MODULE_5__","_DeleteGroupButton__WEBPACK_IMPORTED_MODULE_6__","_services_auth__WEBPACK_IMPORTED_MODULE_7__","canAddMembers","onAddMembersClick","canAddDataSources","onAddDataSourcesClick","canRemove","dashed","GroupName","_components_EditInPlace__WEBPACK_IMPORTED_MODULE_6__","isEditable","ignoreBlanks","editor","onDone","updateGroupName","absoluteUrl","urlObj","URL","protocol","host","processTags","defaultColumn","@","renderDefault","formatFunction","renderImage","imageUrlTemplate","imageWidth","imageHeight","imageTitleTemplate","renderLink","linkUrlTemplate","linkTitleTemplate","linkTextTemplate","linkOpenInNewTab","Alert","AlertService","newData","query_id","destination_id","destinations","Notification","NotificationsService","requestPermission","pageVisible","notification","onclick","focus","deleteConfirm","class","logAndToastrError","deleteObject","httpResponse","toastrSuccessAndPath","deletePath","DataSourceCtrl","AlertDialog","types","canChangeType","helpLinks","athena","bigquery","mongodb","google_spreadsheets","google_analytics","axibasetsd","$watch","resetType","deleteMessage","ok","timeOut","/data_sources/new","/data_sources/:dataSourceId","moment__WEBPACK_IMPORTED_MODULE_0__","moment__WEBPACK_IMPORTED_MODULE_0___default","_services_auth__WEBPACK_IMPORTED_MODULE_1__","parsed","DateTimeInput","withSeconds","dateFormat","additionalAttributes","antd_lib_date_picker__WEBPACK_IMPORTED_MODULE_4___default","showTime","RangePicker","DatePicker","DateTimeRangeInput","ItemsFetcher","_originalGetRequest","_originalDoRequest","_originalProcessResults","_getRequest","_processResults","_ItemsFetcher","getItemsForPage","isNil","_ItemsFetcher2","_ref$page","_ref$itemsPerPage","_ref$totalCount","updateRows","last","paginator_Paginator","AutocompleteToggle","antd_lib_tooltip__WEBPACK_IMPORTED_MODULE_1__","antd_lib_tooltip__WEBPACK_IMPORTED_MODULE_1___default","_services_recordEvent__WEBPACK_IMPORTED_MODULE_4__","onToggle","tooltipMessage","newState","DateInput","DateRangeInput","EditInPlace","editing","newValue","inputRef","keyCode","shiftKey","stopEditing","react__WEBPACK_IMPORTED_MODULE_3___default","onFocus","startEditing","onBlur","onKeyDown","keyDown","self","componentDidUpdate","prevProps","renderEdit","renderNormal","availableTags","antd_lib_modal__WEBPACK_IMPORTED_MODULE_8___default","antd_lib_select__WEBPACK_IMPORTED_MODULE_7___default","EmailSettingsWarning","_services_auth__WEBPACK_IMPORTED_MODULE_3__","featureName","FavoritesControl","is_favorite","$unfavorite","$favorite","savedIsFavorite","$broadcast","forceUpdateTag","$on","ParameterValueInput","_DateTimeInput__WEBPACK_IMPORTED_MODULE_12__","_this$props3","_DateInput__WEBPACK_IMPORTED_MODULE_10__","_this$props4","_DateTimeRangeInput__WEBPACK_IMPORTED_MODULE_13__","_this$props5","_this$props6","_DateRangeInput__WEBPACK_IMPORTED_MODULE_11__","_this$props7","enumOptionsArray","dropdownClassName","_this$props8","_QueryBasedParameterInput__WEBPACK_IMPORTED_MODULE_14__","_this$props9","antd_lib_input_number__WEBPACK_IMPORTED_MODULE_9___default","_this$props10","antd_lib_input__WEBPACK_IMPORTED_MODULE_8___default","renderDateTimeWithSecondsInput","renderDateTimeInput","renderDateInput","renderDateTimeRangeWithSecondsInput","renderDateTimeRangeInput","renderDateRangeInput","renderEnumInput","renderQueryBasedInput","renderNumberInput","renderTextInput","QueryBasedParameterInput","_loadOptions","nextProps","antd_lib_select__WEBPACK_IMPORTED_MODULE_8___default","QuerySnippet","QuerySnippetService","getSnippet","snippet","tabTrigger","KeyboardShortcuts","handlers","onShortcut","shortcut","retunValue","fn","KeyboardShortcutsService","modKey","navigator","platform","keymap","without","Mousetrap","bindGlobal","unbind","service","buildKeywordsFromSchema","schema","tableKeywords","columnKeywords","tableColumnKeywords","table","score","meta","keywords","caption","buildTableColumnKeywords","tableColumn","TagsList","allTags","clear","toggleTag","autoUpdateList","updateComponents","TimeAgo","_React$PureComponent","PureComponent","fromNow","autoUpdate","getDerivedStateFromProps","directive","link","attr","modelName","amTimeAgo","$element","instanceOf","QueuesTable","queues","antd_lib_table__WEBPACK_IMPORTED_MODULE_7___default","CounterCard","antd_lib_spin__WEBPACK_IMPORTED_MODULE_11___default","spinning","antd_lib_card__WEBPACK_IMPORTED_MODULE_10___default","AdminCeleryStatus","counters","otherTasks","_parseTasks","tasks","reserved","waiting","task","queue","enqueue_time","start_time","task_name","parseTasks","commonColumns","antd_lib_badge__WEBPACK_IMPORTED_MODULE_12___default","queryColumns","otherTasksColumns","antd_lib_alert__WEBPACK_IMPORTED_MODULE_14___default","antd_lib_row__WEBPACK_IMPORTED_MODULE_9___default","gutter","antd_lib_col__WEBPACK_IMPORTED_MODULE_8___default","antd_lib_tabs__WEBPACK_IMPORTED_MODULE_13___default","defaultActiveKey","TabPane","tab","ErrorHandler","logToConsole","reset","console","AddTextboxDialog","preview","markdown","toHTML","updatePreview","onConfirm","finally","antd_lib_modal__WEBPACK_IMPORTED_MODULE_9___default","saveWidget","antd_lib_input__WEBPACK_IMPORTED_MODULE_10___default","onTextChanged","antd_lib_divider__WEBPACK_IMPORTED_MODULE_12___default","dangerouslySetInnerHTML","__html","OptGroup","AddWidgetDialog","selectedVis","visualizationId","visualizationGroups","vis","htmlFor","antd_lib_select__WEBPACK_IMPORTED_MODULE_9___default","selectVisualization","_components_QuerySelector__WEBPACK_IMPORTED_MODULE_13__","renderVisualizationInput","_components_ParameterMappingInput__WEBPACK_IMPORTED_MODULE_12__","updateParamMappings","getParamValuesSnapshot","dashboardParameters","EditParameterMappingsDialog","originalParamValuesSnapshot","newMappings","valuesChanged","isMatch","widgetsToSave","all","react__WEBPACK_IMPORTED_MODULE_13___default","antd_lib_modal__WEBPACK_IMPORTED_MODULE_15___default","_components_ParameterMappingInput__WEBPACK_IMPORTED_MODULE_17__","dashboardRefreshIntervals","queryRefreshIntervals","initToggle","toggle","toggleBlockFn","$","addClass","appendTo","empty","on","toggleClass","renderComma","renderString","comma","renderBrace","isForArray","isOpening","brace","renderWithNested","valuesIsArray","ellipsis","html","parents","eq","renderEllipsis","block","renderKeys","removeClass","firstItem","lastItem","val","nestedBlock","renderValue","createRenderNestedBlock","functions","_len2","_key2","combine","comment","renderComment","isPrimitive","renderPrimitive","renderArray","renderObject","renderJsonView","CreateGroupDialog","antd_lib_modal__WEBPACK_IMPORTED_MODULE_6___default","antd_lib_input__WEBPACK_IMPORTED_MODULE_7___default","_ref$validate","totalPages","WEEKDAYS_SHORT","weekdaysShort","WEEKDAYS_FULL","weekdays","DATE_FORMAT","HOUR_FORMAT","TimeEditor","setTime","showUtc","isUTC","antd_lib_time_picker__WEBPACK_IMPORTED_MODULE_12___default","allowClear","minuteStep","newTime","data-testid","ScheduleDialog","newSchedule","newSeconds","newInterval","dayOfWeek","seconds","setScheduleUntil","day","isEqual","setInterval","intervals","int","cnt","secs","antd_lib_radio__WEBPACK_IMPORTED_MODULE_14___default","setWeekday","Button","setUntilToggle","antd_lib_date_picker__WEBPACK_IMPORTED_MODULE_11___default","refreshOptions","_secondsToInterval3","SchedulePhrase","_this$content","short","full","isLink","humanized","_this$props$schedule","ChangePasswordDialog","newPassword","currentPassword","repeatPassword","errors","fieldError","_this$state2","updatingPassword","validateFields","touched","userData","old_password","password","_e$target","_this$state3","inputProps","handleChange","updatePassword","antd_lib_form__WEBPACK_IMPORTED_MODULE_9___default","Password","CreateUserDialog","savingUser","onCreate","formFields","createUser","_components_dynamic_form_DynamicForm__WEBPACK_IMPORTED_MODULE_11__","antd_lib_alert__WEBPACK_IMPORTED_MODULE_10___default","UserEdit","sendingPasswordEmail","passwordLink","resendingInvitation","regeneratingApiKey","maskClosable","autoFocusButton","toggleUser","togglingUser","successCallback","errorCallback","_dynamic_form_DynamicForm__WEBPACK_IMPORTED_MODULE_17__","saveUser","_InputWithCopy__WEBPACK_IMPORTED_MODULE_19__","antd_lib_button__WEBPACK_IMPORTED_MODULE_10___default","antd_lib_alert__WEBPACK_IMPORTED_MODULE_9___default","react__WEBPACK_IMPORTED_MODULE_8__","closable","_this$state4","renderBasicInfoForm","renderApiKey","changePassword","renderResendInvitation","renderSendPasswordReset","renderPasswordLinkAlert","rendertoggleUser","UserShow","_ref$user","filterTypes","ALL_VALUES","NONE_VALUES","getColumnNameWithoutType","typeSplit","getColumnCleanName","getColumnFriendlyName","addPointToSeries","point","seriesCollection","seriesName","QueryResultService","$timeout","QueryResultResource","Job","statuses","1","2","3","4","handleErrorResponse","deferred","defer","filters","filterFreeze","isLoadingResult","max_age","refreshStatus","columnTypes","forOwn","newType","log","retrieved_at","updated_at","runtime","getFilters","filterValues","multiple","filteredData","isSame","getData","xValue","eValue","sizeValue","definition","definitionParts","yValue","ySeriesName","columnNames","getColumnNames","prepareFilters","getColumns","friendlyName","getRawData","unshift","uniqBy","unix","promise","tryCount","query_result_id","loadResult","pow","tryNumber","jobResponse","getStatus","fileType","getId","queryName","getUpdatedAt","DashboardListEmptyState","_components_NoTaggedObjectsFound__WEBPACK_IMPORTED_MODULE_3__","_components_empty_state_EmptyState__WEBPACK_IMPORTED_MODULE_4__","API_SHARE_URL","ShareDashboardDialog","marginBottom","saving","apiUrl","enableAccess","disableAccess","hasQueryParams","_components_HelpTrigger__WEBPACK_IMPORTED_MODULE_15__","headerContent","antd_lib_alert__WEBPACK_IMPORTED_MODULE_11___default","antd_lib_switch__WEBPACK_IMPORTED_MODULE_8___default","_components_InputWithCopy__WEBPACK_IMPORTED_MODULE_14__","QueriesListEmptyState","jquery__WEBPACK_IMPORTED_MODULE_0__","jquery__WEBPACK_IMPORTED_MODULE_0___default","gridstack__WEBPACK_IMPORTED_MODULE_6__","gridstack__WEBPACK_IMPORTED_MODULE_6___default","sequence","fns","noop","JQueryUIGridStackDragDropPlugin","grid","gridstack","GridStackDragDropPlugin","registerPlugin","resizable","el","opts","stop","resize","draggable","containment","isNested","parent","drag","droppable","accept","isDroppable","Boolean","eventName","./en-SG","./en-SG.js","./en-au","./en-au.js","./en-ca","./en-ca.js","./en-gb","./en-gb.js","./en-ie","./en-ie.js","./en-il","./en-il.js","./en-nz","./en-nz.js","webpackContext","req","webpackContextResolve","./avatar.svg","./db-logos/Cassandra.png","./db-logos/athena.png","./db-logos/aws_es.png","./db-logos/axibasetsd.png","./db-logos/bigquery.png","./db-logos/clickhouse.png","./db-logos/cockroach.png","./db-logos/csv.png","./db-logos/databricks.png","./db-logos/db2.png","./db-logos/drill.png","./db-logos/druid.png","./db-logos/dynamodb_sql.png","./db-logos/elasticsearch.png","./db-logos/google_analytics.png","./db-logos/google_spreadsheets.png","./db-logos/graphite.png","./db-logos/hive.png","./db-logos/hive_http.png","./db-logos/impala.png","./db-logos/influxdb.png","./db-logos/jirajql.png","./db-logos/kibana.png","./db-logos/kylin.png","./db-logos/mapd.png","./db-logos/memsql.png","./db-logos/mongodb.png","./db-logos/mssql.png","./db-logos/mysql.png","./db-logos/oracle.png","./db-logos/pg.png","./db-logos/presto.png","./db-logos/prometheus.png","./db-logos/python.png","./db-logos/qubole.png","./db-logos/rds_mysql.png","./db-logos/redshift.png","./db-logos/results.png","./db-logos/rockset.png","./db-logos/salesforce.png","./db-logos/scylla.png","./db-logos/snowflake.png","./db-logos/sqlite.png","./db-logos/treasuredata.png","./db-logos/uptycs.png","./db-logos/url.png","./db-logos/vertica.png","./db-logos/yandex_appmetrika.png","./db-logos/yandex_metrika.png","./destinations/chatwork.png","./destinations/email.png","./destinations/hangouts_chat.png","./destinations/hipchat.png","./destinations/mattermost.png","./destinations/pagerduty.png","./destinations/slack.png","./destinations/webhook.png","./favicon-16x16.png","./favicon-32x32.png","./favicon-96x96.png","./google_logo.svg","./illustrations/alert.svg","./illustrations/dashboard.svg","./illustrations/query.svg","./logo.png","./logo_white.png","./redash_icon_small.png","./AutocompleteToggle.jsx","./BigMessage.jsx","./DateInput.jsx","./DateRangeInput.jsx","./DateTimeInput.jsx","./DateTimeRangeInput.jsx","./DialogWrapper.jsx","./DynamicComponent.jsx","./EditInPlace.jsx","./EditParameterSettingsDialog.jsx","./EmailSettingsWarning.jsx","./FavoritesControl.jsx","./Footer.jsx","./HelpTrigger.jsx","./InputWithCopy.jsx","./NoTaggedObjectsFound.jsx","./PageHeader.jsx","./Paginator.jsx","./ParameterMappingInput.jsx","./ParameterValueInput.jsx","./PreviewCard.jsx","./QueryBasedParameterInput.jsx","./QueryEditor.jsx","./QuerySelector.jsx","./SelectItemsDialog.jsx","./SortIcon.jsx","./TagsList.jsx","./TimeAgo.jsx","./admin/CeleryStatus.jsx","./alerts/alert-subscriptions/index.js","./app-header/index.js","./app-view/error-handler.js","./app-view/index.js","./cancel-query-button/index.js","./dashboards/AddTextboxDialog.jsx","./dashboards/AddWidgetDialog.jsx","./dashboards/EditParameterMappingsDialog.jsx","./dashboards/edit-dashboard-dialog.js","./dashboards/gridstack/gridstack.js","./dashboards/gridstack/index.js","./dashboards/widget.js","./dynamic-form/DynamicForm.jsx","./dynamic-form/dynamicFormHelper.js","./dynamic-table/default-cell/index.js","./dynamic-table/default-cell/utils.js","./dynamic-table/dynamic-table-row.js","./dynamic-table/index.js","./dynamic-table/json-cell/index.js","./dynamic-table/json-cell/json-view-interactive.js","./empty-state/EmptyState.jsx","./filters.js","./groups/CreateGroupDialog.jsx","./groups/DeleteGroupButton.jsx","./groups/DetailsPageSidebar.jsx","./groups/GroupName.jsx","./groups/ListItemAddon.jsx","./items-list/ItemsList.jsx","./items-list/classes/ItemsFetcher.js","./items-list/classes/ItemsSource.js","./items-list/classes/Paginator.js","./items-list/classes/Sorter.js","./items-list/classes/StateStorage.js","./items-list/components/EmptyState.jsx","./items-list/components/ItemsTable.jsx","./items-list/components/LoadingState.jsx","./items-list/components/Sidebar.jsx","./keywordBuilder.js","./layouts/ContentWithSidebar.jsx","./overlay.js","./parameters.js","./permissions-editor/index.js","./proptypes.js","./queries/ScheduleDialog.jsx","./queries/SchedulePhrase.jsx","./queries/alert-unsaved-changes.js","./queries/api-key-dialog.js","./queries/embed-code-dialog.js","./queries/query-results-link.js","./queries/schema-browser.js","./queries/visualization-embed.js","./query-link.js","./rd-tab/index.js","./rd-timer.js","./settings-screen.js","./tab-nav/index.js","./tags-control/EditTagsDialog.jsx","./tags-control/TagsControl.jsx","./type-picker.js","./users/ChangePasswordDialog.jsx","./users/CreateUserDialog.jsx","./users/UserEdit.jsx","./users/UserShow.jsx","Footer","react2angular__WEBPACK_IMPORTED_MODULE_1__","SortIcon","sortColumn","$sce","AlertSubscription","Destination","newSubscription","subscribers","alertId","responses","subscribedDestinations","compact","destination","subscribedUsers","destinationsDisplay","trustAsHtml","saveSubscriber","sub","alert_id","unsubscribe","subscriber","restrict","scope","logoUrl","basePath","showQueriesMenu","showAlertsLink","showNewQueryMenu","showSettingsMenu","showDashboardsMenu","frontendVersion","backendVersion","version","newVersionAvailable","reload","newDashboard","searchQueries","handler","layouts","showFooter","bodyClass","fixed","defaultSignedOut","AppViewComponent","showHeaderAndFooter","route","$$route","authenticated","applyLayout","previous","selectLayout","exception","process","cancelQueryButton","taskId","transclude","Events","cancelExecution","admin","EditDashboardDialog","isFormValid","saveDashboard","toggleAutoHeightClass","isEnabled","$parse","batchUpdate","isOneColumnMode","$el","resizingWidget","draggingWidget","_updateStyles","gridHeight","nodes","_styles","_max","addWidget","itemId","updateWidget","minWidth","maxWidth","batchUpdateWidgets","_dirty","removeWidget","getNodeByElement","getNodeDataByDOMEl","setWidgetId","setEditing","commit","$attr","batchUpdateAssignable","assign","isOneColumnModeAssignable","enablePolling","auto","verticalMargin","margins","animate","float","mobileBreakPoint","handles","ui","changedNodes","triggerChange","updateOneColumnMode","hasClass","oneColumnModeClass","gridstackItem","require","gridstackItemId","heightBeforeResize","dirty","wrapper","resultHeight","childrenBounds","child","getComputedStyle","bodyWrapper","elementStyle","controlsHeight","additionalHeight","paddingTop","paddingBottom","scrollWidth","contentsHeight","computeAutoHeight","WidgetDialog","widgetDialogTemplate","EditTextBoxComponent","editTextBoxTemplate","new_text","existing_text","DashboardWidgetCtrl","canViewQuery","editTextBox","expandVisualization","hasParameters","editParameterMappings","localParameters","localParametersDefs","isStaticParam","deleteWidget","getName","deleted","load","restricted","public","_utils__WEBPACK_IMPORTED_MODULE_1__","_template_html__WEBPACK_IMPORTED_MODULE_2__","_template_html__WEBPACK_IMPORTED_MODULE_2___default","renderFunctions","image","sanitize","oldValue","clonedElement","append","isNullOrUndefined","filterRows","columnName","sortRows","orderBy","va","vb","direction","validateItemsPerPage","DynamicTablePaginatorAdapter","$ctrl","preparedRows","DynamicTable","$compile","paginatorAdapter","rowsToDisplay","orderByColumnsIndex","orderByColumnsDirection","searchColumns","updateOrderByColumnsInfo","updateRowsToDisplay","performFilterAndSort","setColumns","renderSingleRow","createRowRenderTemplate","onColumnHeaderClick","$event","getSelection","removeAllRanges","onSearchTermChanged","$onChanges","currentValue","DynamicTableJsonCell","parsedValue","tableCellMaxJSONSize","parseValue","_filters_html__WEBPACK_IMPORTED_MODULE_0__","FiltersComponent","filterChangeListener","modal","$modal","itemGroup","Overlay","ParametersDirective","syncValues","editable","changed","onUpdated","showParameterSettings","updated","PermissionsEditorComponent","grantees","newGrantees","aclUrl","owner","loadGrantees","accessType","grantee","access_type","findUser","u","existingIds","alreadyGrantee","foundUsers","addGrantee","removeGrantee","Content-Type","alertUnsavedChanges","isDirty","confirmMessage","_onbeforeunload","onbeforeunload","ApiKeyDialog","csvUrl","jsonUrl","_embed_code_dialog_html__WEBPACK_IMPORTED_MODULE_0__","EmbedCodeDialog","embedUrl","snapshotUrlBuilder","snapshotUrl","queryResultLink","attrs","embed","SchemaBrowserCtrl","showTable","collapsed","getSize","itemSelected","hierarchy","stopPropagation","splitFilter","splitTheFilter","schemaFilterObject","schemaFilterColumn","SchemaBrowser","onRefresh","VisualizationEmbed","classList","showQueryDescription","showDescription","loadData","$inject","$routeProvider","readonly","rdTab","tabId","$parent","selectedTab","rdTimer","currentTime","currentTimer","$digest","clearInterval","_services_settingsMenu__WEBPACK_IMPORTED_MODULE_0__","_settings_screen_html__WEBPACK_IMPORTED_MODULE_1__","_settings_screen_html__WEBPACK_IMPORTED_MODULE_1___default","settingsMenu","tabs","_type_picker_html__WEBPACK_IMPORTED_MODULE_0__","_type_picker_html__WEBPACK_IMPORTED_MODULE_0___default","imgRoot","onTypeSelect","webpackEmptyContext","./alert-dialog.js","./alert-subscription.js","./alert.js","./auth.js","./dashboard.js","./data-source.js","./destination.js","./events.js","./getTags.js","./group.js","./keyboard-shortcuts.js","./navigateTo.js","./ng.js","./notifications.js","./offline-listener.js","./organizationStatus.js","./policy/DefaultPolicy.js","./policy/index.js","./query-result.js","./query-snippet.js","./query.js","./recordEvent.js","./settingsMenu.js","./user.js","./utils.js","./widget.js","AlertDialogComponent","AlertDialogService","AlertSubscriptionService","subscriberId","DestinationService","_services_recordEvent__WEBPACK_IMPORTED_MODULE_0__","addEventListener","toast","onlineStateHandler","toastId","removeEventListener","addOnlineListener","autoDismiss","tapToDismiss","./box-plot/index.js","./chart/index.js","./chart/plotly/index.js","./chart/plotly/utils.js","./choropleth/index.js","./choropleth/utils.js","./cohort/index.js","./counter/index.js","./edit-visualization-dialog.js","./funnel/index.js","./index.js","./map/index.js","./pivot/index.js","./sankey/index.js","./sunburst/index.js","./table/index.js","./word-cloud/index.js","DEFAULT_OPTIONS","opposite","ChartRenderer","zIndexCompare","zIndex","reloadData","getChartData","chartSeries","plotlyOptions","ChartEditor","editorTemplate","refreshColumns","refreshSeries","chartData","seriesNames","existing","uniqueValuesNames","valuesNames","newValues","valuesList","intersection","setColumnRole","unsetColumn","setOptionsDefaults","currentTab","Automatic","stackingOptions","Disabled","Stack","changeTab","chartTypes","line","area","pie","scatter","bubble","heatmap","box","allowCustomJSVisualizations","xAxisScales","yAxisScales","chartTypeChanged","showSizeColumnPicker","showZColumnPicker","customCode","yAxisColumns","xAxisColumn","groupby","$watchCollection","old","partial","errorColumn","sizeColumn","zValColumn","templateHint","ColorBox","VisualizationProvider","registerVisualization","renderTemplate","Plotly","register","bar","histogram","setPlotConfig","modeBarButtonsToRemove","PlotlyChart","showLink","displaylogo","newPlot","relayout","updates","handleResize","CustomPlotlyChart","firstChild","Function","codeCall","ys","enableConsoleLogs","loadCountriesData","choroplethRenderer","countriesData","choropleth","updateBoundsLock","getBounds","_southWest","lat","lng","_northEast","setBounds","_ref$disableAnimation","disableAnimation","fitBounds","formatValue","valueFormat","noValuePlaceholder","countryCodeColumn","valueColumn","_createScale","legendItems","choroplethBounds","L","geoJson","onEachFeature","layer","featureData","noValue","setStyle","borders","weight","fillColor","fillOpacity","bindTooltip","popup","bindPopup","center","getCenter","zoom","zoomSnap","layers","scrollWheelZoom","maxBounds","maxBoundsViscosity","attributionControl","fullscreenControl","off","countriesDataUrl","invalidateSize","savedLock","choroplethEditor","ChoroplethPalette","updateCountryCodeType","clusteringModes","legendPositions","top-left","top-right","bottom-left","bottom-right","countryCodeTypes","name_long","abbrev","background","alignText","momentInterval","weekly","daily","monthly","timeInterval","dateColumn","stageColumn","totalColumn","groupData","sortedData","groupKey","stage","rawData","initialDate","toDate","grouped","stages","firstStage","lastStage","previousDate","diff","prepareSimpleData","stageCount","prepareDiagonalData","cohortRenderer","updateCohort","_prepareData","Cornelius","draw","cohort","people","weekOf","cohortEditor","setCurrentTab","getRowNumber","CounterRenderer","counterTemplate","fontSize","root","refreshData","queryData","rowNumber","targetRowNumber","counterColName","targetColName","counterLabel","countRow","counterValue","targetValue","delta","trendPositive","stringPrefix","stringSuffix","stringDecimal","stringDecChar","stringThouSep","CounterEditor","counterEditorTemplate","isValueNumber","EditVisualizationDialog","originalVisualization","onNewSuccess","visTypes","visualizationTypes","newVisualization","defaultVisualization","typeChanged","oldType","visForm","$dirty","submit","normalizePercentage","num","Funnel","watches","createVisualization","maxToPrevious","pctPrevious","header","stepCol","valueCol","trs","selectAll","enter","valContainers","pctMax","toLocaleString","pctContainers","drawFunnel","colName","Number","sortVal","autoSort","sortKeyCol","every","maxVal","colNames","colToCheck","funnelRenderer","funnel","funnelEditor","unregister","angular","defaultConfig","skipTypes","getSwitchTemplate","pattern","mergedTemplates","templates","ngSwitch","$get","renderVisualizationsTemplate","VisualizationName","VisualizationRenderer","VisualizationOptionsEditor","FilterValueFilter","firstValue","provider","mapRenderer","elm","colorScale","category10","mapControls","control","addTo","tileLayer","attribution","allMarkers","getLayers","featureGroup","createMarker","lon","heatpoint","stroke","circleMarker","addLayer","points","markers","latCol","latColName","lonCol","lonColName","classify","clusterMarkers","groups","iconCreateFunction","cluster","childCount","getChildCount","divIcon","iconSize","Point","markerClusterGroup","layerGroup","groupColor","createDescription","addOverlay","mapTileUrl","setUrl","pointGroups","All","groupNames","removeLayer","mapEditor","classify_columns","mapTiles","Icon","Default","mergeOptions","iconUrl","markerIcon","iconRetinaUrl","markerIconRetina","shadowUrl","markerShadow","_getIconUrl","pivotTableRenderer","removeControls","hideControls","controls","renderers","pivotUtilities","configCopy","aggregators","rendererOptions","localeStrings","pivotUI","pivotTableEditor","ALLOWED_ITEM_PER_PAGE","DISPLAY_AS_OPTIONS","getDefaultFormatOptions","datetime","integer","integerFormat","floatFormat","getColumnsOptions","visualizationColumns","boolean","allowSearch","alignContent","getDefaultColumnsOptions","wereColumnsReordered","GridRenderer","gridColumns","gridRows","columnsOptions","getColumnsToDisplay","GridEditor","allowedItemsPerPage","displayAsOptions","wordCloudRenderer","elem","reloadCloud","isDefined","wordsHash","findWordFrequencies","wordList","category20","cloud","padding","rotate","random","font","wordCloudEditor","./admin/outdated-queries/index.js","./admin/status/index.js","./admin/tasks/index.js","./alert/index.js","./alerts/AlertsList.jsx","./dashboards/DashboardList.jsx","./dashboards/DashboardListEmptyState.jsx","./dashboards/ShareDashboardDialog.jsx","./dashboards/dashboard.js","./dashboards/public-dashboard-page.js","./data-sources/list.js","./data-sources/show.js","./destinations/list.js","./destinations/show.js","./groups/GroupDataSources.jsx","./groups/GroupMembers.jsx","./groups/GroupsList.jsx","./home/index.js","./queries-list/QueriesList.jsx","./queries-list/QueriesListEmptyState.jsx","./queries/add-to-dashboard.js","./queries/source-view.js","./queries/view.js","./query-snippets/edit.js","./query-snippets/list.js","./settings/organization.js","./users/UserProfile.jsx","./users/UsersList.jsx","./users/index.js","OutdatedQueriesCtrl","refresh_time","timer","/admin/queries/outdated","AdminStatusCtrl","workers","manager","database_metrics","/admin/status","TasksCtrl","CeleryStatus","/admin/queries/tasks","AlertCtrl","onQuerySelected","ops","defaultNameBuilder","templateBuilder","getDefaultName","saveChanges","rearm","/alerts/:alertId","STATE_CLASS","unknown","triggered","AlertsList","toUpper","_components_PageHeader__WEBPACK_IMPORTED_MODULE_7__","_components_items_list_components_LoadingState__WEBPACK_IMPORTED_MODULE_13__","_components_empty_state_EmptyState__WEBPACK_IMPORTED_MODULE_9__","_components_items_list_components_ItemsTable__WEBPACK_IMPORTED_MODULE_14__","listColumns","_components_Paginator__WEBPACK_IMPORTED_MODULE_8__","liveItemsList","reloadOnSearch","$exceptionHandler","DashboardList","_components_items_list_components_Sidebar__WEBPACK_IMPORTED_MODULE_13__","_components_tags_control_TagsControl__WEBPACK_IMPORTED_MODULE_8__","is_archived","_components_PageHeader__WEBPACK_IMPORTED_MODULE_6__","_components_layouts_ContentWithSidebar__WEBPACK_IMPORTED_MODULE_15__","sidebarMenu","_DashboardListEmptyState__WEBPACK_IMPORTED_MODULE_18__","_components_Paginator__WEBPACK_IMPORTED_MODULE_7__","_components_items_list_components_LoadingState__WEBPACK_IMPORTED_MODULE_12__","itemsList","getWidgetsWithChangedPositions","oldPosition","newPosition","DashboardCtrl","Title","saveDashboardLayout","layoutEditing","isFullscreen","refreshRate","isGridDisabled","updateGridItems","showPermissionsControl","globalParameters","isDashboardOwner","refreshRates","rate","allowedIntervals","getDashboardRefreshIntervals","setRefreshRate","refreshDashboard","autoRefresh","extractGlobalParameters","collectFilters","forceRefresh","queryResultPromises","queryResults","queryFilter","hasQueryStringValue","dashboard_filters_enabled","originFilters","filtersOnChange","originFilter","renderDashboard","loadDashboard","dashboardSlug","edit","editLayout","archiveDashboard","showManagePermissionsModal","enableEditing","applyChanges","changedWidgets","loadTags","updateDashboard","saveName","saveTags","updateDashboardFiltersState","showAddTextboxDialog","addTextbox","dashboard_id","isHidden","visualization_id","onWidgetAdded","showAddWidgetDialog","widgetId","toggleFullscreen","togglePublished","openShareForm","/dashboard/:dashboardSlug","token","PublicDashboardPage","loadPublicDashboard","DataSourcesCtrl","/data_sources","DestinationsCtrl","/destinations","DestinationCtrl","destinationId","/destinations/new","/destinations/:destinationId","GroupDataSources","groupId","datasource","react__WEBPACK_IMPORTED_MODULE_12___default","_components_PreviewCard__WEBPACK_IMPORTED_MODULE_25__","menu","antd_lib_menu__WEBPACK_IMPORTED_MODULE_16___default","selectedKeys","view_only","setDataSourcePermissions","antd_lib_dropdown__WEBPACK_IMPORTED_MODULE_15___default","overlay","removeGroupDataSource","viewOnly","allDataSources","alreadyAddedDataSources","ds","_components_groups_ListItemAddon__WEBPACK_IMPORTED_MODULE_27__","promises","_components_groups_GroupName__WEBPACK_IMPORTED_MODULE_26__","_components_layouts_ContentWithSidebar__WEBPACK_IMPORTED_MODULE_29__","_components_groups_DetailsPageSidebar__WEBPACK_IMPORTED_MODULE_28__","addDataSources","_components_items_list_components_LoadingState__WEBPACK_IMPORTED_MODULE_22__","_components_items_list_components_ItemsTable__WEBPACK_IMPORTED_MODULE_23__","_components_Paginator__WEBPACK_IMPORTED_MODULE_18__","unused","GroupMembers","_components_PreviewCard__WEBPACK_IMPORTED_MODULE_19__","antd_lib_button__WEBPACK_IMPORTED_MODULE_11___default","removeGroupMember","alreadyAddedUsers","_components_groups_ListItemAddon__WEBPACK_IMPORTED_MODULE_21__","_components_groups_GroupName__WEBPACK_IMPORTED_MODULE_20__","_components_layouts_ContentWithSidebar__WEBPACK_IMPORTED_MODULE_23__","_components_groups_DetailsPageSidebar__WEBPACK_IMPORTED_MODULE_22__","addMembers","_components_items_list_components_LoadingState__WEBPACK_IMPORTED_MODULE_16__","_components_items_list_components_ItemsTable__WEBPACK_IMPORTED_MODULE_17__","_components_Paginator__WEBPACK_IMPORTED_MODULE_12__","GroupsList","antd_lib_button__WEBPACK_IMPORTED_MODULE_6___default","_components_groups_DeleteGroupButton__WEBPACK_IMPORTED_MODULE_15__","newGroup","createGroup","_components_items_list_components_LoadingState__WEBPACK_IMPORTED_MODULE_11__","_components_items_list_components_EmptyState__WEBPACK_IMPORTED_MODULE_12__","_components_items_list_components_ItemsTable__WEBPACK_IMPORTED_MODULE_13__","HomeCtrl","noDashboards","noQueries","isEmailVerified","is_email_verified","favoriteDashboards","favoriteQueries","verifyEmail","/","QueriesList","_components_items_list_components_Sidebar__WEBPACK_IMPORTED_MODULE_14__","_components_queries_SchedulePhrase__WEBPACK_IMPORTED_MODULE_9__","_components_layouts_ContentWithSidebar__WEBPACK_IMPORTED_MODULE_16__","_QueriesListEmptyState__WEBPACK_IMPORTED_MODULE_20__","_components_items_list_components_ItemsTable__WEBPACK_IMPORTED_MODULE_15__","my","AddToDashboardForm","onDashboardSelected","dash","selected_query","selectedDashboard","searchDashboards","search_term","QuerySourceCtrl","$controller","isNewQuery","saveQuery","sourceMode","base_url","port","shortcuts","mod+s","mod+p","addNewParameter","canForkQuery","updateQuery","newQueryText","$apply","savePromise","savedQuery","toQueryTextFragment","onParametersUpdated","listenForEditorCommand","f","listenForResize","/queries/new","/queries/:queryId/source","DEFAULT_TAB","QueryViewCtrl","showLog","updateDataSources","localStorage","lastSelectedDataSourceId","canCreateQuery","noDataSources","refreshSchema","updateSelectedQuery","executeQuery","canExecuteQuery","lockButton","cancelling","Notifications","getPermissions","mod+enter","alt+enter","getVisualization","visId","queryExecuting","isQueryOwner","canViewSource","is_safe","canScheduleQuery","showDataset","lock","showApiKey","duplicateQuery","tabName","queryUrl","customOptions","successMessage","overwrite","updatedQuery","saveDescription","desc","autoPublishNamedQueries","archiveQuery","setVisualizationTab","deleteVisualization","$e","showNotification","getError","getLog","openVisualizationEditor","windowClass","getQueryRefreshIntervals","showScheduleForm","editSchedule","closeScheduleForm","openAddToDashboardForm","showEmbedDialog","exists","minBy","viz","/queries/:queryId","SnippetCtrl","snippetId","editorOptions","advanced","behavioursEnabled","enableSnippets","autoScrollEditorIntoView","$blockScrolling","Infinity","getSession","setUseWrapMode","setShowPrintMargin","/query_snippets/:snippetId","SnippetsCtrl","snippets","/query_snippets","OrganizationSettingsCtrl","settings","disablePasswordLoginToggle","auth_password_login_enabled","dateFormatList","googleLoginEnabled","auth_saml_enabled","/settings/organization","UserComponent","_components_EmailSettingsWarning__WEBPACK_IMPORTED_MODULE_6__","_components_items_list_components_LoadingState__WEBPACK_IMPORTED_MODULE_9__","UsersListActions","UsersList","canCreateUser","_components_PreviewCard__WEBPACK_IMPORTED_MODULE_15__","_components_InputWithCopy__WEBPACK_IMPORTED_MODULE_16__","isCreateUserEnabled","isNewUserPage","showCreateUserDialog","_components_DynamicComponent__WEBPACK_IMPORTED_MODULE_14__","renderPageHeader","_components_layouts_ContentWithSidebar__WEBPACK_IMPORTED_MODULE_24__","_components_items_list_components_Sidebar__WEBPACK_IMPORTED_MODULE_22__","_components_items_list_components_LoadingState__WEBPACK_IMPORTED_MODULE_20__","_components_items_list_components_EmptyState__WEBPACK_IMPORTED_MODULE_21__","_components_Paginator__WEBPACK_IMPORTED_MODULE_13__","pending","_lib_utils__WEBPACK_IMPORTED_MODULE_1__","listRoutes","profileRoutes","uiSortableConfig","$log","ngModel","uiSortable","savedNodes","combineCallbacks","second","secondIsFunc","getSortableWidgetInstance","widgetFullName","patchSortableOption","callbacks","afterStop","wrappers","patchUISortableOptions","newVal","oldVal","sortableWidgetInstance","optsDiff","directiveOpts","floating","getSortingHelper","helperOption","isCustomHelperUsed","hasSortingHelper","_destroy","getItemIndex","jQuery","ui-floating","ui-model-items","receive","wireUp","siblings","css","model","$modelValue","sourceModel","_isCanceled","isCanceled","_isCustomHelperUsed","activate","contents","getPlaceholderElement","excludes","notCssSelector","getPlaceholderExcludesludes","not","connectedSortables","_connectedSortables","received","dropindex","droptarget","droptargetScope","elementScopes","getElementScope","droptargetModel","sortingHelper","moved","equals","inner","oldItemSortable","_restore","innerResult","initIfEnabled","info","cancelWatcher","autofocus","compareTo","otherModelValue","attributes","$setValidity","$parsers","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","msRequestAnimationFrame","TitleService","newTitle","resizeEvent","$evalAsync","sameNumber","checkItems","flexBasis","documentElement","threshold","resizableToggle","$attrs","ignoreResizeEvents","resizeStartInfo","allowHClick","allowVClick","lastWidth","lastHeight","isFlex","$eval","rFlex","toggleShortcut","click","minSize","currentSize","animateProp","emulateAngularResizableEvents","evt","$emit","allowScriptsInUserInput","Pace","shouldHandlePushState","prevUrl","newUrl","ctx","requirements","ngRoute","ngResource","ngSanitize","uiBootstrap","ngMessages","uiSelect","ngUpload","vsRepeat","registerAll","registerDirectives","markdownFilter","dateTimeFilter","__organizationStatus","otherwise","$locationProvider","$compileProvider","uiSelectConfig","toastrConfig","debugInfoEnabled","aHrefSanitizationWhitelist","html5Mode","app_extends","positionClass","$templateCache","put","PREFIX","localOptions","fullKey","getItem","setItem","langTools","ace","acequire","snippetsModule","defineDummySnippets","define","snippetText","QueryEditor","commands","bindKey","win","mac","command","completer","snippetManager","parseSnippetFile","selection","getRange","setRange","rawSelectedQueryText","refEditor","getTextRange","autocompleteQuery","liveAutocompleteDisabled","schemaCompleter","identifierRegexps","getCompletions","pos","tableName","setCompleters","snippetCompleter","keyWordCompleter","textCompleter","tokensCount","totalLength","keywordBuilder","isExecuteDisabled","react_default","data-executing","lib_default","editorProps","setOptions","enableBasicAutocompletion","enableLiveAutocompletion","showPrintMargin","wrapEnabled","onPaste","onSelectionChange","tooltip_default","formatQuery","toggleAutocomplete","boxWhiskers","boxQuartiles","quantile","whiskers","quartiles","tickFormat","ascending","quartileData","whiskerIndices","whiskerData","outlierIndices","x1","linear","x0","__chart__","insert","transition","exit","medianLine","whisker","outlier","boxTick","whiskerTick","flush","functor","boxPlotRenderer","boxWidth","parentWidth","mydata","xAxisLabel","yAxisLabel","xscale","rangeBands","yscale","chart","q1","q3","iqr","svg","orient","xLines","tickSize","yLines","plot","barOffset","boxPlotEditor","exitNode","colorMap","Sunburst","clientWidth","h","radius","totalSize","partition","PI","arc","startAngle","endAngle","dx","innerRadius","sqrt","outerRadius","dy","breadcrumbs","classed","summary","sunburst","lastCrumb","breadcrumbPoints","mouseover","percentage","toPrecision","percentageString","ancestors","getAncestors","depth","breadcrumb","updateBreadcrumbs","json","output","uniqueNames","__data__","drawSunburst","buildHierarchy","csv","buildNodes","currentNode","_loop","nodeName","isLeaf","childNode","sunburstSequenceRenderer","sunburstSequenceEditor","Sankey","sankey","nodeWidth","nodePadding","links","computeNodeBreadths","nextNodes","kx","remainingNodes","assignBreadth","sourceLinks","moveSinksRight","computeLinkDepths","ascendingSourceDepth","ascendingTargetDepth","targetLinks","sy","ty","iterations","ky","nodesByBreadth","nest","sortKeys","entries","relaxLeftToRight","alpha","weightedSource","resolveCollisions","y0","ascendingDepth","relaxRightToLeft","weightedTarget","computeNodeDepths","_arguments","curvature","xi","interpolateNumber","x2","x3","y1","graph","nodesDict","getNode","level","normalizeName","addLink","sourceName","targetName","getLink","createSankey","d3sankey","spreadNodes","getConnectedNodes","rgb","darker","sankeyRenderer","sankeyEditor"],"mappings":"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AD,QAAiBJ,EAAA8B,EAAuB,iDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,8CCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,8CCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,kDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,gDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,kDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,iDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,2CCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,kDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,2CCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,6CCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,6CCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,oDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,qDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,wDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,2DCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,gDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,4CCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,iDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,8CCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,gDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,+CCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,8CCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,6CCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,4CCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,8CCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,+CCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,6CCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,6CCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,8CCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,0CCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,8CCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,kDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,8CCAxCzB,EAAAD,QAAiBJ,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","file":"app.435ded10d8730a744feb.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/static/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([709,2]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export let $http = null; // eslint-disable-line import/no-mutable-exports\nexport let $sanitize = null; // eslint-disable-line import/no-mutable-exports\nexport let $location = null; // eslint-disable-line import/no-mutable-exports\nexport let $route = null; // eslint-disable-line import/no-mutable-exports\nexport let $routeParams = null; // eslint-disable-line import/no-mutable-exports\nexport let $q = null; // eslint-disable-line import/no-mutable-exports\nexport let $rootScope = null; // eslint-disable-line import/no-mutable-exports\nexport let $uibModal = null; // eslint-disable-line import/no-mutable-exports\nexport let toastr = null; // eslint-disable-line import/no-mutable-exports\n\nexport default function init(ngModule) {\n  ngModule.run(($injector) => {\n    $http = $injector.get('$http');\n    $sanitize = $injector.get('$sanitize');\n    $location = $injector.get('$location');\n    $route = $injector.get('$route');\n    $routeParams = $injector.get('$routeParams');\n    $q = $injector.get('$q');\n    $rootScope = $injector.get('$rootScope');\n    $uibModal = $injector.get('$uibModal');\n    toastr = $injector.get('toastr');\n  });\n}\n\ninit.init = true;\n","import debug from 'debug';\nimport { includes, extend } from 'lodash';\n\n// eslint-disable-next-line import/no-mutable-exports\nexport let Auth = null;\n\nexport const currentUser = {\n  canEdit(object) {\n    const userId = object.user_id || (object.user && object.user.id);\n    return this.hasPermission('admin') || (userId && userId === this.id);\n  },\n\n  hasPermission(permission) {\n    return includes(this.permissions, permission);\n  },\n\n  get isAdmin() {\n    return this.hasPermission('admin');\n  },\n};\n\nexport const clientConfig = {};\n\nconst logger = debug('redash:auth');\nconst session = { loaded: false };\n\nfunction updateSession(sessionData) {\n  logger('Updating session to be:', sessionData);\n  extend(session, sessionData, { loaded: true });\n  extend(currentUser, session.user);\n  extend(clientConfig, session.client_config);\n}\n\nfunction AuthService($window, $location, $q, $http) {\n  return {\n    isAuthenticated() {\n      return session.loaded && session.user.id;\n    },\n    login() {\n      const next = encodeURI($location.url());\n      logger('Calling login with next = %s', next);\n      window.location.href = `login?next=${next}`;\n    },\n    logout() {\n      logger('Logout.');\n      $window.location.href = 'logout';\n    },\n    loadSession() {\n      logger('Loading session');\n      if (session.loaded && session.user.id) {\n        logger('Resolving with local value.');\n        return $q.resolve(session);\n      }\n\n      this.setApiKey(null);\n      return $http.get('api/session').then((response) => {\n        updateSession(response.data);\n        return session;\n      });\n    },\n    loadConfig() {\n      logger('Loading config');\n      return $http.get('/api/config').then((response) => {\n        updateSession({ client_config: response.data.client_config, user: { permissions: [] } });\n        return response.data;\n      });\n    },\n    setApiKey(apiKey) {\n      logger('Set API key to: %s', apiKey);\n      this.apiKey = apiKey;\n    },\n    getApiKey() {\n      return this.apiKey;\n    },\n    requireSession() {\n      logger('Requested authentication');\n      if (this.isAuthenticated()) {\n        return $q.when(session);\n      }\n      return this.loadSession()\n        .then(() => {\n          if (this.isAuthenticated()) {\n            logger('Loaded session');\n            return session;\n          }\n          logger('Need to login, redirecting');\n          this.login();\n        })\n        .catch(() => {\n          logger('Need to login, redirecting');\n          this.login();\n        });\n    },\n  };\n}\n\nfunction apiKeyHttpInterceptor($injector) {\n  return {\n    request(config) {\n      const apiKey = $injector.get('Auth').getApiKey();\n      if (apiKey) {\n        config.headers.Authorization = `Key ${apiKey}`;\n      }\n\n      return config;\n    },\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.factory('Auth', AuthService);\n  ngModule.value('currentUser', currentUser);\n  ngModule.value('clientConfig', clientConfig);\n  ngModule.factory('apiKeyHttpInterceptor', apiKeyHttpInterceptor);\n\n  ngModule.config(($httpProvider) => {\n    $httpProvider.interceptors.push('apiKeyHttpInterceptor');\n  });\n\n  ngModule.run(($injector) => {\n    Auth = $injector.get('Auth');\n  });\n}\n\ninit.init = true;\n","import { isFunction, map, filter, extend, omit, identity } from 'lodash';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Table from 'antd/lib/table';\nimport { FavoritesControl } from '@/components/FavoritesControl';\nimport { TimeAgo } from '@/components/TimeAgo';\nimport { durationHumanize } from '@/filters';\nimport { formatDateTime } from '@/filters/datetime';\n\n// `this` refers to previous function in the chain (`Columns.***`).\n// Adds `sorter: true` field to column definition\nfunction sortable(...args) {\n  return extend(this(...args), { sorter: true });\n}\n\nexport const Columns = {\n  favorites(overrides) {\n    return extend({\n      width: '1%',\n      render: (text, item) => <FavoritesControl item={item} />,\n    }, overrides);\n  },\n  avatar(overrides, formatTitle) {\n    formatTitle = isFunction(formatTitle) ? formatTitle : identity;\n    return extend({\n      width: '1%',\n      render: (user, item) => (\n        <img\n          src={item.user.profile_image_url}\n          className=\"profile__image_thumb\"\n          alt={formatTitle(user.name, item)}\n          title={formatTitle(user.name, item)}\n        />\n      ),\n    }, overrides);\n  },\n  dateTime(overrides) {\n    return extend({\n      render: text => formatDateTime(text),\n    }, overrides);\n  },\n  duration(overrides) {\n    return extend({\n      width: '1%',\n      className: 'text-nowrap',\n      render: text => durationHumanize(text),\n    }, overrides);\n  },\n  timeAgo(overrides) {\n    return extend({\n      render: value => <TimeAgo date={value} />,\n    }, overrides);\n  },\n  custom(render, overrides) {\n    return extend({\n      render,\n    }, overrides);\n  },\n};\n\nColumns.dateTime.sortable = sortable;\nColumns.duration.sortable = sortable;\nColumns.timeAgo.sortable = sortable;\nColumns.custom.sortable = sortable;\n\nexport default class ItemsTable extends React.Component {\n  static propTypes = {\n    // eslint-disable-next-line react/forbid-prop-types\n    items: PropTypes.arrayOf(PropTypes.object),\n    columns: PropTypes.arrayOf(PropTypes.shape({\n      field: PropTypes.string, // data field\n      orderByField: PropTypes.string, // field to order by (defaults to `field`)\n      render: PropTypes.func, // (prop, item) => text | node; `prop` is `item[field]`\n      isAvailable: PropTypes.func, // return `true` to show column and `false` to hide; if omitted: show column\n    })),\n    showHeader: PropTypes.bool,\n    onRowClick: PropTypes.func, // (event, item) => void\n\n    orderByField: PropTypes.string,\n    orderByReverse: PropTypes.bool,\n    toggleSorting: PropTypes.func,\n  };\n\n  static defaultProps = {\n    items: [],\n    columns: [],\n    showHeader: true,\n    onRowClick: null,\n\n    orderByField: null,\n    orderByReverse: false,\n    toggleSorting: () => {},\n  };\n\n  prepareColumns() {\n    const { orderByField, orderByReverse, toggleSorting } = this.props;\n    const orderByDirection = orderByReverse ? 'descend' : 'ascend';\n\n    return map(\n      map(\n        filter(this.props.columns, column => (isFunction(column.isAvailable) ? column.isAvailable() : true)),\n        column => extend(column, { orderByField: column.orderByField || column.field }),\n      ),\n      (column, index) => {\n        // Bind click events only to sortable columns\n        const onHeaderCell = column.sorter ? (\n          () => ({ onClick: () => toggleSorting(column.orderByField) })\n        ) : null;\n\n        // Wrap render function to pass correct arguments\n        const render = isFunction(column.render) ? (text, row) => column.render(text, row.item) : identity;\n\n        return extend(\n          omit(column, ['field', 'orderByField', 'render']),\n          {\n            key: 'column' + index,\n            dataIndex: 'item[' + JSON.stringify(column.field) + ']',\n            defaultSortOrder: column.orderByField === orderByField ? orderByDirection : null,\n            onHeaderCell,\n            render,\n          },\n        );\n      },\n    );\n  }\n\n  render() {\n    const columns = this.prepareColumns();\n    const rows = map(\n      this.props.items,\n      (item, index) => ({ key: 'row' + index, item }),\n    );\n\n    // Bind events only if `onRowClick` specified\n    const onTableRow = isFunction(this.props.onRowClick) ? (\n      row => ({\n        onClick: (event) => { this.props.onRowClick(event, row.item); },\n      })\n    ) : null;\n\n    const { showHeader } = this.props;\n\n    return (\n      <Table\n        className={classNames('table-data', { 'ant-table-headerless': !showHeader })}\n        columns={columns}\n        showHeader={showHeader}\n        dataSource={rows}\n        rowKey={row => row.key}\n        pagination={false}\n        onRow={onTableRow}\n      />\n    );\n  }\n}\n","import { isFunction } from 'lodash';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport ReactDOM from 'react-dom';\n\n/**\n  Wrapper for dialogs based on Ant's <Modal> component.\n\n\n  Using wrapped dialogs\n  =====================\n\n  Wrapped component is an object with two fields:\n\n    {\n      showModal: (dialogProps) => object({\n          result: Promise,\n          close: (result) => void,\n          dismiss: (reason) => void,\n        }),\n      Component: React.Component, // wrapped dialog component\n    }\n\n  To open dialog, use `showModal` method; optionally you can pass additional properties that\n  will be expanded on wrapped component:\n\n    const dialog = SomeWrappedDialog.showModal()\n\n    const dialog = SomeWrappedDialog.showModal({ greeting: 'Hello' })\n\n  To get result of modal, use `result` property:\n\n    dialog.result\n      .then(...) // pressed OK button or used `close` method; resolved value is a result of dialog\n      .catch(...) // pressed Cancel button or used `dismiss` method; optional argument is a rejection reason.\n\n  Also, dialog has `close` and `dismiss` methods that allows to close dialog by caller. Passed arguments\n  will be used to resolve/reject `dialog.result` promise. `update` methods allows to pass new properties\n  to dialog.\n\n\n  Creating a dialog\n  ================\n\n  1. Add imports:\n\n    import { wrap as wrapDialog, DialogPropType } from 'path/to/DialogWrapper';\n\n  2. define a `dialog` property on your component:\n\n    propTypes = {\n      dialog: DialogPropType.isRequired,\n    };\n\n  `dialog` property is an object:\n\n    {\n      props: object, // properties for <Modal> component;\n      close: (result) => void, // method to confirm dialog; `result` will be returned to caller\n      dismiss: (reason) => void, // method to reject dialog; `reason` will be returned to caller\n    }\n\n  3. expand additional properties on <Modal> component:\n\n    render() {\n      const { dialog } = this.props;\n      return (\n        <Modal {...dialog.props}>\n      );\n    }\n\n  4. wrap your component and export it:\n\n    export default wrapDialog(YourComponent).\n\n  Your component is ready to use. Wrapper will manage <Modal>'s visibility and events.\n  If you want to override behavior of `onOk`/`onCancel` - don't forget to close dialog:\n\n    customOkHandler() {\n      this.saveData().then(() => {\n         this.props.dialog.close({ success: true }); // or dismiss();\n      });\n    }\n\n    render() {\n      const { dialog } = this.props;\n        return (\n          <Modal {...dialog.props} onOk={() => this.customOkHandler()}>\n        );\n    }\n\n\n  Settings\n  ========\n\n  You can setup this wrapper to use custom `Promise` library (for example, Bluebird):\n\n    import DialogWrapper from 'path/to/DialogWrapper';\n    import Promise from 'bluebird';\n\n    DialogWrapper.Promise = Promise;\n\n  It could be useful to avoid `unhandledrejection` exception that would fire with native Promises,\n  or when some custom Promise library is used in application.\n\n*/\n\nexport const DialogPropType = PropTypes.shape({\n  props: PropTypes.shape({\n    visible: PropTypes.bool,\n    onOk: PropTypes.func,\n    onCancel: PropTypes.func,\n    afterClose: PropTypes.func,\n  }).isRequired,\n  close: PropTypes.func.isRequired,\n  dismiss: PropTypes.func.isRequired,\n});\n\n// default export of module\nconst DialogWrapper = {\n  Promise,\n  DialogPropType,\n  wrap() {},\n};\n\nfunction openDialog(DialogComponent, props) {\n  const dialog = {\n    props: {\n      visible: true,\n      onOk: () => {},\n      onCancel: () => {},\n      afterClose: () => {},\n    },\n    close: () => {},\n    dismiss: () => {},\n  };\n\n  const dialogResult = {\n    resolve: () => {},\n    reject: () => {},\n  };\n\n  const container = document.createElement('div');\n  document.body.appendChild(container);\n\n  function render() {\n    ReactDOM.render(<DialogComponent {...props} dialog={dialog} />, container);\n  }\n\n  function destroyDialog() {\n    // Allow calling chain to roll up, and then destroy component\n    setTimeout(() => {\n      ReactDOM.unmountComponentAtNode(container);\n      document.body.removeChild(container);\n    }, 10);\n  }\n\n  function closeDialog(result) {\n    dialogResult.resolve(result);\n    dialog.props.visible = false;\n    render();\n  }\n\n  function dismissDialog(reason) {\n    dialogResult.reject(reason);\n    dialog.props.visible = false;\n    render();\n  }\n\n  dialog.props.onOk = closeDialog;\n  dialog.props.onCancel = dismissDialog;\n  dialog.props.afterClose = destroyDialog;\n  dialog.close = closeDialog;\n  dialog.dismiss = dismissDialog;\n\n  const result = {\n    close: closeDialog,\n    dismiss: dismissDialog,\n    update: (newProps) => {\n      props = { ...props, ...newProps };\n      render();\n    },\n    result: new DialogWrapper.Promise((resolve, reject) => {\n      dialogResult.resolve = resolve;\n      dialogResult.reject = reject;\n    }),\n  };\n\n  render(); // show it only when all structures initialized to avoid unnecessary re-rendering\n\n  // Some known libraries support\n  // Bluebird: http://bluebirdjs.com/docs/api/suppressunhandledrejections.html\n  if (isFunction(result.result.suppressUnhandledRejections)) {\n    result.result.suppressUnhandledRejections();\n  }\n\n  return result;\n}\n\nexport function wrap(DialogComponent) {\n  return {\n    Component: DialogComponent,\n    showModal: props => openDialog(DialogComponent, props),\n  };\n}\n\nDialogWrapper.wrap = wrap;\n\nexport default DialogWrapper;\n","import PropTypes from 'prop-types';\nimport { wrap } from 'lodash';\nimport moment from 'moment';\n\nexport const DataSource = PropTypes.shape({\n  syntax: PropTypes.string,\n  options: PropTypes.shape({\n    doc: PropTypes.string,\n    doc_url: PropTypes.string,\n  }),\n  type_name: PropTypes.string,\n});\n\nexport const Table = PropTypes.shape({\n  columns: PropTypes.arrayOf(PropTypes.string).isRequired,\n});\n\nexport const Schema = PropTypes.arrayOf(Table);\n\nexport const RefreshScheduleType = PropTypes.shape({\n  interval: PropTypes.number,\n  time: PropTypes.string,\n  day_of_week: PropTypes.string,\n  until: PropTypes.string,\n});\n\nexport const RefreshScheduleDefault = {\n  interval: null,\n  time: null,\n  day_of_week: null,\n  until: null,\n};\n\nexport const Field = PropTypes.shape({\n  name: PropTypes.string.isRequired,\n  title: PropTypes.string,\n  type: PropTypes.oneOf(['text', 'email', 'password', 'number', 'checkbox', 'file']).isRequired,\n  initialValue: PropTypes.oneOfType([PropTypes.string, PropTypes.number, PropTypes.bool]),\n  required: PropTypes.bool,\n  readOnly: PropTypes.bool,\n  minLength: PropTypes.number,\n  placeholder: PropTypes.string,\n  props: PropTypes.object, // eslint-disable-line react/forbid-prop-types\n});\n\nexport const Action = PropTypes.shape({\n  name: PropTypes.string.isRequired,\n  callback: PropTypes.func.isRequired,\n  type: PropTypes.string,\n  pullRight: PropTypes.bool,\n  disabledWhenDirty: PropTypes.bool,\n});\n\nexport const AntdForm = PropTypes.shape({\n  validateFieldsAndScroll: PropTypes.func,\n});\n\nexport const UserProfile = PropTypes.shape({\n  id: PropTypes.number.isRequired,\n  name: PropTypes.string.isRequired,\n  email: PropTypes.string.isRequired,\n  profileImageUrl: PropTypes.string,\n  apiKey: PropTypes.string,\n  isDisabled: PropTypes.bool,\n});\n\nfunction checkMoment(isRequired, props, propName, componentName) {\n  const value = props[propName];\n  const isRequiredValid = isRequired && (value !== null);\n  const isOptionalValid = !isRequired && ((value === null) || moment.isMoment(value));\n  if (!isRequiredValid && !isOptionalValid) {\n    return new Error('Prop `' + propName + '` supplied to `' + componentName + '` should be a Moment.js instance.');\n  }\n}\n\nexport const Moment = wrap(false, checkMoment);\nMoment.isRequired = wrap(true, checkMoment);\n","import moment from 'moment';\nimport { capitalize as _capitalize, isEmpty } from 'lodash';\n\nexport const IntervalEnum = {\n  NEVER: 'Never',\n  SECONDS: 'second',\n  MINUTES: 'minute',\n  HOURS: 'hour',\n  DAYS: 'day',\n  WEEKS: 'week',\n};\n\nexport function localizeTime(time) {\n  const [hrs, mins] = time.split(':');\n  return moment\n    .utc()\n    .hour(hrs)\n    .minute(mins)\n    .local()\n    .format('HH:mm');\n}\n\nexport function secondsToInterval(count) {\n  if (!count) {\n    return { interval: IntervalEnum.NEVER };\n  }\n\n  let interval = IntervalEnum.SECONDS;\n  if (count >= 60) {\n    count /= 60;\n    interval = IntervalEnum.MINUTES;\n  }\n  if (count >= 60) {\n    count /= 60;\n    interval = IntervalEnum.HOURS;\n  }\n  if (count >= 24 && interval === IntervalEnum.HOURS) {\n    count /= 24;\n    interval = IntervalEnum.DAYS;\n  }\n  if (count >= 7 && !(count % 7) && interval === IntervalEnum.DAYS) {\n    count /= 7;\n    interval = IntervalEnum.WEEKS;\n  }\n  return { count, interval };\n}\n\nexport function intervalToSeconds(count, interval) {\n  let intervalInSeconds = 0;\n  switch (interval) {\n    case IntervalEnum.MINUTES:\n      intervalInSeconds = 60;\n      break;\n    case IntervalEnum.HOURS:\n      intervalInSeconds = 3600;\n      break;\n    case IntervalEnum.DAYS:\n      intervalInSeconds = 86400;\n      break;\n    case IntervalEnum.WEEKS:\n      intervalInSeconds = 604800;\n      break;\n    default:\n      return null;\n  }\n  return intervalInSeconds * count;\n}\n\nexport function pluralize(text, count) {\n  const should = count !== 1;\n  return text + (should ? 's' : '');\n}\n\nexport function durationHumanize(duration, options = {}) {\n  if (!duration) {\n    return '-';\n  }\n  let ret = '';\n  const { interval, count } = secondsToInterval(duration);\n  const rounded = Math.round(count);\n  if (rounded !== 1 || !options.omitSingleValueNumber) {\n    ret = `${rounded} `;\n  }\n  ret += pluralize(interval, rounded);\n  return ret;\n}\n\nexport function toHuman(text) {\n  return text.replace(/_/g, ' ').replace(/(?:^|\\s)\\S/g, a => a.toUpperCase());\n}\n\nexport function colWidth(widgetWidth) {\n  if (widgetWidth === 0) {\n    return 0;\n  } else if (widgetWidth === 1) {\n    return 6;\n  } else if (widgetWidth === 2) {\n    return 12;\n  }\n  return widgetWidth;\n}\n\nexport function capitalize(text) {\n  if (text) {\n    return _capitalize(text);\n  }\n\n  return null;\n}\n\nexport function remove(items, item) {\n  if (items === undefined) {\n    return items;\n  }\n\n  let notEquals;\n\n  if (item instanceof Array) {\n    notEquals = other => item.indexOf(other) === -1;\n  } else {\n    notEquals = other => item !== other;\n  }\n\n  const filtered = [];\n\n  for (let i = 0; i < items.length; i += 1) {\n    if (notEquals(items[i])) {\n      filtered.push(items[i]);\n    }\n  }\n\n  return filtered;\n}\n\nexport function notEmpty(collection) {\n  return !isEmpty(collection);\n}\n\nexport function showError(field) {\n  // In case of booleans, we get an undefined here.\n  if (field === undefined) {\n    return false;\n  }\n  return field.$touched && field.$invalid;\n}\n\nconst units = ['bytes', 'KB', 'MB', 'GB', 'TB', 'PB'];\n\nexport function prettySize(bytes) {\n  if (isNaN(parseFloat(bytes)) || !isFinite(bytes)) {\n    return '?';\n  }\n\n  let unit = 0;\n\n  while (bytes >= 1024) {\n    bytes /= 1024;\n    unit += 1;\n  }\n\n  return bytes.toFixed(3) + ' ' + units[unit];\n}\n\nexport function join(arr) {\n  if (arr === undefined || arr === null) {\n    return '';\n  }\n\n  return arr.join(' / ');\n}\n","import { isString } from 'lodash';\nimport { $http, $sanitize, toastr } from '@/services/ng';\nimport { clientConfig } from '@/services/auth';\n\nexport let User = null; // eslint-disable-line import/no-mutable-exports\n\nfunction disableResource(user) {\n  return `api/users/${user.id}/disable`;\n}\n\nfunction enableUser(user) {\n  const userName = $sanitize(user.name);\n\n  return $http\n    .delete(disableResource(user))\n    .then((data) => {\n      toastr.success(`User <b>${userName}</b> is now enabled.`, { allowHtml: true });\n      user.is_disabled = false;\n      user.profile_image_url = data.data.profile_image_url;\n      return data;\n    })\n    .catch((response) => {\n      let message = response instanceof Error ? response.message : response.statusText;\n      if (!isString(message)) {\n        message = 'Unknown error';\n      }\n      toastr.error(`Cannot enable user <b>${userName}</b><br>${message}`, { allowHtml: true });\n    });\n}\n\nfunction disableUser(user) {\n  const userName = $sanitize(user.name);\n  return $http\n    .post(disableResource(user))\n    .then((data) => {\n      toastr.warning(`User <b>${userName}</b> is now disabled.`, { allowHtml: true });\n      user.is_disabled = true;\n      user.profile_image_url = data.data.profile_image_url;\n      return data;\n    })\n    .catch((response = {}) => {\n      const message =\n        response.data && response.data.message\n          ? response.data.message\n          : `Cannot disable user <b>${userName}</b><br>${response.statusText}`;\n\n      toastr.error(message, { allowHtml: true });\n    });\n}\n\nfunction deleteUser(user) {\n  const userName = $sanitize(user.name);\n  return $http\n    .delete(`api/users/${user.id}`)\n    .then((data) => {\n      toastr.warning(`User <b>${userName}</b> has been deleted.`, { allowHtml: true });\n      return data;\n    })\n    .catch((response = {}) => {\n      const message =\n        response.data && response.data.message\n          ? response.data.message\n          : `Cannot delete user <b>${userName}</b><br>${response.statusText}`;\n\n      toastr.error(message, { allowHtml: true });\n    });\n}\n\nfunction convertUserInfo(user) {\n  return {\n    id: user.id,\n    name: user.name,\n    email: user.email,\n    profileImageUrl: user.profile_image_url,\n    apiKey: user.api_key,\n    isDisabled: user.is_disabled,\n    isInvitationPending: user.is_invitation_pending,\n  };\n}\n\nfunction regenerateApiKey(user) {\n  return $http\n    .post(`api/users/${user.id}/regenerate_api_key`)\n    .then(({ data }) => {\n      toastr.success('The API Key has been updated.');\n      return data.api_key;\n    })\n    .catch((response = {}) => {\n      const message =\n        response.data && response.data.message\n          ? response.data.message\n          : `Failed regenerating API Key: ${response.statusText}`;\n\n      toastr.error(message);\n    });\n}\n\nfunction sendPasswordReset(user) {\n  return $http\n    .post(`api/users/${user.id}/reset_password`)\n    .then(({ data }) => {\n      if (clientConfig.mailSettingsMissing) {\n        toastr.warning('The mail server is not configured.');\n        return data.reset_link;\n      }\n      toastr.success('Password reset email sent.');\n    })\n    .catch((response = {}) => {\n      const message =\n        response.message\n          ? response.message\n          : `Failed to send password reset email: ${response.statusText}`;\n\n      toastr.error(message);\n    });\n}\n\nfunction resendInvitation(user) {\n  return $http\n    .post(`api/users/${user.id}/invite`)\n    .then(({ data }) => {\n      if (clientConfig.mailSettingsMissing) {\n        toastr.warning('The mail server is not configured.');\n        return data.invite_link;\n      }\n      toastr.success('Invitation sent.');\n    })\n    .catch((response = {}) => {\n      const message =\n        response.message\n          ? response.message\n          : `Failed to resend invitation: ${response.statusText}`;\n\n      toastr.error(message);\n    });\n}\n\nfunction UserService($resource) {\n  const actions = {\n    get: { method: 'GET' },\n    create: { method: 'POST' },\n    save: { method: 'POST' },\n    query: { method: 'GET', isArray: false },\n    delete: { method: 'DELETE' },\n    disable: { method: 'POST', url: 'api/users/:id/disable' },\n    enable: { method: 'DELETE', url: 'api/users/:id/disable' },\n  };\n\n  const UserResource = $resource('api/users/:id', { id: '@id' }, actions);\n\n  UserResource.enableUser = enableUser;\n  UserResource.disableUser = disableUser;\n  UserResource.deleteUser = deleteUser;\n  UserResource.convertUserInfo = convertUserInfo;\n  UserResource.regenerateApiKey = regenerateApiKey;\n  UserResource.sendPasswordReset = sendPasswordReset;\n  UserResource.resendInvitation = resendInvitation;\n\n  return UserResource;\n}\n\nexport default function init(ngModule) {\n  ngModule.factory('User', UserService);\n\n  ngModule.run(($injector) => {\n    User = $injector.get('User');\n  });\n}\n\ninit.init = true;\n","import moment from 'moment';\nimport debug from 'debug';\nimport Mustache from 'mustache';\nimport {\n  zipObject, isEmpty, map, filter, includes, union, uniq, has,\n  isNull, isUndefined, isArray, isObject, identity, extend, each,\n} from 'lodash';\n\nMustache.escape = identity; // do not html-escape values\n\nexport let Query = null; // eslint-disable-line import/no-mutable-exports\n\nconst logger = debug('redash:services:query');\n\nconst DATETIME_FORMATS = {\n  // eslint-disable-next-line quote-props\n  'date': 'YYYY-MM-DD',\n  'date-range': 'YYYY-MM-DD',\n  'datetime-local': 'YYYY-MM-DD HH:mm',\n  'datetime-range': 'YYYY-MM-DD HH:mm',\n  'datetime-with-seconds': 'YYYY-MM-DD HH:mm:ss',\n  'datetime-range-with-seconds': 'YYYY-MM-DD HH:mm:ss',\n};\n\nfunction normalizeNumericValue(value, defaultValue = null) {\n  const result = parseFloat(value);\n  return isFinite(result) ? result : defaultValue;\n}\n\nfunction collectParams(parts) {\n  let parameters = [];\n\n  parts.forEach((part) => {\n    if (part[0] === 'name' || part[0] === '&') {\n      parameters.push(part[1].split('.')[0]);\n    } else if (part[0] === '#') {\n      parameters = union(parameters, collectParams(part[4]));\n    }\n  });\n\n  return parameters;\n}\n\nfunction isDateParameter(paramType) {\n  return includes(['date', 'datetime-local', 'datetime-with-seconds'], paramType);\n}\n\nfunction isDateRangeParameter(paramType) {\n  return includes(['date-range', 'datetime-range', 'datetime-range-with-seconds'], paramType);\n}\n\nexport class Parameter {\n  constructor(parameter) {\n    this.title = parameter.title;\n    this.name = parameter.name;\n    this.type = parameter.type;\n    this.useCurrentDateTime = parameter.useCurrentDateTime;\n    this.global = parameter.global; // backward compatibility in Widget service\n    this.enumOptions = parameter.enumOptions;\n    this.queryId = parameter.queryId;\n\n    // Used for meta-parameters (i.e. dashboard-level params)\n    this.locals = [];\n\n    // validate value and init internal state\n    this.setValue(parameter.value);\n\n    // Used for URL serialization\n    Object.defineProperty(this, 'urlPrefix', {\n      configurable: true,\n      enumerable: false, // don't save it\n      writable: true,\n      value: 'p_',\n    });\n  }\n\n  clone() {\n    return new Parameter(this);\n  }\n\n  get isEmpty() {\n    return isNull(this.getValue());\n  }\n\n  getValue() {\n    return this.constructor.getValue(this);\n  }\n\n  static getValue(param) {\n    const { value, type, useCurrentDateTime } = param;\n    const isEmptyValue = isNull(value) || isUndefined(value) || (value === '');\n    if (isEmptyValue) {\n      if (\n        includes(['date', 'datetime-local', 'datetime-with-seconds'], type) &&\n        useCurrentDateTime\n      ) {\n        return moment().format(DATETIME_FORMATS[type]);\n      }\n      return null; // normalize empty value\n    }\n    if (type === 'number') {\n      return normalizeNumericValue(value, null); // normalize empty value\n    }\n    return value;\n  }\n\n  setValue(value) {\n    if (isDateRangeParameter(this.type)) {\n      this.value = null;\n      this.$$value = null;\n\n      if (isObject(value) && !isArray(value)) {\n        value = [value.start, value.end];\n      }\n\n      if (isArray(value) && (value.length === 2)) {\n        value = [moment(value[0]), moment(value[1])];\n        if (value[0].isValid() && value[1].isValid()) {\n          this.value = {\n            start: value[0].format(DATETIME_FORMATS[this.type]),\n            end: value[1].format(DATETIME_FORMATS[this.type]),\n          };\n          this.$$value = value;\n        }\n      }\n    } else if (isDateParameter(this.type)) {\n      this.value = null;\n      this.$$value = null;\n\n      value = moment(value);\n      if (value.isValid()) {\n        this.value = value.format(DATETIME_FORMATS[this.type]);\n        this.$$value = value;\n      }\n    } else if (this.type === 'number') {\n      this.value = value;\n      this.$$value = normalizeNumericValue(value, null);\n    } else {\n      this.value = value;\n      this.$$value = value;\n    }\n\n    if (isArray(this.locals)) {\n      each(this.locals, (local) => {\n        local.setValue(this.value);\n      });\n    }\n\n    return this;\n  }\n\n  get normalizedValue() {\n    return this.$$value;\n  }\n\n  // TODO: Remove this property when finally moved to React\n  get ngModel() {\n    return this.normalizedValue;\n  }\n\n  set ngModel(value) {\n    this.setValue(value);\n  }\n\n  toUrlParams() {\n    if (this.isEmpty) {\n      return {};\n    }\n    const prefix = this.urlPrefix;\n    if (isDateRangeParameter(this.type)) {\n      return {\n        [`${prefix}${this.name}.start`]: this.value.start,\n        [`${prefix}${this.name}.end`]: this.value.end,\n      };\n    }\n    return {\n      [`${prefix}${this.name}`]: this.value,\n    };\n  }\n\n  fromUrlParams(query) {\n    const prefix = this.urlPrefix;\n    if (isDateRangeParameter(this.type)) {\n      const keyStart = `${prefix}${this.name}.start`;\n      const keyEnd = `${prefix}${this.name}.end`;\n      if (has(query, keyStart) && has(query, keyEnd)) {\n        this.setValue([query[keyStart], query[keyEnd]]);\n      }\n    } else {\n      const key = `${prefix}${this.name}`;\n      if (has(query, key)) {\n        this.setValue(query[key]);\n      }\n    }\n  }\n\n  toQueryTextFragment() {\n    if (isDateRangeParameter(this.type)) {\n      return `{{ ${this.name}.start }} {{ ${this.name}.end }}`;\n    }\n    return `{{ ${this.name} }}`;\n  }\n}\n\nclass Parameters {\n  constructor(query, queryString) {\n    this.query = query;\n    this.updateParameters();\n    this.initFromQueryString(queryString);\n  }\n\n  parseQuery() {\n    let parameters = [];\n    try {\n      const parts = Mustache.parse(this.query.query);\n      parameters = uniq(collectParams(parts));\n    } catch (e) {\n      logger('Failed parsing parameters: ', e);\n      // Return current parameters so we don't reset the list\n      parameters = map(this.query.options.parameters, i => i.name);\n    }\n    return parameters;\n  }\n\n  updateParameters() {\n    if (this.query.query === this.cachedQueryText) {\n      return;\n    }\n\n    this.cachedQueryText = this.query.query;\n    const parameterNames = this.parseQuery();\n\n    this.query.options.parameters = this.query.options.parameters || [];\n\n    const parametersMap = {};\n    this.query.options.parameters.forEach((param) => {\n      parametersMap[param.name] = param;\n    });\n\n    parameterNames.forEach((param) => {\n      if (!has(parametersMap, param)) {\n        this.query.options.parameters.push(new Parameter({\n          title: param,\n          name: param,\n          type: 'text',\n          value: null,\n          global: false,\n        }));\n      }\n    });\n\n    const parameterExists = p => includes(parameterNames, p.name);\n    this.query.options.parameters = this.query.options.parameters.filter(parameterExists).map(p => new Parameter(p));\n  }\n\n  initFromQueryString(query) {\n    this.get().forEach((param) => {\n      param.fromUrlParams(query);\n    });\n  }\n\n  get() {\n    this.updateParameters();\n    return this.query.options.parameters;\n  }\n\n  add(parameterDef) {\n    this.query.options.parameters = this.query.options.parameters\n      .filter(p => p.name !== parameterDef.name);\n    const param = new Parameter(parameterDef);\n    this.query.options.parameters.push(param);\n    return param;\n  }\n\n  getMissing() {\n    return map(filter(this.get(), p => p.isEmpty), i => i.title);\n  }\n\n  isRequired() {\n    return !isEmpty(this.get());\n  }\n\n  getValues() {\n    const params = this.get();\n    return zipObject(map(params, i => i.name), map(params, i => i.getValue()));\n  }\n}\n\nfunction QueryResultErrorFactory($q) {\n  class QueryResultError {\n    constructor(errorMessage) {\n      this.errorMessage = errorMessage;\n      this.updatedAt = moment.utc();\n    }\n\n    getUpdatedAt() {\n      return this.updatedAt;\n    }\n\n    getError() {\n      return this.errorMessage;\n    }\n\n    toPromise() {\n      return $q.reject(this);\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getStatus() {\n      return 'failed';\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getData() {\n      return null;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getLog() {\n      return null;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getChartData() {\n      return null;\n    }\n  }\n\n  return QueryResultError;\n}\n\nfunction QueryResource(\n  $resource,\n  $http,\n  $location,\n  $q,\n  currentUser,\n  QueryResultError,\n  QueryResult,\n) {\n  const QueryService = $resource(\n    'api/queries/:id',\n    { id: '@id' },\n    {\n      recent: {\n        method: 'get',\n        isArray: true,\n        url: 'api/queries/recent',\n      },\n      archive: {\n        method: 'get',\n        isArray: false,\n        url: 'api/queries/archive',\n      },\n      query: {\n        isArray: false,\n      },\n      myQueries: {\n        method: 'get',\n        isArray: false,\n        url: 'api/queries/my',\n      },\n      fork: {\n        method: 'post',\n        isArray: false,\n        url: 'api/queries/:id/fork',\n        params: { id: '@id' },\n      },\n      resultById: {\n        method: 'get',\n        isArray: false,\n        url: 'api/queries/:id/results.json',\n      },\n      dropdownOptions: {\n        method: 'get',\n        isArray: true,\n        url: 'api/queries/:id/dropdown',\n      },\n      favorites: {\n        method: 'get',\n        isArray: false,\n        url: 'api/queries/favorites',\n      },\n      favorite: {\n        method: 'post',\n        isArray: false,\n        url: 'api/queries/:id/favorite',\n        transformRequest: [() => ''], // body not needed\n      },\n      unfavorite: {\n        method: 'delete',\n        isArray: false,\n        url: 'api/queries/:id/favorite',\n        transformRequest: [() => ''], // body not needed\n      },\n    },\n  );\n\n  QueryService.newQuery = function newQuery() {\n    return new QueryService({\n      query: '',\n      name: 'New Query',\n      schedule: null,\n      user: currentUser,\n      options: {},\n    });\n  };\n\n  QueryService.format = function formatQuery(syntax, query) {\n    if (syntax === 'json') {\n      try {\n        const formatted = JSON.stringify(JSON.parse(query), ' ', 4);\n        return $q.resolve(formatted);\n      } catch (err) {\n        return $q.reject(String(err));\n      }\n    } else if (syntax === 'sql') {\n      return $http.post('api/queries/format', { query }).then(response => response.data.query);\n    } else {\n      return $q.reject('Query formatting is not supported for your data source syntax.');\n    }\n  };\n\n  QueryService.prototype.getSourceLink = function getSourceLink() {\n    return `/queries/${this.id}/source`;\n  };\n\n  QueryService.prototype.isNew = function isNew() {\n    return this.id === undefined;\n  };\n\n  QueryService.prototype.hasDailySchedule = function hasDailySchedule() {\n    return this.schedule && this.schedule.match(/\\d\\d:\\d\\d/) !== null;\n  };\n\n  QueryService.prototype.scheduleInLocalTime = function scheduleInLocalTime() {\n    const parts = this.schedule.split(':');\n    return moment\n      .utc()\n      .hour(parts[0])\n      .minute(parts[1])\n      .local()\n      .format('HH:mm');\n  };\n\n  QueryService.prototype.hasResult = function hasResult() {\n    return !!(this.latest_query_data || this.latest_query_data_id);\n  };\n\n  QueryService.prototype.paramsRequired = function paramsRequired() {\n    return this.getParameters().isRequired();\n  };\n\n  QueryService.prototype.prepareQueryResultExecution = function prepareQueryResultExecution(execute, maxAge) {\n    if (!this.query) {\n      return new QueryResultError(\"Can't execute empty query.\");\n    }\n\n    const parameters = this.getParameters();\n    const missingParams = parameters.getMissing();\n\n    if (missingParams.length > 0) {\n      let paramsWord = 'parameter';\n      let valuesWord = 'value';\n      if (missingParams.length > 1) {\n        paramsWord = 'parameters';\n        valuesWord = 'values';\n      }\n\n      return new QueryResult({\n        job: {\n          error: `missing ${valuesWord} for ${missingParams.join(', ')} ${paramsWord}.`,\n          status: 4,\n        },\n      });\n    }\n\n    if (parameters.isRequired()) {\n      // Need to clear latest results, to make sure we don't use results for different params.\n      this.latest_query_data = null;\n      this.latest_query_data_id = null;\n    }\n\n    if (this.latest_query_data && maxAge !== 0) {\n      if (!this.queryResult) {\n        this.queryResult = new QueryResult({\n          query_result: this.latest_query_data,\n        });\n      }\n    } else if (this.latest_query_data_id && maxAge !== 0) {\n      if (!this.queryResult) {\n        this.queryResult = QueryResult.getById(this.latest_query_data_id);\n      }\n    } else if (this.data_source_id) {\n      this.queryResult = execute();\n    } else {\n      return new QueryResultError('Please select data source to run this query.');\n    }\n\n    return this.queryResult;\n  };\n\n  QueryService.prototype.getQueryResult = function getQueryResult(maxAge) {\n    const execute = () => QueryResult.getByQueryId(this.id, this.getParameters().getValues(), maxAge);\n    return this.prepareQueryResultExecution(execute, maxAge);\n  };\n\n  QueryService.prototype.getQueryResultByText = function getQueryResultByText(maxAge, selectedQueryText) {\n    const queryText = selectedQueryText || this.query;\n    const parameters = this.getParameters().getValues();\n    const execute = () => QueryResult.get(this.data_source_id, queryText, parameters, maxAge, this.id);\n    return this.prepareQueryResultExecution(execute, maxAge);\n  };\n\n  QueryService.prototype.getUrl = function getUrl(source, hash) {\n    let url = `queries/${this.id}`;\n\n    if (source) {\n      url += '/source';\n    }\n\n    let params = {};\n    if (this.getParameters().isRequired()) {\n      this.getParametersDefs().forEach((param) => {\n        extend(params, param.toUrlParams());\n      });\n    }\n    params = map(params, (value, name) => `${encodeURIComponent(name)}=${encodeURIComponent(value)}`).join('&');\n\n    if (params !== '') {\n      url += `?${params}`;\n    }\n\n    if (hash) {\n      url += `#${hash}`;\n    }\n\n    return url;\n  };\n\n  QueryService.prototype.getQueryResultPromise = function getQueryResultPromise() {\n    return this.getQueryResult().toPromise();\n  };\n\n  QueryService.prototype.getParameters = function getParameters() {\n    if (!this.$parameters) {\n      this.$parameters = new Parameters(this, $location.search());\n    }\n\n    return this.$parameters;\n  };\n\n  QueryService.prototype.getParametersDefs = function getParametersDefs() {\n    return this.getParameters().get();\n  };\n\n  return QueryService;\n}\n\nexport default function init(ngModule) {\n  ngModule.factory('QueryResultError', QueryResultErrorFactory);\n  ngModule.factory('Query', QueryResource);\n\n  ngModule.run(($injector) => {\n    Query = $injector.get('Query');\n  });\n}\n\ninit.init = true;\n","import { omit, debounce } from 'lodash';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport hoistNonReactStatics from 'hoist-non-react-statics';\nimport { $route, $routeParams } from '@/services/ng';\nimport { clientConfig } from '@/services/auth';\nimport { StateStorage } from './classes/StateStorage';\n\nexport const ControllerType = PropTypes.shape({\n  // values of props declared by wrapped component, current route's locals (`resolve: { ... }`) and title\n  params: PropTypes.object.isRequired,\n\n  isLoaded: PropTypes.bool.isRequired,\n  isEmpty: PropTypes.bool.isRequired,\n\n  // search\n  searchTerm: PropTypes.string,\n  updateSearch: PropTypes.func.isRequired, // (searchTerm: string) => void\n\n  // tags\n  selectedTags: PropTypes.array.isRequired,\n  updateSelectedTags: PropTypes.func.isRequired, // (selectedTags: array of tags) => void\n\n  // sorting\n  orderByField: PropTypes.string,\n  orderByReverse: PropTypes.bool.isRequired,\n  toggleSorting: PropTypes.func.isRequired, // (orderByField: string) => void\n\n  // pagination\n  page: PropTypes.number.isRequired,\n  itemsPerPage: PropTypes.number.isRequired,\n  totalItemsCount: PropTypes.number.isRequired,\n  pageSizeOptions: PropTypes.arrayOf(PropTypes.number).isRequired,\n  pageItems: PropTypes.array.isRequired,\n  updatePagination: PropTypes.func.isRequired, // ({ page: number, itemsPerPage: number }) => void\n\n  handleError: PropTypes.func.isRequired, // (error) => void\n});\n\nexport function wrap(WrappedComponent, itemsSource, stateStorage) {\n  class ItemsListWrapper extends React.Component {\n    static propTypes = {\n      ...omit(WrappedComponent.propTypes, ['controller']),\n      onError: PropTypes.func,\n      children: PropTypes.node,\n    };\n\n    static defaultProps = {\n      ...omit(WrappedComponent.defaultProps, ['controller']),\n      onError: (error) => {\n        // Allow calling chain to roll up, and then throw the error in global context\n        setTimeout(() => { throw error; });\n      },\n      children: null,\n    };\n\n    constructor(props) {\n      super(props);\n\n      stateStorage = stateStorage || new StateStorage();\n      itemsSource.setState({ ...stateStorage.getState(), validate: false });\n      itemsSource.getCallbackContext = () => this.state;\n\n      itemsSource.onBeforeUpdate = () => {\n        const state = itemsSource.getState();\n        stateStorage.setState(state);\n        this.setState(this.getState({ ...state, isLoaded: false }));\n      };\n\n      itemsSource.onAfterUpdate = () => {\n        const state = itemsSource.getState();\n        this.setState(this.getState({ ...state, isLoaded: true }));\n      };\n\n      itemsSource.onError = error => this.props.onError(error);\n\n      const initialState = this.getState({ ...itemsSource.getState(), isLoaded: false });\n      const { updatePagination, toggleSorting, updateSearch, updateSelectedTags, update, handleError } = itemsSource;\n      this.state = {\n        ...initialState,\n        toggleSorting, // eslint-disable-line react/no-unused-state\n        updateSearch: debounce(updateSearch, 200), // eslint-disable-line react/no-unused-state\n        updateSelectedTags, // eslint-disable-line react/no-unused-state\n        updatePagination, // eslint-disable-line react/no-unused-state\n        update, // eslint-disable-line react/no-unused-state\n        handleError, // eslint-disable-line react/no-unused-state\n      };\n    }\n\n    componentDidMount() {\n      this.state.update();\n    }\n\n    componentWillUnmount() {\n      itemsSource.onBeforeUpdate = () => {};\n      itemsSource.onAfterUpdate = () => {};\n      itemsSource.onError = () => {};\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getState({ isLoaded, totalCount, pageItems, ...rest }) {\n      const params = {\n        // Add some properties of current route (`$resolve`, title, route params)\n        // ANGULAR_REMOVE_ME Revisit when some React router will be used\n        title: $route.current.title,\n        ...$routeParams,\n        ...omit($route.current.locals, ['$scope', '$template']),\n\n        // Add to params all props except of own ones\n        ...omit(this.props, ['onError', 'children']),\n      };\n      return {\n        ...rest,\n\n        params,\n\n        isLoaded,\n        isEmpty: !isLoaded || (totalCount === 0),\n        totalItemsCount: isLoaded ? totalCount : 0,\n        pageSizeOptions: clientConfig.pageSizeOptions,\n        pageItems: isLoaded ? pageItems : [],\n      };\n    }\n\n    render() {\n      // don't pass own props to wrapped component\n      const { children, onError, ...props } = this.props;\n      props.controller = this.state;\n      return <WrappedComponent {...props}>{ children }</WrappedComponent>;\n    }\n  }\n\n  // Copy static methods from `WrappedComponent`\n  hoistNonReactStatics(ItemsListWrapper, WrappedComponent);\n\n  return ItemsListWrapper;\n}\n","import { isFunction, isString, filter, map } from 'lodash';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Input from 'antd/lib/input';\nimport Select from 'antd/lib/select';\nimport { TagsList } from '@/components/TagsList';\n\n/*\n    SearchInput\n */\n\nexport function SearchInput({ placeholder, value, showIcon, onChange }) {\n  const InputControl = showIcon ? Input.Search : Input;\n  return (\n    <div className=\"m-b-10\">\n      <InputControl\n        className=\"form-control\"\n        placeholder={placeholder}\n        defaultValue={value}\n        onChange={event => onChange(event.target.value)}\n        autoFocus\n      />\n    </div>\n  );\n}\n\nSearchInput.propTypes = {\n  placeholder: PropTypes.string,\n  value: PropTypes.string.isRequired,\n  showIcon: PropTypes.bool,\n  onChange: PropTypes.func.isRequired,\n};\n\nSearchInput.defaultProps = {\n  placeholder: 'Search...',\n  showIcon: false,\n};\n\n/*\n    Menu\n */\n\nexport function Menu({ items, selected }) {\n  items = filter(\n    items,\n    item => (isFunction(item.isAvailable) ? item.isAvailable() : true),\n  );\n  if (items.length === 0) {\n    return null;\n  }\n  return (\n    <div className=\"list-group m-b-10 tags-list tiled\">\n      {map(items, item => (\n        <a\n          key={item.key}\n          href={item.href}\n          className={classNames('list-group-item', { active: selected === item.key })}\n        >\n          {\n            isString(item.icon) && (item.icon !== '') &&\n            <span className=\"btn-favourite m-r-5\"><i className={item.icon} aria-hidden=\"true\" /></span>\n          }\n          {isFunction(item.icon) && (item.icon(item) || null)}\n          {item.title}\n        </a>\n      ))}\n    </div>\n  );\n}\n\nMenu.propTypes = {\n  items: PropTypes.arrayOf(PropTypes.shape({\n    key: PropTypes.string.isRequired,\n    href: PropTypes.string.isRequired,\n    title: PropTypes.string.isRequired,\n    icon: PropTypes.func, // function to render icon\n    isAvailable: PropTypes.func, // return `true` to show item and `false` to hide; if omitted: show item\n  })),\n  selected: PropTypes.string,\n};\n\nMenu.defaultProps = {\n  items: [],\n  selected: null,\n};\n\n/*\n    MenuIcon\n */\n\nexport function MenuIcon({ icon }) {\n  return <span className=\"btn-favourite m-r-5\"><i className={icon} aria-hidden=\"true\" /></span>;\n}\n\nMenuIcon.propTypes = {\n  icon: PropTypes.string.isRequired,\n};\n\n/*\n    ProfileImage\n */\n\nexport function ProfileImage({ user }) {\n  if (!isString(user.profile_image_url) || (user.profile_image_url === '')) {\n    return null;\n  }\n  return <img src={user.profile_image_url} className=\"profile__image--navbar m-r-5\" width=\"13\" alt={user.name} />;\n}\n\nProfileImage.propTypes = {\n  user: PropTypes.shape({\n    profile_image_url: PropTypes.string,\n    name: PropTypes.string,\n  }).isRequired,\n};\n\n/*\n    Tags\n */\n\nexport function Tags({ url, onChange }) {\n  if (url === '') {\n    return null;\n  }\n  return (\n    <div className=\"m-b-10\">\n      <TagsList tagsUrl={url} onUpdate={onChange} />\n    </div>\n  );\n}\n\nTags.propTypes = {\n  url: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n};\n\n/*\n    PageSizeSelect\n */\n\nexport function PageSizeSelect({ options, value, onChange }) {\n  return (\n    <div className=\"m-b-10\">\n      <div className=\"m-b-10\">\n        <Select\n          className=\"w-100\"\n          defaultValue={value}\n          onChange={onChange}\n        >\n          {map(options, option => (\n            <Select.Option key={option} value={option}>{ option } results</Select.Option>\n          ))}\n        </Select>\n      </div>\n    </div>\n  );\n}\n\nPageSizeSelect.propTypes = {\n  options: PropTypes.arrayOf(PropTypes.number).isRequired,\n  value: PropTypes.number.isRequired,\n  onChange: PropTypes.func.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\n\nimport './content-with-sidebar.less';\n\nconst propTypes = {\n  className: PropTypes.string,\n  children: PropTypes.node,\n};\n\nconst defaultProps = {\n  className: null,\n  children: null,\n};\n\n// Sidebar\n\nfunction Sidebar({ className, children, ...props }) {\n  return (\n    <div className={classNames('layout-sidebar', className)} {...props}>\n      <div>{children}</div>\n    </div>\n  );\n}\n\nSidebar.propTypes = propTypes;\nSidebar.defaultProps = defaultProps;\n\n// Content\n\nfunction Content({ className, children, ...props }) {\n  return (\n    <div className={classNames('layout-content', className)} {...props}>\n      <div>{children}</div>\n    </div>\n  );\n}\n\nContent.propTypes = propTypes;\nContent.defaultProps = defaultProps;\n\n// Layout\n\nexport default function Layout({ className, children, ...props }) {\n  return <div className={classNames('layout-with-sidebar', className)} {...props}>{children}</div>;\n}\n\nLayout.propTypes = propTypes;\nLayout.defaultProps = defaultProps;\n\nLayout.Sidebar = Sidebar;\nLayout.Content = Content;\n","export let Group = null; // eslint-disable-line import/no-mutable-exports\n\nfunction GroupService($resource) {\n  const actions = {\n    get: { method: 'GET', cache: false, isArray: false },\n    query: { method: 'GET', cache: false, isArray: true },\n\n    members: {\n      method: 'GET', cache: false, isArray: true, url: 'api/groups/:id/members',\n    },\n    addMember: {\n      method: 'POST', url: 'api/groups/:id/members',\n    },\n    removeMember: {\n      method: 'DELETE', url: 'api/groups/:id/members/:userId',\n    },\n\n    dataSources: {\n      method: 'GET', cache: false, isArray: true, url: 'api/groups/:id/data_sources',\n    },\n    addDataSource: {\n      method: 'POST', url: 'api/groups/:id/data_sources',\n    },\n    removeDataSource: {\n      method: 'DELETE', url: 'api/groups/:id/data_sources/:dataSourceId',\n    },\n    updateDataSource: {\n      method: 'POST', url: 'api/groups/:id/data_sources/:dataSourceId',\n    },\n  };\n  return $resource('api/groups/:id', { id: '@id' }, actions);\n}\n\nexport default function init(ngModule) {\n  ngModule.factory('Group', GroupService);\n\n  ngModule.run(($injector) => {\n    Group = $injector.get('Group');\n  });\n}\n\ninit.init = true;\n","import React from 'react';\nimport { BigMessage } from '@/components/BigMessage';\n\n// Default \"loading\" message for list pages\nexport default function LoadingState(props) {\n  return (\n    <div className=\"text-center\">\n      <BigMessage icon=\"fa-spinner fa-2x fa-pulse\" message=\"Loading...\" {...props} />\n    </div>\n  );\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { react2angular } from 'react2angular';\n\nexport function BigMessage({ message, icon, children, className }) {\n  return (\n    <div className={'p-15 text-center ' + className}>\n      <h3 className=\"m-t-0 m-b-0\">\n        <i className={'fa ' + icon} />\n      </h3>\n      <br />\n      {message}\n      {children}\n    </div>\n  );\n}\n\nBigMessage.propTypes = {\n  message: PropTypes.string,\n  icon: PropTypes.string.isRequired,\n  children: PropTypes.node,\n  className: PropTypes.string,\n};\n\nBigMessage.defaultProps = {\n  message: '',\n  children: null,\n  className: 'tiled bg-white',\n};\n\nexport default function init(ngModule) {\n  ngModule.component('bigMessage', react2angular(BigMessage));\n}\n\ninit.init = true;\n","import { defaults } from 'lodash';\nimport { clientConfig } from '@/services/auth';\nimport { $location } from '@/services/ng';\nimport { parse as parseOrderBy, compile as compileOrderBy } from './Sorter';\n\nexport class StateStorage {\n  constructor(state = {}) {\n    this._state = { ...state };\n  }\n\n  getState() {\n    return defaults(this._state, {\n      page: 1,\n      itemsPerPage: clientConfig.pageSize,\n      orderByField: 'created_at',\n      orderByReverse: false,\n      searchTerm: '',\n      tags: [],\n    });\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  setState() {\n  }\n}\n\nexport class UrlStateStorage extends StateStorage {\n  getState() {\n    const defaultState = super.getState();\n    const params = $location.search();\n\n    const searchTerm = params.q || '';\n\n    // in search mode order by should be explicitly specified in url, otherwise use default\n    const defaultOrderBy = searchTerm !== '' ? '' : compileOrderBy(defaultState.orderByField, defaultState.orderByReverse);\n\n    const {\n      field: orderByField,\n      reverse: orderByReverse,\n    } = parseOrderBy(params.order || defaultOrderBy);\n\n    return {\n      page: parseInt(params.page, 10) || defaultState.page,\n      itemsPerPage: parseInt(params.page_size, 10) || defaultState.itemsPerPage,\n      orderByField,\n      orderByReverse,\n      searchTerm,\n    };\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  setState({ page, itemsPerPage, orderByField, orderByReverse, searchTerm }) {\n    $location.search({\n      page,\n      page_size: itemsPerPage,\n      order: compileOrderBy(orderByField, orderByReverse),\n      q: searchTerm !== '' ? searchTerm : null,\n    });\n  }\n}\n","import { isFunction, extend, omit, sortBy } from 'lodash';\n\nclass SettingsMenuItem {\n  constructor(menuItem) {\n    extend(\n      this,\n      { pathPrefix: `/${menuItem.path}` },\n      omit(menuItem, ['isActive']),\n    );\n    if (isFunction(menuItem.isActive)) {\n      this.isActive = menuItem.isActive;\n    }\n  }\n\n  isActive(path) {\n    return path.startsWith(this.pathPrefix);\n  }\n}\n\nclass SettingsMenu {\n  constructor() {\n    this.items = [];\n  }\n\n  add(item) {\n    this.items.push(new SettingsMenuItem(item));\n    this.items = sortBy(this.items, 'order');\n  }\n}\n\nexport default new SettingsMenu();\n","import moment from 'moment/moment';\nimport numeral from 'numeral';\nimport _ from 'lodash';\n\nnumeral.options.scalePercentBy100 = false;\n\n// eslint-disable-next-line\nconst urlPattern = /(^|[\\s\\n]|<br\\/?>)((?:https?|ftp):\\/\\/[\\-A-Z0-9+\\u0026\\u2019@#\\/%?=()~_|!:,.;]*[\\-A-Z0-9+\\u0026@#\\/%=~()_|])/gi;\n\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction createDefaultFormatter(highlightLinks) {\n  if (highlightLinks) {\n    return (value) => {\n      if (_.isString(value)) {\n        value = value.replace(urlPattern, '$1<a href=\"$2\" target=\"_blank\">$2</a>');\n      }\n      return value;\n    };\n  }\n  return value => value;\n}\n\nfunction createDateTimeFormatter(format) {\n  if (_.isString(format) && (format !== '')) {\n    return (value) => {\n      if (value && moment.isMoment(value)) {\n        return value.format(format);\n      }\n      return value;\n    };\n  }\n  return value => value;\n}\n\nfunction createBooleanFormatter(values) {\n  if (_.isArray(values)) {\n    if (values.length >= 2) {\n      // Both `true` and `false` specified\n      return (value) => {\n        if (value === null || value === undefined) {\n          return '';\n        }\n        return '' + values[value ? 1 : 0];\n      };\n    } else if (values.length === 1) {\n      // Only `true`\n      return value => (value ? values[0] : '');\n    }\n  }\n  return (value) => {\n    if (value === null || value === undefined) {\n      return '';\n    }\n    return value ? 'true' : 'false';\n  };\n}\n\nfunction createNumberFormatter(format) {\n  if (_.isString(format) && (format !== '')) {\n    const n = numeral(0); // cache `numeral` instance\n    return value => (value === null || value === '' ? '' : n.set(value).format(format));\n  }\n  return value => value;\n}\n\nexport function createFormatter(column) {\n  switch (column.displayAs) {\n    case 'number': return createNumberFormatter(column.numberFormat);\n    case 'boolean': return createBooleanFormatter(column.booleanValues);\n    case 'datetime': return createDateTimeFormatter(column.dateTimeFormat);\n    default: return createDefaultFormatter(column.allowHTML && column.highlightLinks);\n  }\n}\n\nexport function formatSimpleTemplate(str, data) {\n  if (!_.isString(str)) {\n    return '';\n  }\n  return str.replace(/{{\\s*([^\\s]+?)\\s*}}/g, (match, prop) => {\n    if (hasOwnProperty.call(data, prop) && !_.isUndefined(data[prop])) {\n      return data[prop];\n    }\n    return match;\n  });\n}\n","/* eslint-disable react/no-multi-comp */\n\nimport { isString, extend, each, map, includes, findIndex, find, fromPairs, clone, isEmpty } from 'lodash';\nimport React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Select from 'antd/lib/select';\nimport Table from 'antd/lib/table';\nimport Popover from 'antd/lib/popover';\nimport Button from 'antd/lib/button';\nimport Icon from 'antd/lib/icon';\nimport Tag from 'antd/lib/tag';\nimport Input from 'antd/lib/input';\nimport Radio from 'antd/lib/radio';\nimport Form from 'antd/lib/form';\nimport Tooltip from 'antd/lib/tooltip';\nimport { ParameterValueInput } from '@/components/ParameterValueInput';\nimport { ParameterMappingType } from '@/services/widget';\nimport { clientConfig } from '@/services/auth';\nimport { Query, Parameter } from '@/services/query';\nimport { HelpTrigger } from '@/components/HelpTrigger';\n\nimport './ParameterMappingInput.less';\n\nconst { Option } = Select;\n\nexport const MappingType = {\n  DashboardAddNew: 'dashboard-add-new',\n  DashboardMapToExisting: 'dashboard-map-to-existing',\n  WidgetLevel: 'widget-level',\n  StaticValue: 'static-value',\n};\n\nexport function parameterMappingsToEditableMappings(mappings, parameters, existingParameterNames = []) {\n  return map(mappings, (mapping) => {\n    const result = extend({}, mapping);\n    const alreadyExists = includes(existingParameterNames, mapping.mapTo);\n    result.param = find(parameters, p => p.name === mapping.name);\n    switch (mapping.type) {\n      case ParameterMappingType.DashboardLevel:\n        result.type = alreadyExists ? MappingType.DashboardMapToExisting : MappingType.DashboardAddNew;\n        result.value = null;\n        break;\n      case ParameterMappingType.StaticValue:\n        result.type = MappingType.StaticValue;\n        result.param = result.param.clone();\n        result.param.setValue(result.value);\n        break;\n      case ParameterMappingType.WidgetLevel:\n        result.type = MappingType.WidgetLevel;\n        result.value = null;\n        break;\n      // no default\n    }\n    return result;\n  });\n}\n\nexport function editableMappingsToParameterMappings(mappings) {\n  return fromPairs(map( // convert to map\n    mappings,\n    (mapping) => {\n      const result = extend({}, mapping);\n      switch (mapping.type) {\n        case MappingType.DashboardAddNew:\n          result.type = ParameterMappingType.DashboardLevel;\n          result.value = null;\n          break;\n        case MappingType.DashboardMapToExisting:\n          result.type = ParameterMappingType.DashboardLevel;\n          result.value = null;\n          break;\n        case MappingType.StaticValue:\n          result.type = ParameterMappingType.StaticValue;\n          result.param = mapping.param.clone();\n          result.param.setValue(result.value);\n          result.value = result.param.value;\n          break;\n        case MappingType.WidgetLevel:\n          result.type = ParameterMappingType.WidgetLevel;\n          result.value = null;\n          break;\n        // no default\n      }\n      delete result.param;\n      return [result.name, result];\n    },\n  ));\n}\n\nexport function synchronizeWidgetTitles(sourceMappings, widgets) {\n  const affectedWidgets = [];\n\n  each(sourceMappings, (sourceMapping) => {\n    if (sourceMapping.type === ParameterMappingType.DashboardLevel) {\n      each(widgets, (widget) => {\n        const widgetMappings = widget.options.parameterMappings;\n        each(widgetMappings, (widgetMapping) => {\n          // check if mapped to the same dashboard-level parameter\n          if (\n            (widgetMapping.type === ParameterMappingType.DashboardLevel) &&\n            (widgetMapping.mapTo === sourceMapping.mapTo)\n          ) {\n            // dirty check - update only when needed\n            if (widgetMapping.title !== sourceMapping.title) {\n              widgetMapping.title = sourceMapping.title;\n              affectedWidgets.push(widget);\n            }\n          }\n        });\n      });\n    }\n  });\n\n  return affectedWidgets;\n}\n\nexport class ParameterMappingInput extends React.Component {\n  static propTypes = {\n    mapping: PropTypes.object, // eslint-disable-line react/forbid-prop-types\n    existingParamNames: PropTypes.arrayOf(PropTypes.string),\n    onChange: PropTypes.func,\n    clientConfig: PropTypes.any, // eslint-disable-line react/forbid-prop-types\n    Query: PropTypes.any, // eslint-disable-line react/forbid-prop-types\n    inputError: PropTypes.string,\n  };\n\n  static defaultProps = {\n    mapping: {},\n    existingParamNames: [],\n    onChange: () => {},\n    clientConfig: null,\n    Query: null,\n    inputError: null,\n  };\n\n  formItemProps = {\n    labelCol: { span: 5 },\n    wrapperCol: { span: 16 },\n    className: 'form-item',\n  };\n\n  updateSourceType = (type) => {\n    let { mapping: { mapTo } } = this.props;\n    const { existingParamNames } = this.props;\n\n    // if mapped name doesn't already exists\n    // default to first select option\n    if (\n      type === MappingType.DashboardMapToExisting &&\n      !includes(existingParamNames, mapTo)\n    ) {\n      mapTo = existingParamNames[0];\n    }\n\n    this.updateParamMapping({ type, mapTo });\n  };\n\n  updateParamMapping = (update) => {\n    const { onChange, mapping } = this.props;\n    const newMapping = extend({}, mapping, update);\n    onChange(newMapping);\n  };\n\n  renderMappingTypeSelector() {\n    const noExisting = isEmpty(this.props.existingParamNames);\n    return (\n      <Radio.Group\n        value={this.props.mapping.type}\n        onChange={e => this.updateSourceType(e.target.value)}\n      >\n        <Radio className=\"radio\" value={MappingType.DashboardAddNew}>\n          New dashboard parameter\n        </Radio>\n        <Radio\n          className=\"radio\"\n          value={MappingType.DashboardMapToExisting}\n          disabled={noExisting}\n        >\n          Existing dashboard parameter{' '}\n          {noExisting ? (\n            <Tooltip title=\"There are no dashboard parameters corresponding to this data type\">\n              <Icon type=\"question-circle\" theme=\"filled\" />\n            </Tooltip>\n          ) : null }\n        </Radio>\n        <Radio className=\"radio\" value={MappingType.WidgetLevel}>\n          Widget parameter\n        </Radio>\n        <Radio className=\"radio\" value={MappingType.StaticValue}>\n          Static value\n        </Radio>\n      </Radio.Group>\n    );\n  }\n\n  renderDashboardAddNew() {\n    const { mapping: { mapTo } } = this.props;\n    return (\n      <Input\n        value={mapTo}\n        onChange={e => this.updateParamMapping({ mapTo: e.target.value })}\n      />\n    );\n  }\n\n  renderDashboardMapToExisting() {\n    const { mapping, existingParamNames } = this.props;\n\n    return (\n      <Select\n        value={mapping.mapTo}\n        onChange={mapTo => this.updateParamMapping({ mapTo })}\n        dropdownMatchSelectWidth={false}\n      >\n        {map(existingParamNames, name => (\n          <Option value={name} key={name}>{ name }</Option>\n        ))}\n      </Select>\n    );\n  }\n\n  renderStaticValue() {\n    const { mapping } = this.props;\n    return (\n      <ParameterValueInput\n        type={mapping.param.type}\n        value={mapping.param.normalizedValue}\n        enumOptions={mapping.param.enumOptions}\n        queryId={mapping.param.queryId}\n        onSelect={value => this.updateParamMapping({ value })}\n        clientConfig={this.props.clientConfig}\n        Query={this.props.Query}\n      />\n    );\n  }\n\n  renderInputBlock() {\n    const { mapping } = this.props;\n    switch (mapping.type) {\n      case MappingType.DashboardAddNew:\n        return [\n          'Key',\n          'Enter a new parameter keyword',\n          this.renderDashboardAddNew(),\n        ];\n      case MappingType.DashboardMapToExisting:\n        return [\n          'Key',\n          'Select from a list of existing parameters',\n          this.renderDashboardMapToExisting(),\n        ];\n      case MappingType.StaticValue:\n        return [\n          'Value',\n          null,\n          this.renderStaticValue(),\n        ];\n      default: return [];\n    }\n  }\n\n  render() {\n    const { inputError } = this.props;\n    const [label, help, input] = this.renderInputBlock();\n\n    return (\n      <Form layout=\"horizontal\">\n        <Form.Item label=\"Source\" {...this.formItemProps}>\n          {this.renderMappingTypeSelector()}\n        </Form.Item>\n        <Form.Item\n          style={{ height: 60, visibility: input ? 'visible' : 'hidden' }}\n          label={label}\n          {...this.formItemProps}\n          validateStatus={inputError ? 'error' : ''}\n          help={inputError || help} // empty space so line doesn't collapse\n        >\n          {input}\n        </Form.Item>\n      </Form>\n    );\n  }\n}\n\nclass MappingEditor extends React.Component {\n  static propTypes = {\n    mapping: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n    existingParamNames: PropTypes.arrayOf(PropTypes.string).isRequired,\n    onChange: PropTypes.func.isRequired,\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      visible: false,\n      mapping: clone(this.props.mapping),\n      inputError: null,\n    };\n  }\n\n  onVisibleChange = (visible) => {\n    if (visible) this.show(); else this.hide();\n  };\n\n  onChange = (mapping) => {\n    let inputError = null;\n\n    if (mapping.type === MappingType.DashboardAddNew) {\n      if (isEmpty(mapping.mapTo)) {\n        inputError = 'Keyword must have a value';\n      } else if (includes(this.props.existingParamNames, mapping.mapTo)) {\n        inputError = 'A parameter with this name already exists';\n      }\n    }\n\n    this.setState({ mapping, inputError });\n  };\n\n  save = () => {\n    this.props.onChange(this.props.mapping, this.state.mapping);\n    this.hide();\n  };\n\n  show = () => {\n    this.setState({\n      visible: true,\n      mapping: clone(this.props.mapping), // restore original state\n    });\n  };\n\n  hide = () => {\n    this.setState({ visible: false });\n  };\n\n  renderContent() {\n    const { mapping, inputError } = this.state;\n\n    return (\n      <div className=\"parameter-mapping-editor\">\n        <header>\n          Edit Source and Value <HelpTrigger type=\"VALUE_SOURCE_OPTIONS\" />\n        </header>\n        <ParameterMappingInput\n          mapping={mapping}\n          existingParamNames={this.props.existingParamNames}\n          onChange={this.onChange}\n          clientConfig={clientConfig}\n          Query={Query}\n          inputError={inputError}\n        />\n        <footer>\n          <Button onClick={this.hide}>Cancel</Button>\n          <Button onClick={this.save} disabled={!!inputError} type=\"primary\">OK</Button>\n        </footer>\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <Popover\n        placement=\"left\"\n        trigger=\"click\"\n        content={this.renderContent()}\n        visible={this.state.visible}\n        onVisibleChange={this.onVisibleChange}\n      >\n        <Button size=\"small\" type=\"dashed\">\n          <Icon type=\"edit\" />\n        </Button>\n      </Popover>\n    );\n  }\n}\n\nclass TitleEditor extends React.Component {\n  static propTypes = {\n    existingParams: PropTypes.arrayOf(PropTypes.object),\n    mapping: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n    onChange: PropTypes.func.isRequired,\n  };\n\n  static defaultProps = {\n    existingParams: [],\n  };\n\n  state = {\n    showPopup: false,\n    title: '', // will be set on editing\n  };\n\n  onPopupVisibleChange = (showPopup) => {\n    this.setState({\n      showPopup,\n      title: showPopup ? this.getMappingTitle() : '',\n    });\n  };\n\n  onEditingTitleChange = (event) => {\n    this.setState({ title: event.target.value });\n  };\n\n  getMappingTitle() {\n    let { mapping } = this.props;\n\n    if (isString(mapping.title) && (mapping.title !== '')) {\n      return mapping.title;\n    }\n\n    // if mapped to dashboard, find source param and return it's title\n    if (mapping.type === MappingType.DashboardMapToExisting) {\n      const source = find(this.props.existingParams, { name: mapping.mapTo });\n      if (source) {\n        mapping = source;\n      }\n    }\n\n    return mapping.title || mapping.param.title;\n  }\n\n  save = () => {\n    const newMapping = extend({}, this.props.mapping, { title: this.state.title });\n    this.props.onChange(newMapping);\n    this.hide();\n  };\n\n  hide = () => {\n    this.setState({ showPopup: false });\n  };\n\n  renderPopover() {\n    const { param: { title: paramTitle } } = this.props.mapping;\n\n    return (\n      <div className=\"parameter-mapping-title-editor\">\n        <Input\n          size=\"small\"\n          value={this.state.title}\n          placeholder={paramTitle}\n          onChange={this.onEditingTitleChange}\n          onPressEnter={this.save}\n          maxLength={100}\n          autoFocus\n        />\n        <Button size=\"small\" type=\"dashed\" onClick={this.hide}>\n          <Icon type=\"close\" />\n        </Button>\n        <Button size=\"small\" type=\"dashed\" onClick={this.save}>\n          <Icon type=\"check\" />\n        </Button>\n      </div>\n    );\n  }\n\n  renderEditButton() {\n    const { mapping } = this.props;\n    if (mapping.type === MappingType.StaticValue) {\n      return (\n        <Tooltip placement=\"right\" title=\"Titles for static values don't appear in widgets\">\n          <i className=\"fa fa-eye-slash\" />\n        </Tooltip>\n      );\n    }\n    return (\n      <Popover\n        placement=\"right\"\n        trigger=\"click\"\n        content={this.renderPopover()}\n        visible={this.state.showPopup}\n        onVisibleChange={this.onPopupVisibleChange}\n      >\n        <Button size=\"small\" type=\"dashed\">\n          <Icon type=\"edit\" />\n        </Button>\n      </Popover>\n    );\n  }\n\n  render() {\n    const { mapping } = this.props;\n    // static value are non-editable hence disabled\n    const disabled = mapping.type === MappingType.StaticValue;\n\n    return (\n      <div className={classNames('parameter-mapping-title', { disabled })}>\n        <span className=\"text\">{this.getMappingTitle()}</span>\n        {this.renderEditButton()}\n      </div>\n    );\n  }\n}\n\nexport class ParameterMappingListInput extends React.Component {\n  static propTypes = {\n    mappings: PropTypes.arrayOf(PropTypes.object),\n    existingParams: PropTypes.arrayOf(PropTypes.object),\n    onChange: PropTypes.func,\n  };\n\n  static defaultProps = {\n    mappings: [],\n    existingParams: [],\n    onChange: () => {},\n  };\n\n  static getStringValue(value) {\n    // null\n    if (!value) {\n      return '';\n    }\n\n    // range\n    if (value instanceof Object && 'start' in value && 'end' in value) {\n      return `${value.start} ~ ${value.end}`;\n    }\n\n    // just to be safe, array or object\n    if (typeof value === 'object') {\n      return map(value, v => this.getStringValue(v)).join(', ');\n    }\n\n    // rest\n    return value.toString();\n  }\n\n  static getDefaultValue(mapping, existingParams) {\n    const { type, mapTo, name } = mapping;\n    let { param } = mapping;\n\n    // if mapped to another param, swap 'em\n    if (type === MappingType.DashboardMapToExisting && mapTo !== name) {\n      const mappedTo = find(existingParams, { name: mapTo });\n      if (mappedTo) { // just being safe\n        param = mappedTo;\n      }\n\n    // static type is different since it's fed param.normalizedValue\n    } else if (type === MappingType.StaticValue) {\n      param = param.clone().setValue(mapping.value);\n    }\n\n    const value = Parameter.getValue(param);\n    return this.getStringValue(value);\n  }\n\n  static getSourceTypeLabel({ type, mapTo }) {\n    switch (type) {\n      case MappingType.DashboardAddNew:\n      case MappingType.DashboardMapToExisting:\n        return (\n          <Fragment>\n            Dashboard{' '}\n            <Tag className=\"tag\">{mapTo}</Tag>\n          </Fragment>\n        );\n      case MappingType.WidgetLevel:\n        return 'Widget parameter';\n      case MappingType.StaticValue:\n        return 'Static value';\n      default:\n        return ''; // won't happen (typescript-ftw)\n    }\n  }\n\n  updateParamMapping(oldMapping, newMapping) {\n    const mappings = [...this.props.mappings];\n    const index = findIndex(mappings, oldMapping);\n    if (index >= 0) {\n      // This should be the only possible case, but need to handle `else` too\n      mappings[index] = newMapping;\n    } else {\n      mappings.push(newMapping);\n    }\n    this.props.onChange(mappings);\n  }\n\n  render() {\n    const { existingParams } = this.props; // eslint-disable-line react/prop-types\n    const dataSource = this.props.mappings.map(mapping => ({ mapping }));\n\n    return (\n      <div className=\"parameters-mapping-list\">\n        <Table\n          dataSource={dataSource}\n          size=\"middle\"\n          pagination={false}\n          rowKey={(record, idx) => `row${idx}`}\n        >\n          <Table.Column\n            title=\"Title\"\n            dataIndex=\"mapping\"\n            key=\"title\"\n            render={mapping => (\n              <TitleEditor\n                existingParams={existingParams}\n                mapping={mapping}\n                onChange={newMapping => this.updateParamMapping(mapping, newMapping)}\n              />\n            )}\n          />\n          <Table.Column\n            title=\"Keyword\"\n            dataIndex=\"mapping\"\n            key=\"keyword\"\n            className=\"keyword\"\n            render={mapping => <code>{`{{ ${mapping.name} }}`}</code>}\n          />\n          <Table.Column\n            title=\"Default Value\"\n            dataIndex=\"mapping\"\n            key=\"value\"\n            render={mapping => (\n              this.constructor.getDefaultValue(mapping, this.props.existingParams)\n            )}\n          />\n          <Table.Column\n            title=\"Value Source\"\n            dataIndex=\"mapping\"\n            key=\"source\"\n            render={(mapping) => {\n              const existingParamsNames = existingParams\n                .filter(({ type }) => type === mapping.param.type) // exclude mismatching param types\n                .map(({ name }) => name); // keep names only\n\n              return (\n                <Fragment>\n                  {this.constructor.getSourceTypeLabel(mapping)}{' '}\n                  <MappingEditor\n                    mapping={mapping}\n                    existingParamNames={existingParamsNames}\n                    onChange={(oldMapping, newMapping) => this.updateParamMapping(oldMapping, newMapping)}\n                  />\n                </Fragment>\n              );\n            }}\n          />\n        </Table>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { react2angular } from 'react2angular';\nimport Pagination from 'antd/lib/pagination';\n\nexport function Paginator({\n  page,\n  itemsPerPage,\n  totalCount,\n  onChange,\n}) {\n  if (totalCount <= itemsPerPage) {\n    return null;\n  }\n  return (\n    <div className=\"paginator-container\">\n      <Pagination\n        defaultCurrent={page}\n        defaultPageSize={itemsPerPage}\n        total={totalCount}\n        onChange={onChange}\n      />\n    </div>\n  );\n}\n\nPaginator.propTypes = {\n  page: PropTypes.number.isRequired,\n  itemsPerPage: PropTypes.number.isRequired,\n  totalCount: PropTypes.number.isRequired,\n  onChange: PropTypes.func,\n};\n\nPaginator.defaultProps = {\n  onChange: () => {},\n};\n\nexport default function init(ngModule) {\n  ngModule.component('paginatorImpl', react2angular(Paginator));\n  ngModule.component('paginator', {\n    template: `\n      <paginator-impl\n        page=\"$ctrl.paginator.page\"\n        items-per-page=\"$ctrl.paginator.itemsPerPage\"\n        total-count=\"$ctrl.paginator.totalCount\"\n        on-change=\"$ctrl.onPageChanged\"\n      ></paginator-impl>`,\n    bindings: {\n      paginator: '<',\n    },\n    controller($scope) {\n      this.onPageChanged = (page) => {\n        this.paginator.setPage(page);\n        $scope.$applyAsync();\n      };\n    },\n  });\n}\n\ninit.init = true;\n","import { isFunction, identity, map } from 'lodash';\nimport Paginator from './Paginator';\nimport Sorter from './Sorter';\nimport PromiseRejectionError from '@/lib/promise-rejection-error';\nimport { PlainListFetcher, PaginatedListFetcher } from './ItemsFetcher';\n\nexport class ItemsSource {\n  onBeforeUpdate = null;\n\n  onAfterUpdate = null;\n\n  onError = null;\n\n  getCallbackContext = () => null;\n\n  _beforeUpdate() {\n    if (isFunction(this.onBeforeUpdate)) {\n      return Promise.resolve(this.onBeforeUpdate(this.getState(), this.getCallbackContext()));\n    }\n    return Promise.resolve();\n  }\n\n  _afterUpdate() {\n    if (isFunction(this.onAfterUpdate)) {\n      return Promise.resolve(this.onAfterUpdate(this.getState(), this.getCallbackContext()));\n    }\n    return Promise.resolve();\n  }\n\n  // changes: object with flags or null (full refresh requested)\n  _changed(changes) {\n    const state = {\n      paginator: this._paginator,\n      sorter: this._sorter,\n      searchTerm: this._searchTerm,\n      selectedTags: this._selectedTags,\n    };\n    const context = this.getCallbackContext();\n    return this._beforeUpdate().then(() => (\n      this._fetcher.fetch(changes, state, context)\n        .then(({ results, count, allResults }) => {\n          this._pageItems = results;\n          this._allItems = allResults || null;\n          this._paginator.setTotalCount(count);\n          return this._afterUpdate();\n        })\n        .catch((error) => {\n          this.handleError(error);\n        })\n    ));\n  }\n\n  constructor({ getRequest, doRequest, processResults, isPlainList = false, ...defaultState }) {\n    if (!isFunction(getRequest)) {\n      getRequest = identity;\n    }\n\n    this._fetcher = isPlainList ?\n      new PlainListFetcher({ getRequest, doRequest, processResults }) :\n      new PaginatedListFetcher({ getRequest, doRequest, processResults });\n\n    this.setState(defaultState);\n    this._pageItems = [];\n  }\n\n  getState() {\n    return {\n      page: this._paginator.page,\n      itemsPerPage: this._paginator.itemsPerPage,\n      orderByField: this._sorter.field,\n      orderByReverse: this._sorter.reverse,\n      searchTerm: this._searchTerm,\n      selectedTags: this._selectedTags,\n      totalCount: this._paginator.totalCount,\n      pageItems: this._pageItems,\n      allItems: this._allItems,\n    };\n  }\n\n  setState(state) {\n    this._paginator = new Paginator(state);\n    this._sorter = new Sorter(state);\n\n    this._searchTerm = state.searchTerm || '';\n    this._selectedTags = state.selectedTags || [];\n\n    this._savedOrderByField = this._sorter.field;\n  }\n\n  updatePagination = ({ page, itemsPerPage }) => {\n    const { page: prevPage, itemsPerPage: prevItemsPerPage } = this._paginator;\n    this._paginator.setItemsPerPage(itemsPerPage);\n    this._paginator.setPage(page);\n    this._changed({\n      pagination: {\n        page: prevPage !== this._paginator.page, // page changed flag\n        itemsPerPage: prevItemsPerPage !== this._paginator.itemsPerPage, // items per page changed flags\n      },\n    });\n  };\n\n  toggleSorting = (orderByField) => {\n    this._sorter.toggleField(orderByField);\n    this._savedOrderByField = this._sorter.field;\n    this._changed({ sorting: true });\n  };\n\n  updateSearch = (searchTerm) => {\n    // here we update state directly, but later `fetchData` will update it properly\n    this._searchTerm = searchTerm;\n    // in search mode ignore the ordering and use the ranking order\n    // provided by the server-side FTS backend instead, unless it was\n    // requested by the user by actively ordering in search mode\n    if (searchTerm === '') {\n      this._sorter.setField(this._savedOrderByField); // restore ordering\n    } else {\n      this._sorter.setField(null);\n    }\n    this._paginator.setPage(1);\n    this._changed({ search: true, pagination: { page: true } });\n  };\n\n  updateSelectedTags = (selectedTags) => {\n    this._selectedTags = selectedTags;\n    this._paginator.setPage(1);\n    this._changed({ tags: true, pagination: { page: true } });\n  };\n\n  update = () => this._changed();\n\n  handleError = (error) => {\n    if (isFunction(this.onError)) {\n      // ANGULAR_REMOVE_ME This code is related to Angular's HTTP services\n      if (error.status && error.data) {\n        error = new PromiseRejectionError(error);\n      }\n      this.onError(error);\n    }\n  };\n}\n\nexport class ResourceItemsSource extends ItemsSource {\n  constructor({ getResource, getItemProcessor, ...rest }) {\n    getItemProcessor = isFunction(getItemProcessor) ? getItemProcessor : () => null;\n    super({\n      ...rest,\n      doRequest: (request, context) => {\n        const resource = getResource(context);\n        return resource(request).$promise;\n      },\n      processResults: (results, context) => {\n        let processItem = getItemProcessor(context);\n        processItem = isFunction(processItem) ? processItem : identity;\n        return map(results, item => processItem(item, context));\n      },\n    });\n  }\n}\n","import { each, extend } from 'lodash';\n\n// eslint-disable-next-line import/prefer-default-export\nexport function routesToAngularRoutes(routes, template) {\n  const result = {};\n  template = extend({}, template); // convert to object\n  each(routes, ({ path, title, key, ...resolve }) => {\n    // Convert to functions\n    each(resolve, (value, prop) => {\n      resolve[prop] = () => value;\n    });\n\n    result[path] = {\n      ...template,\n      title,\n      // keep `resolve` from `template` (if exists)\n      resolve: {\n        ...template.resolve,\n        ...resolve,\n        currentPage: () => key,\n      },\n    };\n  });\n  return result;\n}\n","import DefaultPolicy from './DefaultPolicy';\n\n// eslint-disable-next-line import/no-mutable-exports\nexport let policy = new DefaultPolicy();\n\nexport function setPolicy(newPolicy) {\n  policy = newPolicy;\n}\n","import {\n  isArray, isNumber, isString, isUndefined, includes, min, max, has, find,\n  each, values, sortBy, identity, filter, map, extend, reduce, pick, flatten, uniq,\n} from 'lodash';\nimport moment from 'moment';\nimport d3 from 'd3';\nimport plotlyCleanNumber from 'plotly.js/src/lib/clean_number';\nimport { createFormatter, formatSimpleTemplate } from '@/lib/value-format';\n\n// The following colors will be used if you pick \"Automatic\" color.\nconst BaseColors = {\n  Blue: '#356AFF',\n  Red: '#E92828',\n  Green: '#3BD973',\n  Purple: '#604FE9',\n  Cyan: '#50F5ED',\n  Orange: '#FB8D3D',\n  'Light Blue': '#799CFF',\n  Lilac: '#B554FF',\n  'Light Green': '#8CFFB4',\n  Brown: '#A55F2A',\n  Black: '#000000',\n  Gray: '#494949',\n  Pink: '#FF7DE3',\n  'Dark Blue': '#002FB4',\n};\n\n// Additional colors for the user to choose from:\nexport const ColorPalette = Object.assign({}, BaseColors, {\n  'Indian Red': '#981717',\n  'Green 2': '#17BF51',\n  'Green 3': '#049235',\n  DarkTurquoise: '#00B6EB',\n  'Dark Violet': '#A58AFF',\n  'Pink 2': '#C63FA9',\n});\n\nconst ColorPaletteArray = values(BaseColors);\n\nfunction cleanNumber(value) {\n  return isUndefined(value) ? value : (plotlyCleanNumber(value) || 0.0);\n}\n\nfunction defaultFormatSeriesText(item) {\n  let result = item['@@y'];\n  if (item['@@yError'] !== undefined) {\n    result = `${result} \\u00B1 ${item['@@yError']}`;\n  }\n  if (item['@@yPercent'] !== undefined) {\n    result = `${item['@@yPercent']} (${result})`;\n  }\n  if (item['@@size'] !== undefined) {\n    result = `${result}: ${item['@@size']}`;\n  }\n  return result;\n}\n\nfunction defaultFormatSeriesTextForPie(item) {\n  return item['@@yPercent'] + ' (' + item['@@y'] + ')';\n}\n\nfunction getFontColor(bgcolor) {\n  let result = '#333333';\n  if (isString(bgcolor)) {\n    let matches = /#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})/i.exec(bgcolor);\n    let r;\n    let g;\n    let b;\n    if (matches) {\n      r = parseInt(matches[1], 16);\n      g = parseInt(matches[2], 16);\n      b = parseInt(matches[3], 16);\n    } else {\n      matches = /#?([0-9a-f])([0-9a-f])([0-9a-f])/i.exec(bgcolor);\n      if (matches) {\n        r = parseInt(matches[1] + matches[1], 16);\n        g = parseInt(matches[2] + matches[2], 16);\n        b = parseInt(matches[3] + matches[3], 16);\n      } else {\n        return result;\n      }\n    }\n\n    const lightness = r * 0.299 + g * 0.587 + b * 0.114;\n    if (lightness < 170) {\n      result = '#ffffff';\n    }\n  }\n\n  return result;\n}\n\nfunction getPieHoverInfoPattern(options) {\n  const hasX = /{{\\s*@@x\\s*}}/.test(options.textFormat);\n  let result = 'text';\n  if (!hasX) result += '+label';\n  return result;\n}\n\nfunction getHoverInfoPattern(options) {\n  const hasX = /{{\\s*@@x\\s*}}/.test(options.textFormat);\n  const hasName = /{{\\s*@@name\\s*}}/.test(options.textFormat);\n  let result = 'text';\n  if (!hasX) result += '+x';\n  if (!hasName) result += '+name';\n  return result;\n}\n\nexport function normalizeValue(value, axisType, dateTimeFormat = 'YYYY-MM-DD HH:mm:ss') {\n  if (axisType === 'datetime' && moment.utc(value).isValid()) {\n    value = moment.utc(value);\n  }\n  if (moment.isMoment(value)) {\n    return value.format(dateTimeFormat);\n  }\n  return value;\n}\n\nfunction naturalSort($a, $b) {\n  if ($a === $b) {\n    return 0;\n  } else if ($a < $b) {\n    return -1;\n  }\n  return 1;\n}\n\nfunction calculateAxisRange(seriesList, minValue, maxValue) {\n  if (!isNumber(minValue)) {\n    minValue = Math.min(0, min(map(seriesList, series => min(series.y))));\n  }\n  if (!isNumber(maxValue)) {\n    maxValue = max(map(seriesList, series => max(series.y)));\n  }\n  return [minValue, maxValue];\n}\n\nfunction getScaleType(scale) {\n  if (scale === 'datetime') {\n    return 'date';\n  }\n  if (scale === 'logarithmic') {\n    return 'log';\n  }\n  return scale;\n}\n\nfunction getSeriesColor(seriesOptions, seriesIndex) {\n  return seriesOptions.color || ColorPaletteArray[seriesIndex % ColorPaletteArray.length];\n}\n\nfunction getTitle(axis) {\n  if (!isUndefined(axis) && !isUndefined(axis.title)) {\n    return axis.title.text;\n  }\n  return null;\n}\n\nfunction setType(series, type, options) {\n  switch (type) {\n    case 'column':\n      series.type = 'bar';\n      if (options.showDataLabels) {\n        series.textposition = 'inside';\n      }\n      break;\n    case 'line':\n      series.mode = 'lines' + (options.showDataLabels ? '+text' : '');\n      break;\n    case 'area':\n      series.mode = 'lines' + (options.showDataLabels ? '+text' : '');\n      series.fill = options.series.stacking === null ? 'tozeroy' : 'tonexty';\n      break;\n    case 'scatter':\n      series.type = 'scatter';\n      series.mode = 'markers' + (options.showDataLabels ? '+text' : '');\n      break;\n    case 'bubble':\n      series.mode = 'markers';\n      break;\n    case 'box':\n      series.type = 'box';\n      series.mode = 'markers';\n      break;\n    default:\n      break;\n  }\n}\n\nfunction calculateDimensions(series, options) {\n  const rows = series.length > 2 ? 2 : 1;\n  const cellsInRow = Math.ceil(series.length / rows);\n  const cellWidth = 1 / cellsInRow;\n  const cellHeight = 1 / rows;\n  const xPadding = 0.02;\n  const yPadding = 0.1;\n\n  const hasX = includes(values(options.columnMapping), 'x');\n  const hasY2 = !!find(series, (serie) => {\n    const seriesOptions = options.seriesOptions[serie.name] || { type: options.globalSeriesType };\n    return (seriesOptions.yAxis === 1) && (\n      (options.series.stacking === null) || (seriesOptions.type === 'line')\n    );\n  });\n\n  return {\n    rows, cellsInRow, cellWidth, cellHeight, xPadding, yPadding, hasX, hasY2,\n  };\n}\n\nfunction getUnifiedXAxisValues(seriesList, sorted) {\n  const set = new Set();\n  each(seriesList, (series) => {\n    // `Map.forEach` will walk items in insertion order\n    series.sourceData.forEach((item) => {\n      set.add(item.x);\n    });\n  });\n\n  const result = [];\n  // `Set.forEach` will walk items in insertion order\n  set.forEach((item) => {\n    result.push(item);\n  });\n\n  return sorted ? sortBy(result, identity) : result;\n}\n\nfunction preparePieData(seriesList, options) {\n  const {\n    cellWidth, cellHeight, xPadding, yPadding, cellsInRow, hasX,\n  } = calculateDimensions(seriesList, options);\n\n  const formatNumber = createFormatter({\n    displayAs: 'number',\n    numberFormat: options.numberFormat,\n  });\n  const formatPercent = createFormatter({\n    displayAs: 'number',\n    numberFormat: options.percentFormat,\n  });\n  const formatText = options.textFormat === ''\n    ? defaultFormatSeriesTextForPie :\n    item => formatSimpleTemplate(options.textFormat, item);\n\n  const hoverinfo = getPieHoverInfoPattern(options);\n\n  // we will use this to assign colors for values that have not explicitly set color\n  const getDefaultColor = d3.scale.ordinal().domain([]).range(ColorPaletteArray);\n  const valuesColors = {};\n  each(options.valuesOptions, (item, key) => {\n    if (isString(item.color) && (item.color !== '')) {\n      valuesColors[key] = item.color;\n    }\n  });\n\n  return map(seriesList, (serie, index) => {\n    const xPosition = (index % cellsInRow) * cellWidth;\n    const yPosition = Math.floor(index / cellsInRow) * cellHeight;\n\n    const sourceData = new Map();\n    const seriesTotal = reduce(serie.data, (result, row) => {\n      const y = cleanNumber(row.y);\n      return result + Math.abs(y);\n    }, 0);\n    each(serie.data, (row) => {\n      const x = normalizeValue(row.x);\n      const y = cleanNumber(row.y);\n      sourceData.set(x, {\n        x,\n        y,\n        yPercent: y / seriesTotal * 100,\n        raw: extend({}, row.$raw, {\n          // use custom display format - see also `updateSeriesText`\n          '@@x': normalizeValue(row.x, options.xAxis.type, options.dateTimeFormat),\n        }),\n      });\n    });\n\n    return {\n      values: map(serie.data, i => i.y),\n      labels: map(serie.data, row => (hasX ? normalizeValue(row.x) : `Slice ${index}`)),\n      type: 'pie',\n      hole: 0.4,\n      marker: {\n        colors: map(serie.data, row => valuesColors[row.x] || getDefaultColor(row.x)),\n      },\n      hoverinfo,\n      text: [],\n      textinfo: options.showDataLabels ? 'percent' : 'none',\n      textposition: 'inside',\n      textfont: { color: '#ffffff' },\n      name: serie.name,\n      domain: {\n        x: [xPosition, xPosition + cellWidth - xPadding],\n        y: [yPosition, yPosition + cellHeight - yPadding],\n      },\n      sourceData,\n      formatNumber,\n      formatPercent,\n      formatText,\n    };\n  });\n}\n\nfunction prepareHeatmapData(seriesList, options) {\n  const defaultColorScheme = [\n    [0, '#356aff'],\n    [0.14, '#4a7aff'],\n    [0.28, '#5d87ff'],\n    [0.42, '#7398ff'],\n    [0.56, '#fb8c8c'],\n    [0.71, '#ec6463'],\n    [0.86, '#ec4949'],\n    [1, '#e92827'],\n  ];\n\n  const formatNumber = createFormatter({\n    displayAs: 'number',\n    numberFormat: options.numberFormat,\n  });\n\n  let colorScheme = [];\n\n  if (!options.colorScheme) {\n    colorScheme = defaultColorScheme;\n  } else if (options.colorScheme === 'Custom...') {\n    colorScheme = [[0, options.heatMinColor], [1, options.heatMaxColor]];\n  } else {\n    colorScheme = options.colorScheme;\n  }\n\n  return map(seriesList, (series) => {\n    const plotlySeries = {\n      x: [],\n      y: [],\n      z: [],\n      type: 'heatmap',\n      name: '',\n      colorscale: colorScheme,\n    };\n\n    plotlySeries.x = uniq(map(series.data, 'x'));\n    plotlySeries.y = uniq(map(series.data, 'y'));\n\n    if (options.sortX) {\n      plotlySeries.x.sort(naturalSort);\n    }\n\n    if (options.sortY) {\n      plotlySeries.y.sort(naturalSort);\n    }\n\n    if (options.reverseX) {\n      plotlySeries.x.reverse();\n    }\n\n    if (options.reverseY) {\n      plotlySeries.y.reverse();\n    }\n\n    const zMax = max(map(series.data, 'zVal'));\n\n    // Use text trace instead of default annotation for better performance\n    const dataLabels = {\n      x: [],\n      y: [],\n      mode: 'text',\n      hoverinfo: 'skip',\n      showlegend: false,\n      text: [],\n      textfont: {\n        color: [],\n      },\n    };\n\n    for (let i = 0; i < plotlySeries.y.length; i += 1) {\n      const item = [];\n      for (let j = 0; j < plotlySeries.x.length; j += 1) {\n        const datum = find(\n          series.data,\n          { x: plotlySeries.x[j], y: plotlySeries.y[i] },\n        );\n\n        const zValue = datum ? datum.zVal : 0;\n        item.push(zValue);\n\n        if (isFinite(zMax) && options.showDataLabels) {\n          dataLabels.x.push(plotlySeries.x[j]);\n          dataLabels.y.push(plotlySeries.y[i]);\n          dataLabels.text.push(formatNumber(zValue));\n          if (options.colorScheme && options.colorScheme === 'Custom...') {\n            dataLabels.textfont.color.push('white');\n          } else {\n            dataLabels.textfont.color.push((zValue / zMax) < 0.25 ? 'white' : 'black');\n          }\n        }\n      }\n      plotlySeries.z.push(item);\n    }\n\n    if (isFinite(zMax) && options.showDataLabels) {\n      return [plotlySeries, dataLabels];\n    }\n    return [plotlySeries];\n  });\n}\n\nfunction prepareChartData(seriesList, options) {\n  const sortX = (options.sortX === true) || (options.sortX === undefined);\n\n  const formatNumber = createFormatter({\n    displayAs: 'number',\n    numberFormat: options.numberFormat,\n  });\n  const formatPercent = createFormatter({\n    displayAs: 'number',\n    numberFormat: options.percentFormat,\n  });\n  const formatText = options.textFormat === ''\n    ? defaultFormatSeriesText :\n    item => formatSimpleTemplate(options.textFormat, item);\n\n  const hoverinfo = getHoverInfoPattern(options);\n\n  return map(seriesList, (series, index) => {\n    const seriesOptions = options.seriesOptions[series.name] ||\n      { type: options.globalSeriesType };\n\n    const seriesColor = getSeriesColor(seriesOptions, index);\n\n    // Sort by x - `Map` preserves order of items\n    const data = sortX ? sortBy(series.data, d => normalizeValue(d.x, options.xAxis.type)) : series.data;\n\n    // For bubble/scatter charts `y` may be any (similar to `x`) - numeric is only bubble size;\n    // for other types `y` is always number\n    const cleanYValue = includes(['bubble', 'scatter'], seriesOptions.type) ? normalizeValue : cleanNumber;\n\n    const sourceData = new Map();\n    const xValues = [];\n    const yValues = [];\n    const yErrorValues = [];\n    each(data, (row) => {\n      const x = normalizeValue(row.x, options.xAxis.type); // number/datetime/category\n      const y = cleanYValue(row.y, options.yAxis[0].type); // depends on series type!\n      const yError = cleanNumber(row.yError); // always number\n      const size = cleanNumber(row.size); // always number\n      sourceData.set(x, {\n        x,\n        y,\n        yError,\n        size,\n        yPercent: null, // will be updated later\n        raw: extend({}, row.$raw, {\n          // use custom display format - see also `updateSeriesText`\n          '@@x': normalizeValue(row.x, options.xAxis.type, options.dateTimeFormat),\n        }),\n      });\n      xValues.push(x);\n      yValues.push(y);\n      yErrorValues.push(yError);\n    });\n\n    const plotlySeries = {\n      visible: true,\n      hoverinfo,\n      x: xValues,\n      y: yValues,\n      error_y: {\n        array: yErrorValues,\n        color: seriesColor,\n      },\n      name: seriesOptions.name || series.name,\n      marker: { color: seriesColor },\n      insidetextfont: {\n        color: getFontColor(seriesColor),\n      },\n      sourceData,\n      formatNumber,\n      formatPercent,\n      formatText,\n    };\n\n    if (\n      (seriesOptions.yAxis === 1) &&\n      ((options.series.stacking === null) || (seriesOptions.type === 'line'))\n    ) {\n      plotlySeries.yaxis = 'y2';\n    }\n\n    setType(plotlySeries, seriesOptions.type, options);\n\n    if (seriesOptions.type === 'bubble') {\n      plotlySeries.marker = {\n        color: seriesColor,\n        size: map(data, i => i.size),\n      };\n    } else if (seriesOptions.type === 'box') {\n      plotlySeries.boxpoints = 'outliers';\n      plotlySeries.hoverinfo = false;\n      plotlySeries.marker = {\n        color: seriesColor,\n        size: 3,\n      };\n      if (options.showpoints) {\n        plotlySeries.boxpoints = 'all';\n        plotlySeries.jitter = 0.3;\n        plotlySeries.pointpos = -1.8;\n      }\n    }\n\n    return plotlySeries;\n  });\n}\n\nexport function prepareData(seriesList, options) {\n  if (options.globalSeriesType === 'pie') {\n    return preparePieData(seriesList, options);\n  }\n  if (options.globalSeriesType === 'heatmap') {\n    return flatten(prepareHeatmapData(seriesList, options));\n  }\n  return prepareChartData(seriesList, options);\n}\n\nexport function prepareLayout(element, seriesList, options, data) {\n  const {\n    cellsInRow, cellWidth, cellHeight, xPadding, hasY2,\n  } = calculateDimensions(seriesList, options);\n\n  const result = {\n    margin: {\n      l: 10,\n      r: 10,\n      b: 10,\n      t: 25,\n      pad: 4,\n    },\n    width: Math.floor(element.offsetWidth),\n    height: Math.floor(element.offsetHeight),\n    autosize: true,\n    showlegend: has(options, 'legend') ? options.legend.enabled : true,\n  };\n\n  if (options.globalSeriesType === 'pie') {\n    const hasName = /{{\\s*@@name\\s*}}/.test(options.textFormat);\n\n    if (hasName) {\n      result.annotations = [];\n    } else {\n      result.annotations = filter(map(seriesList, (series, index) => {\n        const xPosition = (index % cellsInRow) * cellWidth;\n        const yPosition = Math.floor(index / cellsInRow) * cellHeight;\n        return {\n          x: xPosition + ((cellWidth - xPadding) / 2),\n          y: yPosition + cellHeight - 0.015,\n          xanchor: 'center',\n          yanchor: 'top',\n          text: options.seriesOptions[series.name].name || series.name,\n          showarrow: false,\n        };\n      }));\n    }\n  } else {\n    if (options.globalSeriesType === 'box') {\n      result.boxmode = 'group';\n      result.boxgroupgap = 0.50;\n    }\n\n    result.xaxis = {\n      title: getTitle(options.xAxis),\n      type: getScaleType(options.xAxis.type),\n      automargin: true,\n    };\n\n    if (options.sortX && result.xaxis.type === 'category') {\n      if (options.reverseX) {\n        result.xaxis.categoryorder = 'category descending';\n      } else {\n        result.xaxis.categoryorder = 'category ascending';\n      }\n    }\n\n    if (!isUndefined(options.xAxis.labels)) {\n      result.xaxis.showticklabels = options.xAxis.labels.enabled;\n    }\n\n    if (isArray(options.yAxis)) {\n      result.yaxis = {\n        title: getTitle(options.yAxis[0]),\n        type: getScaleType(options.yAxis[0].type),\n        automargin: true,\n      };\n\n      if (isNumber(options.yAxis[0].rangeMin) || isNumber(options.yAxis[0].rangeMax)) {\n        result.yaxis.range = calculateAxisRange(\n          data.filter(s => !s.yaxis !== 'y2'),\n          options.yAxis[0].rangeMin,\n          options.yAxis[0].rangeMax,\n        );\n      }\n    }\n\n    if (hasY2 && !isUndefined(options.yAxis)) {\n      result.yaxis2 = {\n        title: getTitle(options.yAxis[1]),\n        type: getScaleType(options.yAxis[1].type),\n        overlaying: 'y',\n        side: 'right',\n        automargin: true,\n      };\n\n      if (isNumber(options.yAxis[1].rangeMin) || isNumber(options.yAxis[1].rangeMax)) {\n        result.yaxis2.range = calculateAxisRange(\n          data.filter(s => s.yaxis === 'y2'),\n          options.yAxis[1].rangeMin,\n          options.yAxis[1].rangeMax,\n        );\n      }\n    }\n\n    if (options.series.stacking) {\n      result.barmode = 'relative';\n    }\n  }\n\n  return result;\n}\n\nfunction updateSeriesText(seriesList, options) {\n  each(seriesList, (series) => {\n    const seriesOptions = options.seriesOptions[series.name] ||\n      { type: options.globalSeriesType };\n\n    series.text = [];\n    series.hover = [];\n    const xValues = (options.globalSeriesType === 'pie') ? series.labels : series.x;\n    xValues.forEach((x) => {\n      const text = {\n        '@@name': series.name,\n        // '@@x' is already in `item.$raw`\n      };\n      const item = series.sourceData.get(x);\n      if (item) {\n        text['@@y'] = includes(['bubble', 'scatter'], seriesOptions.type) ? item.y : series.formatNumber(item.y);\n        if (item.yError !== undefined) {\n          text['@@yError'] = series.formatNumber(item.yError);\n        }\n        if (item.size !== undefined) {\n          text['@@size'] = series.formatNumber(item.size);\n        }\n\n        if (options.series.percentValues || (options.globalSeriesType === 'pie')) {\n          text['@@yPercent'] = series.formatPercent(Math.abs(item.yPercent));\n        }\n\n        extend(text, item.raw);\n      }\n\n      series.text.push(series.formatText(text));\n    });\n  });\n  return seriesList;\n}\n\nfunction updatePercentValues(seriesList, options) {\n  if (options.series.percentValues && (seriesList.length > 0)) {\n    // Some series may not have corresponding x-values;\n    // do calculations for each x only for series that do have that x\n    const sumOfCorrespondingPoints = new Map();\n    each(seriesList, (series) => {\n      series.sourceData.forEach((item) => {\n        const sum = sumOfCorrespondingPoints.get(item.x) || 0;\n        sumOfCorrespondingPoints.set(item.x, sum + Math.abs(item.y));\n      });\n    });\n\n    each(seriesList, (series) => {\n      const yValues = [];\n\n      series.sourceData.forEach((item) => {\n        const sum = sumOfCorrespondingPoints.get(item.x);\n        item.yPercent = Math.sign(item.y) * Math.abs(item.y) / sum * 100;\n        yValues.push(item.yPercent);\n      });\n\n      series.y = yValues;\n    });\n  }\n\n  return seriesList;\n}\n\nfunction updateUnifiedXAxisValues(seriesList, options, sorted, defaultY) {\n  const unifiedX = getUnifiedXAxisValues(seriesList, sorted);\n  defaultY = defaultY === undefined ? null : defaultY;\n  each(seriesList, (series) => {\n    series.x = [];\n    series.y = [];\n    series.error_y.array = [];\n    each(unifiedX, (x) => {\n      series.x.push(x);\n      const item = series.sourceData.get(x);\n      if (item) {\n        series.y.push(options.series.percentValues ? item.yPercent : item.y);\n        series.error_y.array.push(item.yError);\n      } else {\n        series.y.push(defaultY);\n        series.error_y.array.push(null);\n      }\n    });\n  });\n}\n\nexport function updateData(seriesList, options) {\n  if (seriesList.length === 0) {\n    return seriesList;\n  }\n  if (options.globalSeriesType === 'pie') {\n    updateSeriesText(seriesList, options);\n    return seriesList;\n  }\n  if (options.globalSeriesType === 'heatmap') {\n    return seriesList;\n  }\n\n  // Use only visible series\n  seriesList = filter(seriesList, s => s.visible === true);\n\n  // Apply \"percent values\" modification\n  updatePercentValues(seriesList, options);\n\n  const sortX = (options.sortX === true) || (options.sortX === undefined);\n\n  if (options.series.stacking) {\n    if (['line', 'area'].indexOf(options.globalSeriesType) >= 0) {\n      updateUnifiedXAxisValues(seriesList, options, sortX, 0);\n\n      // Calculate cumulative value for each x tick\n      let prevSeries = null;\n      each(seriesList, (series) => {\n        if (prevSeries) {\n          series.y = map(series.y, (y, i) => prevSeries.y[i] + y);\n        }\n        prevSeries = series;\n      });\n    }\n  } else {\n    const useUnifiedXAxis = sortX && (options.xAxis.type === 'category') && (options.globalSeriesType !== 'box');\n    if (useUnifiedXAxis) {\n      updateUnifiedXAxisValues(seriesList, options, sortX);\n    }\n  }\n\n  // Finally - update text labels\n  updateSeriesText(seriesList, options);\n}\n\nfunction fixLegendContainer(plotlyElement) {\n  const legend = plotlyElement.querySelector('.legend');\n  if (legend) {\n    let node = legend.parentNode;\n    while (node) {\n      if (node.tagName.toLowerCase() === 'svg') {\n        node.style.overflow = 'visible';\n        break;\n      }\n      node = node.parentNode;\n    }\n  }\n}\n\nexport function updateLayout(plotlyElement, layout, updatePlot) {\n  // update layout size to plot container\n  layout.width = Math.floor(plotlyElement.offsetWidth);\n  layout.height = Math.floor(plotlyElement.offsetHeight);\n\n  const transformName = find([\n    'transform',\n    'webkitTransform',\n    'mozTransform',\n    'msTransform',\n    'oTransform',\n  ], prop => has(plotlyElement.style, prop));\n\n  if (layout.width <= 600) {\n    // change legend orientation to horizontal; plotly has a bug with this\n    // legend alignment - it does not preserve enough space under the plot;\n    // so we'll hack this: update plot (it will re-render legend), compute\n    // legend height, reduce plot size by legend height (but not less than\n    // half of plot container's height - legend will have max height equal to\n    // plot height), re-render plot again and offset legend to the space under\n    // the plot.\n    layout.legend = {\n      orientation: 'h',\n      // locate legend inside of plot area - otherwise plotly will preserve\n      // some amount of space under the plot; also this will limit legend height\n      // to plot's height\n      y: 0,\n      x: 0,\n      xanchor: 'left',\n      yanchor: 'bottom',\n    };\n\n    // set `overflow: visible` to svg containing legend because later we will\n    // position legend outside of it\n    fixLegendContainer(plotlyElement);\n\n    updatePlot(plotlyElement, pick(layout, ['width', 'height', 'legend'])).then(() => {\n      const legend = plotlyElement.querySelector('.legend'); // eslint-disable-line no-shadow\n      if (legend) {\n        // compute real height of legend - items may be split into few columnns,\n        // also scrollbar may be shown\n        const bounds = reduce(legend.querySelectorAll('.traces'), (result, node) => {\n          const b = node.getBoundingClientRect();\n          result = result || b;\n          return {\n            top: Math.min(result.top, b.top),\n            bottom: Math.max(result.bottom, b.bottom),\n          };\n        }, null);\n        // here we have two values:\n        // 1. height of plot container excluding height of legend items;\n        //    it may be any value between 0 and plot container's height;\n        // 2. half of plot containers height. Legend cannot be larger than\n        //    plot; if legend is too large, plotly will reduce it's height and\n        //    show a scrollbar; in this case, height of plot === height of legend,\n        //    so we can split container's height half by half between them.\n        layout.height = Math.floor(Math.max(\n          layout.height / 2,\n          layout.height - (bounds.bottom - bounds.top),\n        ));\n        // offset the legend\n        legend.style[transformName] = 'translate(0, ' + layout.height + 'px)';\n        updatePlot(plotlyElement, pick(layout, ['height']));\n      }\n    });\n  } else {\n    layout.legend = {\n      orientation: 'v',\n      // vertical legend will be rendered properly, so just place it to the right\n      // side of plot\n      y: 1,\n      x: 1,\n      xanchor: 'left',\n      yanchor: 'top',\n    };\n\n    const legend = plotlyElement.querySelector('.legend');\n    if (legend) {\n      legend.style[transformName] = null;\n    }\n\n    updatePlot(plotlyElement, pick(layout, ['width', 'height', 'legend']));\n  }\n}\n","import moment from 'moment';\nimport { each, pick, extend, isObject, truncate, keys, difference, filter, map } from 'lodash';\n\nexport let Widget = null; // eslint-disable-line import/no-mutable-exports\n\nfunction calculatePositionOptions(Visualization, dashboardGridOptions, widget) {\n  widget.width = 1; // Backward compatibility, user on back-end\n\n  const visualizationOptions = {\n    autoHeight: false,\n    sizeX: Math.round(dashboardGridOptions.columns / 2),\n    sizeY: dashboardGridOptions.defaultSizeY,\n    minSizeX: dashboardGridOptions.minSizeX,\n    maxSizeX: dashboardGridOptions.maxSizeX,\n    minSizeY: dashboardGridOptions.minSizeY,\n    maxSizeY: dashboardGridOptions.maxSizeY,\n  };\n\n  const visualization = widget.visualization ? Visualization.visualizations[widget.visualization.type] : null;\n  if (isObject(visualization)) {\n    const options = extend({}, visualization.defaultOptions);\n\n    if (Object.prototype.hasOwnProperty.call(options, 'autoHeight')) {\n      visualizationOptions.autoHeight = options.autoHeight;\n    }\n\n    // Width constraints\n    const minColumns = parseInt(options.minColumns, 10);\n    if (isFinite(minColumns) && minColumns >= 0) {\n      visualizationOptions.minSizeX = minColumns;\n    }\n    const maxColumns = parseInt(options.maxColumns, 10);\n    if (isFinite(maxColumns) && maxColumns >= 0) {\n      visualizationOptions.maxSizeX = Math.min(maxColumns, dashboardGridOptions.columns);\n    }\n\n    // Height constraints\n    // `minRows` is preferred, but it should be kept for backward compatibility\n    const height = parseInt(options.height, 10);\n    if (isFinite(height)) {\n      visualizationOptions.minSizeY = Math.ceil(height / dashboardGridOptions.rowHeight);\n    }\n    const minRows = parseInt(options.minRows, 10);\n    if (isFinite(minRows)) {\n      visualizationOptions.minSizeY = minRows;\n    }\n    const maxRows = parseInt(options.maxRows, 10);\n    if (isFinite(maxRows) && maxRows >= 0) {\n      visualizationOptions.maxSizeY = maxRows;\n    }\n\n    // Default dimensions\n    const defaultWidth = parseInt(options.defaultColumns, 10);\n    if (isFinite(defaultWidth) && defaultWidth > 0) {\n      visualizationOptions.sizeX = defaultWidth;\n    }\n    const defaultHeight = parseInt(options.defaultRows, 10);\n    if (isFinite(defaultHeight) && defaultHeight > 0) {\n      visualizationOptions.sizeY = defaultHeight;\n    }\n  }\n\n  return visualizationOptions;\n}\n\nexport const ParameterMappingType = {\n  DashboardLevel: 'dashboard-level',\n  WidgetLevel: 'widget-level',\n  StaticValue: 'static-value',\n};\n\nfunction WidgetFactory($http, $location, Query, Visualization, dashboardGridOptions) {\n  class WidgetService {\n    static MappingType = ParameterMappingType;\n\n    constructor(data) {\n      // Copy properties\n      each(data, (v, k) => {\n        this[k] = v;\n      });\n\n      const visualizationOptions = calculatePositionOptions(Visualization, dashboardGridOptions, this);\n\n      this.options = this.options || {};\n      this.options.position = extend(\n        {},\n        visualizationOptions,\n        pick(this.options.position, ['col', 'row', 'sizeX', 'sizeY', 'autoHeight']),\n      );\n\n      if (this.options.position.sizeY < 0) {\n        this.options.position.autoHeight = true;\n      }\n\n      // Save original position (create a shallow copy)\n      this.$originalPosition = extend({}, this.options.position);\n    }\n\n    getQuery() {\n      if (!this.query && this.visualization) {\n        this.query = new Query(this.visualization.query);\n      }\n\n      return this.query;\n    }\n\n    getQueryResult() {\n      return this.data;\n    }\n\n    getName() {\n      if (this.visualization) {\n        return `${this.visualization.query.name} (${this.visualization.name})`;\n      }\n      return truncate(this.text, 20);\n    }\n\n    load(force, maxAge) {\n      if (!this.visualization) {\n        return undefined;\n      }\n\n      // Both `this.data` and `this.queryResult` are query result objects;\n      // `this.data` is last loaded query result;\n      // `this.queryResult` is currently loading query result;\n      // while widget is refreshing, `this.data` !== `this.queryResult`\n\n      if (force || (this.queryResult === undefined)) {\n        this.loading = true;\n        this.refreshStartedAt = moment();\n\n        if (maxAge === undefined || force) {\n          maxAge = force ? 0 : undefined;\n        }\n        this.queryResult = this.getQuery().getQueryResult(maxAge);\n\n        this.queryResult.toPromise()\n          .then((result) => {\n            this.loading = false;\n            this.data = result;\n          })\n          .catch((error) => {\n            this.loading = false;\n            this.data = error;\n          });\n      }\n\n      return this.queryResult.toPromise();\n    }\n\n    save() {\n      const data = pick(this, 'options', 'text', 'id', 'width', 'dashboard_id', 'visualization_id');\n\n      let url = 'api/widgets';\n      if (this.id) {\n        url = `${url}/${this.id}`;\n      }\n\n      return $http.post(url, data).then((response) => {\n        each(response.data, (v, k) => {\n          this[k] = v;\n        });\n\n        return this;\n      });\n    }\n\n    delete() {\n      const url = `api/widgets/${this.id}`;\n      return $http.delete(url);\n    }\n\n    isStaticParam(param) {\n      const mappings = this.getParameterMappings();\n      const mappingType = mappings[param.name].type;\n      return mappingType === WidgetService.MappingType.StaticValue;\n    }\n\n    getParametersDefs() {\n      const mappings = this.getParameterMappings();\n      // textboxes does not have query\n      const params = this.getQuery() ? this.getQuery().getParametersDefs() : [];\n\n      const queryParams = $location.search();\n\n      const localTypes = [\n        WidgetService.MappingType.WidgetLevel,\n        WidgetService.MappingType.StaticValue,\n      ];\n      return map(\n        filter(params, param => localTypes.indexOf(mappings[param.name].type) >= 0),\n        (param) => {\n          const mapping = mappings[param.name];\n          const result = param.clone();\n          result.title = mapping.title || param.title;\n          result.locals = [param];\n          result.urlPrefix = `p_w${this.id}_`;\n          if (mapping.type === WidgetService.MappingType.StaticValue) {\n            result.setValue(mapping.value);\n          } else {\n            result.fromUrlParams(queryParams);\n          }\n          return result;\n        },\n      );\n    }\n\n    getParameterMappings() {\n      if (!isObject(this.options.parameterMappings)) {\n        this.options.parameterMappings = {};\n      }\n\n      const existingParams = {};\n      // textboxes does not have query\n      const params = this.getQuery() ? this.getQuery().getParametersDefs() : [];\n      each(params, (param) => {\n        existingParams[param.name] = true;\n        if (!isObject(this.options.parameterMappings[param.name])) {\n          // \"migration\" for old dashboards: parameters with `global` flag\n          // should be mapped to a dashboard-level parameter with the same name\n          this.options.parameterMappings[param.name] = {\n            name: param.name,\n            type: param.global ? WidgetService.MappingType.DashboardLevel : WidgetService.MappingType.WidgetLevel,\n            mapTo: param.name, // map to param with the same name\n            value: null, // for StaticValue\n            title: '', // Use parameter's title\n          };\n        }\n      });\n\n      // Remove mappings for parameters that do not exists anymore\n      const removedParams = difference(\n        keys(this.options.parameterMappings),\n        keys(existingParams),\n      );\n      each(removedParams, (name) => {\n        delete this.options.parameterMappings[name];\n      });\n\n      return this.options.parameterMappings;\n    }\n  }\n\n  return WidgetService;\n}\n\nexport default function init(ngModule) {\n  ngModule.factory('Widget', WidgetFactory);\n\n  ngModule.run(($injector) => {\n    Widget = $injector.get('Widget');\n  });\n}\n\ninit.init = true;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\n// PreviewCard\n\nexport function PreviewCard({ imageUrl, title, body, children, className, ...props }) {\n  return (\n    <div {...props} className={className + ' w-100 d-flex align-items-center'}>\n      <img src={imageUrl} width=\"32\" height=\"32\" className=\"profile__image--settings m-r-5\" alt=\"Logo/Avatar\" />\n      <div className=\"flex-fill\">\n        <div>{title}</div>\n        {body && <div className=\"text-muted\">{body}</div>}\n      </div>\n      {children}\n    </div>\n  );\n}\n\nPreviewCard.propTypes = {\n  imageUrl: PropTypes.string.isRequired,\n  title: PropTypes.node.isRequired,\n  body: PropTypes.node,\n  className: PropTypes.string,\n  children: PropTypes.node,\n};\n\nPreviewCard.defaultProps = {\n  body: null,\n  className: '',\n  children: null,\n};\n\n// UserPreviewCard\n\nexport function UserPreviewCard({ user, withLink, children, ...props }) {\n  const title = withLink ? <a href={'users/' + user.id}>{user.name}</a> : user.name;\n  return (\n    <PreviewCard {...props} imageUrl={user.profile_image_url} title={title} body={user.email}>\n      {children}\n    </PreviewCard>\n  );\n}\n\nUserPreviewCard.propTypes = {\n  user: PropTypes.shape({\n    profile_image_url: PropTypes.string.isRequired,\n    name: PropTypes.string.isRequired,\n    email: PropTypes.string.isRequired,\n  }).isRequired,\n  withLink: PropTypes.bool,\n  children: PropTypes.node,\n};\n\nUserPreviewCard.defaultProps = {\n  withLink: false,\n  children: null,\n};\n\n// DataSourcePreviewCard\n\nexport function DataSourcePreviewCard({ dataSource, withLink, children, ...props }) {\n  const imageUrl = `/static/images/db-logos/${dataSource.type}.png`;\n  const title = withLink ? <a href={'data_sources/' + dataSource.id}>{dataSource.name}</a> : dataSource.name;\n  return <PreviewCard {...props} imageUrl={imageUrl} title={title}>{children}</PreviewCard>;\n}\n\nDataSourcePreviewCard.propTypes = {\n  dataSource: PropTypes.shape({\n    name: PropTypes.string.isRequired,\n    type: PropTypes.string.isRequired,\n  }).isRequired,\n  withLink: PropTypes.bool,\n  children: PropTypes.node,\n};\n\nDataSourcePreviewCard.defaultProps = {\n  withLink: false,\n  children: null,\n};\n","import chroma from 'chroma-js';\nimport _ from 'lodash';\nimport { createFormatter } from '@/lib/value-format';\n\nexport const AdditionalColors = {\n  White: '#ffffff',\n  Black: '#000000',\n  'Light Gray': '#dddddd',\n};\n\nexport function darkenColor(color) {\n  return chroma(color).darken().hex();\n}\n\nexport function createNumberFormatter(format, placeholder) {\n  const formatter = createFormatter({\n    displayAs: 'number',\n    numberFormat: format,\n  });\n  return (value) => {\n    if (_.isNumber(value) && isFinite(value)) {\n      return formatter(value);\n    }\n    return placeholder;\n  };\n}\n\nexport function prepareData(data, countryCodeField, valueField) {\n  if (!countryCodeField || !valueField) {\n    return {};\n  }\n\n  const result = {};\n  _.each(data, (item) => {\n    if (item[countryCodeField]) {\n      const value = parseFloat(item[valueField]);\n      result[item[countryCodeField]] = {\n        code: item[countryCodeField],\n        value: isFinite(value) ? value : undefined,\n        item,\n      };\n    }\n  });\n  return result;\n}\n\nexport function prepareFeatureProperties(feature, valueFormatted, data, countryCodeType) {\n  const result = {};\n  _.each(feature.properties, (value, key) => {\n    result['@@' + key] = value;\n  });\n  result['@@value'] = valueFormatted;\n  const datum = data[feature.properties[countryCodeType]] || {};\n  return _.extend(result, datum.item);\n}\n\nexport function getValueForFeature(feature, data, countryCodeType) {\n  const code = feature.properties[countryCodeType];\n  if (_.isString(code) && _.isObject(data[code])) {\n    return data[code].value;\n  }\n  return undefined;\n}\n\nexport function getColorByValue(value, limits, colors, defaultColor) {\n  if (_.isNumber(value) && isFinite(value)) {\n    for (let i = 0; i < limits.length; i += 1) {\n      if (value <= limits[i]) {\n        return colors[i];\n      }\n    }\n  }\n  return defaultColor;\n}\n\nexport function createScale(features, data, options) {\n  // Calculate limits\n  const values = _.uniq(_.filter(\n    _.map(features, feature => getValueForFeature(feature, data, options.countryCodeType)),\n    _.isNumber,\n  ));\n  if (values.length === 0) {\n    return {\n      limits: [],\n      colors: [],\n      legend: [],\n    };\n  }\n  const steps = Math.min(values.length, options.steps);\n  if (steps === 1) {\n    return {\n      limits: values,\n      colors: [options.colors.max],\n      legend: [{\n        color: options.colors.max,\n        limit: _.first(values),\n      }],\n    };\n  }\n  const limits = chroma.limits(values, options.clusteringMode, steps - 1);\n\n  // Create color buckets\n  const colors = chroma.scale([options.colors.min, options.colors.max])\n    .colors(limits.length);\n\n  // Group values for legend\n  const legend = _.map(colors, (color, index) => ({\n    color,\n    limit: limits[index],\n  })).reverse();\n\n  return { limits, colors, legend };\n}\n\nexport function inferCountryCodeType(data, countryCodeField) {\n  const regex = {\n    iso_a2: /^[a-z]{2}$/i,\n    iso_a3: /^[a-z]{3}$/i,\n    iso_n3: /^[0-9]{3}$/i,\n  };\n\n  const result = _.chain(data)\n    .reduce((memo, item) => {\n      const value = item[countryCodeField];\n      if (_.isString(value)) {\n        _.each(regex, (r, k) => {\n          memo[k] += r.test(value) ? 1 : 0;\n        });\n      }\n      return memo;\n    }, {\n      iso_a2: 0,\n      iso_a3: 0,\n      iso_n3: 0,\n    })\n    .toPairs()\n    .reduce((memo, item) => (item[1] > memo[1] ? item : memo))\n    .value();\n\n  return (result[1] / data.length) >= 0.9 ? result[0] : null;\n}\n","import { map, trim, extend } from 'lodash';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { react2angular } from 'react2angular';\nimport Tooltip from 'antd/lib/tooltip';\nimport EditTagsDialog from './EditTagsDialog';\n\nexport class TagsControl extends React.Component {\n  static propTypes = {\n    tags: PropTypes.arrayOf(PropTypes.string),\n    canEdit: PropTypes.bool,\n    getAvailableTags: PropTypes.func,\n    onEdit: PropTypes.func,\n    className: PropTypes.string,\n    children: PropTypes.node,\n  };\n\n  static defaultProps = {\n    tags: [],\n    canEdit: false,\n    getAvailableTags: () => Promise.resolve([]),\n    onEdit: () => {},\n    className: '',\n    children: null,\n  };\n\n  editTags = (tags, getAvailableTags) => {\n    EditTagsDialog.showModal({ tags, getAvailableTags })\n      .result.then(this.props.onEdit);\n  };\n\n  renderEditButton() {\n    const tags = map(this.props.tags, trim);\n    return (\n      <a className=\"label label-tag\" role=\"none\" onClick={() => this.editTags(tags, this.props.getAvailableTags)}>\n        {(tags.length === 0) && <React.Fragment><i className=\"zmdi zmdi-plus m-r-5\" />Add tag</React.Fragment>}\n        {(tags.length > 0) && <i className=\"zmdi zmdi-edit\" />}\n      </a>\n    );\n  }\n\n  render() {\n    return (\n      <div className={'tags-control ' + this.props.className}>\n        {this.props.children}\n        {map(this.props.tags, tag => (\n          <span className=\"label label-tag\" key={tag} title={tag}>{tag}</span>\n        ))}\n        {this.props.canEdit && this.renderEditButton()}\n      </div>\n    );\n  }\n}\n\nfunction modelTagsControl({ archivedTooltip }) {\n  // See comment for `propTypes`/`defaultProps`\n  // eslint-disable-next-line react/prop-types\n  function ModelTagsControl({ isDraft, isArchived, ...props }) {\n    return (\n      <TagsControl {...props}>\n        {!isArchived && isDraft && (\n          <span className=\"label label-tag-unpublished\">Unpublished</span>\n        )}\n        {isArchived && (\n          <Tooltip placement=\"right\" title={archivedTooltip}>\n            <span className=\"label label-tag-archived\">Archived</span>\n          </Tooltip>\n        )}\n      </TagsControl>\n    );\n  }\n\n  // ANGULAR_REMOVE_ME `extend` needed just for `react2angular`, so remove it when `react2angular` no longer needed\n  ModelTagsControl.propTypes = extend({\n    isDraft: PropTypes.bool,\n    isArchived: PropTypes.bool,\n  }, TagsControl.propTypes);\n\n  ModelTagsControl.defaultProps = extend({\n    isDraft: false,\n    isArchived: false,\n  }, TagsControl.defaultProps);\n\n  return ModelTagsControl;\n}\n\nexport const QueryTagsControl = modelTagsControl({\n  archivedTooltip: 'This query is archived and can\\'t be used in dashboards, or appear in search results.',\n});\n\nexport const DashboardTagsControl = modelTagsControl({\n  archivedTooltip: 'This dashboard is archived and won\\'t be listed in dashboards nor search results.',\n});\n\nexport default function init(ngModule) {\n  ngModule.component('queryTagsControl', react2angular(QueryTagsControl));\n  ngModule.component('dashboardTagsControl', react2angular(DashboardTagsControl));\n}\n\ninit.init = true;\n","export default class PromiseRejectionError extends Error {\n  constructor(rejection) {\n    let message;\n    if (rejection.status !== undefined) {\n      if (rejection.status === 404) {\n        message = \"It seems like the page you're looking for cannot be found.\";\n      } else if (rejection.status === 403 || rejection.status === 401) {\n        message = 'It seems like you don’t have permission to see this page.';\n      }\n    }\n\n    if (message === undefined) {\n      message = 'It seems like we encountered an error. Try refreshing this page or contact your administrator.';\n    }\n\n    super(message);\n    this.rejection = rejection;\n  }\n}\n","import { debounce, extend } from 'lodash';\nimport { $http } from '@/services/ng';\n\nlet events = [];\n\nconst post = debounce(() => {\n  const eventsToSend = events;\n  events = [];\n\n  $http.post('api/events', eventsToSend);\n}, 1000);\n\nexport default function recordEvent(action, objectType, objectId, additionalProperties) {\n  const event = {\n    action,\n    object_type: objectType,\n    object_id: objectId,\n    timestamp: Date.now() / 1000.0,\n    screen_resolution: `${window.screen.width}x${window.screen.height}`,\n  };\n  extend(event, additionalProperties);\n  events.push(event);\n\n  post();\n}\n","import { isString } from 'lodash';\nimport { $location, $rootScope } from '@/services/ng';\n\nexport default function navigateTo(url, replace = false) {\n  if (isString(url)) {\n    $location.url(url);\n    if (replace) {\n      $location.replace();\n    }\n    $rootScope.$applyAsync();\n  }\n}\n","import { $http } from '@/services/ng';\n\nclass OrganizationStatus {\n  constructor() {\n    this.objectCounters = {};\n  }\n\n  refresh() {\n    return $http.get('api/organization/status').then(({ data }) => {\n      this.objectCounters = data.object_counters;\n      return this;\n    });\n  }\n}\n\nexport default new OrganizationStatus();\n","import React from 'react';\nimport Input from 'antd/lib/input';\nimport Icon from 'antd/lib/icon';\nimport Tooltip from 'antd/lib/tooltip';\n\nexport default class InputWithCopy extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { copied: null };\n    this.ref = React.createRef();\n    this.copyFeatureSupported = document.queryCommandSupported('copy');\n    this.resetCopyState = null;\n  }\n\n  componentWillUnmount() {\n    if (this.resetCopyState) {\n      clearTimeout(this.resetCopyState);\n    }\n  }\n\n  copy = () => {\n    // select text\n    this.ref.current.select();\n\n    // copy\n    try {\n      const success = document.execCommand('copy');\n      if (!success) {\n        throw new Error();\n      }\n      this.setState({ copied: 'Copied!' });\n    } catch (err) {\n      this.setState({\n        copied: 'Copy failed',\n      });\n    }\n\n    // reset tooltip\n    this.resetCopyState = setTimeout(() => this.setState({ copied: null }), 2000);\n  };\n\n  render() {\n    const copyButton = (\n      <Tooltip title={this.state.copied || 'Copy'}>\n        <Icon\n          type=\"copy\"\n          style={{ cursor: 'pointer' }}\n          onClick={this.copy}\n        />\n      </Tooltip>\n    );\n\n    return (\n      <Input {...this.props} ref={this.ref} addonAfter={this.copyFeatureSupported && copyButton} />\n    );\n  }\n}\n","module.exports = __webpack_public_path__ + \"images/redash_icon_small.png\";","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { react2angular } from 'react2angular';\n\nexport function PageHeader({ title }) {\n  return (\n    <div className=\"page-header-wrapper row p-l-15 p-r-15 m-b-10 m-l-0 m-r-0\">\n      <div className=\"col-sm-9 p-l-0 p-r-0\">\n        <h3>{ title }</h3>\n      </div>\n    </div>\n  );\n}\n\nPageHeader.propTypes = {\n  title: PropTypes.string.isRequired,\n};\n\nexport default function init(ngModule) {\n  ngModule.component('pageHeader', react2angular(PageHeader));\n}\n\ninit.init = true;\n","import { $http } from '@/services/ng';\n\nfunction processTags(data) {\n  return data.tags || [];\n}\n\nexport default function getTags(url) {\n  return $http.get(url).then(response => processTags(response.data));\n}\n","import { keys, some } from 'lodash';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { react2angular } from 'react2angular';\nimport classNames from 'classnames';\nimport { $uibModal } from '@/services/ng';\nimport { currentUser } from '@/services/auth';\nimport organizationStatus from '@/services/organizationStatus';\nimport './empty-state.less';\n\nfunction createDashboard() {\n  $uibModal.open({\n    component: 'editDashboardDialog',\n    resolve: {\n      dashboard: () => ({ name: null, layout: null }),\n    },\n  });\n}\n\nfunction Step({ show, completed, text, url, urlText, onClick }) {\n  if (!show) {\n    return null;\n  }\n\n  return (\n    <li className={classNames({ done: completed })}>\n      <a href={url || 'javascript:void(0)'} onClick={onClick}>\n        {urlText}\n      </a>{' '}\n      {text}\n    </li>\n  );\n}\n\nStep.propTypes = {\n  show: PropTypes.bool.isRequired,\n  completed: PropTypes.bool.isRequired,\n  text: PropTypes.string.isRequired,\n  url: PropTypes.string,\n  urlText: PropTypes.string,\n  onClick: PropTypes.func,\n};\n\nStep.defaultProps = {\n  url: null,\n  urlText: null,\n  onClick: null,\n};\n\nexport function EmptyState({\n  icon,\n  title,\n  description,\n  illustration,\n  helpLink,\n  onboardingMode,\n  showAlertStep,\n  showDashboardStep,\n  showInviteStep,\n}) {\n  const isAvailable = {\n    dataSource: true,\n    query: true,\n    alert: showAlertStep,\n    dashboard: showDashboardStep,\n    inviteUsers: showInviteStep,\n  };\n\n  const isCompleted = {\n    dataSource: organizationStatus.objectCounters.data_sources > 0,\n    query: organizationStatus.objectCounters.queries > 0,\n    alert: organizationStatus.objectCounters.alerts > 0,\n    dashboard: organizationStatus.objectCounters.dashboards > 0,\n    inviteUsers: organizationStatus.objectCounters.users > 1,\n  };\n\n  // Show if `onboardingMode=false` or any requested step not completed\n  const shouldShow = !onboardingMode || some(keys(isAvailable), step => isAvailable[step] && !isCompleted[step]);\n\n  if (!shouldShow) {\n    return null;\n  }\n\n  return (\n    <div className=\"empty-state bg-white tiled\">\n      <div className=\"empty-state__summary\">\n        {title && <h4>{title}</h4>}\n        <h2>\n          <i className={icon} />\n        </h2>\n        <p>{description}</p>\n        <img\n          src={'/static/images/illustrations/' + illustration + '.svg'}\n          alt={illustration + ' Illustration'}\n          width=\"75%\"\n        />\n      </div>\n      <div className=\"empty-state__steps\">\n        <h4>Let&apos;s get started</h4>\n        <ol>\n          {currentUser.isAdmin && (\n            <Step\n              show={isAvailable.dataSource}\n              completed={isCompleted.dataSource}\n              url=\"data_sources/new\"\n              urlText=\"Connect\"\n              text=\"a Data Source\"\n            />\n          )}\n          {!currentUser.isAdmin && (\n            <Step\n              show={isAvailable.dataSource}\n              completed={isCompleted.dataSource}\n              text=\"Ask an account admin to connect a data source\"\n            />\n          )}\n          <Step\n            show={isAvailable.query}\n            completed={isCompleted.query}\n            url=\"queries/new\"\n            urlText=\"Create\"\n            text=\"your first Query\"\n          />\n          <Step\n            show={isAvailable.alert}\n            completed={isCompleted.alert}\n            url=\"alerts/new\"\n            urlText=\"Create\"\n            text=\"your first Alert\"\n          />\n          <Step\n            show={isAvailable.dashboard}\n            completed={isCompleted.dashboard}\n            onClick={createDashboard}\n            urlText=\"Create\"\n            text=\"your first Dashboard\"\n          />\n          <Step\n            show={isAvailable.inviteUsers}\n            completed={isCompleted.inviteUsers}\n            url=\"users/new\"\n            urlText=\"Invite\"\n            text=\"your team members\"\n          />\n        </ol>\n        <p>\n          Need more support?{' '}\n          <a href={helpLink} target=\"_blank\" rel=\"noopener noreferrer\">\n            See our Help\n            <i className=\"fa fa-external-link m-l-5\" aria-hidden=\"true\" />\n          </a>\n        </p>\n      </div>\n    </div>\n  );\n}\n\nEmptyState.propTypes = {\n  icon: PropTypes.string,\n  title: PropTypes.string,\n  description: PropTypes.string.isRequired,\n  illustration: PropTypes.string.isRequired,\n  helpLink: PropTypes.string.isRequired,\n\n  onboardingMode: PropTypes.bool,\n  showAlertStep: PropTypes.bool,\n  showDashboardStep: PropTypes.bool,\n  showInviteStep: PropTypes.bool,\n};\n\nEmptyState.defaultProps = {\n  icon: null,\n  title: null,\n\n  onboardingMode: false,\n  showAlertStep: false,\n  showDashboardStep: false,\n  showInviteStep: false,\n};\n\nexport default function init(ngModule) {\n  ngModule.component('emptyState', react2angular(EmptyState));\n}\n\ninit.init = true;\n","import { isString, sortBy } from 'lodash';\n\nconst ORDER_BY_REVERSE = '-';\n\nexport function compile(field, reverse) {\n  if (!field) {\n    return null;\n  }\n  return reverse ? ORDER_BY_REVERSE + field : field;\n}\n\nexport function parse(compiled) {\n  compiled = isString(compiled) ? compiled : '';\n  const reverse = compiled.startsWith(ORDER_BY_REVERSE);\n  if (reverse) {\n    compiled = compiled.substring(1);\n  }\n  const field = compiled !== '' ? compiled : null;\n  return { field, reverse };\n}\n\nexport default class Sorter {\n  field = null;\n\n  reverse = false;\n\n  get compiled() {\n    return compile(this.field, this.reverse);\n  }\n\n  set compiled(value) {\n    const { field, reverse } = parse(value);\n    this.field = field;\n    this.reverse = reverse;\n  }\n\n  setField(value) {\n    this.field = isString(value) && (value !== '') ? value : null;\n  }\n\n  setReverse(value) {\n    this.reverse = !!value; // cast to boolean\n  }\n\n  constructor({ orderByField, orderByReverse } = {}) {\n    this.setField(orderByField);\n    this.setReverse(orderByReverse);\n  }\n\n  toggleField(field) {\n    if (!isString(field) || (field === '')) {\n      return;\n    }\n    if (field === this.field) {\n      this.reverse = !this.reverse;\n    } else {\n      this.field = field;\n      this.reverse = false;\n    }\n  }\n\n  sort(items) {\n    if (this.field) {\n      items = sortBy(items, this.field);\n      if (this.reverse) {\n        items.reverse();\n      }\n      return items;\n    }\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Tooltip from 'antd/lib/tooltip';\n\nexport default function ListItemAddon({ isSelected, isStaged, alreadyInGroup }) {\n  if (isStaged) {\n    return <i className=\"fa fa-remove\" />;\n  }\n  if (alreadyInGroup) {\n    return <Tooltip title=\"Already in this group\"><i className=\"fa fa-check\" /></Tooltip>;\n  }\n  return isSelected ? <i className=\"fa fa-check\" /> : <i className=\"fa fa-angle-double-right\" />;\n}\n\nListItemAddon.propTypes = {\n  isSelected: PropTypes.bool,\n  isStaged: PropTypes.bool,\n  alreadyInGroup: PropTypes.bool,\n};\n\nListItemAddon.defaultProps = {\n  isSelected: false,\n  isStaged: false,\n  alreadyInGroup: false,\n};\n","export const SCHEMA_NOT_SUPPORTED = 1;\nexport const SCHEMA_LOAD_ERROR = 2;\n\nexport let DataSource = null; // eslint-disable-line import/no-mutable-exports\n\nfunction DataSourceService($q, $resource, $http) {\n  function fetchSchema(dataSourceId, refresh = false) {\n    const params = {};\n\n    if (refresh) {\n      params.refresh = true;\n    }\n\n    return $http.get(`api/data_sources/${dataSourceId}/schema`, { params });\n  }\n\n  const actions = {\n    get: { method: 'GET', cache: false, isArray: false },\n    query: { method: 'GET', cache: false, isArray: true },\n    test: {\n      method: 'POST',\n      cache: false,\n      isArray: false,\n      url: 'api/data_sources/:id/test',\n    },\n  };\n\n  const DataSourceResource = $resource('api/data_sources/:id', { id: '@id' }, actions);\n\n  DataSourceResource.prototype.getSchema = function getSchema(refresh = false) {\n    if (this._schema === undefined || refresh) {\n      return fetchSchema(this.id, refresh).then((response) => {\n        const data = response.data;\n\n        this._schema = data;\n\n        return data;\n      });\n    }\n\n    return $q.resolve(this._schema);\n  };\n\n  return DataSourceResource;\n}\n\nexport default function init(ngModule) {\n  ngModule.factory('DataSource', DataSourceService);\n\n  ngModule.run(($injector) => {\n    DataSource = $injector.get('DataSource');\n  });\n}\n\ninit.init = true;\n","import { each, includes, isUndefined } from 'lodash';\n\nfunction orderedInputs(properties, order, targetOptions) {\n  const inputs = new Array(order.length);\n  Object.keys(properties).forEach((key) => {\n    const position = order.indexOf(key);\n    const input = {\n      name: key,\n      title: properties[key].title,\n      type: properties[key].type,\n      placeholder: properties[key].default && properties[key].default.toString(),\n      required: properties[key].required,\n      initialValue: targetOptions[key],\n    };\n\n    if (position > -1) {\n      inputs[position] = input;\n    } else {\n      inputs.push(input);\n    }\n  });\n  return inputs;\n}\n\nfunction normalizeSchema(configurationSchema) {\n  each(configurationSchema.properties, (prop, name) => {\n    if (name === 'password' || name === 'passwd') {\n      prop.type = 'password';\n    }\n\n    if (name.endsWith('File')) {\n      prop.type = 'file';\n    }\n\n    if (prop.type === 'boolean') {\n      prop.type = 'checkbox';\n    }\n\n    if (prop.type === 'string') {\n      prop.type = 'text';\n    }\n\n    prop.required = includes(configurationSchema.required, name);\n  });\n\n  configurationSchema.order = configurationSchema.order || [];\n}\n\nfunction setDefaultValueForCheckboxes(configurationSchema, options = {}) {\n  if (Object.keys(options).length === 0) {\n    const properties = configurationSchema.properties;\n    Object.keys(properties).forEach((property) => {\n      if (!isUndefined(properties[property].default) && properties[property].type === 'checkbox') {\n        options[property] = properties[property].default;\n      }\n    });\n  }\n}\n\nfunction getFields(configurationSchema, target = {}) {\n  normalizeSchema(configurationSchema);\n  setDefaultValueForCheckboxes(configurationSchema, target.options);\n\n  const inputs = [\n    {\n      name: 'name',\n      title: 'Name',\n      type: 'text',\n      required: true,\n      initialValue: target.name,\n    },\n    ...orderedInputs(configurationSchema.properties, configurationSchema.order, target.options),\n  ];\n\n  return inputs;\n}\n\nfunction updateTargetWithValues(target, values) {\n  target.name = values.name;\n  Object.keys(values).forEach((key) => {\n    if (key !== 'name') {\n      target.options[key] = values[key];\n    }\n  });\n}\n\nfunction toHuman(text) {\n  return text.replace(/_/g, ' ').replace(/(?:^|\\s)\\S/g, a => a.toUpperCase());\n}\n\nfunction getBase64(file) {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onload = () => resolve(reader.result.substr(reader.result.indexOf(',') + 1));\n    reader.onerror = error => reject(error);\n  });\n}\n\nexport default {\n  getFields,\n  updateTargetWithValues,\n  toHuman,\n  getBase64,\n};\n","import _ from 'lodash';\n\nexport let Dashboard = null; // eslint-disable-line import/no-mutable-exports\n\nfunction prepareWidgetsForDashboard(widgets) {\n  // Default height for auto-height widgets.\n  // Compute biggest widget size and choose between it and some magic number.\n  // This value should be big enough so auto-height widgets will not overlap other ones.\n  const defaultWidgetSizeY =\n    Math.max(\n      _\n        .chain(widgets)\n        .map(w => w.options.position.sizeY)\n        .max()\n        .value(),\n      20,\n    ) + 5;\n\n  // Fix layout:\n  // 1. sort and group widgets by row\n  // 2. update position of widgets in each row - place it right below\n  //    biggest widget from previous row\n  _.chain(widgets)\n    .sortBy(widget => widget.options.position.row)\n    .groupBy(widget => widget.options.position.row)\n    .reduce((row, widgetsAtRow) => {\n      let height = 1;\n      _.each(widgetsAtRow, (widget) => {\n        height = Math.max(\n          height,\n          widget.options.position.autoHeight ? defaultWidgetSizeY : widget.options.position.sizeY,\n        );\n        widget.options.position.row = row;\n        if (widget.options.position.sizeY < 1) {\n          widget.options.position.sizeY = defaultWidgetSizeY;\n        }\n      });\n      return row + height;\n    }, 0)\n    .value();\n\n  // Sort widgets by updated column and row value\n  widgets = _.sortBy(widgets, widget => widget.options.position.col);\n  widgets = _.sortBy(widgets, widget => widget.options.position.row);\n\n  return widgets;\n}\n\nfunction DashboardService($resource, $http, $location, currentUser, Widget, dashboardGridOptions) {\n  function prepareDashboardWidgets(widgets) {\n    return prepareWidgetsForDashboard(_.map(widgets, widget => new Widget(widget)));\n  }\n\n  function transformSingle(dashboard) {\n    if (dashboard.widgets) {\n      dashboard.widgets = prepareDashboardWidgets(dashboard.widgets);\n    }\n    dashboard.publicAccessEnabled = dashboard.public_url !== undefined;\n  }\n\n  const transform = $http.defaults.transformResponse.concat((data) => {\n    if (data.results) {\n      data.results.forEach(transformSingle);\n    } else {\n      transformSingle(data);\n    }\n    return data;\n  });\n\n  const resource = $resource(\n    'api/dashboards/:slug',\n    { slug: '@slug' },\n    {\n      get: { method: 'GET', transformResponse: transform },\n      save: { method: 'POST', transformResponse: transform },\n      query: { method: 'GET', isArray: false, transformResponse: transform },\n      recent: {\n        method: 'get',\n        isArray: true,\n        url: 'api/dashboards/recent',\n        transformResponse: transform,\n      },\n      favorites: {\n        method: 'get',\n        isArray: false,\n        url: 'api/dashboards/favorites',\n      },\n      favorite: {\n        method: 'post',\n        isArray: false,\n        url: 'api/dashboards/:slug/favorite',\n        transformRequest: [() => ''], // body not needed\n      },\n      unfavorite: {\n        method: 'delete',\n        isArray: false,\n        url: 'api/dashboards/:slug/favorite',\n        transformRequest: [() => ''], // body not needed\n      },\n    },\n  );\n\n  resource.prototype.canEdit = function canEdit() {\n    return currentUser.canEdit(this) || this.can_edit;\n  };\n\n  resource.prototype.calculateNewWidgetPosition = function calculateNewWidgetPosition(widget) {\n    const width = _.extend({ sizeX: dashboardGridOptions.defaultSizeX }, _.extend({}, widget.options).position).sizeX;\n\n    // Find first free row for each column\n    const bottomLine = _\n      .chain(this.widgets)\n      .map((w) => {\n        const options = _.extend({}, w.options);\n        const position = _.extend({ row: 0, sizeY: 0 }, options.position);\n        return {\n          left: position.col,\n          top: position.row,\n          right: position.col + position.sizeX,\n          bottom: position.row + position.sizeY,\n          width: position.sizeX,\n          height: position.sizeY,\n        };\n      })\n      .reduce((result, item) => {\n        const from = Math.max(item.left, 0);\n        const to = Math.min(item.right, result.length + 1);\n        for (let i = from; i < to; i += 1) {\n          result[i] = Math.max(result[i], item.bottom);\n        }\n        return result;\n      }, _.map(new Array(dashboardGridOptions.columns), _.constant(0)))\n      .value();\n\n    // Go through columns, pick them by count necessary to hold new block,\n    // and calculate bottom-most free row per group.\n    // Choose group with the top-most free row (comparing to other groups)\n    return _\n      .chain(_.range(0, dashboardGridOptions.columns - width + 1))\n      .map(col => ({\n        col,\n        row: _\n          .chain(bottomLine)\n          .slice(col, col + width)\n          .max()\n          .value(),\n      }))\n      .sortBy('row')\n      .first()\n      .value();\n  };\n\n  resource.prepareDashboardWidgets = prepareDashboardWidgets;\n  resource.prepareWidgetsForDashboard = prepareWidgetsForDashboard;\n\n  resource.prototype.getParametersDefs = function getParametersDefs() {\n    const globalParams = {};\n    const queryParams = $location.search();\n    _.each(this.widgets, (widget) => {\n      if (widget.getQuery()) {\n        const mappings = widget.getParameterMappings();\n        widget\n          .getQuery()\n          .getParametersDefs()\n          .forEach((param) => {\n            const mapping = mappings[param.name];\n            if (mapping.type === Widget.MappingType.DashboardLevel) {\n              // create global param\n              if (!globalParams[mapping.mapTo]) {\n                globalParams[mapping.mapTo] = param.clone();\n                globalParams[mapping.mapTo].name = mapping.mapTo;\n                globalParams[mapping.mapTo].title = mapping.title || param.title;\n                globalParams[mapping.mapTo].locals = [];\n              }\n\n              // add to locals list\n              globalParams[mapping.mapTo].locals.push(param);\n            }\n          });\n      }\n    });\n    return _.values(_.each(globalParams, (param) => {\n      param.fromUrlParams(queryParams);\n    }));\n  };\n\n  return resource;\n}\n\nexport default function init(ngModule) {\n  ngModule.factory('Dashboard', DashboardService);\n\n  ngModule.run(($injector) => {\n    Dashboard = $injector.get('Dashboard');\n  });\n}\n\ninit.init = true;\n","import { isFunction, isString } from 'lodash';\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nconst componentsRegistry = new Map();\nconst activeInstances = new Set();\n\nexport function registerComponent(name, component) {\n  if (isString(name) && name !== '') {\n    componentsRegistry.set(name, isFunction(component) ? component : null);\n    // Refresh active DynamicComponent instances which use this component\n    activeInstances.forEach((dynamicComponent) => {\n      if (dynamicComponent.props.name === name) {\n        dynamicComponent.forceUpdate();\n      }\n    });\n  }\n}\n\nexport function unregisterComponent(name) {\n  registerComponent(name, null);\n}\n\nexport default class DynamicComponent extends React.Component {\n  static propTypes = {\n    name: PropTypes.string.isRequired,\n    children: PropTypes.node,\n  };\n\n  static defaultProps = {\n    children: null,\n  };\n\n  componentDidMount() {\n    activeInstances.add(this);\n  }\n\n  componentWillUnmount() {\n    activeInstances.delete(this);\n  }\n\n  render() {\n    const { name, children, ...props } = this.props;\n    const RealComponent = componentsRegistry.get(name);\n    if (!RealComponent) {\n      return null;\n    }\n    return <RealComponent {...props}>{children}</RealComponent>;\n  }\n}\n","\nimport { includes, startsWith, words, capitalize, clone, isNull } from 'lodash';\nimport React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport Modal from 'antd/lib/modal';\nimport Form from 'antd/lib/form';\nimport Checkbox from 'antd/lib/checkbox';\nimport Button from 'antd/lib/button';\nimport Select from 'antd/lib/select';\nimport Input from 'antd/lib/input';\nimport Divider from 'antd/lib/divider';\nimport { wrap as wrapDialog, DialogPropType } from '@/components/DialogWrapper';\nimport { QuerySelector } from '@/components/QuerySelector';\nimport { Query } from '@/services/query';\n\nconst { Option } = Select;\nconst formItemProps = { labelCol: { span: 6 }, wrapperCol: { span: 16 } };\n\nfunction getDefaultTitle(text) {\n  return capitalize(words(text).join(' ')); // humanize\n}\n\nfunction isTypeDate(type) {\n  return startsWith(type, 'date') && !isTypeDateRange(type);\n}\n\nfunction isTypeDateRange(type) {\n  return /-range/.test(type);\n}\n\nfunction NameInput({ name, type, onChange, existingNames, setValidation }) {\n  let helpText = '';\n  let validateStatus = '';\n\n  if (!name) {\n    helpText = 'Choose a keyword for this parameter';\n    setValidation(false);\n  } else if (includes(existingNames, name)) {\n    helpText = 'Parameter with this name already exists';\n    setValidation(false);\n    validateStatus = 'error';\n  } else {\n    if (isTypeDateRange(type)) {\n      helpText = (\n        <React.Fragment>\n          Appears in query as {' '}\n          <code style={{ display: 'inline-block', color: 'inherit' }}>\n            {`{{${name}.start}} {{${name}.end}}`}\n          </code>\n        </React.Fragment>\n      );\n    }\n    setValidation(true);\n  }\n\n  return (\n    <Form.Item\n      required\n      label=\"Keyword\"\n      help={helpText}\n      validateStatus={validateStatus}\n      {...formItemProps}\n    >\n      <Input onChange={e => onChange(e.target.value)} autoFocus />\n    </Form.Item>\n  );\n}\n\nNameInput.propTypes = {\n  name: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  existingNames: PropTypes.arrayOf(PropTypes.string).isRequired,\n  setValidation: PropTypes.func.isRequired,\n  type: PropTypes.string.isRequired,\n};\n\nfunction EditParameterSettingsDialog(props) {\n  const [param, setParam] = useState(clone(props.parameter));\n  const [isNameValid, setIsNameValid] = useState(true);\n  const [initialQuery, setInitialQuery] = useState();\n\n  const isNew = !props.parameter.name;\n\n  // fetch query by id\n  useEffect(() => {\n    const { queryId } = props.parameter;\n    if (queryId) {\n      Query.get({ id: queryId }, (query) => {\n        setInitialQuery(query);\n      });\n    }\n  }, []);\n\n  function isFulfilled() {\n    // name\n    if (!isNameValid) {\n      return false;\n    }\n\n    // title\n    if (param.title === '') {\n      return false;\n    }\n\n    // query\n    if (param.type === 'query' && !param.queryId) {\n      return false;\n    }\n\n    return true;\n  }\n\n  function onConfirm(e) {\n    // update title to default\n    if (!param.title) {\n      // forced to do this cause param won't update in time for save\n      param.title = getDefaultTitle(param.name);\n      setParam(param);\n    }\n\n    props.dialog.close(param);\n\n    e.preventDefault(); // stops form redirect\n  }\n\n  return (\n    <Modal\n      {...props.dialog.props}\n      title={isNew ? 'Add Parameter' : param.name}\n      width={600}\n      footer={[(\n        <Button key=\"cancel\" onClick={props.dialog.dismiss}>Cancel</Button>\n      ), (\n        <Button key=\"submit\" htmlType=\"submit\" disabled={!isFulfilled()} type=\"primary\" form=\"paramForm\">\n          {isNew ? 'Add Parameter' : 'OK'}\n        </Button>\n      )]}\n    >\n      <Form layout=\"horizontal\" onSubmit={onConfirm} id=\"paramForm\">\n        {isNew && (\n          <NameInput\n            name={param.name}\n            onChange={name => setParam({ ...param, name })}\n            setValidation={setIsNameValid}\n            existingNames={props.existingParams}\n            type={param.type}\n          />\n        )}\n        <Form.Item label=\"Title\" {...formItemProps}>\n          <Input\n            value={isNull(param.title) ? getDefaultTitle(param.name) : param.title}\n            onChange={e => setParam({ ...param, title: e.target.value })}\n          />\n        </Form.Item>\n        <Form.Item label=\"Type\" {...formItemProps}>\n          <Select value={param.type} onChange={type => setParam({ ...param, type })}>\n            <Option value=\"text\">Text</Option>\n            <Option value=\"number\">Number</Option>\n            <Option value=\"enum\">Dropdown List</Option>\n            <Option value=\"query\">Query Based Dropdown List</Option>\n            <Option disabled key=\"dv1\">\n              <Divider className=\"select-option-divider\" />\n            </Option>\n            <Option value=\"date\">Date</Option>\n            <Option value=\"datetime-local\">Date and Time</Option>\n            <Option value=\"datetime-with-seconds\">Date and Time (with seconds)</Option>\n            <Option disabled key=\"dv2\">\n              <Divider className=\"select-option-divider\" />\n            </Option>\n            <Option value=\"date-range\">Date Range</Option>\n            <Option value=\"datetime-range\">Date and Time Range</Option>\n            <Option value=\"datetime-range-with-seconds\">Date and Time Range (with seconds)</Option>\n          </Select>\n        </Form.Item>\n        {isTypeDate(param.type) && (\n          <Form.Item label=\" \" colon={false} {...formItemProps}>\n            <Checkbox\n              defaultChecked={param.useCurrentDateTime}\n              onChange={e => setParam({ ...param, useCurrentDateTime: e.target.checked })}\n            >\n              Default to Today/Now if no other value is set\n            </Checkbox>\n          </Form.Item>\n        )}\n        {param.type === 'enum' && (\n          <Form.Item label=\"Values\" help=\"Dropdown list values (newline delimeted)\" {...formItemProps}>\n            <Input.TextArea\n              rows={3}\n              value={param.enumOptions}\n              onChange={e => setParam({ ...param, enumOptions: e.target.value })}\n            />\n          </Form.Item>\n        )}\n        {param.type === 'query' && (\n          <Form.Item label=\"Query\" help=\"Select query to load dropdown values from\" {...formItemProps}>\n            <QuerySelector\n              selectedQuery={initialQuery}\n              onChange={q => setParam({ ...param, queryId: q && q.id })}\n              type=\"select\"\n            />\n          </Form.Item>\n        )}\n      </Form>\n    </Modal>\n  );\n}\n\nEditParameterSettingsDialog.propTypes = {\n  parameter: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n  dialog: DialogPropType.isRequired,\n  existingParams: PropTypes.arrayOf(PropTypes.string),\n};\n\nEditParameterSettingsDialog.defaultProps = {\n  existingParams: [],\n};\n\nexport default wrapDialog(EditParameterSettingsDialog);\n","import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport { react2angular } from 'react2angular';\nimport { debounce, find } from 'lodash';\nimport Input from 'antd/lib/input';\nimport Select from 'antd/lib/select';\nimport { Query } from '@/services/query';\nimport { toastr } from '@/services/ng';\nimport { QueryTagsControl } from '@/components/tags-control/TagsControl';\n\nconst SEARCH_DEBOUNCE_DURATION = 200;\nconst { Option } = Select;\n\nclass StaleSearchError extends Error {\n  constructor() {\n    super('stale search');\n  }\n}\n\nfunction search(term) {\n  // get recent\n  if (!term) {\n    return Query.recent().$promise\n      .then((results) => {\n        const filteredResults = results.filter(item => !item.is_draft); // filter out draft\n        return Promise.resolve(filteredResults);\n      });\n  }\n\n  // search by query\n  return Query.query({ q: term }).$promise\n    .then(({ results }) => Promise.resolve(results));\n}\n\nexport function QuerySelector(props) {\n  const [searchTerm, setSearchTerm] = useState();\n  const [searching, setSearching] = useState();\n  const [searchResults, setSearchResults] = useState([]);\n  const [selectedQuery, setSelectedQuery] = useState();\n\n  let isStaleSearch = false;\n  const debouncedSearch = debounce(_search, SEARCH_DEBOUNCE_DURATION);\n  const placeholder = 'Search a query by name';\n  const clearIcon = <i className=\"fa fa-times\" onClick={() => selectQuery(null)} />;\n  const spinIcon = <i className={cx('fa fa-spinner fa-pulse', { hidden: !searching })} />;\n\n  // set selected from prop\n  useEffect(() => {\n    if (props.selectedQuery) {\n      setSelectedQuery(props.selectedQuery);\n    }\n  }, [props.selectedQuery]);\n\n  // on search term changed, debounced\n  useEffect(() => {\n    // clear results, no search\n    if (searchTerm === null) {\n      setSearchResults(null);\n      return () => {};\n    }\n\n    // search\n    debouncedSearch(searchTerm);\n    return () => {\n      debouncedSearch.cancel();\n      isStaleSearch = true;\n    };\n  }, [searchTerm]);\n\n  function _search(term) {\n    setSearching(true);\n    search(term)\n      .then(rejectStale)\n      .then((results) => {\n        setSearchResults(results);\n        setSearching(false);\n      })\n      .catch((err) => {\n        if (!(err instanceof StaleSearchError)) {\n          setSearching(false);\n        }\n      });\n  }\n\n  function rejectStale(results) {\n    return isStaleSearch\n      ? Promise.reject(new StaleSearchError())\n      : Promise.resolve(results);\n  }\n\n  function selectQuery(queryId) {\n    let query = null;\n    if (queryId) {\n      query = find(searchResults, { id: queryId });\n      if (!query) { // shouldn't happen\n        toastr.error('Something went wrong... Couldn\\'t select query');\n      }\n    }\n\n    setSearchTerm(query ? null : ''); // empty string triggers recent fetch\n    setSelectedQuery(query);\n    props.onChange(query);\n  }\n\n  function renderResults() {\n    if (!searchResults.length) {\n      return <div className=\"text-muted\">No results matching search term.</div>;\n    }\n\n    return (\n      <div className=\"list-group\">\n        {searchResults.map(q => (\n          <a\n            href=\"javascript:void(0)\"\n            className={cx('list-group-item', { inactive: q.is_draft })}\n            key={q.id}\n            onClick={() => selectQuery(q.id)}\n          >\n            {q.name}\n            {' '}\n            <QueryTagsControl isDraft={q.is_draft} tags={q.tags} className=\"inline-tags-control\" />\n          </a>\n        ))}\n      </div>\n    );\n  }\n\n  if (props.disabled) {\n    return <Input value={selectedQuery && selectedQuery.name} placeholder={placeholder} disabled />;\n  }\n\n  if (props.type === 'select') {\n    const suffixIcon = selectedQuery ? clearIcon : null;\n    const value = selectedQuery ? selectedQuery.name : searchTerm;\n\n    return (\n      <Select\n        showSearch\n        dropdownMatchSelectWidth={false}\n        placeholder={placeholder}\n        value={value || undefined} // undefined for the placeholder to show\n        onSearch={setSearchTerm}\n        onChange={selectQuery}\n        suffixIcon={searching ? spinIcon : suffixIcon}\n        notFoundContent={null}\n        filterOption={false}\n        defaultActiveFirstOption={false}\n      >\n        {searchResults && searchResults.map((q) => {\n          const disabled = q.is_draft;\n          return (\n            <Option value={q.id} key={q.id} disabled={disabled}>\n              {q.name}{' '}\n              <QueryTagsControl isDraft={q.is_draft} tags={q.tags} className={cx('inline-tags-control', { disabled })} />\n            </Option>\n          );\n        })}\n      </Select>\n    );\n  }\n\n  return (\n    <React.Fragment>\n      {selectedQuery ? (\n        <Input value={selectedQuery.name} suffix={clearIcon} readOnly />\n      ) : (\n        <Input\n          placeholder={placeholder}\n          value={searchTerm}\n          onChange={e => setSearchTerm(e.target.value)}\n          suffix={spinIcon}\n        />\n      )}\n      <div className=\"scrollbox\" style={{ maxHeight: '50vh', marginTop: 15 }}>\n        {searchResults && renderResults()}\n      </div>\n    </React.Fragment>\n  );\n}\n\nQuerySelector.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  selectedQuery: PropTypes.object, // eslint-disable-line react/forbid-prop-types\n  type: PropTypes.oneOf(['select', 'default']),\n  disabled: PropTypes.bool,\n};\n\nQuerySelector.defaultProps = {\n  selectedQuery: null,\n  type: 'default',\n  disabled: false,\n};\n\nexport default function init(ngModule) {\n  ngModule.component('querySelector', react2angular(QuerySelector));\n}\n\ninit.init = true;\n","import { react2angular } from 'react2angular';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport Tooltip from 'antd/lib/tooltip';\nimport Drawer from 'antd/lib/drawer';\nimport { BigMessage } from '@/components/BigMessage';\nimport DynamicComponent from '@/components/DynamicComponent';\n\nimport './HelpTrigger.less';\n\nconst DOMAIN = 'https://redash.io';\nconst HELP_PATH = '/help';\nconst IFRAME_TIMEOUT = 20000;\nconst TYPES = {\n  HOME: [\n    '',\n    'Help',\n  ],\n  VALUE_SOURCE_OPTIONS: [\n    '/user-guide/querying/query-parameters#Value-Source-Options',\n    'Guide: Value Source Options',\n  ],\n  SHARE_DASHBOARD: [\n    '/user-guide/dashboards/sharing-dashboards',\n    'Guide: Sharing and Embedding Dashboards',\n  ],\n};\n\nexport class HelpTrigger extends React.Component {\n  static propTypes = {\n    type: PropTypes.oneOf(Object.keys(TYPES)).isRequired,\n    className: PropTypes.string,\n  }\n\n  static defaultProps = {\n    className: null,\n  };\n\n  iframeRef = null\n\n  iframeLoadingTimeout = null\n\n  constructor(props) {\n    super(props);\n    this.iframeRef = React.createRef();\n  }\n\n  state = {\n    visible: false,\n    loading: false,\n    error: false,\n  };\n\n  componentWillUnmount() {\n    clearTimeout(this.iframeLoadingTimeout);\n  }\n\n  loadIframe = (url) => {\n    clearTimeout(this.iframeLoadingTimeout);\n    this.setState({ loading: true, error: false });\n\n    this.iframeRef.current.src = url;\n    this.iframeLoadingTimeout = setTimeout(() => {\n      this.setState({ error: url, loading: false });\n    }, IFRAME_TIMEOUT); // safety\n  }\n\n  onIframeLoaded = () => {\n    this.setState({ loading: false });\n    clearTimeout(this.iframeLoadingTimeout);\n  }\n\n  openDrawer = () => {\n    this.setState({ visible: true });\n    const [pagePath] = TYPES[this.props.type];\n    const url = DOMAIN + HELP_PATH + pagePath;\n\n    // wait for drawer animation to complete so there's no animation jank\n    setTimeout(() => this.loadIframe(url), 300);\n  }\n\n  closeDrawer = () => {\n    this.setState({ visible: false });\n  }\n\n  render() {\n    const [, tooltip] = TYPES[this.props.type];\n    const className = cx('help-trigger', this.props.className);\n\n    return (\n      <React.Fragment>\n        <Tooltip title={tooltip}>\n          <a href=\"javascript: void(0)\" onClick={this.openDrawer} className={className}>\n            <i className=\"fa fa-question-circle\" />\n          </a>\n        </Tooltip>\n        <Drawer\n          placement=\"right\"\n          onClose={this.closeDrawer}\n          visible={this.state.visible}\n          className=\"help-drawer\"\n          destroyOnClose\n          width={400}\n        >\n          <div className=\"drawer-wrapper\">\n            {/* iframe */}\n            {!this.state.error && (\n              <iframe\n                ref={this.iframeRef}\n                title=\"Redash Help\"\n                src=\"about:blank\"\n                className={cx({ ready: !this.state.loading })}\n                onLoad={this.onIframeLoaded}\n              />\n            )}\n\n            {/* loading indicator */}\n            {this.state.loading && (\n              <BigMessage icon=\"fa-spinner fa-2x fa-pulse\" message=\"Loading...\" className=\"help-message\" />\n            )}\n\n            {/* error message */}\n            {this.state.error && (\n              <BigMessage icon=\"fa-exclamation-circle\" className=\"help-message\">\n                Something went wrong.<br />\n                {/* eslint-disable-next-line react/jsx-no-target-blank */}\n                <a href={this.state.error} target=\"_blank\" rel=\"noopener\">Click here</a>{' '}\n                to open the page in a new window.\n              </BigMessage>\n            )}\n          </div>\n\n          {/* extra content */}\n          <DynamicComponent\n            name=\"HelpDrawerExtraContent\"\n            onLeave={this.closeDrawer}\n            openPageUrl={this.loadIframe}\n          />\n        </Drawer>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default function init(ngModule) {\n  ngModule.component('helpTrigger', react2angular(HelpTrigger));\n}\n\ninit.init = true;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { react2angular } from 'react2angular';\nimport { BigMessage } from '@/components/BigMessage';\nimport { TagsControl } from '@/components/tags-control/TagsControl';\n\nexport function NoTaggedObjectsFound({ objectType, tags }) {\n  return (\n    <BigMessage icon=\"fa-tags\">\n      No {objectType} found tagged with&nbsp;<TagsControl className=\"inline-tags-control\" tags={Array.from(tags)} />.\n    </BigMessage>\n  );\n}\n\nNoTaggedObjectsFound.propTypes = {\n  objectType: PropTypes.string.isRequired,\n  tags: PropTypes.oneOfType([\n    PropTypes.array,\n    PropTypes.objectOf(Set),\n  ]).isRequired,\n};\n\nexport default function init(ngModule) {\n  ngModule.component('noTaggedObjectsFound', react2angular(NoTaggedObjectsFound));\n}\n\ninit.init = true;\n","import { filter, debounce, find } from 'lodash';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Modal from 'antd/lib/modal';\nimport Input from 'antd/lib/input';\nimport List from 'antd/lib/list';\nimport { wrap as wrapDialog, DialogPropType } from '@/components/DialogWrapper';\nimport { BigMessage } from '@/components/BigMessage';\n\nimport LoadingState from '@/components/items-list/components/LoadingState';\nimport { toastr } from '@/services/ng';\n\nclass SelectItemsDialog extends React.Component {\n  static propTypes = {\n    dialog: DialogPropType.isRequired,\n    dialogTitle: PropTypes.string,\n    inputPlaceholder: PropTypes.string,\n    selectedItemsTitle: PropTypes.string,\n    searchItems: PropTypes.func.isRequired, // (searchTerm: string): Promise<Items[]> if `searchTerm === ''` load all\n    itemKey: PropTypes.func, // (item) => string|number - return key of item (by default `id`)\n    // left list\n    // (item, { isSelected }) => {\n    //   content: node, // item contents\n    //   className: string = '', // additional class for item wrapper\n    //   isDisabled: bool = false, // is item clickable or disabled\n    // }\n    renderItem: PropTypes.func,\n    // right list; args/results save as for `renderItem`. if not specified - `renderItem` will be used\n    renderStagedItem: PropTypes.func,\n    save: PropTypes.func, // (selectedItems[]) => Promise<any>\n  };\n\n  static defaultProps = {\n    dialogTitle: 'Add Items',\n    inputPlaceholder: 'Search...',\n    selectedItemsTitle: 'Selected items',\n    itemKey: item => item.id,\n    renderItem: () => '',\n    renderStagedItem: null, // use `renderItem` by default\n    save: items => items,\n  };\n\n  state = {\n    searchTerm: '',\n    loading: false,\n    items: [],\n    selected: [],\n    saveInProgress: false,\n  };\n\n  // eslint-disable-next-line react/sort-comp\n  loadItems = (searchTerm = '') => {\n    this.setState({ searchTerm, loading: true }, () => {\n      this.props.searchItems(searchTerm)\n        .then((items) => {\n          // If another search appeared while loading data - just reject this set\n          if (this.state.searchTerm === searchTerm) {\n            this.setState({ items, loading: false });\n          }\n        })\n        .catch(() => {\n          if (this.state.searchTerm === searchTerm) {\n            this.setState({ items: [], loading: false });\n          }\n        });\n    });\n  };\n\n  search = debounce(this.loadItems, 200);\n\n  componentDidMount() {\n    this.loadItems();\n  }\n\n  isSelected(item) {\n    const key = this.props.itemKey(item);\n    return !!find(this.state.selected, i => this.props.itemKey(i) === key);\n  }\n\n  toggleItem(item) {\n    if (this.isSelected(item)) {\n      const key = this.props.itemKey(item);\n      this.setState(({ selected }) => ({\n        selected: filter(selected, i => this.props.itemKey(i) !== key),\n      }));\n    } else {\n      this.setState(({ selected }) => ({\n        selected: [...selected, item],\n      }));\n    }\n  }\n\n  save() {\n    this.setState({ saveInProgress: true }, () => {\n      const selectedItems = this.state.selected;\n      Promise.resolve(this.props.save(selectedItems))\n        .then(() => {\n          this.props.dialog.close(selectedItems);\n        })\n        .catch(() => {\n          this.setState({ saveInProgress: false });\n          toastr.error('Failed to save some of selected items.');\n        });\n    });\n  }\n\n  renderItem(item, isStagedList) {\n    const { renderItem, renderStagedItem } = this.props;\n    const isSelected = this.isSelected(item);\n    const render = isStagedList ? (renderStagedItem || renderItem) : renderItem;\n\n    const { content, className, isDisabled } = render(item, { isSelected });\n\n    return (\n      <List.Item\n        className={classNames('p-l-10', 'p-r-10', { clickable: !isDisabled, disabled: isDisabled }, className)}\n        onClick={isDisabled ? null : () => this.toggleItem(item)}\n      >\n        {content}\n      </List.Item>\n    );\n  }\n\n  render() {\n    const { dialog, dialogTitle, inputPlaceholder, selectedItemsTitle } = this.props;\n    const { loading, saveInProgress, items, selected } = this.state;\n    const hasResults = items.length > 0;\n    return (\n      <Modal\n        {...dialog.props}\n        width=\"80%\"\n        title={dialogTitle}\n        okText=\"Save\"\n        okButtonProps={{\n          loading: saveInProgress,\n          disabled: selected.length === 0,\n        }}\n        onOk={() => this.save()}\n      >\n        <div className=\"d-flex align-items-center m-b-10\">\n          <div className=\"w-50 m-r-10\">\n            <Input.Search\n              defaultValue={this.state.searchTerm}\n              onChange={event => this.search(event.target.value)}\n              placeholder={inputPlaceholder}\n              autoFocus\n            />\n          </div>\n          <div className=\"w-50 m-l-10\">\n            <h5 className=\"m-0\">{selectedItemsTitle}</h5>\n          </div>\n        </div>\n\n        <div className=\"d-flex align-items-stretch\" style={{ minHeight: '30vh', maxHeight: '50vh' }}>\n          <div className=\"w-50 m-r-10 scrollbox\">\n            {loading && <LoadingState className=\"\" />}\n            {!loading && !hasResults && (\n              <BigMessage icon=\"fa-search\" message=\"No items match your search.\" className=\"\" />\n            )}\n            {!loading && hasResults && (\n              <List\n                size=\"small\"\n                dataSource={items}\n                renderItem={item => this.renderItem(item, false)}\n              />\n            )}\n          </div>\n          <div className=\"w-50 m-l-10 scrollbox\">\n            {(selected.length > 0) && (\n              <List\n                size=\"small\"\n                dataSource={selected}\n                renderItem={item => this.renderItem(item, true)}\n              />\n            )}\n          </div>\n        </div>\n      </Modal>\n    );\n  }\n}\n\nexport default wrapDialog(SelectItemsDialog);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Form from 'antd/lib/form';\nimport Input from 'antd/lib/input';\nimport InputNumber from 'antd/lib/input-number';\nimport Checkbox from 'antd/lib/checkbox';\nimport Button from 'antd/lib/button';\nimport Upload from 'antd/lib/upload';\nimport Icon from 'antd/lib/icon';\nimport { includes } from 'lodash';\nimport { react2angular } from 'react2angular';\nimport { toastr } from '@/services/ng';\nimport { Field, Action, AntdForm } from '../proptypes';\nimport helper from './dynamicFormHelper';\n\nconst fieldRules = ({ type, required, minLength }) => {\n  const requiredRule = required;\n  const minLengthRule = minLength && includes(['text', 'email', 'password'], type);\n  const emailTypeRule = type === 'email';\n\n  return [\n    requiredRule && { required, message: 'This field is required.' },\n    minLengthRule && { min: minLength, message: 'This field is too short.' },\n    emailTypeRule && { type: 'email', message: 'This field must be a valid email.' },\n  ].filter(rule => rule);\n};\n\nexport const DynamicForm = Form.create()(class DynamicForm extends React.Component {\n  static propTypes = {\n    fields: PropTypes.arrayOf(Field),\n    actions: PropTypes.arrayOf(Action),\n    feedbackIcons: PropTypes.bool,\n    hideSubmitButton: PropTypes.bool,\n    saveText: PropTypes.string,\n    onSubmit: PropTypes.func,\n    form: AntdForm.isRequired,\n  };\n\n  static defaultProps = {\n    fields: [],\n    actions: [],\n    feedbackIcons: false,\n    hideSubmitButton: false,\n    saveText: 'Save',\n    onSubmit: () => {},\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isSubmitting: false,\n      inProgressActions: [],\n    };\n\n    this.actionCallbacks = this.props.actions.reduce((acc, cur) => ({\n      ...acc,\n      [cur.name]: cur.callback,\n    }), null);\n\n    props.actions.forEach((action) => {\n      this.state.inProgressActions[action.name] = false;\n    });\n  }\n\n  setActionInProgress = (actionName, inProgress) => {\n    this.setState(prevState => ({\n      inProgressActions: {\n        ...prevState.inProgressActions,\n        [actionName]: inProgress,\n      },\n    }));\n  };\n\n  handleSubmit = (e) => {\n    this.setState({ isSubmitting: true });\n    e.preventDefault();\n    this.props.form.validateFieldsAndScroll((err, values) => {\n      if (!err) {\n        this.props.onSubmit(\n          values,\n          (msg) => {\n            const { setFieldsValue, getFieldsValue } = this.props.form;\n            this.setState({ isSubmitting: false });\n            setFieldsValue(getFieldsValue()); // reset form touched state\n            toastr.success(msg);\n          },\n          (msg) => {\n            this.setState({ isSubmitting: false });\n            toastr.error(msg);\n          },\n        );\n      } else this.setState({ isSubmitting: false });\n    });\n  }\n\n  handleAction = (e) => {\n    const actionName = e.target.dataset.action;\n\n    this.setActionInProgress(actionName, true);\n    this.actionCallbacks[actionName](() => {\n      this.setActionInProgress(actionName, false);\n    });\n  }\n\n  base64File = (fieldName, e) => {\n    if (e && e.fileList[0]) {\n      helper.getBase64(e.file).then((value) => {\n        this.props.form.setFieldsValue({ [fieldName]: value });\n      });\n    }\n  }\n\n  renderUpload(field, props) {\n    const { getFieldDecorator, getFieldValue } = this.props.form;\n    const { name, initialValue } = field;\n\n    const fileOptions = {\n      rules: fieldRules(field),\n      initialValue,\n      getValueFromEvent: this.base64File.bind(this, name),\n    };\n\n    const disabled = getFieldValue(name) !== undefined && getFieldValue(name) !== initialValue;\n\n    const upload = (\n      <Upload {...props} beforeUpload={() => false}>\n        <Button disabled={disabled}><Icon type=\"upload\" /> Click to upload</Button>\n      </Upload>\n    );\n\n    return getFieldDecorator(name, fileOptions)(upload);\n  }\n\n  renderField(field, props) {\n    const { getFieldDecorator } = this.props.form;\n    const { name, type, initialValue } = field;\n    const fieldLabel = field.title || helper.toHuman(name);\n\n    const options = {\n      rules: fieldRules(field),\n      valuePropName: type === 'checkbox' ? 'checked' : 'value',\n      initialValue,\n    };\n\n    if (type === 'checkbox') {\n      return getFieldDecorator(name, options)(<Checkbox {...props}>{fieldLabel}</Checkbox>);\n    } else if (type === 'file') {\n      return this.renderUpload(field, props);\n    } else if (type === 'number') {\n      return getFieldDecorator(name, options)(<InputNumber {...props} />);\n    }\n    return getFieldDecorator(name, options)(<Input {...props} />);\n  }\n\n  renderFields() {\n    return this.props.fields.map((field) => {\n      const [firstField] = this.props.fields;\n      const FormItem = Form.Item;\n      const { name, title, type, readOnly } = field;\n      const fieldLabel = title || helper.toHuman(name);\n      const { feedbackIcons } = this.props;\n\n      const formItemProps = {\n        key: name,\n        className: 'm-b-10',\n        hasFeedback: type !== 'checkbox' && type !== 'file' && feedbackIcons,\n        label: type === 'checkbox' ? '' : fieldLabel,\n      };\n\n      const fieldProps = {\n        ...field.props,\n        autoFocus: (firstField === field),\n        className: 'w-100',\n        name,\n        type,\n        readOnly,\n        placeholder: field.placeholder,\n        'data-test': fieldLabel,\n      };\n\n      return (<FormItem {...formItemProps}>{this.renderField(field, fieldProps)}</FormItem>);\n    });\n  }\n\n  renderActions() {\n    return this.props.actions.map((action) => {\n      const inProgress = this.state.inProgressActions[action.name];\n      const { isFieldsTouched } = this.props.form;\n\n      const actionProps = {\n        key: action.name,\n        htmlType: 'button',\n        className: action.pullRight ? 'pull-right m-t-10' : 'm-t-10',\n        type: action.type,\n        disabled: (isFieldsTouched() && action.disableWhenDirty),\n        loading: inProgress,\n        onClick: this.handleAction,\n      };\n\n      return (<Button {...actionProps} data-action={action.name}>{action.name}</Button>);\n    });\n  }\n\n  render() {\n    const submitProps = {\n      type: 'primary',\n      htmlType: 'submit',\n      className: 'w-100',\n      disabled: this.state.isSubmitting,\n      loading: this.state.isSubmitting,\n    };\n    const { hideSubmitButton, saveText } = this.props;\n    const saveButton = !hideSubmitButton;\n\n    return (\n      <Form layout=\"vertical\" onSubmit={this.handleSubmit}>\n        {this.renderFields()}\n        {saveButton && <Button {...submitProps}>{saveText}</Button>}\n        {this.renderActions()}\n      </Form>\n    );\n  }\n});\n\nexport default function init(ngModule) {\n  ngModule.component('dynamicForm', react2angular((props) => {\n    const fields = helper.getFields(props.type.configuration_schema, props.target);\n\n    const onSubmit = (values, onSuccess, onError) => {\n      helper.updateTargetWithValues(props.target, values);\n      props.target.$save(\n        () => {\n          onSuccess('Saved.');\n        },\n        (error) => {\n          if (error.status === 400 && 'message' in error.data) {\n            onError(error.data.message);\n          } else {\n            onError('Failed saving.');\n          }\n        },\n      );\n    };\n\n    const updatedProps = {\n      fields,\n      actions: props.target.id ? props.actions : [],\n      feedbackIcons: true,\n      onSubmit,\n    };\n    return (<DynamicForm {...updatedProps} />);\n  }, ['target', 'type', 'actions']));\n}\n\ninit.init = true;\n","import { isString } from 'lodash';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Button from 'antd/lib/button';\nimport Modal from 'antd/lib/modal';\nimport Tooltip from 'antd/lib/tooltip';\nimport { toastr } from '@/services/ng';\n\nfunction deleteGroup(event, group, onGroupDeleted) {\n  Modal.confirm({\n    title: 'Delete Group',\n    content: 'Are you sure you want to delete this group?',\n    okText: 'Yes',\n    okType: 'danger',\n    cancelText: 'No',\n    onOk: () => {\n      group.$delete(() => {\n        toastr.success('Group deleted successfully.');\n        onGroupDeleted();\n      });\n    },\n  });\n}\n\nexport default function DeleteGroupButton({ group, title, onClick, children, ...props }) {\n  if (!group) {\n    return null;\n  }\n  const button = (\n    <Button {...props} type=\"danger\" onClick={event => deleteGroup(event, group, onClick)}>{children}</Button>\n  );\n\n  if (isString(title) && (title !== '')) {\n    return <Tooltip placement=\"top\" title={title} mouseLeaveDelay={0}>{button}</Tooltip>;\n  }\n\n  return button;\n}\n\nDeleteGroupButton.propTypes = {\n  group: PropTypes.object, // eslint-disable-line react/forbid-prop-types\n  title: PropTypes.string,\n  onClick: PropTypes.func,\n  children: PropTypes.node,\n};\n\nDeleteGroupButton.defaultProps = {\n  group: null,\n  title: null,\n  onClick: () => {},\n  children: null,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Button from 'antd/lib/button';\nimport Divider from 'antd/lib/divider';\n\nimport * as Sidebar from '@/components/items-list/components/Sidebar';\nimport { ControllerType } from '@/components/items-list/ItemsList';\nimport DeleteGroupButton from './DeleteGroupButton';\n\nimport { currentUser } from '@/services/auth';\n\nexport default function DetailsPageSidebar({\n  controller, group, items,\n  canAddMembers, onAddMembersClick,\n  canAddDataSources, onAddDataSourcesClick,\n  onGroupDeleted,\n}) {\n  const canRemove = group && currentUser.isAdmin && (group.type !== 'builtin');\n\n  return (\n    <React.Fragment>\n      <Sidebar.Menu items={items} selected={controller.params.currentPage} />\n      <Sidebar.PageSizeSelect\n        options={controller.pageSizeOptions}\n        value={controller.itemsPerPage}\n        onChange={itemsPerPage => controller.updatePagination({ itemsPerPage })}\n      />\n      {canAddMembers && (\n        <Button className=\"w-100 m-t-5\" type=\"primary\" onClick={onAddMembersClick}>\n          <i className=\"fa fa-plus m-r-5\" />Add Members\n        </Button>\n      )}\n      {canAddDataSources && (\n        <Button className=\"w-100 m-t-5\" type=\"primary\" onClick={onAddDataSourcesClick}>\n          <i className=\"fa fa-plus m-r-5\" />Add Data Sources\n        </Button>\n      )}\n      {canRemove && (\n        <React.Fragment>\n          <Divider dashed className=\"m-t-10 m-b-10\" />\n          <DeleteGroupButton className=\"w-100\" group={group} onClick={onGroupDeleted}>Delete Group</DeleteGroupButton>\n        </React.Fragment>\n      )}\n    </React.Fragment>\n  );\n}\n\nDetailsPageSidebar.propTypes = {\n  controller: ControllerType.isRequired,\n  group: PropTypes.object, // eslint-disable-line react/forbid-prop-types\n  items: PropTypes.array.isRequired, // eslint-disable-line react/forbid-prop-types\n\n  canAddMembers: PropTypes.bool,\n  onAddMembersClick: PropTypes.func,\n\n  canAddDataSources: PropTypes.bool,\n  onAddDataSourcesClick: PropTypes.func,\n\n  onGroupDeleted: PropTypes.func,\n};\n\nDetailsPageSidebar.defaultProps = {\n  group: null,\n\n  canAddMembers: false,\n  onAddMembersClick: null,\n\n  canAddDataSources: false,\n  onAddDataSourcesClick: null,\n\n  onGroupDeleted: null,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { EditInPlace } from '@/components/EditInPlace';\nimport { currentUser } from '@/services/auth';\n\nfunction updateGroupName(group, name, onChange) {\n  group.name = name;\n  group.$save();\n  onChange();\n}\n\nexport default function GroupName({ group, onChange, ...props }) {\n  if (!group) {\n    return null;\n  }\n\n  const canEdit = currentUser.isAdmin && (group.type !== 'builtin');\n\n  return (\n    <h3 {...props}>\n      <EditInPlace\n        className=\"edit-in-place\"\n        isEditable={canEdit}\n        ignoreBlanks\n        editor=\"input\"\n        onDone={name => updateGroupName(group, name, onChange)}\n        value={group.name}\n      />\n    </h3>\n  );\n}\n\nGroupName.propTypes = {\n  group: PropTypes.shape({\n    name: PropTypes.string.isRequired,\n    $save: PropTypes.func.isRequired,\n  }),\n  onChange: PropTypes.func,\n};\n\nGroupName.defaultProps = {\n  group: null,\n  onChange: () => {},\n};\n","import React from 'react';\nimport { BigMessage } from '@/components/BigMessage';\n\n// Default \"list empty\" message for list pages\nexport default function EmptyState(props) {\n  return (\n    <div className=\"text-center\">\n      <BigMessage icon=\"fa-search\" message=\"Sorry, we couldn't find anything.\" {...props} />\n    </div>\n  );\n}\n","// eslint-disable-next-line import/prefer-default-export\nexport function absoluteUrl(url) {\n  const urlObj = new URL(url, window.location);\n  urlObj.protocol = window.location.protocol;\n  urlObj.host = window.location.host;\n  return urlObj.toString();\n}\n","import { isFunction, extend } from 'lodash';\nimport { formatSimpleTemplate } from '@/lib/value-format';\n\nfunction trim(str) {\n  return str.replace(/^\\s+|\\s+$/g, '');\n}\n\nfunction processTags(str, data, defaultColumn) {\n  return formatSimpleTemplate(str, extend({\n    '@': data[defaultColumn],\n  }, data));\n}\n\nexport function renderDefault(column, row) {\n  const value = row[column.name];\n  if (isFunction(column.formatFunction)) {\n    return column.formatFunction(value);\n  }\n  return value;\n}\n\nexport function renderImage(column, row) {\n  const url = trim(processTags(column.imageUrlTemplate, row, column.name));\n  const width = parseInt(processTags(column.imageWidth, row, column.name), 10);\n  const height = parseInt(processTags(column.imageHeight, row, column.name), 10);\n  const title = trim(processTags(column.imageTitleTemplate, row, column.name));\n\n  const result = [];\n  if (url !== '') {\n    result.push('<img src=\"' + url + '\"');\n\n    if (isFinite(width) && (width > 0)) {\n      result.push('width=\"' + width + '\"');\n    }\n    if (isFinite(height) && (height > 0)) {\n      result.push('height=\"' + height + '\"');\n    }\n    if (title !== '') {\n      result.push('title=\"' + title + '\"');\n    }\n\n    result.push('>');\n  }\n\n  return result.join(' ');\n}\n\nexport function renderLink(column, row) {\n  const url = trim(processTags(column.linkUrlTemplate, row, column.name));\n  const title = trim(processTags(column.linkTitleTemplate, row, column.name));\n  const text = trim(processTags(column.linkTextTemplate, row, column.name));\n\n  const result = [];\n  if (url !== '') {\n    result.push('<a href=\"' + url + '\"');\n    if (title !== '') {\n      result.push('title=\"' + title + '\"');\n    }\n    if (column.linkOpenInNewTab) {\n      result.push('target=\"_blank\"');\n    }\n    result.push('>' + (text === '' ? url : text) + '</a>');\n  }\n\n  return result.join(' ');\n}\n","export let Alert = null; // eslint-disable-line import/no-mutable-exports\n\nfunction AlertService($resource, $http) {\n  const actions = {\n    save: {\n      method: 'POST',\n      transformRequest: [(data) => {\n        const newData = Object.assign({}, data);\n        if (newData.query_id === undefined) {\n          newData.query_id = newData.query.id;\n          newData.destination_id = newData.destinations;\n          delete newData.query;\n          delete newData.destinations;\n        }\n\n        return newData;\n      }].concat($http.defaults.transformRequest),\n    },\n  };\n  return $resource('api/alerts/:id', { id: '@id' }, actions);\n}\n\nexport default function init(ngModule) {\n  ngModule.factory('Alert', AlertService);\n\n  ngModule.run(($injector) => {\n    Alert = $injector.get('Alert');\n  });\n}\n\ninit.init = true;\n","import { find } from 'lodash';\nimport debug from 'debug';\nimport recordEvent from '@/services/recordEvent';\n\nconst logger = debug('redash:notifications');\n\nconst Notification = window.Notification || null;\nif (!Notification) {\n  logger('HTML5 notifications are not supported.');\n}\n\nconst hidden = find(\n  ['hidden', 'webkitHidden', 'mozHidden', 'msHidden'],\n  prop => prop in document,\n);\n\nclass NotificationsService {\n  // eslint-disable-next-line class-methods-use-this\n  get pageVisible() {\n    return !document[hidden];\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  getPermissions() {\n    if (Notification && (Notification.permission === 'default')) {\n      Notification.requestPermission((status) => {\n        if (Notification.permission !== status) {\n          Notification.permission = status;\n        }\n      });\n    }\n  }\n\n  showNotification(title, content) {\n    if (!Notification || this.pageVisible || (Notification.permission !== 'granted')) {\n      return;\n    }\n\n    // using the 'tag' to avoid showing duplicate notifications\n    const notification = new Notification(title, {\n      tag: title + content,\n      body: content,\n      icon: '/images/redash_icon_small.png',\n    });\n    setTimeout(() => {\n      notification.close();\n    }, 3000);\n    notification.onclick = function onClick() {\n      window.focus();\n      this.close();\n      recordEvent('click', 'notification');\n    };\n  }\n}\n\nexport default new NotificationsService();\n","import { find } from 'lodash';\nimport debug from 'debug';\nimport template from './show.html';\n\nconst logger = debug('redash:http');\nexport const deleteConfirm = { class: 'btn-warning', title: 'Delete' };\nexport function logAndToastrError(deleteObject, httpResponse, toastr) {\n  logger('Failed to delete ' + deleteObject + ': ', httpResponse.status, httpResponse.statusText, httpResponse.data);\n  toastr.error('Failed to delete ' + deleteObject + '.');\n}\nexport function toastrSuccessAndPath(deleteObject, deletePath, toastr, $location) {\n  toastr.success(deleteObject + ' deleted successfully.');\n  $location.path('/' + deletePath + '/');\n}\n\nfunction DataSourceCtrl(\n  $scope, $route, $routeParams, $http, $location, toastr,\n  currentUser, AlertDialog, DataSource,\n) {\n  $scope.dataSource = $route.current.locals.dataSource;\n  $scope.dataSourceId = $routeParams.dataSourceId;\n  $scope.types = $route.current.locals.types;\n  $scope.type = find($scope.types, { type: $scope.dataSource.type });\n  $scope.canChangeType = $scope.dataSource.id === undefined;\n\n  $scope.helpLinks = {\n    athena: 'https://redash.io/help/data-sources/amazon-athena-setup',\n    bigquery: 'https://redash.io/help/data-sources/bigquery-setup',\n    url: 'https://redash.io/help/data-sources/querying-urls',\n    mongodb: 'https://redash.io/help/data-sources/mongodb-setup',\n    google_spreadsheets: 'https://redash.io/help/data-sources/querying-a-google-spreadsheet',\n    google_analytics: 'https://redash.io/help/data-sources/google-analytics-setup',\n    axibasetsd: 'https://redash.io/help/data-sources/axibase-time-series-database',\n    results: 'https://redash.io/help/user-guide/querying/query-results-data-source',\n  };\n\n  $scope.$watch('dataSource.id', (id) => {\n    if (id !== $scope.dataSourceId && id !== undefined) {\n      $location.path(`/data_sources/${id}`).replace();\n    }\n  });\n\n  $scope.setType = (type) => {\n    $scope.type = type;\n    $scope.dataSource.type = type.type;\n  };\n\n  $scope.resetType = () => {\n    $scope.type = undefined;\n    $scope.dataSource = new DataSource({ options: {} });\n  };\n\n  function deleteDataSource(callback) {\n    const doDelete = () => {\n      $scope.dataSource.$delete(() => {\n        toastrSuccessAndPath('Data source', 'data_sources', toastr, $location);\n      }, (httpResponse) => {\n        logAndToastrError('data source', httpResponse, toastr);\n      });\n    };\n\n    const deleteTitle = 'Delete Data source';\n    const deleteMessage = `Are you sure you want to delete the \"${$scope.dataSource.name}\" data source?`;\n\n    AlertDialog.open(deleteTitle, deleteMessage, deleteConfirm).then(doDelete, callback);\n  }\n\n  function testConnection(callback) {\n    DataSource.test({ id: $scope.dataSource.id }, (httpResponse) => {\n      if (httpResponse.ok) {\n        toastr.success('Success');\n      } else {\n        toastr.error(httpResponse.message, 'Connection Test Failed:', { timeOut: 10000 });\n      }\n      callback();\n    }, (httpResponse) => {\n      logger('Failed to test data source: ', httpResponse.status, httpResponse.statusText, httpResponse);\n      toastr.error('Unknown error occurred while performing connection test. Please try again later.', 'Connection Test Failed:', { timeOut: 10000 });\n      callback();\n    });\n  }\n\n  $scope.actions = [\n    { name: 'Delete', type: 'danger', callback: deleteDataSource },\n    {\n      name: 'Test Connection', pullRight: true, callback: testConnection, disableWhenDirty: true,\n    },\n  ];\n}\n\nexport default function init(ngModule) {\n  ngModule.controller('DataSourceCtrl', DataSourceCtrl);\n\n  return {\n    '/data_sources/new': {\n      template,\n      controller: 'DataSourceCtrl',\n      title: 'Datasources',\n      resolve: {\n        dataSource: (DataSource) => {\n          'ngInject';\n\n          return new DataSource({ options: {} });\n        },\n        types: ($http) => {\n          'ngInject';\n\n          return $http.get('api/data_sources/types').then(response => response.data);\n        },\n      },\n    },\n    '/data_sources/:dataSourceId': {\n      template,\n      controller: 'DataSourceCtrl',\n      title: 'Datasources',\n      resolve: {\n        dataSource: (DataSource, $route) => {\n          'ngInject';\n\n          return DataSource.get({ id: $route.current.params.dataSourceId }).$promise;\n        },\n        types: ($http) => {\n          'ngInject';\n\n          return $http.get('api/data_sources/types').then(response => response.data);\n        },\n      },\n    },\n  };\n}\n\ninit.init = true;\n","module.exports = \"<div class=\\\"query-page-wrapper\\\">\\n  <div class=\\\"container\\\">\\n    <overlay ng-if=\\\"canCreateQuery === false && query.isNew()\\\">\\n      You don't have permission to create new queries on any of the data sources available to you. You can either\\n      <a href=\\\"queries\\\">browse existing queries</a>, or ask for additional permissions from your Redash admin.\\n    </overlay>\\n    <overlay ng-if=\\\"noDataSources && currentUser.isAdmin\\\">\\n      Looks like no data sources were created yet (or none of them available to the group(s) you're member of). Please create one\\n      first, and then start querying.\\n      <br/>\\n      <a href=\\\"data_sources/new\\\" class=\\\"btn btn-primary\\\">Create Data Source</a>\\n      <a href=\\\"groups\\\" class=\\\"btn btn-default\\\">Manage Group Permissions</a>\\n    </overlay>\\n    <overlay ng-if=\\\"noDataSources && !currentUser.isAdmin\\\">\\n      Looks like no data sources were created yet (or none of them available to the group(s) you're member of). Please ask your\\n      Redash admin to create one first.\\n    </overlay>\\n\\n    <alert-unsaved-changes ng-if=\\\"canEdit\\\" is-dirty=\\\"isDirty\\\"></alert-unsaved-changes>\\n\\n    <div class=\\\"p-b-10 m-l-0 m-r-0 page-header--new page-header--query\\\">\\n      <div class=\\\"page-title p-0\\\">\\n        <div class=\\\"d-flex flex-nowrap align-items-center\\\">\\n          <favorites-control ng-if=\\\"!query.isNew()\\\" item=\\\"query\\\"></favorites-control>\\n          <h3>\\n            <edit-in-place class=\\\"m-r-5\\\" is-editable=\\\"canEdit\\\" on-done=\\\"saveName\\\"\\n              ignore-blanks=\\\"true\\\" value=\\\"query.name\\\" editor=\\\"'input'\\\"></edit-in-place>\\n            <query-tags-control\\n              class=\\\"query-tags\\\" ng-class=\\\"{'query-tags__empty': query.tags.length == 0}\\\"\\n              tags=\\\"query.tags\\\" is-draft=\\\"query.is_draft\\\" is-archived=\\\"query.is_archived\\\"\\n              can-edit=\\\"isQueryOwner\\\" get-available-tags=\\\"loadTags\\\" on-edit=\\\"saveTags\\\"></query-tags-control>\\n          </h3>\\n\\n          <span class=\\\"flex-fill\\\">&nbsp;</span>\\n\\n          <div class=\\\"p-0 source-control text-right text-nowrap align-self-start m-t-5\\\">\\n            <button class=\\\"btn btn-default btn-publish\\\" ng-click=\\\"togglePublished()\\\" ng-if=\\\"query.is_draft && query.id != undefined && (isQueryOwner || currentUser.hasPermission('admin'))\\\">\\n              <span class=\\\"fa fa-paper-plane\\\"></span> Publish\\n            </button>\\n\\n            <span ng-show=\\\"query.id && canViewSource\\\">\\n              <a ng-show=\\\"!sourceMode\\\" ng-href=\\\"{{query.getUrl(true, selectedTab)}}\\\" class=\\\"btn btn-default btn--showhide\\\">\\n                <i class=\\\"fa fa-pencil-square-o\\\" aria-hidden=\\\"true\\\"></i> Edit Source</i>\\n              </a>\\n              <a ng-show=\\\"sourceMode\\\" ng-href=\\\"{{query.getUrl(false, selectedTab)}}\\\" class=\\\"btn btn-default btn--showhide\\\">\\n                <i class=\\\"fa fa-table\\\" aria-hidden=\\\"true\\\"></i> Show Data Only</i>\\n              </a>\\n            </span>\\n\\n            <div ng-if=\\\"query.id != undefined\\\" class=\\\"btn-group query-actions-menu\\\" role=\\\"group\\\" uib-dropdown>\\n              <button class=\\\"btn btn-default dropdown-toggle hidden-xs\\\" uib-dropdown-toggle>\\n                <span class=\\\"zmdi zmdi-more\\\"></span>\\n              </button>\\n              <ul class=\\\"dropdown-menu pull-right\\\" uib-dropdown-menu>\\n                <li ng-class=\\\"{'disabled': query.id === undefined || !canForkQuery() }\\\">\\n                  <a ng-click=\\\"duplicateQuery()\\\"> Fork <i class=\\\"fa fa-external-link\\\"></i></a>\\n                </li>\\n                <li class=\\\"divider\\\" ng-if=\\\"query.is_archived\\\"></li>\\n                <li ng-if=\\\"!query.is_archived && query.id != undefined && (isQueryOwner || currentUser.hasPermission('admin'))\\\">\\n                  <a ng-click=\\\"archiveQuery()\\\">Archive</a>\\n                </li>\\n                <li ng-if=\\\"!query.is_archived && query.id != undefined && (isQueryOwner || currentUser.hasPermission('admin')) && showPermissionsControl\\\">\\n                  <a ng-click=\\\"showManagePermissionsModal()\\\">Manage Permissions</a>\\n                </li>\\n                <li ng-if=\\\"!query.is_draft && query.id != undefined && (isQueryOwner || currentUser.hasPermission('admin'))\\\">\\n                  <a ng-click=\\\"togglePublished()\\\">Unpublish</a>\\n                </li>\\n                <li class=\\\"divider\\\" ng-if=\\\"!query.is_archived\\\"></li>\\n                <li ng-if=\\\"query.id != undefined\\\">\\n                  <a ng-click=\\\"showApiKey()\\\">Show API Key</a>\\n                </li>\\n              </ul>\\n            </div>\\n          </div>\\n        </div>\\n        <query-tags-control\\n          class=\\\"query-tags__mobile\\\" ng-class=\\\"{'query-tags__empty': query.tags.length == 0}\\\"\\n          tags=\\\"query.tags\\\" is-draft=\\\"query.is_draft\\\" is-archived=\\\"query.is_archived\\\"\\n          can-edit=\\\"isQueryOwner\\\" get-available-tags=\\\"loadTags\\\" on-edit=\\\"saveTags\\\"></query-tags-control>\\n      </div>\\n    </div>\\n  </div>\\n  <main class=\\\"query-fullscreen\\\">\\n    <nav resizable r-directions=\\\"['right']\\\" r-flex=\\\"true\\\" resizable-toggle toggle-shortcut=\\\"Alt+Shift+D, Alt+D\\\">\\n      <div class=\\\"editor__left__data-source\\\">\\n        <ui-select ng-model=\\\"query.data_source_id\\\" remove-selected=\\\"false\\\" ng-disabled=\\\"!isQueryOwner || !sourceMode\\\"\\n          on-select=\\\"updateDataSource()\\\" data-test=\\\"SelectDataSource\\\">\\n          <ui-select-match placeholder=\\\"Select Data Source...\\\">{{$select.selected.name}}</ui-select-match>\\n          <ui-select-choices repeat=\\\"ds.id as ds in dataSources | filter:$select.search\\\">\\n            {{ds.name}}\\n          </ui-select-choices>\\n        </ui-select>\\n      </div>\\n\\n      <div class=\\\"editor__left__schema\\\" ng-if=\\\"sourceMode\\\">\\n        <schema-browser class=\\\"schema-container\\\" schema=\\\"schema\\\" on-refresh=\\\"refreshSchema()\\\"></schema-browser>\\n      </div>\\n      <div ng-if=\\\"!sourceMode\\\" style=\\\"flex-grow: 1;\\\">&nbsp;</div>\\n\\n      <div class=\\\"query-metadata query-metadata--description\\\" ng-if=\\\"!query.isNew()\\\">\\n        <edit-in-place is-editable=\\\"canEdit\\\" on-done=\\\"saveDescription\\\" editor=\\\"'textarea'\\\" placeholder=\\\"'Add description'\\\" ignore-blanks='false'\\n          value=\\\"query.description\\\" markdown=\\\"true\\\">\\n        </edit-in-place>\\n      </div>\\n\\n      <div class=\\\"query-metadata query-metadata--history\\\" ng-if=\\\"!query.isNew()\\\">\\n        <table>\\n          <tr>\\n            <td>\\n              <img ng-src=\\\"{{ query.user.profile_image_url }}\\\" class=\\\"profile__image_thumb\\\" />\\n              <strong class=\\\"meta__name\\\" ng-class=\\\"{'text-muted': query.user.is_disabled}\\\">{{query.user.name}}</strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n              created\\n              <strong>\\n                <rd-time-ago value=\\\"query.created_at\\\"></rd-time-ago>\\n              </strong>\\n            </td>\\n          </tr>\\n          <tr>\\n            <td>\\n              <img ng-src=\\\"{{ query.last_modified_by.profile_image_url }}\\\" class=\\\"profile__image_thumb\\\" />\\n              <strong class=\\\"meta__name\\\" ng-class=\\\"{'text-muted': query.last_modified_by.is_disabled}\\\">{{query.last_modified_by.name}}</strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n              updated\\n              <strong>\\n                <rd-time-ago value=\\\"query.updated_at\\\"></rd-time-ago>\\n              </strong>\\n            </td>\\n          </tr>\\n          <tr>\\n            <td class=\\\"p-t-15\\\">\\n              <span class=\\\"query-metadata__property\\\">\\n                <span class=\\\"zmdi zmdi-refresh\\\"></span> Refresh Schedule</span>\\n            </td>\\n            <td class=\\\"p-t-15 text-right\\\">\\n              <schedule-phrase ng-click=\\\"editSchedule()\\\" is-link=\\\"true\\\" schedule=\\\"query.schedule\\\" is-new=\\\"query.isNew()\\\" />\\n            </td>\\n          </tr>\\n        </table>\\n      </div>\\n    </nav>\\n\\n    <div class=\\\"content\\\">\\n      <div class=\\\"flex-fill p-relative\\\">\\n        <div class=\\\"p-absolute d-flex flex-column p-l-15 p-r-15\\\" style=\\\"left: 0; top: 0; right: 0; bottom: 0; overflow: auto\\\">\\n          <div class=\\\"row editor\\\" resizable r-directions=\\\"['bottom']\\\" r-flex=\\\"true\\\" resizable-toggle\\n               style=\\\"min-height: 11px; max-height: 70vh;\\\" ng-if=\\\"sourceMode\\\">\\n            <query-editor\\n              style=\\\"width: 100%; height: 100%;\\\"\\n              query-text=\\\"query.query\\\"\\n              schema=\\\"schema\\\"\\n              syntax=\\\"dataSource.syntax\\\"\\n              can-edit=\\\"canEdit\\\"\\n              is-dirty=\\\"isDirty\\\"\\n              is-query-owner=\\\"isQueryOwner\\\"\\n              update-data-source=\\\"updateDataSource\\\"\\n              execute-query=\\\"executeQuery\\\"\\n              query-executing=\\\"queryExecuting\\\"\\n              can-execute-query=\\\"canExecuteQuery\\\"\\n              listen-for-resize=\\\"listenForResize\\\"\\n              listen-for-editor-command=\\\"listenForEditorCommand\\\"\\n              save-query=\\\"saveQuery\\\"\\n              update-query=\\\"updateQuery\\\"\\n              update-selected-query=\\\"updateSelectedQuery\\\"\\n              add-new-parameter=\\\"addNewParameter\\\"\\n              data-data-source=\\\"dataSource\\\"\\n              data-data-sources=\\\"dataSources\\\"></query-editor>\\n          </div>\\n\\n          <div class=\\\"row query-metadata__mobile\\\">\\n            <img ng-src=\\\"{{ query.user.profile_image_url }}\\\" class=\\\"profile__image_thumb\\\">\\n            <div class=\\\"flex-fill m-r-10\\\">\\n              <strong class=\\\"meta__name\\\" ng-class=\\\"{'text-muted': query.user.is_disabled}\\\">{{query.user.name}}</strong>\\n              created <rd-time-ago value=\\\"query.created_at\\\"></rd-time-ago>\\n            </div>\\n\\n            <img ng-src=\\\"{{ query.last_modified_by.profile_image_url }}\\\" class=\\\"profile__image_thumb\\\">\\n            <div class=\\\"flex-fill m-r-10\\\">\\n              <strong class=\\\"meta__name\\\" ng-class=\\\"{'text-muted': query.last_modified_by.is_disabled}\\\">{{query.last_modified_by.name}}</strong>\\n              updated <rd-time-ago value=\\\"query.updated_at\\\"></rd-time-ago>\\n            </div>\\n\\n            <div>\\n              <span class=\\\"query-metadata__property\\\">Refresh schedule:</span>\\n              <schedule-phrase ng-click=\\\"editSchedule()\\\" is-link=\\\"true\\\" schedule=\\\"query.schedule\\\" is-new=\\\"query.isNew()\\\" />\\n            </div>\\n          </div>\\n\\n          <section class=\\\"flex-fill p-relative t-body query-visualizations-wrapper\\\">\\n            <div class=\\\"d-flex flex-column p-b-15 p-absolute static-position__mobile\\\" style=\\\"left: 0; top: 0; right: 0; bottom: 0;\\\">\\n              <div class=\\\"p-t-15 p-b-5\\\" ng-if=\\\"query.getParametersDefs().length > 0\\\">\\n                <parameters parameters=\\\"query.getParametersDefs()\\\" sync-values=\\\"!query.isNew()\\\" editable=\\\"sourceMode && canEdit\\\" on-updated=\\\"onParametersUpdated\\\"></parameters>\\n              </div>\\n              <!-- Query Execution Status -->\\n\\n              <div class=\\\"query-alerts\\\">\\n                <div class=\\\"alert alert-info m-t-15\\\" ng-show=\\\"queryResult.getStatus() == 'processing'\\\">\\n                  Executing query&hellip;\\n                  <rd-timer timestamp=\\\"queryResult.getUpdatedAt()\\\"></rd-timer>\\n                  <button type=\\\"button\\\" class=\\\"btn btn-warning btn-xs pull-right\\\" ng-disabled=\\\"cancelling\\\" ng-click=\\\"cancelExecution()\\\">Cancel\\n                  </button>\\n                </div>\\n                <div class=\\\"alert alert-info m-t-15\\\" ng-show=\\\"queryResult.getStatus() == 'loading-result'\\\">\\n                  Loading results&hellip;\\n                  <rd-timer timestamp=\\\"queryResult.getUpdatedAt()\\\"></rd-timer>\\n                </div>\\n                <div class=\\\"alert alert-info m-t-15\\\" ng-show=\\\"queryResult.getStatus() == 'waiting'\\\">\\n                  Query in queue&hellip;\\n                  <rd-timer timestamp=\\\"queryResult.getUpdatedAt()\\\"></rd-timer>\\n                  <button type=\\\"button\\\" class=\\\"btn btn-warning btn-xs pull-right\\\" ng-disabled=\\\"cancelling\\\" ng-click=\\\"cancelExecution()\\\">Cancel\\n                  </button>\\n                </div>\\n                <div class=\\\"alert alert-danger m-t-15\\\" ng-show=\\\"queryResult.getError()\\\">\\n                  Error running query:\\n                  <strong>{{queryResult.getError()}}</strong>\\n                </div>\\n              </div>\\n              <!-- End of Query Execution Status -->\\n\\n              <!-- tabs and data -->\\n              <div ng-if=\\\"showDataset\\\" class=\\\"flex-fill p-relative\\\">\\n                <div class=\\\"d-flex flex-column p-absolute static-position__mobile\\\" style=\\\"left: 0; top: 0; right: 0; bottom: 0;\\\">\\n                  <div class=\\\"p-10\\\" ng-show=\\\"showLog\\\">\\n                    <p>Log Information:</p>\\n                    <p ng-repeat=\\\"l in queryResult.getLog()\\\">{{l}}</p>\\n                  </div>\\n                  <ul class=\\\"tab-nav\\\">\\n                    <rd-tab ng-if=\\\"!query.visualizations.length\\\" tab-id=\\\"table\\\" name=\\\"Table\\\" base-path=\\\"query.getUrl(sourceMode)\\\"></rd-tab>\\n                    <rd-tab tab-id=\\\"{{vis.id}}\\\" name=\\\"{{vis.name}}\\\" base-path=\\\"query.getUrl(sourceMode)\\\" ng-repeat=\\\"vis in query.visualizations | orderBy:'id'\\\">\\n                      <span class=\\\"remove hidden-xs\\\" ng-click=\\\"deleteVisualization($event, vis)\\\" ng-if=\\\"canEdit && !($first && (vis.type === 'TABLE'))\\\">\\n                        <i class=\\\"zmdi zmdi-close\\\"></i>\\n                      </span>\\n                    </rd-tab>\\n                    <li class=\\\"rd-tab tab-new-vis\\\">\\n                      <a ng-click=\\\"openVisualizationEditor()\\\" class=\\\"btn btn-default\\\" ng-if=\\\"canEdit\\\">\\n                        <i class=\\\"zmdi zmdi-plus\\\"></i> New Visualization</a>\\n                    </li>\\n                  </ul>\\n                  <div ng-if=\\\"!query.visualizations.length\\\" class=\\\"query__vis m-t-15 p-b-15 scrollbox\\\">\\n                    <filters filters=\\\"filters\\\"></filters>\\n                    <grid-renderer query-result=\\\"queryResult\\\" items-per-page=\\\"50\\\"></grid-renderer>\\n                  </div>\\n\\n                  <div ng-if=\\\"selectedTab == vis.id\\\" ng-repeat=\\\"vis in query.visualizations\\\" class=\\\"query__vis m-t-15 scrollbox\\\">\\n                    <visualization-renderer visualization=\\\"vis\\\" query-result=\\\"queryResult\\\"></visualization-renderer>\\n                  </div>\\n                </div>\\n              </div>\\n            </div>\\n          </section>\\n        </div>\\n      </div>\\n      <div class=\\\"bottom-controller-container\\\" ng-if=\\\"showDataset\\\">\\n        <div class=\\\"bottom-controller\\\">\\n\\n          <button class=\\\"m-r-5 btn btn-default btn-edit-visualisation\\\" ng-click=\\\"openVisualizationEditor(selectedTab)\\\" ng-if=\\\"!query.isNew() && canEdit\\\"><span class=\\\"fa fa-edit\\\"></span><span class=\\\"hidden-xs hidden-s hidden-m\\\"> Edit Visualization</span></button>\\n\\n          <div class=\\\"m-r-5 btn-group dropup\\\" uib-dropdown>\\n            <button type=\\\"button\\\" class=\\\"btn btn-default dropup-toggle\\\" aria-haspopup=\\\"true\\\"\\n              uib-dropdown-toggle aria-expanded=\\\"false\\\">\\n              <span class=\\\"fa fa-ellipsis-v\\\"></span>\\n            </button>\\n            <ul class=\\\"dropdown-menu\\\" uib-dropdown-menu>\\n              <li>\\n                <a target=\\\"_self\\\" ng-click=\\\"openAddToDashboardForm(selectedTab)\\\" ng-if=\\\"!query.isNew() && (!query.is_draft || !query.is_archived)\\\">\\n                  <span class=\\\"fa fa-plus-circle\\\"></span> Add to Dashboard\\n                </a>\\n              </li>\\n              <li>\\n                <a ng-click=\\\"showEmbedDialog(query, selectedTab)\\\" ng-if=\\\"!query.isNew()\\\">\\n                  <span class=\\\"zmdi zmdi-code\\\"></span> Embed elsewhere\\n                </a>\\n              </li>\\n              <li>\\n                <a query-result-link target=\\\"_self\\\" ng-disabled=\\\"queryExecuting || !queryResult.getData()\\\">\\n                  <span class=\\\"fa fa-file-o\\\"></span> Download as CSV File\\n                </a>\\n              </li>\\n              <li>\\n                <a query-result-link file-type=\\\"xlsx\\\" target=\\\"_self\\\" ng-disabled=\\\"queryExecuting || !queryResult.getData()\\\">\\n                  <span class=\\\"fa fa-file-excel-o\\\"></span> Download as Excel File\\n                </a>\\n              </li>\\n            </ul>\\n          </div>\\n\\n          <span class=\\\"query-metadata__bottom\\\" ng-if=\\\"queryResult.getData()\\\">\\n            <span class=\\\"query-metadata__property\\\">\\n              <strong>{{queryResult.getData().length}}</strong>\\n              <ng-pluralize count=\\\"queryResult.getData().length\\\" when=\\\"{'0': ' rows', 'one': ' row', 'other': ' rows'}\\\"></ng-pluralize>\\n            </span>\\n            <span class=\\\"query-metadata__property\\\">\\n              <strong ng-show=\\\"!queryExecuting\\\">{{queryResult.getRuntime() | durationHumanize}}</strong>\\n              <span ng-show=\\\"queryExecuting\\\">Running&hellip;</span>\\n              <span class=\\\"hidden-xs\\\">runtime</span>\\n            </span>\\n            <span class=\\\"query-metadata__property\\\" ng-if=\\\"queryResult.query_result.data.metadata.data_scanned\\\">Data Scanned\\n              <strong>{{ queryResult.query_result.data.metadata.data_scanned | prettySize}}</strong>\\n            </span>\\n          </span>\\n\\n          <div>\\n            <span class=\\\"query-metadata__property hidden-xs\\\">\\n              <span class=\\\"hidden-xs\\\">Updated </span>\\n              <rd-time-ago value=\\\"queryResult.query_result.retrieved_at\\\"></rd-time-ago>\\n            </span>\\n\\n            <button class=\\\"m-l-5 btn btn-primary\\\" ng-click=\\\"executeQuery()\\\" ng-disabled=\\\"queryExecuting || !canExecuteQuery()\\\" title=\\\"Refresh Dataset\\\"\\n              ng-if=\\\"!sourceMode\\\">\\n              <span class=\\\"zmdi zmdi-play\\\"></span>\\n            </button>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n  </main>\\n</div>\\n\"","import moment from 'moment';\nimport { clientConfig } from '@/services/auth';\n\nexport function formatDateTime(value) {\n  if (!value) {\n    return '';\n  }\n\n  const parsed = moment(value);\n  if (!parsed.isValid()) {\n    return '-';\n  }\n\n  return parsed.format(clientConfig.dateTimeFormat);\n}\n\nexport default function init(ngModule) {\n  ngModule.filter('toMilliseconds', () => value => value * 1000.0);\n  ngModule.filter('dateTime', () => formatDateTime);\n}\n\ninit.init = true;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { react2angular } from 'react2angular';\nimport DatePicker from 'antd/lib/date-picker';\nimport { clientConfig } from '@/services/auth';\nimport { Moment } from '@/components/proptypes';\n\nexport function DateTimeInput({\n  value,\n  withSeconds,\n  onSelect,\n  className,\n}) {\n  const format = (clientConfig.dateFormat || 'YYYY-MM-DD') +\n    (withSeconds ? ' HH:mm:ss' : ' HH:mm');\n  const additionalAttributes = {};\n  if (value && value.isValid()) {\n    additionalAttributes.defaultValue = value;\n  }\n  return (\n    <DatePicker\n      className={className}\n      showTime\n      {...additionalAttributes}\n      format={format}\n      placeholder=\"Select Date and Time\"\n      onChange={onSelect}\n    />\n  );\n}\n\nDateTimeInput.propTypes = {\n  value: Moment,\n  withSeconds: PropTypes.bool,\n  onSelect: PropTypes.func,\n  className: PropTypes.string,\n};\n\nDateTimeInput.defaultProps = {\n  value: null,\n  withSeconds: false,\n  onSelect: () => {},\n  className: '',\n};\n\nexport default function init(ngModule) {\n  ngModule.component('dateTimeInput', react2angular(DateTimeInput));\n}\n\ninit.init = true;\n","import { isArray } from 'lodash';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { react2angular } from 'react2angular';\nimport DatePicker from 'antd/lib/date-picker';\nimport { clientConfig } from '@/services/auth';\nimport { Moment } from '@/components/proptypes';\n\nconst { RangePicker } = DatePicker;\n\nexport function DateTimeRangeInput({\n  value,\n  withSeconds,\n  onSelect,\n  className,\n}) {\n  const format = (clientConfig.dateFormat || 'YYYY-MM-DD') +\n    (withSeconds ? ' HH:mm:ss' : ' HH:mm');\n  const additionalAttributes = {};\n  if (isArray(value) && value[0].isValid() && value[1].isValid()) {\n    additionalAttributes.defaultValue = value;\n  }\n  return (\n    <RangePicker\n      className={className}\n      showTime\n      {...additionalAttributes}\n      format={format}\n      onChange={onSelect}\n    />\n  );\n}\n\nDateTimeRangeInput.propTypes = {\n  value: PropTypes.arrayOf(Moment),\n  withSeconds: PropTypes.bool,\n  onSelect: PropTypes.func,\n  className: PropTypes.string,\n};\n\nDateTimeRangeInput.defaultProps = {\n  value: null,\n  withSeconds: false,\n  onSelect: () => {},\n  className: '',\n};\n\nexport default function init(ngModule) {\n  ngModule.component('dateTimeRangeInput', react2angular(DateTimeRangeInput));\n}\n\ninit.init = true;\n","import { identity, isFunction, isNil, isString } from 'lodash';\n\nclass ItemsFetcher {\n  _getRequest(state, context) {\n    return this._originalGetRequest({}, context);\n  }\n\n  _processResults({ results, count }, state, context) {\n    return {\n      results: this._originalProcessResults(results, context),\n      count,\n    };\n  }\n\n  constructor({ getRequest, doRequest, processResults }) {\n    this._originalGetRequest = isFunction(getRequest) ? getRequest : identity;\n    this._originalDoRequest = doRequest;\n    this._originalProcessResults = isFunction(processResults) ? processResults : identity;\n  }\n\n  fetch(changes, state, context) {\n    const request = this._getRequest(state, context);\n    return this._originalDoRequest(request, context)\n      .then(data => this._processResults(data, state, context));\n  }\n}\n\n// For endpoints that return just an array with items; sorting and pagination\n// is performed on client\nexport class PlainListFetcher extends ItemsFetcher {\n  _allItems = [];\n\n  _getRequest({ searchTerm, selectedTags }, context) {\n    return this._originalGetRequest({\n      q: isString(searchTerm) && (searchTerm !== '') ? searchTerm : undefined,\n      tags: selectedTags,\n    }, context);\n  }\n\n  _processResults(data, { paginator, sorter }, context) {\n    this._allItems = this._originalProcessResults(data, context);\n    this._allItems = sorter.sort(this._allItems);\n    return {\n      results: paginator.getItemsForPage(this._allItems),\n      count: this._allItems.length,\n      allResults: this._allItems,\n    };\n  }\n\n  fetch(changes, state, context) {\n    // For plain lists we need to reload items from server only if tags or search changes.\n    if (isNil(changes) || changes.tags || changes.sorting) {\n      return super.fetch(changes, state, context);\n    }\n    // Sorting and pagination could be updated using previously fetched items.\n    const { paginator, sorter } = state;\n    if (changes.sorting) {\n      this._allItems = sorter.sort(this._allItems);\n    }\n    return Promise.resolve({\n      results: paginator.getItemsForPage(this._allItems),\n      count: this._allItems.length,\n      allResults: this._allItems,\n    });\n  }\n}\n\n// For endpoints that support server-side pagination (return object with\n// items for current page and total items count)\nexport class PaginatedListFetcher extends ItemsFetcher {\n  _getRequest({ paginator, sorter, searchTerm, selectedTags }, context) {\n    return this._originalGetRequest({\n      page: paginator.page,\n      page_size: paginator.itemsPerPage,\n      order: sorter.compiled,\n      q: isString(searchTerm) && (searchTerm !== '') ? searchTerm : undefined,\n      tags: selectedTags,\n    }, context);\n  }\n}\n","import { sortBy } from 'lodash';\n\nexport default class Paginator {\n  constructor(rows, { page = 1, itemsPerPage = 20, totalCount = undefined } = {}) {\n    this.page = page;\n    this.itemsPerPage = itemsPerPage;\n    this.updateRows(rows, totalCount);\n    this.orderByField = undefined;\n    this.orderByReverse = false;\n  }\n\n  setPage(page) {\n    this.page = page;\n  }\n\n  getPageRows() {\n    const first = this.itemsPerPage * (this.page - 1);\n    const last = this.itemsPerPage * (this.page);\n\n    return this.rows.slice(first, last);\n  }\n\n  updateRows(rows, totalCount = undefined) {\n    this.rows = rows;\n    if (this.rows) {\n      this.totalCount = totalCount || rows.length;\n    } else {\n      this.totalCount = 0;\n    }\n  }\n\n  orderBy(column) {\n    if (column === this.orderByField) {\n      this.orderByReverse = !this.orderByReverse;\n    } else {\n      this.orderByField = column;\n      this.orderByReverse = false;\n    }\n\n    if (this.orderByField) {\n      this.rows = sortBy(this.rows, this.orderByField);\n      if (this.orderByReverse) {\n        this.rows = this.rows.reverse();\n      }\n    }\n  }\n}\n","/* eslint-disable import/prefer-default-export */\nexport { default as Paginator } from './paginator';\n","import React from 'react';\nimport Tooltip from 'antd/lib/tooltip';\nimport PropTypes from 'prop-types';\nimport '@/redash-font/style.less';\nimport recordEvent from '@/services/recordEvent';\n\nexport default function AutocompleteToggle({ state, disabled, onToggle }) {\n  let tooltipMessage = 'Live Autocomplete Enabled';\n  let icon = 'icon-flash';\n  if (!state) {\n    tooltipMessage = 'Live Autocomplete Disabled';\n    icon = 'icon-flash-off';\n  }\n\n  if (disabled) {\n    tooltipMessage = 'Live Autocomplete Not Available (Use Ctrl+Space to Trigger)';\n    icon = 'icon-flash-off';\n  }\n\n  const toggle = (newState) => {\n    recordEvent('toggle_autocomplete', 'screen', 'query_editor', { state: newState });\n    onToggle(newState);\n  };\n\n  return (\n    <Tooltip placement=\"top\" title={tooltipMessage}>\n      <button\n        type=\"button\"\n        className={'btn btn-default m-r-5' + (disabled ? ' disabled' : '')}\n        onClick={() => toggle(!state)}\n        disabled={disabled}\n      >\n        <i className={'icon ' + icon} />\n      </button>\n    </Tooltip>\n  );\n}\n\nAutocompleteToggle.propTypes = {\n  state: PropTypes.bool.isRequired,\n  disabled: PropTypes.bool.isRequired,\n  onToggle: PropTypes.func.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { react2angular } from 'react2angular';\nimport DatePicker from 'antd/lib/date-picker';\nimport { clientConfig } from '@/services/auth';\nimport { Moment } from '@/components/proptypes';\n\nexport function DateInput({\n  value,\n  onSelect,\n  className,\n}) {\n  const format = clientConfig.dateFormat || 'YYYY-MM-DD';\n  const additionalAttributes = {};\n  if (value && value.isValid()) {\n    additionalAttributes.defaultValue = value;\n  }\n  return (\n    <DatePicker\n      className={className}\n      {...additionalAttributes}\n      format={format}\n      placeholder=\"Select Date\"\n      onChange={onSelect}\n    />\n  );\n}\n\nDateInput.propTypes = {\n  value: Moment,\n  onSelect: PropTypes.func,\n  className: PropTypes.string,\n};\n\nDateInput.defaultProps = {\n  value: null,\n  onSelect: () => {},\n  className: '',\n};\n\nexport default function init(ngModule) {\n  ngModule.component('dateInput', react2angular(DateInput));\n}\n\ninit.init = true;\n","import { isArray } from 'lodash';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { react2angular } from 'react2angular';\nimport DatePicker from 'antd/lib/date-picker';\nimport { clientConfig } from '@/services/auth';\nimport { Moment } from '@/components/proptypes';\n\nconst { RangePicker } = DatePicker;\n\nexport function DateRangeInput({\n  value,\n  onSelect,\n  className,\n}) {\n  const format = clientConfig.dateFormat || 'YYYY-MM-DD';\n  const additionalAttributes = {};\n  if (isArray(value) && value[0].isValid() && value[1].isValid()) {\n    additionalAttributes.defaultValue = value;\n  }\n  return (\n    <RangePicker\n      className={className}\n      {...additionalAttributes}\n      format={format}\n      onChange={onSelect}\n    />\n  );\n}\n\nDateRangeInput.propTypes = {\n  value: PropTypes.arrayOf(Moment),\n  onSelect: PropTypes.func,\n  className: PropTypes.string,\n};\n\nDateRangeInput.defaultProps = {\n  value: null,\n  onSelect: () => {},\n  className: '',\n};\n\nexport default function init(ngModule) {\n  ngModule.component('dateRangeInput', react2angular(DateRangeInput));\n}\n\ninit.init = true;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { react2angular } from 'react2angular';\nimport { trim } from 'lodash';\n\nexport class EditInPlace extends React.Component {\n  static propTypes = {\n    ignoreBlanks: PropTypes.bool,\n    isEditable: PropTypes.bool,\n    editor: PropTypes.string.isRequired,\n    placeholder: PropTypes.string,\n    value: PropTypes.string,\n    onDone: PropTypes.func.isRequired,\n  };\n\n  static defaultProps = {\n    ignoreBlanks: false,\n    isEditable: true,\n    placeholder: '',\n    value: '',\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      editing: false,\n    };\n    this.inputRef = React.createRef();\n    const self = this;\n    this.componentDidUpdate = (prevProps, prevState) => {\n      if (self.state.editing && !prevState.editing) {\n        self.inputRef.current.focus();\n      }\n    };\n  }\n\n  startEditing = () => {\n    if (this.props.isEditable) {\n      this.setState({ editing: true });\n    }\n  };\n\n  stopEditing = () => {\n    const newValue = trim(this.inputRef.current.value);\n    const ignorableBlank = this.props.ignoreBlanks && newValue === '';\n    if (!ignorableBlank && newValue !== this.props.value) {\n      this.props.onDone(newValue);\n    }\n    this.setState({ editing: false });\n  };\n\n  keyDown = (event) => {\n    if (event.keyCode === 13 && !event.shiftKey) {\n      event.preventDefault();\n      this.stopEditing();\n    } else if (event.keyCode === 27) {\n      this.setState({ editing: false });\n    }\n  };\n\n  renderNormal = () => (\n    <span\n      role=\"presentation\"\n      onFocus={this.startEditing}\n      onClick={this.startEditing}\n      className={this.props.isEditable ? 'editable' : ''}\n    >\n      {this.props.value || this.props.placeholder}\n    </span>\n  );\n\n  renderEdit = () => React.createElement(this.props.editor, {\n    ref: this.inputRef,\n    className: 'rd-form-control',\n    defaultValue: this.props.value,\n    onBlur: this.stopEditing,\n    onKeyDown: this.keyDown,\n  });\n\n  render() {\n    return (\n      <span className={'edit-in-place' + (this.state.editing ? ' active' : '')}>\n        {this.state.editing ? this.renderEdit() : this.renderNormal()}\n      </span>\n    );\n  }\n}\n\nexport default function init(ngModule) {\n  ngModule.component('editInPlace', react2angular(EditInPlace));\n}\n\ninit.init = true;\n","import { map, trim, uniq } from 'lodash';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Select from 'antd/lib/select';\nimport Modal from 'antd/lib/modal';\nimport { wrap as wrapDialog, DialogPropType } from '@/components/DialogWrapper';\n\nclass EditTagsDialog extends React.Component {\n  static propTypes = {\n    dialog: DialogPropType.isRequired,\n    tags: PropTypes.arrayOf(PropTypes.string),\n    getAvailableTags: PropTypes.func.isRequired,\n  };\n\n  static defaultProps = {\n    tags: [],\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      loading: true,\n      availableTags: [],\n      result: uniq(map(this.props.tags, trim)),\n    };\n  }\n\n  componentDidMount() {\n    this.props.getAvailableTags().then((availableTags) => {\n      this.setState({\n        loading: false,\n        availableTags: uniq(map(availableTags, trim)),\n      });\n    });\n  }\n\n  render() {\n    const { dialog } = this.props;\n    const { loading, availableTags, result } = this.state;\n    return (\n      <Modal\n        {...dialog.props}\n        onOk={() => dialog.close(result)}\n        title=\"Add/Edit Tags\"\n        className=\"shortModal\"\n      >\n        <Select\n          mode=\"tags\"\n          className=\"w-100\"\n          placeholder=\"Add some tags...\"\n          defaultValue={result}\n          onChange={values => this.setState({ result: map(values, trim) })}\n          autoFocus\n          disabled={loading}\n          loading={loading}\n        >\n          {map(availableTags, tag => <Select.Option key={tag}>{tag}</Select.Option>)}\n        </Select>\n      </Modal>\n    );\n  }\n}\n\nexport default wrapDialog(EditTagsDialog);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { react2angular } from 'react2angular';\nimport { currentUser, clientConfig } from '@/services/auth';\n\nexport function EmailSettingsWarning({ featureName }) {\n  return (clientConfig.mailSettingsMissing && currentUser.isAdmin) ? (\n    <p className=\"alert alert-danger\">\n      {`It looks like your mail server isn't configured. Make sure to configure it for the ${featureName} to work.`}\n    </p>\n  ) : null;\n}\n\nEmailSettingsWarning.propTypes = {\n  featureName: PropTypes.string.isRequired,\n};\n\nexport default function init(ngModule) {\n  ngModule.component('emailSettingsWarning', react2angular(EmailSettingsWarning));\n}\n\ninit.init = true;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { react2angular } from 'react2angular';\nimport { $rootScope } from '@/services/ng';\n\nexport class FavoritesControl extends React.Component {\n  static propTypes = {\n    item: PropTypes.shape({\n      is_favorite: PropTypes.bool.isRequired,\n    }).isRequired,\n    onChange: PropTypes.func,\n    // Force component update when `item` changes.\n    // Remove this when `react2angular` will finally go to hell\n    forceUpdate: PropTypes.string, // eslint-disable-line react/no-unused-prop-types\n  };\n\n  static defaultProps = {\n    onChange: () => {},\n    forceUpdate: '',\n  };\n\n  toggleItem(event, item, callback) {\n    const action = item.is_favorite ? item.$unfavorite.bind(item) : item.$favorite.bind(item);\n    const savedIsFavorite = item.is_favorite;\n\n    action().then(() => {\n      item.is_favorite = !savedIsFavorite;\n      this.forceUpdate();\n      $rootScope.$broadcast('reloadFavorites');\n      callback();\n    });\n  }\n\n  render() {\n    const { item, onChange } = this.props;\n    const icon = item.is_favorite ? 'fa fa-star' : 'fa fa-star-o';\n    const title = item.is_favorite ? 'Remove from favorites' : 'Add to favorites';\n    return (\n      <a\n        href=\"javascript:void(0)\"\n        title={title}\n        className=\"btn-favourite\"\n        onClick={event => this.toggleItem(event, item, onChange)}\n      >\n        <i className={icon} aria-hidden=\"true\" />\n      </a>\n    );\n  }\n}\n\nexport default function init(ngModule) {\n  ngModule.component('favoritesControlImpl', react2angular(FavoritesControl));\n  ngModule.component('favoritesControl', {\n    template: `\n      <favorites-control-impl \n        ng-if=\"$ctrl.item\" \n        item=\"$ctrl.item\" \n        on-change=\"$ctrl.onChange\"\n        force-update=\"$ctrl.forceUpdateTag\"\n      ></favorites-control-impl>\n    `,\n    bindings: {\n      item: '=',\n    },\n    controller($scope) {\n      // See comment for FavoritesControl.propTypes.forceUpdate\n      this.forceUpdateTag = 'force' + Date.now();\n      $scope.$on('reloadFavorites', () => {\n        this.forceUpdateTag = 'force' + Date.now();\n      });\n\n      this.onChange = () => {\n        $scope.$applyAsync();\n      };\n    },\n  });\n}\n\ninit.init = true;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { react2angular } from 'react2angular';\nimport Select from 'antd/lib/select';\nimport Input from 'antd/lib/input';\nimport InputNumber from 'antd/lib/input-number';\nimport { DateInput } from './DateInput';\nimport { DateRangeInput } from './DateRangeInput';\nimport { DateTimeInput } from './DateTimeInput';\nimport { DateTimeRangeInput } from './DateTimeRangeInput';\nimport { QueryBasedParameterInput } from './QueryBasedParameterInput';\n\nconst { Option } = Select;\n\nexport class ParameterValueInput extends React.Component {\n  static propTypes = {\n    type: PropTypes.string,\n    value: PropTypes.any, // eslint-disable-line react/forbid-prop-types\n    enumOptions: PropTypes.string,\n    queryId: PropTypes.number,\n    onSelect: PropTypes.func,\n    className: PropTypes.string,\n  };\n\n  static defaultProps = {\n    type: 'text',\n    value: null,\n    enumOptions: '',\n    queryId: null,\n    onSelect: () => {},\n    className: '',\n  };\n\n  renderDateTimeWithSecondsInput() {\n    const { value, onSelect } = this.props;\n    return (\n      <DateTimeInput\n        className={this.props.className}\n        value={value}\n        onSelect={onSelect}\n        withSeconds\n      />\n    );\n  }\n\n  renderDateTimeInput() {\n    const { value, onSelect } = this.props;\n    return (\n      <DateTimeInput\n        className={this.props.className}\n        value={value}\n        onSelect={onSelect}\n      />\n    );\n  }\n\n  renderDateInput() {\n    const { value, onSelect } = this.props;\n    return (\n      <DateInput\n        className={this.props.className}\n        value={value}\n        onSelect={onSelect}\n      />\n    );\n  }\n\n  renderDateTimeRangeWithSecondsInput() {\n    const { value, onSelect } = this.props;\n    return (\n      <DateTimeRangeInput\n        className={this.props.className}\n        value={value}\n        onSelect={onSelect}\n        withSeconds\n      />\n    );\n  }\n\n  renderDateTimeRangeInput() {\n    const { value, onSelect } = this.props;\n    return (\n      <DateTimeRangeInput\n        className={this.props.className}\n        value={value}\n        onSelect={onSelect}\n      />\n    );\n  }\n\n  renderDateRangeInput() {\n    const { value, onSelect } = this.props;\n    return (\n      <DateRangeInput\n        className={this.props.className}\n        value={value}\n        onSelect={onSelect}\n      />\n    );\n  }\n\n  renderEnumInput() {\n    const { value, onSelect, enumOptions } = this.props;\n    const enumOptionsArray = enumOptions.split('\\n').filter(v => v !== '');\n    return (\n      <Select\n        className={this.props.className}\n        disabled={enumOptionsArray.length === 0}\n        defaultValue={value}\n        onChange={onSelect}\n        dropdownMatchSelectWidth={false}\n        dropdownClassName=\"ant-dropdown-in-bootstrap-modal\"\n      >\n        {enumOptionsArray.map(option => (<Option key={option} value={option}>{ option }</Option>))}\n      </Select>\n    );\n  }\n\n  renderQueryBasedInput() {\n    const { value, onSelect, queryId } = this.props;\n    return (\n      <QueryBasedParameterInput\n        className={this.props.className}\n        value={value}\n        queryId={queryId}\n        onSelect={onSelect}\n      />\n    );\n  }\n\n  renderNumberInput() {\n    const { value, onSelect, className } = this.props;\n    return (\n      <InputNumber\n        className={'form-control ' + className}\n        defaultValue={!isNaN(value) && value || 0}\n        onChange={onSelect}\n      />\n    );\n  }\n\n  renderTextInput() {\n    const { value, onSelect, className } = this.props;\n    return (\n      <Input\n        className={'form-control ' + className}\n        defaultValue={value || ''}\n        onChange={event => onSelect(event.target.value)}\n      />\n    );\n  }\n\n  render() {\n    const { type } = this.props;\n    switch (type) {\n      case 'datetime-with-seconds': return this.renderDateTimeWithSecondsInput();\n      case 'datetime-local': return this.renderDateTimeInput();\n      case 'date': return this.renderDateInput();\n      case 'datetime-range-with-seconds': return this.renderDateTimeRangeWithSecondsInput();\n      case 'datetime-range': return this.renderDateTimeRangeInput();\n      case 'date-range': return this.renderDateRangeInput();\n      case 'enum': return this.renderEnumInput();\n      case 'query': return this.renderQueryBasedInput();\n      case 'number': return this.renderNumberInput();\n      default: return this.renderTextInput();\n    }\n  }\n}\n\nexport default function init(ngModule) {\n  ngModule.component('parameterValueInput', {\n    template: `\n      <parameter-value-input-impl\n        type=\"$ctrl.param.type\"\n        value=\"$ctrl.param.normalizedValue\"\n        enum-options=\"$ctrl.param.enumOptions\"\n        query-id=\"$ctrl.param.queryId\"\n        on-select=\"$ctrl.setValue\"\n      ></parameter-value-input-impl>\n    `,\n    bindings: {\n      param: '<',\n    },\n    controller($scope) {\n      this.setValue = (value) => {\n        this.param.setValue(value);\n        $scope.$applyAsync();\n      };\n    },\n  });\n  ngModule.component('parameterValueInputImpl', react2angular(ParameterValueInput));\n}\n\ninit.init = true;\n","import { find, isFunction } from 'lodash';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { react2angular } from 'react2angular';\nimport Select from 'antd/lib/select';\nimport { Query } from '@/services/query';\n\nconst { Option } = Select;\n\nexport class QueryBasedParameterInput extends React.Component {\n  static propTypes = {\n    value: PropTypes.any, // eslint-disable-line react/forbid-prop-types\n    queryId: PropTypes.number,\n    onSelect: PropTypes.func,\n    className: PropTypes.string,\n  };\n\n  static defaultProps = {\n    value: null,\n    queryId: null,\n    onSelect: () => {},\n    className: '',\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      options: [],\n      loading: false,\n    };\n  }\n\n  componentDidMount() {\n    this._loadOptions(this.props.queryId);\n  }\n\n  // eslint-disable-next-line no-unused-vars\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.queryId !== this.props.queryId) {\n      this._loadOptions(nextProps.queryId, nextProps.value);\n    }\n  }\n\n  _loadOptions(queryId) {\n    if (queryId && (queryId !== this.state.queryId)) {\n      this.setState({ loading: true });\n      Query.dropdownOptions({ id: queryId }, (options) => {\n        if (this.props.queryId === queryId) {\n          this.setState({ options, loading: false });\n\n          const found = find(options, option => option.value === this.props.value) !== undefined;\n          if (!found && isFunction(this.props.onSelect)) {\n            this.props.onSelect(options[0].value);\n          }\n        }\n      });\n    }\n  }\n\n  render() {\n    const { className, value, onSelect } = this.props;\n    const { loading, options } = this.state;\n    return (\n      <span>\n        <Select\n          className={className}\n          disabled={loading || (options.length === 0)}\n          loading={loading}\n          defaultValue={'' + value}\n          onChange={onSelect}\n          dropdownMatchSelectWidth={false}\n          dropdownClassName=\"ant-dropdown-in-bootstrap-modal\"\n        >\n          {options.map(option => (<Option value={option.value} key={option.value}>{option.name}</Option>))}\n        </Select>\n      </span>\n    );\n  }\n}\n\nexport default function init(ngModule) {\n  ngModule.component('queryBasedParameterInput', react2angular(QueryBasedParameterInput));\n}\n\ninit.init = true;\n","export let QuerySnippet = null; // eslint-disable-line import/no-mutable-exports\n\nfunction QuerySnippetService($resource) {\n  const resource = $resource('api/query_snippets/:id', { id: '@id' });\n  resource.prototype.getSnippet = function getSnippet() {\n    let name = this.trigger;\n    if (this.description !== '') {\n      name = `${this.trigger}: ${this.description}`;\n    }\n\n    return {\n      name,\n      content: this.snippet,\n      tabTrigger: this.trigger,\n    };\n  };\n\n  return resource;\n}\n\nexport default function init(ngModule) {\n  ngModule.factory('QuerySnippet', QuerySnippetService);\n\n  ngModule.run(($injector) => {\n    QuerySnippet = $injector.get('QuerySnippet');\n  });\n}\n\ninit.init = true;\n","import { each, trim, without } from 'lodash';\nimport Mousetrap from 'mousetrap';\nimport 'mousetrap/plugins/global-bind/mousetrap-global-bind';\n\nexport let KeyboardShortcuts = null; // eslint-disable-line import/no-mutable-exports\n\nconst handlers = {};\n\nfunction onShortcut(event, shortcut) {\n  event.preventDefault();\n  event.retunValue = false;\n  each(handlers[shortcut], fn => fn());\n}\n\nfunction KeyboardShortcutsService() {\n  this.modKey = /Mac|iPod|iPhone|iPad/.test(navigator.platform) ? 'Cmd' : 'Ctrl';\n\n  this.bind = function bind(keymap) {\n    each(keymap, (fn, key) => {\n      const keys = key\n        .toLowerCase()\n        .split(',')\n        .map(trim);\n      each(keys, (k) => {\n        handlers[k] = [...without(handlers[k], fn), fn];\n        Mousetrap.bindGlobal(k, onShortcut);\n      });\n    });\n  };\n\n  this.unbind = function unbind(keymap) {\n    each(keymap, (fn, key) => {\n      const keys = key\n        .toLowerCase()\n        .split(',')\n        .map(trim);\n      each(keys, (k) => {\n        handlers[k] = without(handlers[k], fn);\n        if (handlers[k].length === 0) {\n          handlers[k] = undefined;\n          Mousetrap.unbind(k);\n        }\n      });\n    });\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.service('KeyboardShortcuts', KeyboardShortcutsService);\n\n  ngModule.run(($injector) => {\n    KeyboardShortcuts = $injector.get('KeyboardShortcuts');\n  });\n}\n\ninit.init = true;\n","import { map } from 'lodash';\n\nfunction buildTableColumnKeywords(table) {\n  const keywords = [];\n  table.columns.forEach((column) => {\n    keywords.push({\n      caption: column,\n      name: `${table.name}.${column}`,\n      value: `${table.name}.${column}`,\n      score: 100,\n      meta: 'Column',\n      className: 'completion',\n    });\n  });\n  return keywords;\n}\n\nfunction buildKeywordsFromSchema(schema) {\n  const tableKeywords = [];\n  const columnKeywords = {};\n  const tableColumnKeywords = {};\n\n  schema.forEach((table) => {\n    tableKeywords.push({\n      name: table.name,\n      value: table.name,\n      score: 100,\n      meta: 'Table',\n    });\n    tableColumnKeywords[table.name] = buildTableColumnKeywords(table);\n    table.columns.forEach((c) => {\n      columnKeywords[c] = 'Column';\n    });\n  });\n\n  return {\n    table: tableKeywords,\n    column: map(columnKeywords, (v, k) => ({\n      name: k,\n      value: k,\n      score: 50,\n      meta: v,\n    })),\n    tableColumn: tableColumnKeywords,\n  };\n}\n\nexport default {\n  buildKeywordsFromSchema,\n};\n","import { map } from 'lodash';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { react2angular } from 'react2angular';\nimport classNames from 'classnames';\nimport getTags from '@/services/getTags';\n\nexport class TagsList extends React.Component {\n  static propTypes = {\n    tagsUrl: PropTypes.string.isRequired,\n    onUpdate: PropTypes.func,\n  };\n\n  static defaultProps = {\n    onUpdate: () => {},\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      // An array of objects that with the name and count of the tagged items\n      allTags: [],\n      // A set of tag names\n      selectedTags: new Set(),\n    };\n  }\n\n  componentDidMount() {\n    getTags(this.props.tagsUrl).then((allTags) => {\n      this.setState({ allTags });\n    });\n  }\n\n  toggleTag(event, tag) {\n    const { selectedTags } = this.state;\n    if (event.shiftKey) {\n      // toggle tag\n      if (selectedTags.has(tag)) {\n        selectedTags.delete(tag);\n      } else {\n        selectedTags.add(tag);\n      }\n    } else {\n      // if the tag is the only selected, deselect it, otherwise select only it\n      if (selectedTags.has(tag) && (selectedTags.size === 1)) {\n        selectedTags.clear();\n      } else {\n        selectedTags.clear();\n        selectedTags.add(tag);\n      }\n    }\n    this.forceUpdate();\n\n    this.props.onUpdate([...this.state.selectedTags]);\n  }\n\n  render() {\n    const { allTags, selectedTags } = this.state;\n    if (allTags.length > 0) {\n      return (\n        <div className=\"list-group m-t-10 tags-list tiled\">\n          {map(allTags, tag => (\n            <a\n              key={tag.name}\n              href=\"javascript:void(0)\"\n              className={classNames('list-group-item', 'max-character', { active: selectedTags.has(tag.name) })}\n              onClick={event => this.toggleTag(event, tag.name)}\n            >\n              <span className=\"badge badge-light\">{tag.count}</span>\n              <span className=\"tags-list__name\">{tag.name}</span>\n            </a>\n          ))}\n        </div>\n      );\n    }\n    return null;\n  }\n}\n\nexport default function init(ngModule) {\n  ngModule.component('tagsList', react2angular(TagsList));\n}\n\ninit.init = true;\n","import moment from 'moment';\nimport { isNil } from 'lodash';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\nimport { Moment } from '@/components/proptypes';\nimport { clientConfig } from '@/services/auth';\n\nconst autoUpdateList = new Set();\n\nfunction updateComponents() {\n  autoUpdateList.forEach(component => component.update());\n  setTimeout(updateComponents, 30 * 1000);\n}\nupdateComponents();\n\nexport class TimeAgo extends React.PureComponent {\n  static propTypes = {\n    // `date` and `placeholder` used in `getDerivedStateFromProps`\n    // eslint-disable-next-line react/no-unused-prop-types\n    date: PropTypes.oneOfType([\n      PropTypes.string,\n      PropTypes.number,\n      PropTypes.instanceOf(Date),\n      Moment,\n    ]),\n    // eslint-disable-next-line react/no-unused-prop-types\n    placeholder: PropTypes.string,\n    autoUpdate: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    date: null,\n    placeholder: '',\n    autoUpdate: true,\n  };\n\n  // Initial state, to get rid of React warning\n  state = {\n    title: null,\n    value: null,\n  };\n\n  static getDerivedStateFromProps({ date, placeholder }) {\n    // if `date` prop is not empty and a valid date/time - convert it to `moment`\n    date = !isNil(date) ? moment(date) : null;\n    date = date && date.isValid() ? date : null;\n\n    return {\n      value: date ? date.fromNow() : placeholder,\n      title: date ? date.format(clientConfig.dateTimeFormat) : '',\n    };\n  }\n\n  componentDidMount() {\n    autoUpdateList.add(this);\n    this.update(true);\n  }\n\n  componentWillUnmount() {\n    autoUpdateList.delete(this);\n  }\n\n  update(force = false) {\n    if (force || this.props.autoUpdate) {\n      this.setState(this.constructor.getDerivedStateFromProps(this.props));\n    }\n  }\n\n  render() {\n    return <span title={this.state.title} data-test=\"TimeAgo\">{this.state.value}</span>;\n  }\n}\n\nexport default function init(ngModule) {\n  ngModule.directive('amTimeAgo', () => ({\n    link($scope, element, attr) {\n      const modelName = attr.amTimeAgo;\n      $scope.$watch(modelName, (value) => {\n        ReactDOM.render(<TimeAgo date={value} />, element[0]);\n      });\n    },\n  }));\n\n  ngModule.component('rdTimeAgo', {\n    bindings: {\n      value: '=',\n    },\n    controller($scope, $element) {\n      $scope.$watch('$ctrl.value', () => {\n        // Initial render will occur here as well\n        ReactDOM.render(<TimeAgo date={this.value} placeholder=\"-\" />, $element[0]);\n      });\n    },\n  });\n}\n\ninit.init = true;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { $http } from '@/services/ng';\nimport Table from 'antd/lib/table';\nimport Col from 'antd/lib/col';\nimport Row from 'antd/lib/row';\nimport Card from 'antd/lib/card';\nimport Spin from 'antd/lib/spin';\nimport Badge from 'antd/lib/badge';\nimport Tabs from 'antd/lib/tabs';\nimport Alert from 'antd/lib/alert';\nimport moment from 'moment';\nimport values from 'lodash/values';\nimport { Columns } from '@/components/items-list/components/ItemsTable';\n\nfunction parseTasks(tasks) {\n  const queues = {};\n  const queries = [];\n  const otherTasks = [];\n\n  const counters = { active: 0, reserved: 0, waiting: 0 };\n\n  tasks.forEach((task) => {\n    queues[task.queue] = queues[task.queue] || { name: task.queue, active: 0, reserved: 0, waiting: 0 };\n    queues[task.queue][task.state] += 1;\n\n    if (task.enqueue_time) {\n      task.enqueue_time = moment(task.enqueue_time * 1000.0);\n    }\n    if (task.start_time) {\n      task.start_time = moment(task.start_time * 1000.0);\n    }\n\n    counters[task.state] += 1;\n\n    if (task.task_name === 'redash.tasks.execute_query') {\n      queries.push(task);\n    } else {\n      otherTasks.push(task);\n    }\n  });\n\n  return { queues: values(queues), queries, otherTasks, counters };\n}\n\nfunction QueuesTable({ loading, queues }) {\n  const columns = ['Name', 'Active', 'Reserved', 'Waiting'].map(c => ({ title: c, dataIndex: c.toLowerCase() }));\n\n  return <Table columns={columns} rowKey=\"name\" dataSource={queues} loading={loading} />;\n}\n\nQueuesTable.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  queues: PropTypes.arrayOf(PropTypes.any).isRequired,\n};\n\nfunction CounterCard({ title, value, loading }) {\n  return (\n    <Spin spinning={loading}>\n      <Card>\n        {title}\n        <div className=\"f-20\">{value}</div>\n      </Card>\n    </Spin>\n  );\n}\n\nCounterCard.propTypes = {\n  title: PropTypes.string.isRequired,\n  value: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  loading: PropTypes.bool.isRequired,\n};\n\nCounterCard.defaultProps = {\n  value: '',\n};\n\nexport default class AdminCeleryStatus extends React.Component {\n  state = {\n    loading: true,\n    error: false,\n    counters: {},\n    queries: [],\n    otherTasks: [],\n    queues: [],\n  };\n\n  constructor(props) {\n    super(props);\n    this.fetch();\n  }\n\n  fetch() {\n    // TODO: handle error\n    $http\n      .get('/api/admin/queries/tasks')\n      .then(({ data }) => {\n        const { queues, queries, otherTasks, counters } = parseTasks(data.tasks);\n        this.setState({ loading: false, queries, otherTasks, queues, counters });\n      })\n      .catch(() => {\n        this.setState({ loading: false, error: true });\n      });\n  }\n\n  render() {\n    const commonColumns = [\n      {\n        title: 'Worker Name',\n        dataIndex: 'worker',\n      },\n      {\n        title: 'PID',\n        dataIndex: 'worker_pid',\n      },\n      {\n        title: 'Queue',\n        dataIndex: 'queue',\n      },\n      {\n        title: 'State',\n        dataIndex: 'state',\n        render: (value) => {\n          if (value === 'active') {\n            return (\n              <span>\n                <Badge status=\"processing\" /> Active\n              </span>\n            );\n          }\n          return (\n            <span>\n              <Badge status=\"warning\" /> {value}\n            </span>\n          );\n        },\n      },\n      Columns.timeAgo({ title: 'Start Time', dataIndex: 'start_time' }),\n    ];\n\n    const queryColumns = commonColumns.concat([\n      Columns.timeAgo({ title: 'Enqueue Time', dataIndex: 'enqueue_time' }),\n      {\n        title: 'Query ID',\n        dataIndex: 'query_id',\n      },\n      {\n        title: 'Org ID',\n        dataIndex: 'org_id',\n      },\n      {\n        title: 'Data Source ID',\n        dataIndex: 'data_source_id',\n      },\n      {\n        title: 'User ID',\n        dataIndex: 'user_id',\n      },\n      {\n        title: 'Scheduled',\n        dataIndex: 'scheduled',\n      },\n    ]);\n\n    const otherTasksColumns = commonColumns.concat([\n      {\n        title: 'Task Name',\n        dataIndex: 'task_name',\n      },\n    ]);\n\n    if (this.state.error) {\n      return (\n        <div className=\"p-5\">\n          <Alert type=\"error\" message=\"Failed loading status. Please refresh.\" />\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"p-5\">\n        <Row gutter={16}>\n          <Col span={4}>\n            <CounterCard title=\"Active Tasks\" value={this.state.counters.active} loading={this.state.loading} />\n          </Col>\n          <Col span={4}>\n            <CounterCard title=\"Reserved Tasks\" value={this.state.counters.reserved} loading={this.state.loading} />\n          </Col>\n          <Col span={4}>\n            <CounterCard title=\"Waiting Tasks\" value={this.state.counters.waiting} loading={this.state.loading} />\n          </Col>\n        </Row>\n        <Row>\n          <Tabs defaultActiveKey=\"queues\">\n            <Tabs.TabPane key=\"queues\" tab=\"Queues\">\n              <QueuesTable loading={this.state.loading} queues={this.state.queues} />\n            </Tabs.TabPane>\n            <Tabs.TabPane key=\"queries\" tab=\"Queries\">\n              <Table\n                rowKey=\"task_id\"\n                dataSource={this.state.queries}\n                loading={this.state.loading}\n                columns={queryColumns}\n              />\n            </Tabs.TabPane>\n            <Tabs.TabPane key=\"other\" tab=\"Other Tasks\">\n              <Table\n                rowKey=\"task_id\"\n                dataSource={this.state.otherTasks}\n                loading={this.state.loading}\n                columns={otherTasksColumns}\n              />\n            </Tabs.TabPane>\n          </Tabs>\n        </Row>\n      </div>\n    );\n  }\n}\n","import PromiseRejectionError from '@/lib/promise-rejection-error';\n\n// eslint-disable-next-line import/prefer-default-export\nexport class ErrorHandler {\n  constructor() {\n    this.logToConsole = true;\n    this.reset();\n  }\n\n  reset() {\n    this.error = null;\n  }\n\n  process(error) {\n    this.reset();\n    if (this.logToConsole) {\n      // Log raw error object\n      // eslint-disable-next-line no-console\n      console.error(error);\n    }\n    if (\n      (error === null) ||\n      (error instanceof PromiseRejectionError)\n    ) {\n      this.error = error;\n    }\n  }\n}\n","import { markdown } from 'markdown';\nimport { debounce } from 'lodash';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Modal from 'antd/lib/modal';\nimport Input from 'antd/lib/input';\nimport Tooltip from 'antd/lib/tooltip';\nimport Divider from 'antd/lib/divider';\nimport { wrap as wrapDialog, DialogPropType } from '@/components/DialogWrapper';\nimport { toastr } from '@/services/ng';\n\nimport './AddTextboxDialog.less';\n\nclass AddTextboxDialog extends React.Component {\n  static propTypes = {\n    dashboard: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n    dialog: DialogPropType.isRequired,\n    onConfirm: PropTypes.func.isRequired,\n  };\n\n  state = {\n    saveInProgress: false,\n    text: '',\n    preview: '',\n  }\n\n  updatePreview = debounce(() => {\n    const text = this.state.text;\n    this.setState({\n      preview: markdown.toHTML(text),\n    });\n  }, 100);\n\n  onTextChanged = (event) => {\n    this.setState({ text: event.target.value });\n    this.updatePreview();\n  };\n\n  saveWidget() {\n    this.setState({ saveInProgress: true });\n\n    this.props.onConfirm(this.state.text)\n      .then(() => {\n        this.props.dialog.close();\n      })\n      .catch(() => {\n        toastr.error('Widget could not be added');\n      })\n      .finally(() => {\n        this.setState({ saveInProgress: false });\n      });\n  }\n\n  render() {\n    const { dialog } = this.props;\n\n    return (\n      <Modal\n        {...dialog.props}\n        title=\"Add Textbox\"\n        onOk={() => this.saveWidget()}\n        okButtonProps={{\n          loading: this.state.saveInProgress,\n          disabled: !this.state.text,\n        }}\n        okText=\"Add to Dashboard\"\n        width={500}\n      >\n        <div className=\"add-textbox\">\n          <Input.TextArea\n            className=\"resize-vertical\"\n            rows=\"5\"\n            value={this.state.text}\n            onChange={this.onTextChanged}\n            autoFocus\n            placeholder=\"This is where you write some text\"\n          />\n          <small>\n            Supports basic{' '}\n            <a\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              href=\"https://www.markdownguide.org/cheat-sheet/#basic-syntax\"\n            >\n              <Tooltip title=\"Markdown guide opens in new window\">Markdown</Tooltip>\n            </a>.\n          </small>\n          {this.state.text && (\n            <React.Fragment>\n              <Divider dashed />\n              <strong className=\"preview-title\">Preview:</strong>\n              <p\n                dangerouslySetInnerHTML={{ __html: this.state.preview }} // eslint-disable-line react/no-danger\n                className=\"preview\"\n              />\n            </React.Fragment>\n          )}\n        </div>\n      </Modal>\n    );\n  }\n}\n\nexport default wrapDialog(AddTextboxDialog);\n","import { each, values, map, includes, first } from 'lodash';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Select from 'antd/lib/select';\nimport Modal from 'antd/lib/modal';\nimport { wrap as wrapDialog, DialogPropType } from '@/components/DialogWrapper';\nimport {\n  MappingType,\n  ParameterMappingListInput,\n} from '@/components/ParameterMappingInput';\nimport { QuerySelector } from '@/components/QuerySelector';\n\nimport { toastr } from '@/services/ng';\n\nimport { Query } from '@/services/query';\n\nconst { Option, OptGroup } = Select;\n\nclass AddWidgetDialog extends React.Component {\n  static propTypes = {\n    dashboard: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n    dialog: DialogPropType.isRequired,\n    onConfirm: PropTypes.func.isRequired,\n  };\n\n  state = {\n    saveInProgress: false,\n    selectedQuery: null,\n    selectedVis: null,\n    parameterMappings: [],\n  };\n\n  selectQuery(selectedQuery) {\n    // Clear previously selected query (if any)\n    this.setState({\n      selectedQuery: null,\n      selectedVis: null,\n      parameterMappings: [],\n    });\n\n    if (selectedQuery) {\n      Query.get({ id: selectedQuery.id }, (query) => {\n        if (query) {\n          const existingParamNames = map(\n            this.props.dashboard.getParametersDefs(),\n            param => param.name,\n          );\n          this.setState({\n            selectedQuery: query,\n            parameterMappings: map(query.getParametersDefs(), param => ({\n              name: param.name,\n              type: includes(existingParamNames, param.name)\n                ? MappingType.DashboardMapToExisting : MappingType.DashboardAddNew,\n              mapTo: param.name,\n              value: param.normalizedValue,\n              title: '',\n              param,\n            })),\n          });\n          if (query.visualizations.length) {\n            this.setState({ selectedVis: query.visualizations[0] });\n          }\n        }\n      });\n    }\n  }\n\n  selectVisualization(query, visualizationId) {\n    each(query.visualizations, (visualization) => {\n      if (visualization.id === visualizationId) {\n        this.setState({ selectedVis: visualization });\n        return false;\n      }\n    });\n  }\n\n  saveWidget() {\n    const { selectedVis, parameterMappings } = this.state;\n\n    this.setState({ saveInProgress: true });\n\n    this.props.onConfirm(selectedVis, parameterMappings)\n      .then(() => {\n        this.props.dialog.close();\n      })\n      .catch(() => {\n        toastr.error('Widget could not be added');\n      })\n      .finally(() => {\n        this.setState({ saveInProgress: false });\n      });\n  }\n\n  updateParamMappings(parameterMappings) {\n    this.setState({ parameterMappings });\n  }\n\n  renderVisualizationInput() {\n    let visualizationGroups = {};\n    if (this.state.selectedQuery) {\n      each(this.state.selectedQuery.visualizations, (vis) => {\n        visualizationGroups[vis.type] = visualizationGroups[vis.type] || [];\n        visualizationGroups[vis.type].push(vis);\n      });\n    }\n    visualizationGroups = values(visualizationGroups);\n    return (\n      <div>\n        <div className=\"form-group\">\n          <label htmlFor=\"choose-visualization\">Choose Visualization</label>\n          <Select\n            id=\"choose-visualization\"\n            className=\"w-100\"\n            defaultValue={first(this.state.selectedQuery.visualizations).id}\n            onChange={visualizationId => this.selectVisualization(this.state.selectedQuery, visualizationId)}\n            dropdownClassName=\"ant-dropdown-in-bootstrap-modal\"\n          >\n            {visualizationGroups.map(visualizations => (\n              <OptGroup label={visualizations[0].type} key={visualizations[0].type}>\n                {visualizations.map(visualization => (\n                  <Option value={visualization.id} key={visualization.id}>{visualization.name}</Option>\n                ))}\n              </OptGroup>\n            ))}\n          </Select>\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    const existingParams = this.props.dashboard.getParametersDefs();\n    const { dialog } = this.props;\n\n    return (\n      <Modal\n        {...dialog.props}\n        title=\"Add Widget\"\n        onOk={() => this.saveWidget()}\n        okButtonProps={{\n          loading: this.state.saveInProgress,\n          disabled: !this.state.selectedQuery,\n        }}\n        okText=\"Add to Dashboard\"\n        width={700}\n      >\n        <QuerySelector onChange={query => this.selectQuery(query)} />\n        {this.state.selectedQuery && this.renderVisualizationInput()}\n\n        {\n          (this.state.parameterMappings.length > 0) && [\n            <label key=\"parameters-title\" htmlFor=\"parameter-mappings\">Parameters</label>,\n            <ParameterMappingListInput\n              key=\"parameters-list\"\n              id=\"parameter-mappings\"\n              mappings={this.state.parameterMappings}\n              existingParams={existingParams}\n              onChange={mappings => this.updateParamMappings(mappings)}\n            />,\n          ]\n        }\n      </Modal>\n    );\n  }\n}\n\nexport default wrapDialog(AddWidgetDialog);\n","import { isMatch, map, find, sortBy } from 'lodash';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Modal from 'antd/lib/modal';\nimport { wrap as wrapDialog, DialogPropType } from '@/components/DialogWrapper';\nimport {\n  MappingType,\n  ParameterMappingListInput,\n  parameterMappingsToEditableMappings,\n  editableMappingsToParameterMappings,\n  synchronizeWidgetTitles,\n} from '@/components/ParameterMappingInput';\n\nexport function getParamValuesSnapshot(mappings, dashboardParameters) {\n  return map(\n    sortBy(mappings, m => m.name),\n    (m) => {\n      let param;\n      switch (m.type) {\n        case MappingType.StaticValue:\n          return [m.name, m.value];\n        case MappingType.WidgetLevel:\n          return [m.name, m.param.value];\n        case MappingType.DashboardAddNew:\n        case MappingType.DashboardMapToExisting:\n          param = find(dashboardParameters, p => p.name === m.mapTo);\n          return [m.name, param ? param.value : null];\n        // no default\n      }\n    },\n  );\n}\n\nclass EditParameterMappingsDialog extends React.Component {\n  static propTypes = {\n    dashboard: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n    widget: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n    dialog: DialogPropType.isRequired,\n  };\n\n  originalParamValuesSnapshot = null\n\n  constructor(props) {\n    super(props);\n\n    const parameterMappings = parameterMappingsToEditableMappings(\n      props.widget.options.parameterMappings,\n      props.widget.query.getParametersDefs(),\n      map(this.props.dashboard.getParametersDefs(), p => p.name),\n    );\n\n    this.originalParamValuesSnapshot = getParamValuesSnapshot(\n      parameterMappings,\n      this.props.dashboard.getParametersDefs(),\n    );\n\n    this.state = {\n      saveInProgress: false,\n      parameterMappings,\n    };\n  }\n\n  saveWidget() {\n    const toastr = this.props.toastr; // eslint-disable-line react/prop-types\n    const widget = this.props.widget;\n\n    this.setState({ saveInProgress: true });\n\n    const newMappings = editableMappingsToParameterMappings(this.state.parameterMappings);\n    widget.options.parameterMappings = newMappings;\n\n    const valuesChanged = !isMatch(\n      this.originalParamValuesSnapshot,\n      getParamValuesSnapshot(this.state.parameterMappings, this.props.dashboard.getParametersDefs()),\n    );\n\n    const widgetsToSave = [\n      widget,\n      ...synchronizeWidgetTitles(widget.options.parameterMappings, this.props.dashboard.widgets),\n    ];\n\n    Promise.all(map(widgetsToSave, w => w.save()))\n      .then(() => {\n        this.props.dialog.close(valuesChanged);\n      })\n      .catch(() => {\n        toastr.error('Widget cannot be updated');\n      })\n      .finally(() => {\n        this.setState({ saveInProgress: false });\n      });\n  }\n\n  updateParamMappings(parameterMappings) {\n    this.setState({ parameterMappings });\n  }\n\n  render() {\n    const { dialog } = this.props;\n    return (\n      <Modal\n        {...dialog.props}\n        title=\"Parameters\"\n        onOk={() => this.saveWidget()}\n        okButtonProps={{ loading: this.state.saveInProgress }}\n        width={700}\n      >\n        {(this.state.parameterMappings.length > 0) && (\n          <ParameterMappingListInput\n            mappings={this.state.parameterMappings}\n            existingParams={this.props.dashboard.getParametersDefs()}\n            onChange={mappings => this.updateParamMappings(mappings)}\n          />\n        )}\n      </Modal>\n    );\n  }\n}\n\nexport default wrapDialog(EditParameterMappingsDialog);\n","import { isArray } from 'lodash';\nimport { $q } from '@/services/ng';\nimport { currentUser, clientConfig } from '@/services/auth';\n\n/* eslint-disable class-methods-use-this */\n\nexport default class DefaultPolicy {\n  refresh() {\n    return $q.resolve(this);\n  }\n\n  canCreateDataSource() {\n    return currentUser.isAdmin;\n  }\n\n  isCreateDataSourceEnabled() {\n    return currentUser.isAdmin;\n  }\n\n  canCreateDashboard() {\n    return currentUser.hasPermission('create_dashboard');\n  }\n\n  isCreateDashboardEnabled() {\n    return currentUser.hasPermission('create_dashboard');\n  }\n\n  canCreateAlert() {\n    return true;\n  }\n\n  canCreateUser() {\n    return currentUser.isAdmin;\n  }\n\n  isCreateUserEnabled() {\n    return currentUser.isAdmin;\n  }\n\n  getDashboardRefreshIntervals() {\n    const result = clientConfig.dashboardRefreshIntervals;\n    return isArray(result) ? result : null;\n  }\n\n  getQueryRefreshIntervals() {\n    const result = clientConfig.queryRefreshIntervals;\n    return isArray(result) ? result : null;\n  }\n}\n","import { isFunction, isArray, isObject, isString, isNumber, isUndefined, each, keys, filter } from 'lodash';\nimport $ from 'jquery';\nimport './json-view-interactive.less';\n\nfunction isPrimitive(value) {\n  return (value === null) || (value === false) || (value === true) ||\n    (isNumber(value) && isFinite(value));\n}\n\nfunction combine(...functions) {\n  functions = filter(functions, isFunction);\n  return (...args) => {\n    each(functions, (fn) => {\n      fn(...args);\n    });\n  };\n}\n\nfunction initToggle(toggle, toggleBlockFn) {\n  if (isFunction(toggleBlockFn)) {\n    let visible = false;\n    const icon = $('<i>').addClass('fa fa-caret-right').appendTo(toggle.empty());\n    toggleBlockFn(visible);\n    toggle.on('click', () => {\n      visible = !visible;\n      icon.toggleClass('fa-caret-right fa-caret-down');\n      toggleBlockFn(visible);\n    });\n  } else {\n    toggle.addClass('hidden');\n  }\n}\n\nfunction createRenderNestedBlock(block, ellipsis, values, renderKeys) {\n  return (show) => {\n    if (show) {\n      ellipsis.addClass('hidden');\n      block.removeClass('hidden').empty();\n\n      let firstItem = null;\n      let lastItem = null;\n      each(values, (val, key) => {\n        const nestedBlock = $('<span>').addClass('jvi-item').appendTo(block);\n        firstItem = firstItem || nestedBlock;\n        lastItem = nestedBlock;\n\n        const toggle = $('<span>').addClass('jvi-toggle').appendTo(nestedBlock);\n\n        if (renderKeys) {\n          const keyWrapper = $('<span>').addClass('jvi-object-key').appendTo(nestedBlock);\n          // eslint-disable-next-line no-use-before-define\n          renderString(keyWrapper, key);\n          $('<span>').addClass('jvi-punctuation').text(': ').appendTo(nestedBlock);\n        }\n        // eslint-disable-next-line no-use-before-define\n        const toggleBlockFn = renderValue(nestedBlock, val, true);\n        initToggle(toggle, toggleBlockFn);\n      });\n\n      if (firstItem) {\n        firstItem.addClass('jvi-nested-first');\n      }\n      if (lastItem) {\n        lastItem.addClass('jvi-nested-last');\n      }\n    } else {\n      block.addClass('hidden').empty();\n      ellipsis.removeClass('hidden');\n    }\n  };\n}\n\nfunction renderComma($element) {\n  return $('<span>').addClass('jvi-punctuation jvi-comma').text(',').appendTo($element);\n}\n\nfunction renderEllipsis($element) {\n  const result = $('<span>')\n    .addClass('jvi-punctuation jvi-ellipsis')\n    .html('&hellip;')\n    .appendTo($element)\n    .on('click', () => {\n      result.parents('.jvi-item').eq(0).find('.jvi-toggle').trigger('click');\n    });\n  return result;\n}\n\nfunction renderPrimitive($element, value, comma) {\n  $('<span>').addClass('jvi-value jvi-primitive').text('' + value).appendTo($element);\n  if (comma) {\n    renderComma($element);\n  }\n  return null;\n}\n\nfunction renderString($element, value, comma) {\n  $('<span>').addClass('jvi-punctuation jvi-string').text('\"').appendTo($element);\n  $('<span>').addClass('jvi-value jvi-string').text(value).appendTo($element);\n  $('<span>').addClass('jvi-punctuation jvi-string').text('\"').appendTo($element);\n  if (comma) {\n    renderComma($element);\n  }\n  return null;\n}\n\nfunction renderComment($element, count) {\n  const text = ' // ' + count + ' ' + (count === 1 ? 'item' : 'items');\n  const comment = $('<span>').addClass('jvi-comment').text(text).appendTo($element);\n  return (show) => {\n    if (show) {\n      comment.addClass('hidden');\n    } else {\n      comment.removeClass('hidden');\n    }\n  };\n}\n\nfunction renderBrace($element, isForArray, isOpening) {\n  const openingBrace = isForArray ? '[' : '{';\n  const closingBrace = isForArray ? ']' : '}';\n  const brace = isOpening ? openingBrace : closingBrace;\n  return $('<span>').addClass('jvi-punctuation jvi-braces').text(brace).appendTo($element);\n}\n\nfunction renderWithNested($element, values, comma, valuesIsArray) {\n  const count = valuesIsArray ? values.length : keys(values).length;\n  let result = null;\n\n  renderBrace($element, valuesIsArray, true);\n  if (count > 0) {\n    const ellipsis = renderEllipsis($element);\n    const block = $('<span>').addClass('jvi-block hidden').appendTo($element);\n    result = createRenderNestedBlock(block, ellipsis, values, !valuesIsArray);\n  }\n  renderBrace($element, valuesIsArray, false);\n\n  if (comma) {\n    renderComma($element);\n  }\n\n  if (count > 0) {\n    result = combine(renderComment($element, count), result);\n  }\n  return result;\n}\n\nfunction renderArray($element, values, comma) {\n  return renderWithNested($element, values, comma, true);\n}\n\nfunction renderObject($element, value, comma) {\n  return renderWithNested($element, value, comma, false);\n}\n\nfunction renderValue($element, value, comma) {\n  $element = $('<span>').appendTo($element);\n\n  if (isPrimitive(value)) {\n    return renderPrimitive($element, value, comma);\n  } else if (isString(value)) {\n    return renderString($element, value, comma);\n  } else if (isArray(value)) {\n    return renderArray($element, value, comma);\n  } else if (isObject(value)) {\n    return renderObject($element, value, comma);\n  }\n}\n\nexport default function renderJsonView(container, value) {\n  if ((container instanceof $) && !isUndefined(value) && !isFunction(value)) {\n    const block = $('<span>').addClass('jvi-item').appendTo(container);\n    const toggle = $('<span>').addClass('jvi-toggle').appendTo(block);\n    const toggleBlockFn = renderValue(block, value);\n    initToggle(toggle, toggleBlockFn);\n  }\n}\n","import React from 'react';\nimport Modal from 'antd/lib/modal';\nimport Input from 'antd/lib/input';\nimport { wrap as wrapDialog, DialogPropType } from '@/components/DialogWrapper';\nimport { Group } from '@/services/group';\n\nclass CreateGroupDialog extends React.Component {\n  static propTypes = {\n    dialog: DialogPropType.isRequired,\n  };\n\n  state = {\n    name: '',\n  };\n\n  save = () => {\n    this.props.dialog.close(new Group({\n      name: this.state.name,\n    }));\n  };\n\n  render() {\n    const { dialog } = this.props;\n    return (\n      <Modal {...dialog.props} title=\"Create a New Group\" okText=\"Create\" onOk={() => this.save()}>\n        <Input\n          className=\"form-control\"\n          defaultValue={this.state.name}\n          onChange={event => this.setState({ name: event.target.value })}\n          onPressEnter={() => this.save()}\n          placeholder=\"Group Name\"\n          autoFocus\n        />\n      </Modal>\n    );\n  }\n}\n\nexport default wrapDialog(CreateGroupDialog);\n","import { isUndefined } from 'lodash';\n\nexport default class Paginator {\n  page = 1;\n\n  itemsPerPage = 20;\n\n  totalCount = 0;\n\n  get totalPages() {\n    return Math.ceil(this.totalCount / this.itemsPerPage);\n  }\n\n  setPage(value, validate = true) {\n    if (isUndefined(value)) {\n      return;\n    }\n    value = parseInt(value, 10) || 1;\n    if (validate) {\n      this.page = ((value >= 1) && (value <= this.totalPages)) ? value : 1;\n    } else {\n      this.page = (value >= 1) ? value : 1;\n    }\n  }\n\n  setItemsPerPage(value, validate = true) {\n    if (isUndefined(value)) {\n      return;\n    }\n    value = parseInt(value, 10) || 20;\n    this.itemsPerPage = (value >= 1) ? value : 1;\n    if (validate) {\n      this.setPage(this.page, validate);\n    }\n  }\n\n  setTotalCount(value, validate = true) {\n    if (isUndefined(value)) {\n      return;\n    }\n    value = parseInt(value, 10) || 0;\n    this.totalCount = value;\n    if (validate) {\n      this.setPage(this.page, validate);\n    }\n  }\n\n  constructor({ page, itemsPerPage, totalCount, validate = true } = {}) {\n    this.setItemsPerPage(itemsPerPage, validate);\n    this.setTotalCount(totalCount, validate);\n    this.setPage(page, validate);\n  }\n\n  getItemsForPage(items) {\n    const first = this.itemsPerPage * (this.page - 1);\n    const last = first + this.itemsPerPage;\n\n    return items.slice(first, last);\n  }\n}\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport Modal from 'antd/lib/modal';\nimport DatePicker from 'antd/lib/date-picker';\nimport TimePicker from 'antd/lib/time-picker';\nimport Select from 'antd/lib/select';\nimport Radio from 'antd/lib/radio';\nimport { capitalize, clone, isEqual } from 'lodash';\nimport moment from 'moment';\nimport { secondsToInterval, durationHumanize, pluralize, IntervalEnum, localizeTime } from '@/filters';\nimport { wrap as wrapDialog, DialogPropType } from '@/components/DialogWrapper';\nimport { RefreshScheduleType, RefreshScheduleDefault, Moment } from '../proptypes';\n\nimport './ScheduleDialog.css';\n\nconst WEEKDAYS_SHORT = moment.weekdaysShort();\nconst WEEKDAYS_FULL = moment.weekdays();\nconst DATE_FORMAT = 'YYYY-MM-DD';\nconst HOUR_FORMAT = 'HH:mm';\nconst { Option, OptGroup } = Select;\n\nexport function TimeEditor(props) {\n  const [time, setTime] = useState(props.defaultValue);\n  const showUtc = time && !time.isUTC();\n\n  function onChange(newTime) {\n    setTime(newTime);\n    props.onChange(newTime);\n  }\n\n  return (\n    <React.Fragment>\n      <TimePicker\n        allowClear={false}\n        value={time}\n        format={HOUR_FORMAT}\n        minuteStep={5}\n        onChange={onChange}\n      />\n      {showUtc && (\n        <span className=\"utc\" data-testid=\"utc\">\n          ({ moment.utc(time).format(HOUR_FORMAT) } UTC)\n        </span>\n      )}\n    </React.Fragment>\n  );\n}\n\nTimeEditor.propTypes = {\n  defaultValue: Moment,\n  onChange: PropTypes.func.isRequired,\n};\n\nTimeEditor.defaultProps = {\n  defaultValue: null,\n};\n\nclass ScheduleDialog extends React.Component {\n  static propTypes = {\n    schedule: RefreshScheduleType,\n    refreshOptions: PropTypes.arrayOf(PropTypes.number).isRequired,\n    dialog: DialogPropType.isRequired,\n  };\n\n  static defaultProps = {\n    schedule: RefreshScheduleDefault,\n  };\n\n  state = this.getState();\n\n  getState() {\n    const newSchedule = clone(this.props.schedule || ScheduleDialog.defaultProps.schedule);\n    const { time, interval: seconds, day_of_week: day } = newSchedule;\n    const { interval } = secondsToInterval(seconds);\n    const [hour, minute] = time ? localizeTime(time).split(':') : [null, null];\n\n    return {\n      hour,\n      minute,\n      seconds,\n      interval,\n      dayOfWeek: day ? WEEKDAYS_SHORT[WEEKDAYS_FULL.indexOf(day)] : null,\n      newSchedule,\n    };\n  }\n\n  get intervals() {\n    const ret = {\n      [IntervalEnum.NEVER]: [],\n    };\n    this.props.refreshOptions.forEach((seconds) => {\n      const { count, interval } = secondsToInterval(seconds);\n      if (!(interval in ret)) {\n        ret[interval] = [];\n      }\n      ret[interval].push([count, seconds]);\n    });\n\n    Object.defineProperty(this, 'intervals', { value: ret }); // memoize\n\n    return ret;\n  }\n\n  set newSchedule(newProps) {\n    this.setState(prevState => ({\n      newSchedule: Object.assign(prevState.newSchedule, newProps),\n    }));\n  }\n\n  setTime = (time) => {\n    this.newSchedule = {\n      time: moment(time)\n        .utc()\n        .format(HOUR_FORMAT),\n    };\n  };\n\n  setInterval = (newSeconds) => {\n    const { newSchedule } = this.state;\n    const { interval: newInterval } = secondsToInterval(newSeconds);\n\n    // resets to defaults\n    if (newInterval === IntervalEnum.NEVER) {\n      newSchedule.until = null;\n    }\n    if ([IntervalEnum.NEVER, IntervalEnum.MINUTES, IntervalEnum.HOURS].indexOf(newInterval) !== -1) {\n      newSchedule.time = null;\n    }\n    if (newInterval !== IntervalEnum.WEEKS) {\n      newSchedule.day_of_week = null;\n    }\n    if (\n      (newInterval === IntervalEnum.DAYS || newInterval === IntervalEnum.WEEKS) &&\n      (!this.state.minute || !this.state.hour)\n    ) {\n      newSchedule.time = moment()\n        .hour('00')\n        .minute('15')\n        .utc()\n        .format(HOUR_FORMAT);\n    }\n    if (newInterval === IntervalEnum.WEEKS && !this.state.dayOfWeek) {\n      newSchedule.day_of_week = WEEKDAYS_FULL[0];\n    }\n\n    newSchedule.interval = newSeconds;\n\n    const [hour, minute] = newSchedule.time ? localizeTime(newSchedule.time).split(':') : [null, null];\n\n    this.setState({\n      interval: newInterval,\n      seconds: newSeconds,\n      hour,\n      minute,\n      dayOfWeek: newSchedule.day_of_week ? WEEKDAYS_SHORT[WEEKDAYS_FULL.indexOf(newSchedule.day_of_week)] : null,\n    });\n\n    this.newSchedule = newSchedule;\n  };\n\n  setScheduleUntil = (_, date) => {\n    this.newSchedule = { until: date };\n  };\n\n  setWeekday = (e) => {\n    const dayOfWeek = e.target.value;\n    this.setState({ dayOfWeek });\n    this.newSchedule = {\n      day_of_week: dayOfWeek ? WEEKDAYS_FULL[WEEKDAYS_SHORT.indexOf(dayOfWeek)] : null,\n    };\n  };\n\n  setUntilToggle = (e) => {\n    const date = e.target.value ? moment().format(DATE_FORMAT) : null;\n    this.setScheduleUntil(null, date);\n  };\n\n  save() {\n    const { newSchedule } = this.state;\n\n    // save if changed\n    if (!isEqual(newSchedule, this.props.schedule)) {\n      if (newSchedule.interval) {\n        this.props.dialog.close(clone(newSchedule));\n      } else {\n        this.props.dialog.close(null);\n      }\n    }\n    this.props.dialog.dismiss();\n  }\n\n  render() {\n    const { dialog } = this.props;\n    const {\n      interval,\n      minute,\n      hour,\n      seconds,\n      newSchedule: { until },\n    } = this.state;\n\n    return (\n      <Modal {...dialog.props} title=\"Refresh Schedule\" className=\"schedule\" onOk={() => this.save()}>\n        <div className=\"schedule-component\">\n          <h5>Refresh every</h5>\n          <div data-testid=\"interval\">\n            <Select className=\"input\" value={seconds} onChange={this.setInterval} dropdownMatchSelectWidth={false}>\n              <Option value={null} key=\"never\">\n                Never\n              </Option>\n              {Object.keys(this.intervals).map(int => (\n                <OptGroup label={capitalize(pluralize(int))} key={int}>\n                  {this.intervals[int].map(([cnt, secs]) => (\n                    <Option value={secs} key={cnt}>\n                      {durationHumanize(secs)}\n                    </Option>\n                  ))}\n                </OptGroup>\n              ))}\n            </Select>\n          </div>\n        </div>\n        {[IntervalEnum.DAYS, IntervalEnum.WEEKS].indexOf(interval) !== -1 ? (\n          <div className=\"schedule-component\">\n            <h5>On time</h5>\n            <div data-testid=\"time\">\n              <TimeEditor\n                defaultValue={hour ? moment().hour(hour).minute(minute) : null}\n                onChange={this.setTime}\n              />\n            </div>\n          </div>\n        ) : null}\n        {IntervalEnum.WEEKS === interval ? (\n          <div className=\"schedule-component\">\n            <h5>On day</h5>\n            <div data-testid=\"weekday\">\n              <Radio.Group size=\"medium\" defaultValue={this.state.dayOfWeek} onChange={this.setWeekday}>\n                {WEEKDAYS_SHORT.map(day => (\n                  <Radio.Button value={day} key={day} className=\"input\">\n                    {day[0]}\n                  </Radio.Button>\n                ))}\n              </Radio.Group>\n            </div>\n          </div>\n        ) : null}\n        {interval !== IntervalEnum.NEVER ? (\n          <div className=\"schedule-component\">\n            <h5>Ends</h5>\n            <div className=\"ends\" data-testid=\"ends\">\n              <Radio.Group size=\"medium\" value={!!until} onChange={this.setUntilToggle}>\n                <Radio value={false}>Never</Radio>\n                <Radio value>On</Radio>\n              </Radio.Group>\n              {until ? (\n                <DatePicker\n                  size=\"small\"\n                  className=\"datepicker\"\n                  value={moment(until)}\n                  allowClear={false}\n                  format={DATE_FORMAT}\n                  onChange={this.setScheduleUntil}\n                />\n              ) : null}\n            </div>\n          </div>\n        ) : null}\n      </Modal>\n    );\n  }\n}\n\nexport default wrapDialog(ScheduleDialog);\n","import { react2angular } from 'react2angular';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Tooltip from 'antd/lib/tooltip';\nimport { localizeTime, durationHumanize } from '@/filters';\nimport { RefreshScheduleType, RefreshScheduleDefault } from '../proptypes';\n\nimport './ScheduleDialog.css';\n\nexport class SchedulePhrase extends React.Component {\n  static propTypes = {\n    schedule: RefreshScheduleType,\n    isNew: PropTypes.bool.isRequired,\n    isLink: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    schedule: RefreshScheduleDefault,\n    isLink: false,\n  };\n\n  get content() {\n    const { interval: seconds } = this.props.schedule || SchedulePhrase.defaultProps.schedule;\n    if (!seconds) {\n      return ['Never'];\n    }\n    const humanized = durationHumanize(seconds, {\n      omitSingleValueNumber: true,\n    });\n    const short = `Every ${humanized}`;\n    let full = `Refreshes every ${humanized}`;\n\n    const { time, day_of_week: dayOfWeek } = this.props.schedule;\n    if (time) {\n      full += ` at ${localizeTime(time)}`;\n    }\n    if (dayOfWeek) {\n      full += ` on ${dayOfWeek}`;\n    }\n\n    return [short, full];\n  }\n\n  render() {\n    if (this.props.isNew) {\n      return 'Never';\n    }\n\n    const [short, full] = this.content;\n    const content = full ? <Tooltip title={full}>{short}</Tooltip> : short;\n\n    return this.props.isLink\n      ? <a className=\"schedule-phrase\">{content}</a>\n      : content;\n  }\n}\n\nexport default function init(ngModule) {\n  ngModule.component('schedulePhrase', react2angular(SchedulePhrase));\n}\n\ninit.init = true;\n","import React from 'react';\nimport Form from 'antd/lib/form';\nimport Modal from 'antd/lib/modal';\nimport Input from 'antd/lib/input';\nimport { isFunction } from 'lodash';\nimport { User } from '@/services/user';\nimport { toastr } from '@/services/ng';\nimport { UserProfile } from '../proptypes';\nimport { wrap as wrapDialog, DialogPropType } from '@/components/DialogWrapper';\n\nclass ChangePasswordDialog extends React.Component {\n  static propTypes = {\n    user: UserProfile.isRequired,\n    dialog: DialogPropType.isRequired,\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentPassword: { value: '', error: null, touched: false },\n      newPassword: { value: '', error: null, touched: false },\n      repeatPassword: { value: '', error: null, touched: false },\n      updatingPassword: false,\n    };\n  }\n\n  fieldError = (name, value) => {\n    if (value.length === 0) return 'This field is required.';\n    if (name !== 'currentPassword' && value.length < 6) return 'This field is too short.';\n    if (name === 'repeatPassword' && value !== this.state.newPassword.value) return 'Passwords don\\'t match';\n    return null;\n  };\n\n  validateFields = (callback) => {\n    const { currentPassword, newPassword, repeatPassword } = this.state;\n\n    const errors = {\n      currentPassword: this.fieldError('currentPassword', currentPassword.value),\n      newPassword: this.fieldError('newPassword', newPassword.value),\n      repeatPassword: this.fieldError('repeatPassword', repeatPassword.value),\n    };\n\n    this.setState({\n      currentPassword: { ...currentPassword, error: errors.currentPassword },\n      newPassword: { ...newPassword, error: errors.newPassword },\n      repeatPassword: { ...repeatPassword, error: errors.repeatPassword },\n    });\n\n    if (isFunction(callback)) {\n      if (errors.currentPassword || errors.newPassword || errors.repeatPassword) {\n        callback(errors);\n      } else callback(null);\n    }\n  }\n\n  updatePassword = () => {\n    const { currentPassword, newPassword, updatingPassword } = this.state;\n\n    if (!updatingPassword) {\n      this.validateFields((err) => {\n        if (!err) {\n          const userData = {\n            id: this.props.user.id,\n            old_password: currentPassword.value,\n            password: newPassword.value,\n          };\n\n          this.setState({ updatingPassword: true });\n\n          User.save(userData, () => {\n            toastr.success('Saved.');\n            this.props.dialog.close({ success: true });\n          }, (error = {}) => {\n            toastr.error(error.data && error.data.message || 'Failed saving.');\n            this.setState({ updatingPassword: false });\n          });\n        } else {\n          this.setState(prevState => ({\n            currentPassword: { ...prevState.currentPassword, touched: true },\n            newPassword: { ...prevState.newPassword, touched: true },\n            repeatPassword: { ...prevState.repeatPassword, touched: true },\n          }));\n        }\n      });\n    }\n  }\n\n  handleChange = (e) => {\n    const { name, value } = e.target;\n    const { error } = this.state[name];\n\n    this.setState({ [name]: { value, error, touched: true } }, () => {\n      this.validateFields();\n    });\n  }\n\n  render() {\n    const { dialog } = this.props;\n    const { currentPassword, newPassword, repeatPassword, updatingPassword } = this.state;\n\n    const formItemProps = { className: 'm-b-10', required: true };\n\n    const inputProps = {\n      onChange: this.handleChange,\n      onPressEnter: this.updatePassword,\n    };\n\n    return (\n      <Modal\n        {...dialog.props}\n        okButtonProps={{ loading: updatingPassword }}\n        onOk={this.updatePassword}\n        title=\"Change Password\"\n      >\n        <Form layout=\"vertical\">\n          <Form.Item\n            {...formItemProps}\n            validateStatus={currentPassword.touched && currentPassword.error ? 'error' : null}\n            help={currentPassword.touched ? currentPassword.error : null}\n            label=\"Current Password\"\n          >\n            <Input.Password {...inputProps} name=\"currentPassword\" data-test=\"CurrentPassword\" autoFocus />\n          </Form.Item>\n          <Form.Item\n            {...formItemProps}\n            validateStatus={newPassword.touched && newPassword.error ? 'error' : null}\n            help={newPassword.touched ? newPassword.error : null}\n            label=\"New Password\"\n          >\n            <Input.Password {...inputProps} name=\"newPassword\" data-test=\"NewPassword\" />\n          </Form.Item>\n          <Form.Item\n            {...formItemProps}\n            validateStatus={repeatPassword.touched && repeatPassword.error ? 'error' : null}\n            help={repeatPassword.touched ? repeatPassword.error : null}\n            label=\"Repeat New Password\"\n          >\n            <Input.Password {...inputProps} name=\"repeatPassword\" data-test=\"RepeatPassword\" />\n          </Form.Item>\n        </Form>\n      </Modal>\n    );\n  }\n}\n\nexport default wrapDialog(ChangePasswordDialog);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Modal from 'antd/lib/modal';\nimport Alert from 'antd/lib/alert';\nimport { DynamicForm } from '@/components/dynamic-form/DynamicForm';\nimport { wrap as wrapDialog, DialogPropType } from '@/components/DialogWrapper';\nimport recordEvent from '@/services/recordEvent';\n\nclass CreateUserDialog extends React.Component {\n  static propTypes = {\n    dialog: DialogPropType.isRequired,\n    onCreate: PropTypes.func.isRequired,\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = { savingUser: false, errorMessage: null };\n    this.form = React.createRef();\n  }\n\n  componentDidMount() {\n    recordEvent('view', 'page', 'users/new');\n  }\n\n  createUser = () => {\n    this.form.current.validateFieldsAndScroll((err, values) => {\n      if (!err) {\n        this.setState({ savingUser: true });\n        this.props.onCreate(values).then(() => {\n          this.props.dialog.close();\n        }).catch((error) => {\n          this.setState({ savingUser: false, errorMessage: error.message });\n        });\n      }\n    });\n  };\n\n  render() {\n    const { savingUser, errorMessage } = this.state;\n    const formFields = [\n      { name: 'name', title: 'Name', type: 'text' },\n      { name: 'email', title: 'Email', type: 'email' },\n    ].map(field => ({ required: true, props: { onPressEnter: this.createUser }, ...field }));\n\n    return (\n      <Modal\n        {...this.props.dialog.props}\n        title=\"Create a New User\"\n        okText=\"Create\"\n        okButtonProps={{ loading: savingUser }}\n        onOk={() => this.createUser()}\n      >\n        <DynamicForm fields={formFields} ref={this.form} hideSubmitButton />\n        {errorMessage && <Alert message={errorMessage} type=\"error\" showIcon />}\n      </Modal>\n    );\n  }\n}\n\nexport default wrapDialog(CreateUserDialog);\n","import React, { Fragment } from 'react';\nimport Alert from 'antd/lib/alert';\nimport Button from 'antd/lib/button';\nimport Form from 'antd/lib/form';\nimport Modal from 'antd/lib/modal';\nimport { User } from '@/services/user';\nimport { currentUser } from '@/services/auth';\nimport { absoluteUrl } from '@/services/utils';\nimport { UserProfile } from '../proptypes';\nimport { DynamicForm } from '../dynamic-form/DynamicForm';\nimport ChangePasswordDialog from './ChangePasswordDialog';\nimport InputWithCopy from '../InputWithCopy';\n\nexport default class UserEdit extends React.Component {\n  static propTypes = {\n    user: UserProfile.isRequired,\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      user: this.props.user,\n      regeneratingApiKey: false,\n      sendingPasswordEmail: false,\n      resendingInvitation: false,\n      togglingUser: false,\n    };\n  }\n\n  changePassword = () => {\n    ChangePasswordDialog.showModal({ user: this.props.user });\n  };\n\n  sendPasswordReset = () => {\n    this.setState({ sendingPasswordEmail: true });\n\n    User.sendPasswordReset(this.state.user).then((passwordLink) => {\n      this.setState({ passwordLink });\n    }).finally(() => {\n      this.setState({ sendingPasswordEmail: false });\n    });\n  };\n\n  resendInvitation = () => {\n    this.setState({ resendingInvitation: true });\n\n    User.resendInvitation(this.state.user).then((passwordLink) => {\n      this.setState({ passwordLink });\n    }).finally(() => {\n      this.setState({ resendingInvitation: false });\n    });\n  };\n\n  regenerateApiKey = () => {\n    const doRegenerate = () => {\n      this.setState({ regeneratingApiKey: true });\n      User.regenerateApiKey(this.state.user).then((apiKey) => {\n        if (apiKey) {\n          const { user } = this.state;\n          this.setState({ user: { ...user, apiKey } });\n        }\n      }).finally(() => {\n        this.setState({ regeneratingApiKey: false });\n      });\n    };\n\n    Modal.confirm({\n      title: 'Regenerate API Key',\n      content: 'Are you sure you want to regenerate?',\n      okText: 'Regenerate',\n      onOk: doRegenerate,\n      maskClosable: true,\n      autoFocusButton: null,\n    });\n  };\n\n  toggleUser = () => {\n    const { user } = this.state;\n    const toggleUser = user.isDisabled ? User.enableUser : User.disableUser;\n\n    this.setState({ togglingUser: true });\n    toggleUser(user).then((data) => {\n      if (data) {\n        this.setState({ user: User.convertUserInfo(data.data) });\n      }\n    }).finally(() => {\n      this.setState({ togglingUser: false });\n    });\n  };\n\n  saveUser = (values, successCallback, errorCallback) => {\n    const data = {\n      id: this.props.user.id,\n      ...values,\n    };\n\n    User.save(data, (user) => {\n      successCallback('Saved.');\n      this.setState({ user: User.convertUserInfo(user) });\n    }, (error = {}) => {\n      errorCallback(error.data && error.data.message || 'Failed saving.');\n    });\n  };\n\n  renderBasicInfoForm() {\n    const { user } = this.state;\n    const formFields = [\n      {\n        name: 'name',\n        title: 'Name',\n        type: 'text',\n        initialValue: user.name,\n      },\n      {\n        name: 'email',\n        title: 'Email',\n        type: 'email',\n        initialValue: user.email,\n      },\n    ].map(field => ({ ...field, readOnly: user.isDisabled, required: true }));\n\n    return (\n      <DynamicForm\n        fields={formFields}\n        onSubmit={this.saveUser}\n        hideSubmitButton={user.isDisabled}\n      />\n    );\n  }\n\n  renderApiKey() {\n    const { user, regeneratingApiKey } = this.state;\n\n    return (\n      <Form layout=\"vertical\">\n        <hr />\n        <Form.Item label=\"API Key\" className=\"m-b-10\">\n          <InputWithCopy id=\"apiKey\" value={user.apiKey} data-test=\"ApiKey\" readOnly />\n        </Form.Item>\n        <Button\n          className=\"w-100\"\n          onClick={this.regenerateApiKey}\n          loading={regeneratingApiKey}\n          data-test=\"RegenerateApiKey\"\n        >\n          Regenerate\n        </Button>\n      </Form>\n    );\n  }\n\n  renderPasswordLinkAlert() {\n    const { user, passwordLink } = this.state;\n\n    return (\n      <Alert\n        message=\"Email not sent!\"\n        description={(\n          <Fragment>\n            <p>\n              The mail server is not configured, please send the following link\n              to <b>{user.name}</b>:\n            </p>\n            <InputWithCopy value={absoluteUrl(passwordLink)} readOnly />\n          </Fragment>\n        )}\n        type=\"warning\"\n        className=\"m-t-20\"\n        afterClose={() => { this.setState({ passwordLink: null }); }}\n        closable\n      />\n    );\n  }\n\n  renderResendInvitation() {\n    return (\n      <Button\n        className=\"w-100 m-t-10\"\n        onClick={this.resendInvitation}\n        loading={this.state.resendingInvitation}\n      >\n        Resend Invitation\n      </Button>\n    );\n  }\n\n  renderSendPasswordReset() {\n    const { sendingPasswordEmail } = this.state;\n\n    return (\n      <Fragment>\n        <Button\n          className=\"w-100 m-t-10\"\n          onClick={this.sendPasswordReset}\n          loading={sendingPasswordEmail}\n        >\n          Send Password Reset Email\n        </Button>\n      </Fragment>\n    );\n  }\n\n  rendertoggleUser() {\n    const { user, togglingUser } = this.state;\n\n    return user.isDisabled ? (\n      <Button className=\"w-100 m-t-10\" type=\"primary\" onClick={this.toggleUser} loading={togglingUser}>\n        Enable User\n      </Button>\n    ) : (\n      <Button className=\"w-100 m-t-10\" type=\"danger\" onClick={this.toggleUser} loading={togglingUser}>\n        Disable User\n      </Button>\n    );\n  }\n\n  render() {\n    const { user, passwordLink } = this.state;\n\n    return (\n      <div className=\"col-md-4 col-md-offset-4\">\n        <img\n          alt=\"Profile\"\n          src={user.profileImageUrl}\n          className=\"profile__image\"\n          width=\"40\"\n        />\n        <h3 className=\"profile__h3\">{user.name}</h3>\n        <hr />\n        {this.renderBasicInfoForm()}\n        {!user.isDisabled && (\n          <Fragment>\n            {this.renderApiKey()}\n            <hr />\n            <h5>Password</h5>\n            {user.id === currentUser.id && (\n              <Button className=\"w-100 m-t-10\" onClick={this.changePassword} data-test=\"ChangePassword\">\n                Change Password\n              </Button>\n            )}\n            {(currentUser.isAdmin && user.id !== currentUser.id) && (\n              <Fragment>\n                {user.isInvitationPending ?\n                  this.renderResendInvitation() : this.renderSendPasswordReset()}\n                {passwordLink && this.renderPasswordLinkAlert()}\n              </Fragment>\n            )}\n          </Fragment>\n        )}\n        <hr />\n        {currentUser.isAdmin && user.id !== currentUser.id && this.rendertoggleUser()}\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport { UserProfile } from '../proptypes';\n\nexport default function UserShow({ user: { name, email, profileImageUrl } }) {\n  return (\n    <div className=\"col-md-4 col-md-offset-4 profile__container\">\n      <img\n        alt=\"profile\"\n        src={profileImageUrl}\n        className=\"profile__image\"\n        width=\"40\"\n      />\n\n      <h3 className=\"profile__h3\">{name}</h3>\n\n      <hr />\n\n      <dl className=\"profile__dl\">\n        <dt>Name:</dt>\n        <dd>{name}</dd>\n        <dt>Email:</dt>\n        <dd>{email}</dd>\n      </dl>\n    </div>\n  );\n}\n\nUserShow.propTypes = {\n  user: UserProfile.isRequired,\n};\n","import debug from 'debug';\nimport moment from 'moment';\nimport { sortBy, uniqBy, values, some, each, isArray, isNumber, isString, includes, forOwn } from 'lodash';\n\nconst logger = debug('redash:services:QueryResult');\nconst filterTypes = ['filter', 'multi-filter', 'multiFilter'];\n\nconst ALL_VALUES = '*';\nconst NONE_VALUES = '-';\n\nfunction getColumnNameWithoutType(column) {\n  let typeSplit;\n  if (column.indexOf('::') !== -1) {\n    typeSplit = '::';\n  } else if (column.indexOf('__') !== -1) {\n    typeSplit = '__';\n  } else {\n    return column;\n  }\n\n  const parts = column.split(typeSplit);\n  if (parts[0] === '' && parts.length === 2) {\n    return parts[1];\n  }\n\n  if (!includes(filterTypes, parts[1])) {\n    return column;\n  }\n\n  return parts[0];\n}\n\nexport function getColumnCleanName(column) {\n  return getColumnNameWithoutType(column);\n}\n\nfunction getColumnFriendlyName(column) {\n  return getColumnNameWithoutType(column).replace(/(?:^|\\s)\\S/g, a => a.toUpperCase());\n}\n\nfunction addPointToSeries(point, seriesCollection, seriesName) {\n  if (seriesCollection[seriesName] === undefined) {\n    seriesCollection[seriesName] = {\n      name: seriesName,\n      type: 'column',\n      data: [],\n    };\n  }\n\n  seriesCollection[seriesName].data.push(point);\n}\n\nfunction QueryResultService($resource, $timeout, $q, QueryResultError) {\n  const QueryResultResource = $resource('api/query_results/:id', { id: '@id' }, { post: { method: 'POST' } });\n  const Job = $resource('api/jobs/:id', { id: '@id' });\n  const statuses = {\n    1: 'waiting',\n    2: 'processing',\n    3: 'done',\n    4: 'failed',\n  };\n\n  function handleErrorResponse(queryResult, response) {\n    if (response.status === 403) {\n      queryResult.update(response.data);\n    } else if (response.status === 400 && 'job' in response.data) {\n      queryResult.update(response.data);\n    } else {\n      logger('Unknown error', response);\n      queryResult.update({\n        job: {\n          error: 'unknown error occurred. Please try again later.',\n          status: 4,\n        },\n      });\n    }\n  }\n\n  class QueryResult {\n    constructor(props) {\n      this.deferred = $q.defer();\n      this.job = {};\n      this.query_result = {};\n      this.status = 'waiting';\n      this.filters = undefined;\n      this.filterFreeze = undefined;\n\n      this.updatedAt = moment();\n\n      // extended status flags\n      this.isLoadingResult = false;\n\n      if (props) {\n        this.update(props);\n      }\n    }\n\n    update(props) {\n      Object.assign(this, props);\n\n      if ('query_result' in props) {\n        this.status = 'done';\n        this.filters = undefined;\n        this.filterFreeze = undefined;\n\n        const columnTypes = {};\n\n        // TODO: we should stop manipulating incoming data, and switch to relaying\n        // on the column type set by the backend. This logic is prone to errors,\n        // and better be removed. Kept for now, for backward compatability.\n        each(this.query_result.data.rows, (row) => {\n          forOwn(row, (v, k) => {\n            let newType = null;\n            if (isNumber(v)) {\n              newType = 'float';\n            } else if (isString(v) && v.match(/^\\d{4}-\\d{2}-\\d{2}T/)) {\n              row[k] = moment.utc(v);\n              newType = 'datetime';\n            } else if (isString(v) && v.match(/^\\d{4}-\\d{2}-\\d{2}$/)) {\n              row[k] = moment.utc(v);\n              newType = 'date';\n            } else if (typeof v === 'object' && v !== null) {\n              row[k] = JSON.stringify(v);\n            } else {\n              newType = 'string';\n            }\n\n            if (newType !== null) {\n              if (columnTypes[k] !== undefined && columnTypes[k] !== newType) {\n                columnTypes[k] = 'string';\n              } else {\n                columnTypes[k] = newType;\n              }\n            }\n          });\n        });\n\n        each(this.query_result.data.columns, (column) => {\n          column.name = '' + column.name;\n          if (columnTypes[column.name]) {\n            if (column.type == null || column.type === 'string') {\n              column.type = columnTypes[column.name];\n            }\n          }\n        });\n\n        this.deferred.resolve(this);\n      } else if (this.job.status === 3) {\n        this.status = 'processing';\n      } else if (this.job.status === 4) {\n        this.status = statuses[this.job.status];\n        this.deferred.reject(new QueryResultError(this.job.error));\n      } else {\n        this.status = undefined;\n      }\n    }\n\n    getId() {\n      let id = null;\n      if ('query_result' in this) {\n        id = this.query_result.id;\n      }\n      return id;\n    }\n\n    cancelExecution() {\n      Job.delete({ id: this.job.id });\n    }\n\n    getStatus() {\n      if (this.isLoadingResult) {\n        return 'loading-result';\n      }\n      return this.status || statuses[this.job.status];\n    }\n\n    getError() {\n      // TODO: move this logic to the server...\n      if (this.job.error === 'None') {\n        return undefined;\n      }\n\n      return this.job.error;\n    }\n\n    getLog() {\n      if (!this.query_result.data || !this.query_result.data.log || this.query_result.data.log.length === 0) {\n        return null;\n      }\n\n      return this.query_result.data.log;\n    }\n\n    getUpdatedAt() {\n      return this.query_result.retrieved_at || this.job.updated_at * 1000.0 || this.updatedAt;\n    }\n\n    getRuntime() {\n      return this.query_result.runtime;\n    }\n\n    getRawData() {\n      if (!this.query_result.data) {\n        return null;\n      }\n\n      return this.query_result.data.rows;\n    }\n\n    getData() {\n      if (!this.query_result.data) {\n        return null;\n      }\n\n      function filterValues(filters) {\n        if (!filters) {\n          return null;\n        }\n\n        return filters.reduce((str, filter) => str + filter.current, '');\n      }\n\n      const filters = this.getFilters();\n      const filterFreeze = filterValues(filters);\n\n      if (this.filterFreeze !== filterFreeze) {\n        this.filterFreeze = filterFreeze;\n\n        if (filters) {\n          filters.forEach((filter) => {\n            if (filter.multiple && includes(filter.current, ALL_VALUES)) {\n              filter.current = filter.values.slice(2);\n            }\n\n            if (filter.multiple && includes(filter.current, NONE_VALUES)) {\n              filter.current = [];\n            }\n          });\n\n          this.filteredData = this.query_result.data.rows.filter(row => filters.reduce((memo, filter) => {\n            if (!isArray(filter.current)) {\n              filter.current = [filter.current];\n            }\n\n            return (\n              memo &&\n              some(filter.current, (v) => {\n                const value = row[filter.name];\n                if (moment.isMoment(value)) {\n                  return value.isSame(v);\n                }\n                // We compare with either the value or the String representation of the value,\n                // because Select2 casts true/false to \"true\"/\"false\".\n                return v === value || String(value) === v;\n              })\n            );\n          }, true));\n        } else {\n          this.filteredData = this.query_result.data.rows;\n        }\n      }\n\n      return this.filteredData;\n    }\n\n    isEmpty() {\n      return this.getData() === null || this.getData().length === 0;\n    }\n\n    getChartData(mapping) {\n      const series = {};\n\n      this.getData().forEach((row) => {\n        let point = { $raw: row };\n        let seriesName;\n        let xValue = 0;\n        const yValues = {};\n        let eValue = null;\n        let sizeValue = null;\n        let zValue = null;\n\n        forOwn(row, (v, definition) => {\n          definition = '' + definition;\n          const definitionParts = definition.split('::') || definition.split('__');\n          const name = definitionParts[0];\n          const type = mapping ? mapping[definition] : definitionParts[1];\n          let value = v;\n\n          if (type === 'unused') {\n            return;\n          }\n\n          if (type === 'x') {\n            xValue = value;\n            point[type] = value;\n          }\n          if (type === 'y') {\n            if (value == null) {\n              value = 0;\n            }\n            yValues[name] = value;\n            point[type] = value;\n          }\n          if (type === 'yError') {\n            eValue = value;\n            point[type] = value;\n          }\n\n          if (type === 'series') {\n            seriesName = String(value);\n          }\n\n          if (type === 'size') {\n            point[type] = value;\n            sizeValue = value;\n          }\n\n          if (type === 'zVal') {\n            point[type] = value;\n            zValue = value;\n          }\n\n          if (type === 'multiFilter' || type === 'multi-filter') {\n            seriesName = String(value);\n          }\n        });\n\n        if (seriesName === undefined) {\n          each(yValues, (yValue, ySeriesName) => {\n            point = { x: xValue, y: yValue, $raw: point.$raw };\n            if (eValue !== null) {\n              point.yError = eValue;\n            }\n\n            if (sizeValue !== null) {\n              point.size = sizeValue;\n            }\n\n            if (zValue !== null) {\n              point.zVal = zValue;\n            }\n            addPointToSeries(point, series, ySeriesName);\n          });\n        } else {\n          addPointToSeries(point, series, seriesName);\n        }\n      });\n      return sortBy(values(series), 'name');\n    }\n\n    getColumns() {\n      if (this.columns === undefined && this.query_result.data) {\n        this.columns = this.query_result.data.columns;\n      }\n\n      return this.columns;\n    }\n\n    getColumnNames() {\n      if (this.columnNames === undefined && this.query_result.data) {\n        this.columnNames = this.query_result.data.columns.map(v => v.name);\n      }\n\n      return this.columnNames;\n    }\n\n    getColumnCleanNames() {\n      return this.getColumnNames().map(col => getColumnCleanName(col));\n    }\n\n    getColumnFriendlyNames() {\n      return this.getColumnNames().map(col => getColumnFriendlyName(col));\n    }\n\n    getFilters() {\n      if (!this.filters) {\n        this.prepareFilters();\n      }\n\n      return this.filters;\n    }\n\n    prepareFilters() {\n      if (!this.getColumns()) {\n        return;\n      }\n\n      const filters = [];\n\n      this.getColumns().forEach((col) => {\n        const name = col.name;\n        const type = name.split('::')[1] || name.split('__')[1];\n        if (includes(filterTypes, type)) {\n          // filter found\n          const filter = {\n            name,\n            friendlyName: getColumnFriendlyName(name),\n            column: col,\n            values: [],\n            multiple: type === 'multiFilter' || type === 'multi-filter',\n          };\n          filters.push(filter);\n        }\n      }, this);\n\n      this.getRawData().forEach((row) => {\n        filters.forEach((filter) => {\n          filter.values.push(row[filter.name]);\n          if (filter.values.length === 1) {\n            if (filter.multiple) {\n              filter.current = [row[filter.name]];\n            } else {\n              filter.current = row[filter.name];\n            }\n          }\n        });\n      });\n\n      filters.forEach((filter) => {\n        if (filter.multiple) {\n          filter.values.unshift(ALL_VALUES);\n          filter.values.unshift(NONE_VALUES);\n        }\n      });\n\n      filters.forEach((filter) => {\n        filter.values = uniqBy(filter.values, (v) => {\n          if (moment.isMoment(v)) {\n            return v.unix();\n          }\n          return v;\n        });\n      });\n\n      this.filters = filters;\n    }\n\n    toPromise() {\n      return this.deferred.promise;\n    }\n\n    static getById(id) {\n      const queryResult = new QueryResult();\n\n      queryResult.isLoadingResult = true;\n      QueryResultResource.get(\n        { id },\n        (response) => {\n          // Success handler\n          queryResult.isLoadingResult = false;\n          queryResult.update(response);\n        },\n        (error) => {\n          // Error handler\n          queryResult.isLoadingResult = false;\n          handleErrorResponse(queryResult, error);\n        },\n      );\n\n      return queryResult;\n    }\n\n    loadResult(tryCount) {\n      this.isLoadingResult = true;\n      QueryResultResource.get(\n        { id: this.job.query_result_id },\n        (response) => {\n          this.update(response);\n          this.isLoadingResult = false;\n        },\n        (error) => {\n          if (tryCount === undefined) {\n            tryCount = 0;\n          }\n\n          if (tryCount > 3) {\n            logger('Connection error while trying to load result', error);\n            this.update({\n              job: {\n                error: 'failed communicating with server. Please check your Internet connection and try again.',\n                status: 4,\n              },\n            });\n            this.isLoadingResult = false;\n          } else {\n            $timeout(() => {\n              this.loadResult(tryCount + 1);\n            }, 1000 * Math.pow(2, tryCount));\n          }\n        },\n      );\n    }\n\n    refreshStatus(query, tryNumber = 1) {\n      Job.get(\n        { id: this.job.id },\n        (jobResponse) => {\n          this.update(jobResponse);\n\n          if (this.getStatus() === 'processing' && this.job.query_result_id && this.job.query_result_id !== 'None') {\n            this.loadResult();\n          } else if (this.getStatus() !== 'failed') {\n            const waitTime = tryNumber > 10 ? 3000 : 500;\n            $timeout(() => {\n              this.refreshStatus(query, tryNumber + 1);\n            }, waitTime);\n          }\n        },\n        (error) => {\n          logger('Connection error', error);\n          // TODO: use QueryResultError, or better yet: exception/reject of promise.\n          this.update({\n            job: {\n              error: 'failed communicating with server. Please check your Internet connection and try again.',\n              status: 4,\n            },\n          });\n        },\n      );\n    }\n\n    getLink(queryId, fileType, apiKey) {\n      let link = `api/queries/${queryId}/results/${this.getId()}.${fileType}`;\n      if (apiKey) {\n        link = `${link}?api_key=${apiKey}`;\n      }\n      return link;\n    }\n\n    getName(queryName, fileType) {\n      return `${queryName.replace(/ /g, '_') + moment(this.getUpdatedAt()).format('_YYYY_MM_DD')}.${fileType}`;\n    }\n\n    static getByQueryId(id, parameters, maxAge) {\n      const queryResult = new QueryResult();\n\n      $resource('api/queries/:id/results', { id: '@id' }, { post: { method: 'POST' } }).post(\n        {\n          id,\n          parameters,\n          max_age: maxAge,\n        },\n        (response) => {\n          queryResult.update(response);\n\n          if ('job' in response) {\n            queryResult.refreshStatus(id);\n          }\n        },\n        (error) => {\n          handleErrorResponse(queryResult, error);\n        },\n      );\n\n      return queryResult;\n    }\n\n    static get(dataSourceId, query, parameters, maxAge, queryId) {\n      const queryResult = new QueryResult();\n\n      const params = {\n        data_source_id: dataSourceId,\n        parameters,\n        query,\n        max_age: maxAge,\n      };\n\n      if (queryId !== undefined) {\n        params.query_id = queryId;\n      }\n\n      QueryResultResource.post(\n        params,\n        (response) => {\n          queryResult.update(response);\n\n          if ('job' in response) {\n            queryResult.refreshStatus(query);\n          }\n        },\n        (error) => {\n          handleErrorResponse(queryResult, error);\n        },\n      );\n\n      return queryResult;\n    }\n  }\n\n  return QueryResult;\n}\n\nexport default function init(ngModule) {\n  ngModule.factory('QueryResult', QueryResultService);\n}\n\ninit.init = true;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { BigMessage } from '@/components/BigMessage';\nimport { NoTaggedObjectsFound } from '@/components/NoTaggedObjectsFound';\nimport { EmptyState } from '@/components/empty-state/EmptyState';\n\nexport default function DashboardListEmptyState({ page, searchTerm, selectedTags }) {\n  if (searchTerm !== '') {\n    return (\n      <BigMessage message=\"Sorry, we couldn't find anything.\" icon=\"fa-search\" />\n    );\n  }\n  if (selectedTags.length > 0) {\n    return (\n      <NoTaggedObjectsFound objectType=\"dashboards\" tags={selectedTags} />\n    );\n  }\n  switch (page) {\n    case 'favorites': return (\n      <BigMessage message=\"Mark dashboards as Favorite to list them here.\" icon=\"fa-star\" />\n    );\n    default: return (\n      <EmptyState\n        icon=\"zmdi zmdi-view-quilt\"\n        description=\"See the big picture\"\n        illustration=\"dashboard\"\n        helpLink=\"https://help.redash.io/category/22-dashboards\"\n        showDashboardStep\n      />\n    );\n  }\n}\n\nDashboardListEmptyState.propTypes = {\n  page: PropTypes.string.isRequired,\n  searchTerm: PropTypes.string.isRequired,\n  selectedTags: PropTypes.array.isRequired, // eslint-disable-line react/forbid-prop-types\n};\n","import { replace } from 'lodash';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Switch from 'antd/lib/switch';\nimport Modal from 'antd/lib/modal';\nimport Form from 'antd/lib/form';\nimport Alert from 'antd/lib/alert';\nimport { $http, toastr } from '@/services/ng';\nimport { wrap as wrapDialog, DialogPropType } from '@/components/DialogWrapper';\nimport InputWithCopy from '@/components/InputWithCopy';\nimport { HelpTrigger } from '@/components/HelpTrigger';\n\nconst API_SHARE_URL = 'api/dashboards/{id}/share';\n\nclass ShareDashboardDialog extends React.Component {\n  static propTypes = {\n    dashboard: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n    hasQueryParams: PropTypes.bool.isRequired,\n    dialog: DialogPropType.isRequired,\n  };\n\n  formItemProps = {\n    labelCol: { span: 8 },\n    wrapperCol: { span: 16 },\n    style: { marginBottom: 7 },\n  }\n\n  constructor(props) {\n    super(props);\n    const { dashboard } = this.props;\n\n    this.state = {\n      saving: false,\n    };\n\n    this.apiUrl = replace(API_SHARE_URL, '{id}', dashboard.id);\n    this.disabled = this.props.hasQueryParams && !dashboard.publicAccessEnabled;\n  }\n\n  static get headerContent() {\n    return (\n      <React.Fragment>\n        Share Dashboard\n        <div className=\"modal-header-desc\">\n          Allow public access to this dashboard with a secret address.{' '}\n          <HelpTrigger type=\"SHARE_DASHBOARD\" />\n        </div>\n      </React.Fragment>\n    );\n  }\n\n  enableAccess = () => {\n    const { dashboard } = this.props;\n    this.setState({ saving: true });\n\n    $http\n      .post(this.apiUrl)\n      .success((data) => {\n        dashboard.publicAccessEnabled = true;\n        dashboard.public_url = data.public_url;\n      })\n      .error(() => {\n        toastr.error('Failed to turn on sharing for this dashboard');\n      })\n      .finally(() => {\n        this.setState({ saving: false });\n      });\n  }\n\n  disableAccess = () => {\n    const { dashboard } = this.props;\n    this.setState({ saving: true });\n\n    $http\n      .delete(this.apiUrl)\n      .success(() => {\n        dashboard.publicAccessEnabled = false;\n        delete dashboard.public_url;\n      })\n      .error(() => {\n        toastr.error('Failed to turn off sharing for this dashboard');\n      })\n      .finally(() => {\n        this.setState({ saving: false });\n      });\n  }\n\n  onChange = (checked) => {\n    if (checked) {\n      this.enableAccess();\n    } else {\n      this.disableAccess();\n    }\n  };\n\n  render() {\n    const { dialog, dashboard } = this.props;\n\n    return (\n      <Modal\n        {...dialog.props}\n        title={this.constructor.headerContent}\n        footer={null}\n      >\n        <Form layout=\"horizontal\">\n          {this.props.hasQueryParams && (\n            <Form.Item>\n              <Alert\n                message=\"Sharing is currently not supported for dashboards containing queries with parameters.\"\n                type=\"error\"\n              />\n            </Form.Item>\n          )}\n          <Form.Item label=\"Allow public access\" {...this.formItemProps}>\n            <Switch\n              checked={dashboard.publicAccessEnabled}\n              onChange={this.onChange}\n              loading={this.state.saving}\n              disabled={this.disabled}\n            />\n          </Form.Item>\n          {dashboard.public_url && (\n            <Form.Item label=\"Secret address\" {...this.formItemProps}>\n              <InputWithCopy value={dashboard.public_url} />\n            </Form.Item>\n          )}\n        </Form>\n      </Modal>\n    );\n  }\n}\n\nexport default wrapDialog(ShareDashboardDialog);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { BigMessage } from '@/components/BigMessage';\nimport { NoTaggedObjectsFound } from '@/components/NoTaggedObjectsFound';\nimport { EmptyState } from '@/components/empty-state/EmptyState';\n\nexport default function QueriesListEmptyState({ page, searchTerm, selectedTags }) {\n  if (searchTerm !== '') {\n    return (\n      <BigMessage message=\"Sorry, we couldn't find anything.\" icon=\"fa-search\" />\n    );\n  }\n  if (selectedTags.length > 0) {\n    return (\n      <NoTaggedObjectsFound objectType=\"queries\" tags={selectedTags} />\n    );\n  }\n  switch (page) {\n    case 'favorites': return (\n      <BigMessage message=\"Mark queries as Favorite to list them here.\" icon=\"fa-star\" />\n    );\n    case 'archive': return (\n      <BigMessage message=\"Archived queries will be listed here.\" icon=\"fa-archive\" />\n    );\n    case 'my': return (\n      <div className=\"tiled bg-white p-15\">\n        <a href=\"queries/new\" className=\"btn btn-primary btn-sm\">Create your first query</a>\n        {' '}to populate My Queries list. Need help? Check out our{' '}\n        <a href=\"https://redash.io/help/user-guide/querying/writing-queries\">query writing documentation</a>.\n      </div>\n    );\n    default: return (\n      <EmptyState\n        icon=\"fa fa-code\"\n        illustration=\"query\"\n        description=\"Getting the data from your datasources.\"\n        helpLink=\"https://help.redash.io/category/21-querying\"\n      />\n    );\n  }\n}\n\nQueriesListEmptyState.propTypes = {\n  page: PropTypes.string.isRequired,\n  searchTerm: PropTypes.string.isRequired,\n  selectedTags: PropTypes.array.isRequired, // eslint-disable-line react/forbid-prop-types\n};\n","module.exports = \"<settings-screen>\\n  <div class=\\\"row\\\">\\n    <type-picker img-root=\\\"/static/images/db-logos\\\"\\n                 types=\\\"types\\\"\\n                 title=\\\"New Data Source\\\"\\n                 on-type-select=\\\"setType\\\"\\n                 ng-if=\\\"dataSource.type === undefined\\\"></type-picker>\\n\\n    <div ng-if=\\\"dataSource.type !== undefined\\\" data-test=\\\"DataSource\\\">\\n      <div class=\\\"creation-container\\\">\\n        <div class=\\\"col-xs-12 col-sm-4\\\">\\n          <a ng-click=\\\"resetType()\\\" ng-if=\\\"canChangeType\\\">← Change <span class=\\\"hidden-xs\\\">Type</span></a>\\n        </div>\\n\\n        <div class=\\\"col-xs-12 col-sm-4 text-center\\\">\\n          <img ng-src=\\\"/static/images/db-logos/{{dataSource.type}}.png\\\" alt=\\\"{{type.name}}\\\" width=\\\"64\\\">\\n          <h3>{{type.name}}</h3>\\n        </div>\\n\\n        <div class=\\\"col-xs-12 col-sm-4\\\">\\n          <p class=\\\"needhelp text-right text-center-xs\\\" ng-if=\\\"helpLinks[type.type]\\\">\\n            <a ng-href=\\\"{{helpLinks[type.type]}}\\\" target=\\\"_blank\\\" >\\n              Help <span class=\\\"hidden-xs\\\">setting up {{type.name}}</span> <i class=\\\"fa fa-external-link\\\" aria-hidden=\\\"true\\\"></i>\\n            </a>\\n          </p>\\n        </div>\\n      </div>\\n\\n      <div class=\\\"clearboth\\\"></div>\\n\\n      <div class=\\\"col-md-4 col-md-offset-4\\\">\\n        <dynamic-form target=\\\"dataSource\\\" type=\\\"type\\\" actions=\\\"actions\\\">\\n        </dynamic-form>\\n      </div>\\n    </div>\\n  </div>\\n</settings-screen>\\n\"","module.exports = \"<settings-screen>\\n  <div class=\\\"row\\\">\\n    <type-picker img-root=\\\"/static/images/destinations\\\"\\n                 types=\\\"types\\\"\\n                 title=\\\"New Alert Destination\\\"\\n                 on-type-select=\\\"setType\\\"\\n                 ng-if=\\\"destination.type === undefined\\\"></type-picker>\\n\\n    <div ng-if=\\\"destination.type !== undefined\\\">\\n      <div class=\\\"creation-container\\\">\\n        <div class=\\\"col-xs-12 col-sm-4\\\">\\n          <a ng-click=\\\"resetType()\\\" ng-if=\\\"canChangeType\\\">← Change Type</a>\\n        </div>\\n\\n        <div class=\\\"col-xs-12 col-sm-4  text-center\\\">\\n          <img ng-src=\\\"/static/images/destinations/{{destination.type}}.png\\\" alt=\\\"{{type.name}}\\\" width=\\\"64\\\">\\n          <h3>{{type.name}}</h3>\\n        </div>\\n      </div>\\n\\n      <div class=\\\"clearboth\\\"></div>\\n\\n      <div class=\\\"col-md-4 col-md-offset-4\\\">\\n        <dynamic-form target=\\\"destination\\\" type=\\\"type\\\" actions=\\\"actions\\\">\\n        </dynamic-form>\\n      </div>\\n    </div>\\n  </div>\\n</settings-screen>\\n\"","module.exports = __webpack_public_path__ + \"images/avatar.svg\";","import $ from 'jquery';\nimport _ from 'lodash';\nimport 'jquery-ui/ui/widgets/draggable';\nimport 'jquery-ui/ui/widgets/droppable';\nimport 'jquery-ui/ui/widgets/resizable';\nimport 'gridstack/dist/gridstack.css';\n\n// eslint-disable-next-line import/first\nimport gridstack from 'gridstack';\n\nfunction sequence(...fns) {\n  fns = _.filter(fns, _.isFunction);\n  if (fns.length > 0) {\n    return function sequenceWrapper(...args) {\n      for (let i = 0; i < fns.length; i += 1) {\n        fns[i].apply(this, args);\n      }\n    };\n  }\n  return _.noop;\n}\n\n// eslint-disable-next-line import/prefer-default-export\nfunction JQueryUIGridStackDragDropPlugin(grid) {\n  gridstack.GridStackDragDropPlugin.call(this, grid);\n}\n\ngridstack.GridStackDragDropPlugin.registerPlugin(JQueryUIGridStackDragDropPlugin);\n\nJQueryUIGridStackDragDropPlugin.prototype = Object.create(gridstack.GridStackDragDropPlugin.prototype);\nJQueryUIGridStackDragDropPlugin.prototype.constructor = JQueryUIGridStackDragDropPlugin;\n\nJQueryUIGridStackDragDropPlugin.prototype.resizable = function resizable(el, opts, key, value) {\n  el = $(el);\n  if (opts === 'disable' || opts === 'enable') {\n    el.resizable(opts);\n  } else if (opts === 'option') {\n    el.resizable(opts, key, value);\n  } else {\n    el.resizable(_.extend({}, this.grid.opts.resizable, {\n      // run user-defined callback before internal one\n      start: sequence(this.grid.opts.resizable.start, opts.start),\n      // this and next - run user-defined callback after internal one\n      stop: sequence(opts.stop, this.grid.opts.resizable.stop),\n      resize: sequence(opts.resize, this.grid.opts.resizable.resize),\n    }));\n  }\n  return this;\n};\n\nJQueryUIGridStackDragDropPlugin.prototype.draggable = function draggable(el, opts) {\n  el = $(el);\n  if (opts === 'disable' || opts === 'enable') {\n    el.draggable(opts);\n  } else {\n    el.draggable(_.extend({}, this.grid.opts.draggable, {\n      containment: this.grid.opts.isNested ? this.grid.container.parent() : null,\n      // run user-defined callback before internal one\n      start: sequence(this.grid.opts.draggable.start, opts.start),\n      // this and next - run user-defined callback after internal one\n      stop: sequence(opts.stop, this.grid.opts.draggable.stop),\n      drag: sequence(opts.drag, this.grid.opts.draggable.drag),\n    }));\n  }\n  return this;\n};\n\nJQueryUIGridStackDragDropPlugin.prototype.droppable = function droppable(el, opts) {\n  el = $(el);\n  if (opts === 'disable' || opts === 'enable') {\n    el.droppable(opts);\n  } else {\n    el.droppable({\n      accept: opts.accept,\n    });\n  }\n  return this;\n};\n\nJQueryUIGridStackDragDropPlugin.prototype.isDroppable = function isDroppable(el) {\n  return Boolean($(el).data('droppable'));\n};\n\nJQueryUIGridStackDragDropPlugin.prototype.on = function on(el, eventName, callback) {\n  $(el).on(eventName, callback);\n  return this;\n};\n","module.exports = \"<div class=\\\"p-5\\\">\\n  <h4>Notifications</h4>\\n\\n  <div>\\n    <ui-select ng-model=\\\"newSubscription.destination\\\" ng-disabled=\\\"destinations.length == 0\\\">\\n      <ui-select-match><span ng-bind-html=\\\"destinationsDisplay($select.selected)\\\"></span></ui-select-match>\\n      <ui-select-choices repeat=\\\"d in destinations\\\">\\n        <span ng-bind-html=\\\"destinationsDisplay(d)\\\"></span>\\n      </ui-select-choices>\\n    </ui-select>\\n  </div>\\n  <div class=\\\"m-t-5\\\">\\n    <button class=\\\"btn btn-default\\\" ng-click=\\\"saveSubscriber()\\\" ng-disabled=\\\"destinations.length == 0\\\" style=\\\"width:50%;\\\">Add</button>\\n    <span class=\\\"pull-right m-t-5\\\">\\n      <a href=\\\"destinations/new\\\" ng-if=\\\"currentUser.isAdmin\\\">Create New Destination</a>\\n    </span>\\n  </div>\\n\\n  <hr/>\\n\\n  <div>\\n    <div class=\\\"list-group-item\\\" ng-repeat=\\\"subscriber in subscribers\\\">\\n      <span ng-bind-html=\\\"destinationsDisplay(subscriber)\\\"></span>\\n      <button class=\\\"btn btn-xs btn-danger pull-right\\\" ng-click=\\\"unsubscribe(subscriber)\\\" ng-if=\\\"currentUser.isAdmin || currentUser.id == subscriber.user.id\\\">Remove</button>\\n    </div>\\n  </div>\\n</div>\\n\"","module.exports = \"<nav class=\\\"navbar navbar-default app-header\\\" role=\\\"navigation\\\">\\n  <div class=\\\"container\\\">\\n    <div class=\\\"navbar-header\\\">\\n      <button type=\\\"button\\\" class=\\\"navbar-toggle\\\" ng-click=\\\"isNavOpen = !isNavOpen\\\">\\n        <span class=\\\"sr-only\\\">Toggle navigation</span>\\n        <span class=\\\"icon-bar\\\"></span>\\n        <span class=\\\"icon-bar\\\"></span>\\n        <span class=\\\"icon-bar\\\"></span>\\n      </button>\\n      <!-- REDASH LOGO -->\\n      <a class=\\\"navbar-brand\\\" ng-href=\\\"{{$ctrl.basePath}}\\\"><img ng-src=\\\"{{$ctrl.logoUrl}}\\\"/></a>\\n    </div>\\n    <div class=\\\"collapse navbar-collapse\\\" uib-collapse=\\\"!isNavOpen\\\">\\n      <!-- Main Left Nav-->\\n\\n      <ul class=\\\"nav navbar-nav nav__main\\\">\\n        <li class=\\\"dropdown btn-group\\\" ng-show=\\\"$ctrl.showDashboardsMenu\\\" uib-dropdown>\\n          <a class=\\\"btn\\\" href=\\\"dashboards\\\">Dashboards</a>\\n          <a type=\\\"button\\\" class=\\\"btn hidden-xs\\\" uib-dropdown-toggle>\\n            <span class=\\\"caret caret--nav\\\"></span>\\n          </a>\\n          <ul class=\\\"dropdown-menu\\\" uib-dropdown-menu>\\n            <li ng-if=\\\"$ctrl.dashboards.length == 0\\\">\\n              <a>\\n                <em>\\n                  <span class=\\\"btn-favourite\\\">\\n                    <i class=\\\"fa fa-star\\\" aria-hidden=\\\"true\\\"></i>\\n                  </span>\\n                  Favorite Dashboards will appear here\\n                </em>\\n              </a>\\n            </li>\\n            <li ng-repeat=\\\"dashboard in $ctrl.dashboards\\\">\\n              <a href=\\\"dashboard/{{ dashboard.slug }}\\\">\\n                {{ dashboard.name }}\\n              </a>\\n            </li>\\n          </ul>\\n        </li>\\n        <li class=\\\"dropdown btn-group\\\" ng-show=\\\"$ctrl.showQueriesMenu\\\" uib-dropdown>\\n          <a class=\\\"btn\\\" href=\\\"queries\\\">Queries</a>\\n          <a type=\\\"button\\\" class=\\\"btn hidden-xs\\\" uib-dropdown-toggle>\\n            <span class=\\\"caret caret--nav\\\"></span>\\n          </a>\\n          <ul class=\\\"dropdown-menu\\\" uib-dropdown-menu>\\n            <li ng-if=\\\"$ctrl.queries.length == 0\\\">\\n              <a>\\n                <em>\\n                  <span class=\\\"btn-favourite\\\">\\n                    <i class=\\\"fa fa-star\\\" aria-hidden=\\\"true\\\"></i>\\n                  </span>\\n                  Favorite Queries will appear here\\n                </em>\\n              </a>\\n            </li>\\n            <li ng-repeat=\\\"query in $ctrl.queries\\\">\\n              <a href=\\\"queries/{{ query.id }}\\\">\\n                {{ query.name }}\\n              </a>\\n            </li>\\n          </ul>\\n        </li>\\n        <li ng-if=\\\"$ctrl.showAlertsLink\\\">\\n          <a href=\\\"alerts\\\">Alerts</a>\\n        </li>\\n      </ul>\\n\\n      <!-- Add New Button -->\\n      <div class=\\\"btn-group navbar-btn navbar-left btn__new hidden-xs\\\" uib-dropdown is-open=\\\"status.isopen\\\">\\n        <button id=\\\"create-button\\\" data-test=\\\"CreateButton\\\" type=\\\"button\\\" class=\\\"btn btn-primary btn--create\\\" uib-dropdown-toggle ng-disabled=\\\"disabled\\\">\\n          Create <span class=\\\"caret caret--nav\\\"></span>\\n        </button>\\n        <ul class=\\\"dropdown-menu\\\" uib-dropdown-menu role=\\\"menu\\\" aria-labelledby=\\\"create-button\\\">\\n          <li role=\\\"menuitem\\\" ng-show=\\\"$ctrl.showNewQueryMenu\\\"><a href=\\\"queries/new\\\">Query</a></li>\\n          <li role=\\\"menuitem\\\"><a ng-show=\\\"$ctrl.currentUser.hasPermission('create_dashboard')\\\" ng-click=\\\"$ctrl.newDashboard()\\\">Dashboard</a></li>\\n          <li role=\\\"menuitem\\\"><a href=\\\"alerts/new\\\">Alert</a></li>\\n        </ul>\\n      </div>\\n\\n      <!-- Profile -->\\n      <ul class=\\\"nav navbar-nav navbar-right\\\">\\n        <li>\\n          <help-trigger type=\\\"'HOME'\\\" class-name=\\\"'navbar-link-ANGULAR_REMOVE_ME'\\\"></help-trigger>\\n        </li>\\n        <li ng-show=\\\"$ctrl.currentUser.isAdmin\\\">\\n          <a href=\\\"data_sources\\\" title=\\\"Settings\\\"><i class=\\\"fa fa-sliders\\\" aria-hidden=\\\"true\\\"></i></a>\\n        </li>\\n        <!--<li ng-show=\\\"$ctrl.showSettingsMenu\\\">-->\\n          <!--<a href=\\\"users\\\" title=\\\"Settings\\\"><i class=\\\"fa fa-cog\\\"></i></a>-->\\n        <!--</li>-->\\n        <li class=\\\"dropdown\\\" uib-dropdown>\\n          <a href=\\\"#\\\" class=\\\"dropdown-toggle dropdown--profile\\\" uib-dropdown-toggle data-test=\\\"ProfileDropdown\\\">\\n            <img ng-src=\\\"{{ $ctrl.currentUser.profile_image_url }}\\\" class=\\\"profile__image--navbar\\\" width=\\\"20\\\"/>\\n            <span class=\\\"dropdown--profile__username\\\" ng-bind=\\\"$ctrl.currentUser.name\\\"></span> <span\\n            class=\\\"caret caret--nav\\\"></span></a>\\n          <ul class=\\\"dropdown-menu dropdown-menu--profile\\\">\\n            <li>\\n              <a ng-href=\\\"users/me\\\">Edit Profile</a>\\n            </li>\\n            <li class=\\\"divider\\\" ng-if=\\\"$ctrl.currentUser.hasPermission('super_admin')\\\">\\n\\n            <li ng-show=\\\"$ctrl.currentUser.isAdmin\\\">\\n              <a href=\\\"data_sources\\\" title=\\\"Data Sources\\\">Data Sources</a>\\n            </li>\\n            <li ng-show=\\\"$ctrl.showSettingsMenu\\\">\\n              <a href=\\\"groups\\\" title=\\\"Settings\\\">Groups</a>\\n            </li>\\n            <li ng-show=\\\"$ctrl.showSettingsMenu\\\">\\n              <a href=\\\"users\\\" title=\\\"Settings\\\">Users</a>\\n            </li>\\n            <li>\\n              <a ng-href=\\\"query_snippets\\\">Query Snippets</a>\\n            </li>\\n            <li ng-show=\\\"$ctrl.showSettingsMenu\\\">\\n              <a href=\\\"destinations\\\" title=\\\"Settings\\\">Alert Destinations</a>\\n            </li>\\n\\n            <li ng-if=\\\"$ctrl.currentUser.hasPermission('super_admin')\\\" class=\\\"divider\\\"></li>\\n\\n            <li ng-if=\\\"$ctrl.currentUser.hasPermission('super_admin')\\\"><a href=\\\"admin/status\\\">System Status</a></li>\\n\\n            <li class=\\\"divider\\\"></li>\\n\\n            <li>\\n              <a ng-click=\\\"$ctrl.logout()\\\">Log out</a>\\n            </li>\\n\\n            <li class=\\\"divider\\\"></li>\\n            <li class=\\\"dropdown-menu__version\\\">\\n              Version: {{$ctrl.backendVersion}}\\n              <span ng-if=\\\"$ctrl.frontendVersion !== $ctrl.backendVersion\\\">\\n                ({{$ctrl.frontendVersion.substring(0, 8)}})\\n              </span>\\n              <span class=\\\"update-available\\\" ng-if=\\\"$ctrl.currentUser.hasPermission('super_admin') && $ctrl.newVersionAvailable\\\">\\n                <a href=\\\"https://version.redash.io/\\\" target=\\\"_blank\\\">\\n                  <i class=\\\"fa fa-arrow-circle-down\\\"></i>\\n                </a>\\n              </span>\\n            </li>\\n          </ul>\\n        </li>\\n      </ul>\\n\\n      <!-- Search -->\\n      <form class=\\\"navbar-form navbar-right\\\" role=\\\"search\\\" ng-submit=\\\"$ctrl.searchQueries()\\\">\\n        <div class=\\\"input-group menu-search\\\">\\n          <input type=\\\"text\\\" ng-model=\\\"$ctrl.searchTerm\\\" class=\\\"form-control navbar__search__input\\\" placeholder=\\\"Search queries...\\\">\\n          <span class=\\\"input-group-btn\\\">\\n            <button type=\\\"submit\\\" class=\\\"btn btn-default\\\"><span class=\\\"zmdi zmdi-search\\\"></span></button>\\n          </span>\\n        </div>\\n      </form>\\n    </div>\\n  </div>\\n</nav>\\n\"","module.exports = \"<app-header ng-if=\\\"$ctrl.layout.showHeader\\\"></app-header>\\n<div ng-if=\\\"$ctrl.handler.error\\\" class=\\\"fixed-container\\\">\\n  <div class=\\\"container\\\">\\n    <div class=\\\"col-md-8 col-md-push-2\\\">\\n      <div class=\\\"error-state bg-white tiled\\\">\\n         <div class=\\\"error-state__icon\\\">\\n           <i class=\\\"zmdi zmdi-alert-circle-o\\\"></i>\\n         </div>\\n         <div class=\\\"error-state__details\\\">\\n           <h4>{{ $ctrl.handler.error.message }}</h4>\\n         </div>\\n       </div>\\n    </div>\\n  </div>\\n</div>\\n<div ng-if=\\\"!$ctrl.handler.error\\\" ng-view></div>\\n<footer ng-if=\\\"$ctrl.layout.showFooter\\\"></footer>\\n\"","module.exports = \"<div data-test=\\\"EditDashboardDialog\\\">\\n  <div class=\\\"modal-header\\\">\\n    <button type=\\\"button\\\" class=\\\"close\\\" ng-click=\\\"$ctrl.dismiss()\\\" ng-disabled=\\\"$ctrl.saveInProgress\\\" aria-hidden=\\\"true\\\">&times;</button>\\n    <h4 class=\\\"modal-title\\\">New Dashboard</h4>\\n  </div>\\n  <div class=\\\"modal-body\\\" ng-if=\\\"$ctrl.policy.isCreateDashboardEnabled()\\\">\\n    <p>\\n      <input type=\\\"text\\\" class=\\\"form-control\\\" placeholder=\\\"Dashboard Name\\\" ng-model=\\\"$ctrl.dashboard.name\\\" autofocus ng-keyup=\\\"$event.keyCode === 13 && $ctrl.saveDashboard()\\\">\\n    </p>\\n  </div>\\n  <div class=\\\"modal-footer\\\" ng-if=\\\"$ctrl.policy.isCreateDashboardEnabled()\\\">\\n    <button type=\\\"button\\\" class=\\\"btn btn-default\\\" ng-disabled=\\\"$ctrl.saveInProgress\\\" ng-click=\\\"$ctrl.dismiss()\\\">Close</button>\\n    <button type=\\\"button\\\" class=\\\"btn btn-primary\\\" ng-disabled=\\\"$ctrl.saveInProgress || !$ctrl.isFormValid()\\\" ng-click=\\\"$ctrl.saveDashboard()\\\" data-test=\\\"DashboardSaveButton\\\">Save</button>\\n  </div>\\n\\n  <div class=\\\"modal-body\\\" ng-if=\\\"!$ctrl.policy.isCreateDashboardEnabled()\\\">\\n    <edit-dashboard-dialog-disabled></edit-dashboard-dialog-disabled>\\n  </div>\\n</div>\"","module.exports = \"<div class=\\\"widget-wrapper\\\">\\n  <div class=\\\"tile body-container widget-visualization\\\" ng-if=\\\"$ctrl.type=='visualization'\\\" ng-class=\\\"$ctrl.type\\\"\\n    ng-switch=\\\"$ctrl.widget.getQueryResult().getStatus()\\\">\\n    <div class=\\\"body-row\\\">\\n      <div class=\\\"t-header widget clearfix\\\">\\n        <div class=\\\"dropdown pull-right widget-menu-remove\\\"  ng-if=\\\"!$ctrl.public && $ctrl.dashboard.canEdit()\\\">\\n          <div class=\\\"actions\\\">\\n            <a ng-click=\\\"$ctrl.deleteWidget()\\\" title=\\\"Remove From Dashboard\\\"><i class=\\\"zmdi zmdi-close\\\"></i></a>\\n          </div>\\n        </div>\\n        <div class=\\\"dropdown pull-right widget-menu-regular\\\" ng-if=\\\"!$ctrl.public\\\"\\n          uib-dropdown dropdown-append-to-body=\\\"true\\\"\\n        >\\n          <div class=\\\"actions\\\">\\n            <a data-toggle=\\\"dropdown\\\" uib-dropdown-toggle><i class=\\\"zmdi zmdi-more-vert\\\"></i></a>\\n          </div>\\n\\n          <ul class=\\\"dropdown-menu dropdown-menu-right\\\" uib-dropdown-menu>\\n            <li ng-class=\\\"{'disabled': $ctrl.widget.getQueryResult().isEmpty()}\\\"><a ng-href=\\\"{{$ctrl.widget.getQueryResult().getLink($ctrl.widget.getQuery().id, 'csv')}}\\\" download=\\\"{{$ctrl.widget.getQueryResult().getName($ctrl.widget.getQuery().name, 'csv')}}\\\" target=\\\"_self\\\">Download as CSV File</a></li>\\n            <li ng-class=\\\"{'disabled': $ctrl.widget.getQueryResult().isEmpty()}\\\"><a ng-href=\\\"{{$ctrl.widget.getQueryResult().getLink($ctrl.widget.getQuery().id, 'xlsx')}}\\\" download=\\\"{{$ctrl.widget.getQueryResult().getName($ctrl.widget.getQuery().name, 'xlsx')}}\\\" target=\\\"_self\\\">Download as Excel File</a></li>\\n\\n            <li ng-if=\\\"$ctrl.canViewQuery || ($ctrl.dashboard.canEdit() && $ctrl.hasParameters())\\\" class=\\\"divider\\\"></li>\\n            <li ng-if=\\\"$ctrl.canViewQuery\\\"><a ng-href=\\\"{{$ctrl.widget.getQuery().getUrl(true, $ctrl.widget.visualization.id)}}\\\">View Query</a></li>\\n            <li ng-if=\\\"$ctrl.dashboard.canEdit() && $ctrl.hasParameters()\\\">\\n              <li ng-if=\\\"$ctrl.dashboard.canEdit() && $ctrl.hasParameters()\\\"><a ng-click=\\\"$ctrl.editParameterMappings()\\\">Edit Parameters</a></li>\\n            </li>\\n\\n            <li ng-if=\\\"$ctrl.dashboard.canEdit()\\\" class=\\\"divider\\\"></li>\\n            <li ng-if=\\\"$ctrl.dashboard.canEdit()\\\"><a ng-click=\\\"$ctrl.deleteWidget()\\\">Remove from Dashboard</a></li>\\n          </ul>\\n        </div>\\n        <div class=\\\"th-title\\\">\\n          <p>\\n            <query-link query=\\\"$ctrl.widget.getQuery()\\\" visualization=\\\"$ctrl.widget.visualization\\\"\\n              readonly=\\\"!$ctrl.canViewQuery\\\"></query-link>\\n          </p>\\n          <div class=\\\"text-muted query--description\\\" ng-bind-html=\\\"$ctrl.widget.getQuery().description | markdown\\\"></div>\\n        </div>\\n      </div>\\n      <div class=\\\"m-b-10\\\" ng-if=\\\"$ctrl.localParametersDefs().length > 0\\\">\\n        <parameters parameters=\\\"$ctrl.localParametersDefs()\\\"></parameters>\\n      </div>\\n    </div>\\n\\n    <div ng-switch-when=\\\"failed\\\" class=\\\"body-row-auto scrollbox\\\">\\n      <div class=\\\"alert alert-danger m-5\\\" ng-show=\\\"$ctrl.widget.getQueryResult().getError()\\\">Error running query: <strong>{{$ctrl.widget.getQueryResult().getError()}}</strong></div>\\n    </div>\\n    <div ng-switch-when=\\\"done\\\" class=\\\"body-row-auto scrollbox\\\">\\n      <visualization-renderer visualization=\\\"$ctrl.widget.visualization\\\" query-result=\\\"$ctrl.widget.getQueryResult()\\\" class=\\\"t-body\\\"></visualization-renderer>\\n    </div>\\n    <div ng-switch-default class=\\\"body-row-auto spinner-container\\\">\\n      <div class=\\\"spinner\\\">\\n        <i class=\\\"zmdi zmdi-refresh zmdi-hc-spin zmdi-hc-5x\\\"></i>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"body-row clearfix tile__bottom-control\\\">\\n      <a class=\\\"small hidden-print\\\" ng-click=\\\"$ctrl.refresh()\\\" ng-if=\\\"!$ctrl.public\\\">\\n        <i ng-class='{\\\"zmdi-hc-spin\\\": $ctrl.widget.loading}' class=\\\"zmdi zmdi-refresh\\\"></i>\\n        <span am-time-ago=\\\"$ctrl.widget.getQueryResult().getUpdatedAt()\\\" ng-if=\\\"!$ctrl.widget.loading\\\"></span>\\n        <rd-timer timestamp=\\\"$ctrl.widget.refreshStartedAt\\\" ng-if=\\\"$ctrl.widget.loading\\\"></rd-timer>\\n      </a>\\n      <span class=\\\"small hidden-print\\\" ng-if=\\\"$ctrl.public\\\">\\n        <i class=\\\"zmdi zmdi-time-restore\\\"></i> <span am-time-ago=\\\"$ctrl.widget.getQueryResult().getUpdatedAt()\\\"></span>\\n      </span>\\n      <span class=\\\"visible-print\\\">\\n        <i class=\\\"zmdi zmdi-time-restore\\\"></i> {{$ctrl.widget.getQueryResult().getUpdatedAt() | dateTime}}\\n      </span>\\n\\n      <button class=\\\"btn btn-sm btn-default pull-right hidden-print btn-transparent btn__refresh\\\" ng-click=\\\"$ctrl.refresh()\\\" ng-if=\\\"!$ctrl.public\\\"><i class=\\\"zmdi zmdi-refresh\\\"></i></button>\\n      <button class=\\\"btn btn-sm btn-default pull-right hidden-print btn-transparent btn__refresh\\\" ng-click=\\\"$ctrl.expandVisualization()\\\"><i class=\\\"zmdi zmdi-fullscreen\\\"></i></button>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"tile body-container widget-restricted\\\" ng-if=\\\"$ctrl.type=='restricted'\\\" ng-class=\\\"$ctrl.type\\\">\\n    <div class=\\\"t-body body-row-auto scrollbox\\\">\\n      <div class=\\\"text-center\\\">\\n        <h1><span class=\\\"zmdi zmdi-lock\\\"></span></h1>\\n        <p class=\\\"text-muted\\\">\\n          This widget requires access to a data source you don't have access to.\\n        </p>\\n      </div>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"tile body-container widget-text\\\" ng-hide=\\\"$ctrl.widget.width === 0\\\" ng-if=\\\"$ctrl.type=='textbox'\\\" ng-class=\\\"$ctrl.type\\\">\\n    <div class=\\\"body-row clearfix t-body\\\">\\n      <div class=\\\"dropdown pull-right widget-menu-remove\\\" ng-if=\\\"!$ctrl.public && $ctrl.dashboard.canEdit()\\\">\\n        <div class=\\\"dropdown-header\\\">\\n          <a class=\\\"actions\\\" ng-click=\\\"$ctrl.deleteWidget()\\\" title=\\\"Remove From Dashboard\\\"><i class=\\\"zmdi zmdi-close\\\"></i></a>\\n        </div>\\n      </div>\\n      <div class=\\\"dropdown pull-right widget-menu-regular\\\" ng-if=\\\"!$ctrl.public && $ctrl.dashboard.canEdit()\\\" uib-dropdown>\\n        <div class=\\\"dropdown-header\\\">\\n          <a data-toggle=\\\"dropdown\\\" uib-dropdown-toggle class=\\\"actions\\\"><i class=\\\"zmdi zmdi-more\\\"></i></a>\\n        </div>\\n\\n        <ul class=\\\"dropdown-menu pull-right\\\" uib-dropdown-menu style=\\\"z-index:1000000\\\">\\n          <li><a ng-show=\\\"$ctrl.dashboard.canEdit()\\\" ng-click=\\\"$ctrl.editTextBox()\\\">Edit</a></li>\\n          <li><a ng-show=\\\"$ctrl.dashboard.canEdit()\\\" ng-click=\\\"$ctrl.deleteWidget()\\\">Remove From Dashboard</a></li>\\n        </ul>\\n      </div>\\n    </div>\\n    <div class=\\\"body-row-auto scrollbox tiled t-body p-15\\\" ng-bind-html=\\\"$ctrl.widget.text | markdown\\\"></div>\\n  </div>\\n</div>\\n\"","module.exports = \"<div class=\\\"modal-header\\\">\\n  <button type=\\\"button\\\" class=\\\"close\\\" aria-label=\\\"Close\\\" ng-click=\\\"$ctrl.close()\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\\n  <h4 class=\\\"modal-title\\\">Edit TextBox</h4>\\n</div>\\n<div class=\\\"modal-body\\\">\\n  <div class=\\\"form-group\\\">\\n    <textarea class=\\\"form-control\\\" style=\\\"resize: vertical\\\" ng-model=\\\"$ctrl.widget.new_text\\\" rows=\\\"3\\\"></textarea>\\n  </div>\\n  <div ng-show=\\\"$ctrl.widget.new_text\\\">\\n    <strong>Preview:</strong>\\n    <p ng-bind-html=\\\"$ctrl.widget.new_text | markdown\\\" class=\\\"word-wrap-break\\\"></p>\\n  </div>\\n</div>\\n\\n<div class=\\\"modal-footer\\\">\\n  <button type=\\\"button\\\" class=\\\"btn btn-default\\\" ng-disabled=\\\"$ctrl.saveInProgress\\\" ng-click=\\\"$ctrl.close()\\\">Close</button>\\n  <button type=\\\"button\\\" class=\\\"btn btn-primary\\\" ng-disabled=\\\"$ctrl.saveInProgress\\\" ng-click=\\\"$ctrl.saveWidget()\\\">Save</button>\\n</div>\\n\"","module.exports = \"<div class=\\\"modal-header\\\">\\n  <button type=\\\"button\\\" class=\\\"close\\\" aria-hidden=\\\"true\\\" ng-click=\\\"$ctrl.dismiss()\\\">&times;</button>\\n  <div class=\\\"visualization-title\\\">\\n    <query-link query=\\\"$ctrl.widget.getQuery()\\\" visualization=\\\"$ctrl.widget.visualization\\\" readonly=\\\"true\\\"></query-link>\\n  </div>\\n</div>\\n<div class=\\\"modal-body\\\">\\n  <visualization-renderer visualization=\\\"$ctrl.widget.visualization\\\" query-result=\\\"$ctrl.widget.getQueryResult()\\\" class=\\\"t-body\\\"></visualization-renderer>\\n</div>\\n<div class=\\\"modal-footer\\\">\\n  <button type=\\\"button\\\" class=\\\"btn btn-default\\\" ng-click=\\\"$ctrl.dismiss()\\\">Close</button>\\n</div>\\n\"","module.exports = \"<td ng-class=\\\"'content-align-' + column.alignContent + ' display-as-' + column.displayAs\\\">\\n  <div ng-if=\\\"allowHTML\\\" ng-bind-html=\\\"value\\\"></div>\\n  <div ng-if=\\\"!allowHTML\\\" ng-bind=\\\"value\\\"></div>\\n</td>\\n\"","module.exports = \"<div class=\\\"dynamic-table-container\\\">\\n  <table class=\\\"table table-condensed table-hover\\\" data-test=\\\"DynamicTable\\\">\\n    <thead>\\n      <tr>\\n        <th ng-repeat=\\\"column in $ctrl.columns\\\" ng-click=\\\"$ctrl.onColumnHeaderClick($event, column)\\\"\\n          class=\\\"sortable-column\\\" ng-class=\\\"'content-align-' + column.alignContent + ' display-as-' + column.displayAs\\\">\\n          <span ng-if=\\\"($ctrl.orderBy.length > 1) && ($ctrl.orderByColumnsIndex[column.name] > 0)\\\"\\n            class=\\\"sort-order-indicator\\\">{{ $ctrl.orderByColumnsIndex[column.name] }}</span>\\n          <span>{{column.title}}</span>\\n          <i ng-if=\\\"$ctrl.orderByColumnsIndex[column.name] > 0\\\"\\n            ng-class=\\\"{\\n              'fa': true,\\n              'fa-caret-down': $ctrl.orderByColumnsDirection[column.name] > 0,\\n              'fa-caret-up': $ctrl.orderByColumnsDirection[column.name] < 0\\n            }\\\"></i>\\n        </th>\\n        <th class=\\\"dynamic-table-spacer\\\"></th>\\n      </tr>\\n    </thead>\\n    <thead ng-if=\\\"$ctrl.searchColumns.length > 0\\\">\\n      <th class=\\\"p-t-10 p-b-10 p-l-15 p-r-15\\\" colspan=\\\"{{ $ctrl.columns.length + 1 }}\\\">\\n        <input type=\\\"text\\\" class=\\\"form-control\\\" placeholder=\\\"Search...\\\"\\n          ng-model=\\\"$ctrl.searchTerm\\\" ng-model-options=\\\"{ allowInvalid: true, debounce: 200 }\\\"\\n          ng-change=\\\"$ctrl.onSearchTermChanged()\\\">\\n      </th>\\n    </thead>\\n    <tbody>\\n      <tr ng-repeat=\\\"row in $ctrl.rowsToDisplay\\\"\\n        dynamic-table-row columns=\\\"$ctrl.columns\\\" row=\\\"row\\\"\\n        render=\\\"$ctrl.renderSingleRow\\\"\\n      ></tr>\\n    </tbody>\\n  </table>\\n</div>\\n<paginator paginator=\\\"$ctrl.paginatorAdapter\\\"></paginator>\\n\"","module.exports = \"<td ng-class=\\\"'display-as-' + column.displayAs\\\">\\n  <div ng-if=\\\"!isValid\\\" class=\\\"json-cell-invalid\\\">{{ value }}</div>\\n  <div ng-show=\\\"isValid\\\" class=\\\"json-cell-valid\\\"></div>\\n</td>\\n\"","module.exports = \"<div class=\\\"parameter-container container bg-white\\\" ng-show=\\\"$ctrl.filters | notEmpty\\\">\\n  <div class=\\\"row\\\">\\n    <div class=\\\"col-sm-6 p-l-0 filter-container\\\" ng-repeat=\\\"filter in $ctrl.filters\\\">\\n      <label>{{filter.friendlyName}}</label>\\n\\n      <ui-select\\n        ng-if=\\\"!filter.multiple\\\"\\n        ng-model=\\\"filter.current\\\"\\n        on-select=\\\"$ctrl.filterChangeListener(filter, $model)\\\"\\n        on-remove=\\\"$ctrl.filterChangeListener(filter, $model)\\\"\\n        remove-selected=\\\"false\\\"\\n        append-to-body=\\\"true\\\"\\n      >\\n        <ui-select-match placeholder=\\\"Select value for {{filter.friendlyName}}...\\\">{{$select.selected | filterValue:filter}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"value in filter.values | filter: $select.search\\\">\\n          {{value | filterValue:filter }}\\n        </ui-select-choices>\\n      </ui-select>\\n\\n      <ui-select\\n        ng-if=\\\"filter.multiple\\\"\\n        multiple\\n        ng-model=\\\"filter.current\\\"\\n        on-select=\\\"$ctrl.filterChangeListener(filter, $model)\\\"\\n        on-remove=\\\"$ctrl.filterChangeListener(filter, $model)\\\"\\n        remove-selected=\\\"false\\\"\\n        append-to-body=\\\"true\\\"\\n      >\\n        <ui-select-match placeholder=\\\"Select value for {{filter.friendlyName}}...\\\">{{$item | filterValue:filter}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"value in filter.values | filter: $select.search\\\" group-by=\\\"$ctrl.itemGroup\\\">\\n          <span ng-if=\\\"value == '*'\\\">\\n            Select All\\n          </span>\\n          <span ng-if=\\\"value == '-'\\\">\\n            Clear\\n          </span>\\n          <span ng-if=\\\"value != '*' && value != '-'\\\">\\n            {{value | filterValue:filter }}\\n          </span>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n  </div>\\n</div>\\n\"","module.exports = \"<div class=\\\"parameter-container form-inline bg-white\\\"\\n  ng-if=\\\"parameters | notEmpty\\\"\\n  ui-sortable=\\\"{ 'ui-floating': true, 'disabled': !editable }\\\"\\n  ng-model=\\\"parameters\\\"\\n>\\n  <div class=\\\"form-group m-r-10\\\" ng-repeat=\\\"param in parameters\\\">\\n    <label class=\\\"parameter-label\\\">{{param.title}}</label>\\n    <button class=\\\"btn btn-default btn-xs\\\" ng-if=\\\"editable\\\" ng-click=\\\"showParameterSettings(param, $index)\\\">\\n      <i class=\\\"zmdi zmdi-settings\\\"></i>\\n    </button>\\n    <parameter-value-input param=\\\"param\\\"></parameter-value-input>\\n  </div>\\n</div>\\n\"","module.exports = \"<div class=\\\"modal-header\\\">\\n    <button type=\\\"button\\\" class=\\\"close\\\" aria-label=\\\"Close\\\" ng-click=\\\"$ctrl.close()\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\\n    <h4 class=\\\"modal-title\\\">Manage Permissions</h4>\\n</div>\\n<div class=\\\"modal-body\\\">\\n  <div style=\\\"overflow: auto; height: 300px\\\">\\n    <ui-select ng-model=\\\"$ctrl.newGrantees.selected\\\" on-select=\\\"$ctrl.addGrantee($item)\\\">\\n       <ui-select-match placeholder=\\\"Add New User\\\"></ui-select-match>\\n       <ui-select-choices repeat=\\\"user in $ctrl.foundUsers | filter:$select.search\\\"\\n                         refresh=\\\"$ctrl.findUser($select.search)\\\"\\n                         refresh-delay=\\\"0\\\"\\n                         ui-disable-choice=\\\"user.alreadyGrantee\\\">\\n        <div class=\\\"d-flex align-items-center\\\">\\n          <img ng-src=\\\"{{ user.profile_image_url }}\\\" class=\\\"profile__image\\\" height=\\\"24px\\\">&nbsp;\\n          <span ng-class=\\\"{'text-muted': user.is_disabled}\\\">{{user.name}}</span>\\n          &nbsp;<small ng-if=\\\"user.alreadyGrantee\\\">(already has permission)</small>\\n        </div>\\n       </ui-select-choices>\\n    </ui-select>\\n      <br>\\n      <h5>Who has access</h5>\\n       <table class=\\\"table table-condensed table-hover table--permission\\\">\\n        <thead>\\n          <tr>\\n            <th></th>\\n            <th>User</th>\\n            <th>Permission</th>\\n            <th></th>\\n          </tr>\\n        </thead>\\n        <tbody>\\n        <tr>\\n          <td width=\\\"32px\\\"><img ng-src=\\\"{{ $ctrl.owner.profile_image_url }}\\\" class=\\\"profile__image\\\" height=\\\"32px\\\"/></td>\\n          <td class=\\\"text-muted\\\"> {{ $ctrl.owner.name}}</td>\\n          <td class=\\\"mp__permission-type\\\">Owner</td>\\n          <td></td>\\n        </tr>\\n        <tr ng-repeat=\\\"grantee in $ctrl.grantees\\\" ng-if=\\\"grantee.id != $ctrl.owner.id\\\">\\n          <td width=\\\"32px\\\"><img ng-src=\\\"{{ grantee.profile_image_url }}\\\" class=\\\"profile__image\\\" height=\\\"32px\\\"/></td>\\n          <td ng-class=\\\"{'text-muted': grantee.is_disabled}\\\">{{grantee.name}}</td>\\n          <td class=\\\"mp__permission-type\\\">{{grantee.access_type}}</td>\\n          <td><button class=\\\"pull-right btn btn-sm btn-danger\\\" ng-click=\\\"$ctrl.removeGrantee(grantee)\\\">Remove</button></td>\\n        </tr>\\n        </tbody>\\n      </table>\\n    </div>\\n  </div>\\n\"","module.exports = \"<div class=\\\"modal-header\\\">\\n  <button type=\\\"button\\\" class=\\\"close\\\" aria-label=\\\"Close\\\" ng-click=\\\"$ctrl.close()\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\\n  <h4 class=\\\"modal-title\\\">Embed Code</h4>\\n</div>\\n<div class=\\\"modal-body\\\">\\n  <h5>IFrame Embed</h5>\\n  <div>\\n    <code>&lt;iframe src=\\\"{{ $ctrl.embedUrl }}\\\" width=\\\"720\\\" height=\\\"391\\\"&gt;&lt;/iframe&gt;</code>\\n  </div>\\n  <span class=\\\"text-muted\\\">(height should be adjusted)</span>\\n  <div ng-if=\\\"$ctrl.snapshotUrl\\\">\\n    <h5>Image Embed</h5>\\n    <div>\\n      <code style=\\\"overflow-wrap:break-word;\\\">{{$ctrl.snapshotUrl}}</code>\\n    </div>\\n  </div>\\n</div>\"","module.exports = \"<div class=\\\"schema-container\\\" ng-if=\\\"$ctrl.schema\\\">\\n  <div class=\\\"schema-control\\\">\\n    <input type=\\\"text\\\" placeholder=\\\"Search schema...\\\" class=\\\"form-control\\\" ng-model=\\\"$ctrl.schemaFilter\\\" ng-model-options=\\\"{ debounce: 500 }\\\" ng-disabled=\\\"$ctrl.isEmpty()\\\" ng-change=\\\"$ctrl.splitFilter($ctrl.schemaFilter);\\\">\\n    <button class=\\\"btn btn-default\\\"\\n            title=\\\"Refresh Schema\\\"\\n            ng-click=\\\"$ctrl.onRefresh()\\\">\\n      <span class=\\\"zmdi zmdi-refresh\\\"></span>\\n    </button>\\n  </div>\\n\\n  <div class=\\\"schema-browser\\\" vs-repeat vs-size=\\\"$ctrl.getSize(table)\\\">\\n    <div ng-repeat=\\\"table in $ctrl.schema | filter:$ctrl.schemaFilterObject track by table.name\\\">\\n      <div class=\\\"table-name\\\" ng-click=\\\"$ctrl.showTable(table)\\\">\\n        <i class=\\\"fa fa-table\\\"></i>\\n        <strong>\\n          <span title=\\\"{{table.name}}\\\">{{table.name}}</span>\\n          <span ng-if=\\\"table.size !== undefined\\\"> ({{table.size}})</span>\\n        </strong>\\n        <i class=\\\"fa fa-angle-double-right copy-to-editor\\\" aria-hidden=\\\"true\\\"\\n          ng-click=\\\"$ctrl.itemSelected($event, [table.name])\\\"></i>\\n      </div>\\n      <div uib-collapse=\\\"table.collapsed\\\">\\n        <div ng-repeat=\\\"column in table.columns | filter:$ctrl.schemaFilterColumn track by column\\\" class=\\\"table-open\\\">{{column}}\\n          <i class=\\\"fa fa-angle-double-right copy-to-editor\\\" aria-hidden=\\\"true\\\"\\n            ng-click=\\\"$ctrl.itemSelected($event, [column])\\\"></i>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"","module.exports = \"<div class=\\\"tile m-l-10 m-r-10 embed__vis\\\">\\n  <div class=\\\"embed-heading p-t-10 p-b-10 p-r-15 p-l-15\\\">\\n    <h3>\\n      <img ng-src=\\\"{{$ctrl.logoUrl}}\\\" style=\\\"height: 24px;\\\"/>\\n      <visualization-name visualization=\\\"$ctrl.visualization\\\"/>\\n      {{$ctrl.query.name}}\\n\\n      <small ng-if=\\\"$ctrl.showQueryDescription\\\">\\n        <div class=\\\"text-muted\\\" ng-bind-html=\\\"$ctrl.query.description | markdown\\\"></div>\\n      </small>\\n    </h3>\\n  </div>\\n\\n  <div class=\\\"col-md-12 query__vis\\\">\\n    <visualization-renderer visualization=\\\"$ctrl.visualization\\\" query-result=\\\"$ctrl.queryResult\\\" class=\\\"t-body\\\">\\n    </visualization-renderer>\\n  </div>\\n\\n  <div class=\\\"clearfix tile__bottom-control\\\">\\n    <div class=\\\"row\\\">\\n      <div class=\\\"col-xs-6\\\">\\n        <span class=\\\"small hidden-print\\\"><i class=\\\"zmdi zmdi-time-restore\\\"></i> <span am-time-ago=\\\"$ctrl.queryResult.getUpdatedAt()\\\"></span></span>\\n        <span class=\\\"small visible-print\\\"><i class=\\\"zmdi zmdi-time-restore\\\"></i> {{$ctrl.queryResult.getUpdatedAt() | dateTime}} UTC</span>\\n      </div>\\n      <div class=\\\"col-xs-6 text-right hidden-print\\\">\\n        <a class=\\\"btn btn-default btn-sm\\\" ng-href=\\\"queries/{{$ctrl.query.id}}#{{$ctrl.visualization.id}}\\\" target=\\\"_blank\\\" tooltip=\\\"Open in Redash\\\">\\n          <span class=\\\"zmdi zmdi-link\\\"></span>\\n        </a>\\n\\n        <div class=\\\"btn-group\\\" uib-dropdown>\\n          <button type=\\\"button\\\" class=\\\"btn btn-default btn-sm dropdown-toggle\\\" aria-haspopup=\\\"true\\\" uib-dropdown-toggle\\n                  aria-expanded=\\\"false\\\">\\n            Download Dataset <span class=\\\"caret\\\"></span>\\n          </button>\\n          <ul class=\\\"dropdown-menu pull-right\\\" uib-dropdown-menu>\\n            <li>\\n              <a ng-href=\\\"{{$ctrl.queryResult.getLink($ctrl.query.id, 'csv', $ctrl.apiKey)}}\\\" download=\\\"{{$ctrl.queryResult.getName($ctrl.query.name, 'csv')}}\\\" target=\\\"_self\\\">\\n                <span class=\\\"fa fa-file-o\\\"></span> Download as CSV File\\n              </a>\\n            </li>\\n            <li>\\n              <a ng-href=\\\"{{$ctrl.queryResult.getLink($ctrl.query.id, 'xlsx', $ctrl.apiKey)}}\\\" download=\\\"{{$ctrl.queryResult.getName($ctrl.query.name, 'xlsx')}}\\\"  target=\\\"_self\\\">\\n                <span class=\\\"fa fa-file-excel-o\\\"></span> Download as Excel File\\n              </a>\\n            </li>\\n          </ul>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"","module.exports = \"<div class=\\\"container\\\">\\n  <page-header title=\\\"'Settings'\\\"></page-header>\\n\\n  <div class=\\\"bg-white tiled\\\">\\n    <ul class=\\\"tab-nav\\\">\\n      <li\\n        ng-repeat=\\\"menuItem in $ctrl.settingsMenu.items\\\"\\n        ng-if=\\\"$ctrl.isAvailable(menuItem.permission)\\\"\\n        ng-class=\\\"{'active': $ctrl.isActive(menuItem)}\\\"\\n      >\\n        <a href=\\\"{{menuItem.path}}\\\">{{menuItem.title}}</a>\\n      </li>\\n\\n    </ul>\\n    <div class=\\\"p-15\\\">\\n      <div ng-transclude>\\n\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"","module.exports = \"<div class=\\\"col-lg-12 creation-container\\\">\\n    <h3 class=\\\"text-center\\\">{{$ctrl.title}}</h3>\\n\\n    <div class=\\\"row\\\">\\n    <div class=\\\"col-md-4 col-md-offset-4\\\">\\n        <div class=\\\"form-group\\\">\\n            <input type=\\\"text\\\" class=\\\"form-control\\\" placeholder=\\\"Search...\\\" ng-model=\\\"$ctrl.filter.name\\\" autofocus>\\n        </div>\\n    </div>\\n    </div>\\n\\n    <div class=\\\"row\\\">\\n        <div class=\\\"col-lg-12 database-source\\\" data-test=\\\"TypePicker\\\">\\n            <div class=\\\"visual-card\\\" ng-repeat=\\\"type in $ctrl.types | filter:$ctrl.filter:strict\\\" ng-click=\\\"$ctrl.onTypeSelect(type)\\\">\\n            <img ng-src=\\\"{{$ctrl.imgRoot}}/{{type.type}}.png\\\" alt=\\\"{{type.name}}\\\">\\n            <h3>{{type.name}}</h3>\\n        </div>\\n    </div>\\n</div>\\n</div>\\n\"","module.exports = \"<div class=\\\"form-horizontal\\\">\\n  <div class=\\\"form-group\\\">\\n    <label class=\\\"col-lg-6\\\">X Axis Label</label>\\n    <div class=\\\"col-lg-6\\\">\\n      <input type=\\\"text\\\" ng-model=\\\"visualization.options.xAxisLabel\\\" class=\\\"form-control\\\">\\n    </div>\\n  </div>\\n\\n  <div class=\\\"form-group\\\">\\n    <label class=\\\"col-lg-6\\\">Y Axis Label</label>\\n    <div class=\\\"col-lg-6\\\">\\n      <input type=\\\"text\\\" ng-model=\\\"visualization.options.yAxisLabel\\\" class=\\\"form-control\\\">\\n    </div>\\n  </div>\\n</div>\\n\"","module.exports = \"<div ng-if=\\\"plotlyOptions.globalSeriesType != 'custom'\\\">\\n  <plotly-chart options=\\\"plotlyOptions\\\" series=\\\"chartSeries\\\"></plotly-chart>\\n</div>\\n<div ng-if=\\\"plotlyOptions.globalSeriesType == 'custom'\\\">\\n  <custom-plotly-chart series=\\\"chartSeries\\\" options=\\\"plotlyOptions\\\"></custom-plotly-chart>\\n</div>\\n\"","module.exports = \"<div>\\n  <ul class=\\\"tab-nav\\\">\\n    <li ng-class=\\\"{active: currentTab == 'general'}\\\">\\n      <a ng-click=\\\"changeTab('general')\\\">General</a>\\n    </li>\\n    <li ng-class=\\\"{active: currentTab == 'xAxis'}\\\" ng-if=\\\"options.globalSeriesType != 'custom'\\\">\\n      <a ng-click=\\\"changeTab('xAxis')\\\">X Axis</a>\\n    </li>\\n    <li ng-class=\\\"{active: currentTab == 'yAxis'}\\\" ng-if=\\\"options.globalSeriesType != 'custom'\\\">\\n      <a ng-click=\\\"changeTab('yAxis')\\\">Y Axis</a>\\n    </li>\\n    <li ng-class=\\\"{active: currentTab == 'series'}\\\" ng-if=\\\"options.globalSeriesType != 'custom'\\\">\\n      <a ng-click=\\\"changeTab('series')\\\">Series</a>\\n    </li>\\n    <li ng-class=\\\"{active: currentTab == 'colors'}\\\" ng-if=\\\"options.globalSeriesType != 'custom'\\\">\\n      <a ng-click=\\\"changeTab('colors')\\\">Colors</a>\\n    </li>\\n    <li ng-class=\\\"{active: currentTab == 'dataLabels'}\\\" ng-if=\\\"options.globalSeriesType != 'custom'\\\">\\n      <a ng-click=\\\"changeTab('dataLabels')\\\">Data Labels</a>\\n    </li>\\n  </ul>\\n  <div ng-if=\\\"currentTab == 'general'\\\" class=\\\"m-t-10 m-b-10\\\">\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"control-label\\\">Chart Type</label>\\n      <div ng-if=\\\"chartTypes\\\">\\n        <!--the if is a weird workaround-->\\n        <ui-select ng-model=\\\"options.globalSeriesType\\\" on-select=\\\"chartTypeChanged()\\\">\\n          <ui-select-match placeholder=\\\"Choose chart type...\\\">\\n            <div>\\n              <i class=\\\"fa fa-{{$select.selected.value.icon}}\\\"></i>\\n              {{$select.selected.value.name}}\\n            </div>\\n          </ui-select-match>\\n          <ui-select-choices repeat=\\\"info.chartType as (chartType, info) in chartTypes\\\">\\n            <div>\\n              <i class=\\\"fa fa-{{info.value.icon}}\\\"></i>\\n              <span> </span>\\n              <span ng-bind-html=\\\"info.value.name | highlight: $select.search\\\"></span>\\n            </div>\\n          </ui-select-choices>\\n        </ui-select>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"form-group\\\" ng-class=\\\"{'has-error': chartEditor.xAxisColumn.$invalid}\\\">\\n      <label class=\\\"control-label\\\">X Column</label>\\n\\n      <ui-select name=\\\"xAxisColumn\\\" required ng-model=\\\"form.xAxisColumn\\\">\\n        <ui-select-match placeholder=\\\"Choose column...\\\">{{$select.selected}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"column in columnNames | remove:form.yAxisColumns | remove:form.groupby\\\">\\n          <span ng-bind-html=\\\"column | highlight: $select.search\\\"></span>\\n          <span> </span>\\n          <small class=\\\"text-muted\\\" ng-bind=\\\"columns[column].type\\\"></small>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n\\n    <!-- not using regular validation (chartEditor.yAxisColumns.$invalid) due to a bug in ui-select with multiple choices-->\\n    <div class=\\\"form-group\\\" ng-class=\\\"{'has-error': !form.yAxisColumns || form.yAxisColumns.length == 0}\\\">\\n      <label class=\\\"control-label\\\">Y Columns</label>\\n\\n      <ui-select multiple name=\\\"yAxisColumns\\\" required ng-model=\\\"form.yAxisColumns\\\">\\n        <ui-select-match placeholder=\\\"Choose columns...\\\">{{$item}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"column in columnNames | remove:form.groupby | remove:form.xAxisColumn\\\">\\n          <span ng-bind-html=\\\"column | highlight: $select.search\\\"></span>\\n          <span> </span>\\n          <small class=\\\"text-muted\\\" ng-bind=\\\"columns[column].type\\\"></small>\\n        </ui-select-choices>\\n      </ui-select>\\n\\n    </div>\\n\\n    <div class=\\\"form-group\\\" ng-if=\\\"['custom', 'heatmap'].indexOf(options.globalSeriesType) == -1\\\">\\n      <label class=\\\"control-label\\\">Group by</label>\\n      <ui-select name=\\\"groupby\\\" ng-model=\\\"form.groupby\\\" class=\\\"clearable\\\">\\n        <ui-select-match allow-clear=\\\"true\\\" placeholder=\\\"Choose column...\\\">\\n          {{$select.selected}}\\n        </ui-select-match>\\n        <ui-select-choices repeat=\\\"column in columnNames | remove:form.yAxisColumns | remove:form.xAxisColumn\\\">\\n          <span ng-bind-html=\\\"column | highlight: $select.search\\\"></span>\\n          <span> </span>\\n          <small class=\\\"text-muted\\\" ng-bind=\\\"columns[column].type\\\"></small>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n\\n    <div class=\\\"form-group\\\" ng-if=\\\"showSizeColumnPicker()\\\">\\n      <label class=\\\"control-label\\\">Bubble size column</label>\\n\\n      <ui-select name=\\\"sizeColumn\\\" ng-model=\\\"form.sizeColumn\\\">\\n        <ui-select-match allow-clear=\\\"true\\\" placeholder=\\\"Choose column...\\\">{{$select.selected}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"column in columnNames | remove:form.yAxisColumns | remove:form.groupby\\\">\\n          <span ng-bind-html=\\\"column | highlight: $select.search\\\"></span>\\n          <span> </span>\\n          <small class=\\\"text-muted\\\" ng-bind=\\\"columns[column].type\\\"></small>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n\\n    <div class=\\\"form-group\\\" ng-if=\\\"showZColumnPicker()\\\">\\n      <label class=\\\"control-label\\\">Color Column</label>\\n\\n      <ui-select name=\\\"zValColumn\\\" ng-model=\\\"form.zValColumn\\\">\\n        <ui-select-match allow-clear=\\\"true\\\" placeholder=\\\"Choose column...\\\">{{$select.selected}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"column in columnNames | remove:form.yAxisColumns | remove:form.groupby\\\">\\n          <span ng-bind-html=\\\"column | highlight: $select.search\\\"></span><span> </span>\\n          <small class=\\\"text-muted\\\" ng-bind=\\\"columns[column].type\\\"></small>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n\\n    <div class=\\\"form-group\\\" ng-if=\\\"['custom', 'heatmap'].indexOf(options.globalSeriesType) == -1\\\">\\n      <label class=\\\"control-label\\\">Errors column</label>\\n\\n      <ui-select name=\\\"errorColumn\\\" ng-model=\\\"form.errorColumn\\\">\\n        <ui-select-match allow-clear=\\\"true\\\" placeholder=\\\"Choose column...\\\">{{$select.selected}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"column in columnNames | remove:form.yAxisColumns | remove:form.groupby\\\">\\n          <span ng-bind-html=\\\"column | highlight: $select.search\\\"></span>\\n          <span> </span>\\n          <small class=\\\"text-muted\\\" ng-bind=\\\"columns[column].type\\\"></small>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n\\n    <div class=\\\"checkbox\\\" ng-if=\\\"['custom', 'heatmap'].indexOf(options.globalSeriesType) == -1\\\">\\n      <label>\\n        <input type=\\\"checkbox\\\" ng-model=\\\"options.legend.enabled\\\">\\n        <i class=\\\"input-helper\\\"></i> Show Legend\\n      </label>\\n    </div>\\n\\n    <div class=\\\"checkbox\\\" ng-if=\\\"options.globalSeriesType == 'box'\\\">\\n      <label>\\n        <input type=\\\"checkbox\\\" ng-model=\\\"options.showpoints\\\">\\n        <i class=\\\"input-helper\\\"></i> Show All Points\\n      </label>\\n    </div>\\n\\n    <div class=\\\"form-group\\\" ng-if=\\\"['custom', 'heatmap'].indexOf(options.globalSeriesType) == -1\\\">\\n      <label class=\\\"control-label\\\">Stacking</label>\\n\\n      <div ng-if=\\\"stackingOptions\\\">\\n        <!--the if is a weird workaround-->\\n        <ui-select ng-model=\\\"options.series.stacking\\\" ng-disabled=\\\"['line', 'area', 'column'].indexOf(options.globalSeriesType) == -1\\\">\\n          <ui-select-match placeholder=\\\"Choose stacking...\\\">{{ $select.selected.key }}</ui-select-match>\\n          <ui-select-choices repeat=\\\"value.value as (key, value) in stackingOptions\\\">\\n            <div ng-bind-html=\\\"value.key | highlight: $select.search\\\"></div>\\n          </ui-select-choices>\\n        </ui-select>\\n      </div>\\n\\n      <div ng-if=\\\"['line', 'area', 'column'].indexOf(options.globalSeriesType) >= 0\\\" class=\\\"checkbox\\\">\\n        <label class=\\\"control-label\\\">\\n          <input type=\\\"checkbox\\\" ng-model=\\\"options.series.percentValues\\\"> Normalize values to percentage\\n        </label>\\n      </div>\\n    </div>\\n  </div>\\n\\n  <div ng-if=\\\"options.globalSeriesType == 'custom'\\\">\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"control-label\\\">Custom code</label>\\n      <textarea ng-model=\\\"options.customCode\\\" class=\\\"form-control v-resizable\\\" rows=\\\"10\\\">\\n      </textarea>\\n    </div>\\n\\n    <div class=\\\"checkbox\\\">\\n      <label>\\n        <input type=\\\"checkbox\\\" ng-model=\\\"options.enableConsoleLogs\\\">\\n        <i class=\\\"input-helper\\\"></i> Show errors in the console\\n      </label>\\n    </div>\\n\\n    <div class=\\\"checkbox\\\">\\n      <label>\\n        <input type=\\\"checkbox\\\" ng-model=\\\"options.autoRedraw\\\">\\n        <i class=\\\"input-helper\\\"></i> Auto update graph\\n      </label>\\n    </div>\\n  </div>\\n\\n  <div ng-if=\\\"currentTab == 'xAxis'\\\" class=\\\"m-t-10 m-b-10\\\">\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"control-label\\\">Scale</label>\\n      <ui-select ng-model=\\\"options.xAxis.type\\\">\\n        <ui-select-match placeholder=\\\"Choose Scale...\\\">{{$select.selected.label}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"scaleType.value as scaleType in xAxisScales\\\">\\n          <div ng-bind-html=\\\"scaleType.label | highlight: $select.search\\\"></div>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"control-label\\\">Name</label>\\n      <input ng-model=\\\"options.xAxis.title.text\\\" type=\\\"text\\\" class=\\\"form-control\\\">\\n    </div>\\n\\n    <div class=\\\"checkbox\\\">\\n      <label>\\n        <input type=\\\"checkbox\\\" ng-model=\\\"options.sortX\\\">\\n        <i class=\\\"input-helper\\\"></i> Sort Values\\n      </label>\\n    </div>\\n\\n    <div class=\\\"checkbox\\\">\\n      <label>\\n        <input type=\\\"checkbox\\\" ng-model=\\\"options.reverseX\\\">\\n        <i class=\\\"input-helper\\\"></i> Reverse Order\\n      </label>\\n    </div>\\n\\n    <div class=\\\"checkbox\\\">\\n      <label>\\n        <input type=\\\"checkbox\\\" ng-model=\\\"options.xAxis.labels.enabled\\\">\\n        <i class=\\\"input-helper\\\"></i> Show Labels\\n      </label>\\n    </div>\\n  </div>\\n\\n  <div ng-if=\\\"currentTab == 'yAxis'\\\" class=\\\"m-t-10 m-b-10\\\">\\n    <div ng-repeat=\\\"yAxis in options.yAxis\\\">\\n      <h4>{{$index == 0 ? 'Left' : 'Right'}} Y Axis</h4>\\n\\n      <div class=\\\"form-group\\\">\\n        <label class=\\\"control-label\\\">Scale</label>\\n        <ui-select ng-model=\\\"yAxis.type\\\">\\n          <ui-select-match placeholder=\\\"Choose Scale...\\\">{{$select.selected | capitalize}}</ui-select-match>\\n          <ui-select-choices repeat=\\\"scaleType in yAxisScales\\\">\\n            <div ng-bind-html=\\\"scaleType | capitalize | highlight: $select.search\\\"></div>\\n          </ui-select-choices>\\n        </ui-select>\\n      </div>\\n      <div class=\\\"form-group\\\">\\n        <label class=\\\"control-label\\\">Name</label>\\n        <input ng-model=\\\"yAxis.title.text\\\" type=\\\"text\\\" class=\\\"form-control\\\">\\n      </div>\\n      <div class=\\\"form-group\\\">\\n        <label class=\\\"control-label\\\">Min Value</label>\\n        <input ng-model=\\\"yAxis.rangeMin\\\" type=\\\"number\\\" step=\\\"any\\\" placeholder=\\\"Auto\\\" class=\\\"form-control\\\">\\n      </div>\\n      <div class=\\\"form-group\\\">\\n        <label class=\\\"control-label\\\">Max Value</label>\\n        <input ng-model=\\\"yAxis.rangeMax\\\" type=\\\"number\\\" step=\\\"any\\\" placeholder=\\\"Auto\\\" class=\\\"form-control\\\">\\n      </div>\\n\\n      <div class=\\\"checkbox\\\" ng-if=\\\"options.globalSeriesType == 'heatmap'\\\">\\n        <label>\\n          <input type=\\\"checkbox\\\" ng-model=\\\"options.sortY\\\">\\n          <i class=\\\"input-helper\\\"></i> Sort Values\\n        </label>\\n      </div>\\n\\n      <div class=\\\"checkbox\\\">\\n        <label>\\n          <input type=\\\"checkbox\\\" ng-model=\\\"options.reverseY\\\">\\n          <i class=\\\"input-helper\\\"></i> Reverse Order\\n        </label>\\n      </div>\\n\\n    </div>\\n  </div>\\n\\n  <div ng-if=\\\"currentTab == 'series'\\\" class=\\\"m-t-10 m-b-10\\\">\\n    <table class=\\\"table table-condensed col-table\\\">\\n      <thead>\\n        <th style=\\\"width: 1%;\\\">zIndex</th>\\n        <th ng-if=\\\"options.globalSeriesType != 'pie'\\\">Left Y Axis</th>\\n        <th ng-if=\\\"options.globalSeriesType != 'pie'\\\">Right Y Axis</th>\\n        <th>Label</th>\\n        <th ng-if=\\\"options.globalSeriesType != 'pie'\\\">Type</th>\\n      </thead>\\n      <tbody ui-sortable ng-model=\\\"form.seriesList\\\">\\n        <tr ng-repeat=\\\"name in form.seriesList\\\">\\n          <td style=\\\"width: 1%; cursor: move;\\\">\\n            <i class=\\\"fa fa-arrows-v\\\"></i>\\n            <span ng-bind=\\\"options.seriesOptions[name].zIndex + 1\\\"></span>\\n          </td>\\n          <td ng-if=\\\"options.globalSeriesType != 'pie'\\\">\\n            <input type=\\\"radio\\\" ng-value=\\\"0\\\" ng-model=\\\"options.seriesOptions[name].yAxis\\\">\\n          </td>\\n          <td ng-if=\\\"options.globalSeriesType != 'pie'\\\">\\n            <input type=\\\"radio\\\" ng-value=\\\"1\\\" ng-model=\\\"options.seriesOptions[name].yAxis\\\">\\n          </td>\\n          <td style=\\\"padding: 3px; width: 140px;\\\">\\n            <input placeholder=\\\"{{name}}\\\" class=\\\"form-control input-sm super-small-input\\\" type=\\\"text\\\" ng-model=\\\"options.seriesOptions[name].name\\\">\\n          </td>\\n          <td ng-if=\\\"options.globalSeriesType != 'pie'\\\" style=\\\"padding: 3px; width: 105px;\\\">\\n            <ui-select ng-model=\\\"options.seriesOptions[name].type\\\">\\n              <ui-select-match placeholder=\\\"Chart Type\\\">\\n                <div>\\n                  <i class=\\\"fa fa-{{$select.selected.value.icon}}\\\"></i>\\n                  {{$select.selected.value.name}}\\n                </div>\\n              </ui-select-match>\\n              <ui-select-choices repeat=\\\"info.chartType as (chartType, info) in chartTypes\\\">\\n                <div>\\n                  <i class=\\\"fa fa-{{info.value.icon}}\\\"></i>\\n                  <span> </span>\\n                  <span ng-bind-html=\\\"info.value.name | highlight: $select.search\\\"></span>\\n                </div>\\n              </ui-select-choices>\\n            </ui-select>\\n          </td>\\n        </tr>\\n      </tbody>\\n    </table>\\n  </div>\\n\\n  <div ng-if=\\\"(currentTab == 'colors') && (['pie', 'heatmap'].indexOf(options.globalSeriesType) == -1)\\\" class=\\\"m-t-10 m-b-10\\\">\\n    <table class=\\\"table table-condensed col-table\\\">\\n      <tbody>\\n      <tr ng-repeat=\\\"name in form.seriesList\\\">\\n        <td style=\\\"padding: 3px; width: 140px;\\\">\\n          <div>{{ name }}</div>\\n        </td>\\n        <td style=\\\"padding: 3px; width: 35px;\\\">\\n          <ui-select ng-model=\\\"options.seriesOptions[name].color\\\">\\n            <ui-select-match>\\n              <color-box color=\\\"$select.selected.value\\\"></color-box>\\n            </ui-select-match>\\n            <ui-select-choices repeat=\\\"color.value as (key, color) in colors\\\">\\n              <color-box color=\\\"color.value\\\"></color-box>\\n              <span ng-bind-html=\\\"color.key | capitalize | highlight: $select.search\\\"></span>\\n            </ui-select-choices>\\n          </ui-select>\\n        </td>\\n      </tr>\\n      </tbody>\\n    </table>\\n  </div>\\n\\n  <div ng-if=\\\"(currentTab == 'colors') && (options.globalSeriesType == 'heatmap')\\\" class=\\\"m-t-10 m-b-10\\\">\\n    <div class=\\\"form-group\\\" ng-if=\\\"options.globalSeriesType == 'heatmap'\\\">\\n      <label class=\\\"control-label\\\">Color Scheme</label>\\n\\n      <ui-select ng-model=\\\"options.colorScheme\\\">\\n        <ui-select-match allow-clear=\\\"true\\\" placeholder=\\\"Choose Color Scheme...\\\">{{$select.selected | capitalize}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"value in colorScheme\\\">\\n          <div ng-bind-html=\\\"value | highlight: $select.search\\\"></div>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n\\n    <div class=\\\"row\\\">\\n      <div class=\\\"col-xs-6\\\">\\n        <div class=\\\"form-group\\\" ng-if=\\\"options.colorScheme == 'Custom...'\\\">\\n          <label class=\\\"control-label\\\">Min Color</label>\\n          <ui-select ng-model=\\\"options.heatMinColor\\\">\\n            <ui-select-match>\\n              <color-box color=\\\"$select.selected.value\\\"></color-box>\\n            </ui-select-match>\\n            <ui-select-choices repeat=\\\"color.value as (key, color) in colors\\\">\\n              <color-box color=\\\"color.value\\\"></color-box>\\n              <span ng-bind-html=\\\"color.key | capitalize | highlight: $select.search\\\"></span>\\n            </ui-select-choices>\\n          </ui-select>\\n        </div>\\n      </div>\\n      <div class=\\\"col-xs-6\\\">\\n        <div class=\\\"form-group\\\" ng-if=\\\"options.colorScheme == 'Custom...'\\\">\\n          <label class=\\\"control-label\\\">Max Color</label>\\n          <ui-select ng-model=\\\"options.heatMaxColor\\\">\\n            <ui-select-match>\\n              <color-box color=\\\"$select.selected.value\\\"></color-box>\\n            </ui-select-match>\\n            <ui-select-choices repeat=\\\"color.value as (key, color) in colors\\\">\\n              <color-box color=\\\"color.value\\\"></color-box>\\n              <span ng-bind-html=\\\"color.key | capitalize | highlight: $select.search\\\"></span>\\n            </ui-select-choices>\\n          </ui-select>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n\\n  <div ng-if=\\\"(currentTab == 'colors') && (options.globalSeriesType == 'pie')\\\" class=\\\"m-t-10 m-b-10\\\">\\n    <table class=\\\"table table-condensed col-table\\\">\\n      <tbody>\\n      <tr ng-repeat=\\\"name in form.valuesList\\\">\\n        <td style=\\\"padding: 3px; width: 140px;\\\">\\n          <div>{{ name }}</div>\\n        </td>\\n        <td style=\\\"padding: 3px; width: 35px;\\\">\\n          <ui-select ng-model=\\\"options.valuesOptions[name].color\\\">\\n            <ui-select-match>\\n              <color-box color=\\\"$select.selected.value\\\"></color-box>\\n            </ui-select-match>\\n            <ui-select-choices repeat=\\\"color.value as (key, color) in colors\\\">\\n              <color-box color=\\\"color.value\\\"></color-box>\\n              <span ng-bind-html=\\\"color.key | capitalize | highlight: $select.search\\\"></span>\\n            </ui-select-choices>\\n          </ui-select>\\n        </td>\\n      </tr>\\n      </tbody>\\n    </table>\\n  </div>\\n\\n  <div ng-if=\\\"currentTab == 'dataLabels'\\\" class=\\\"m-t-10 m-b-10\\\">\\n    <div ng-if=\\\"['line', 'area', 'column', 'scatter', 'pie', 'heatmap'].indexOf(options.globalSeriesType) >= 0\\\" class=\\\"checkbox\\\">\\n      <label>\\n        <input type=\\\"checkbox\\\" ng-model=\\\"options.showDataLabels\\\"> Show Data Labels</label>\\n    </div>\\n\\n    <div class=\\\"form-group\\\">\\n      <label for=\\\"chart-editor-number-format\\\">\\n        Number Values Format\\n        <span class=\\\"m-l-5\\\" uib-popover-html=\\\"'Format <a href=&quot;https://redash.io/help/user-guide/visualizations/formatting-numbers&quot; target=&quot;_blank&quot;>specs.</a>'\\\"\\n          popover-trigger=\\\"'click outsideClick'\\\">\\n          <i class=\\\"fa fa-question-circle\\\"></i>\\n        </span>\\n      </label>\\n      <input class=\\\"form-control\\\" ng-model=\\\"options.numberFormat\\\" ng-model-options=\\\"{ allowInvalid: true, debounce: 200 }\\\" id=\\\"chart-editor-number-format\\\">\\n    </div>\\n\\n    <div class=\\\"form-group\\\">\\n      <label for=\\\"chart-editor-percent-format\\\">\\n        Percent Values Format\\n        <span class=\\\"m-l-5\\\" uib-popover-html=\\\"'Format <a href=&quot;https://redash.io/help/user-guide/visualizations/formatting-numbers&quot; target=&quot;_blank&quot;>specs.</a>'\\\"\\n          popover-trigger=\\\"'click outsideClick'\\\">\\n          <i class=\\\"fa fa-question-circle\\\"></i>\\n        </span>\\n      </label>\\n      <input class=\\\"form-control\\\" ng-model=\\\"options.percentFormat\\\" ng-model-options=\\\"{ allowInvalid: true, debounce: 200 }\\\" id=\\\"chart-editor-percent-format\\\">\\n    </div>\\n\\n    <div class=\\\"form-group\\\">\\n      <label for=\\\"chart-editor-datetime-format\\\">\\n        Date/Time Values Format\\n        <span class=\\\"m-l-5\\\" uib-popover-html=\\\"'Format <a href=&quot;https://momentjs.com/docs/#/displaying/format/&quot; target=&quot;_blank&quot;>specs.</a>'\\\"\\n          popover-trigger=\\\"'click outsideClick'\\\">\\n          <i class=\\\"fa fa-question-circle\\\"></i>\\n        </span>\\n      </label>\\n      <input class=\\\"form-control\\\" ng-model=\\\"options.dateTimeFormat\\\" ng-model-options=\\\"{ allowInvalid: true, debounce: 200 }\\\" id=\\\"chart-editor-datetime-format\\\">\\n    </div>\\n\\n    <div class=\\\"form-group\\\">\\n      <label for=\\\"chart-editor-text\\\">\\n        Data Labels\\n        <i class=\\\"fa fa-question-circle m-l-5\\\" uib-popover-html=\\\"templateHint\\\" popover-trigger=\\\"'click outsideClick'\\\" popover-placement=\\\"top-left\\\"></i>\\n      </label>\\n      <input class=\\\"form-control\\\" ng-model=\\\"options.textFormat\\\" ng-model-options=\\\"{ allowInvalid: true, debounce: 200 }\\\" id=\\\"chart-editor-text\\\"\\n        placeholder=\\\"(auto)\\\">\\n    </div>\\n  </div>\\n</div>\\n\"","module.exports = \"<div class=\\\"map-visualization-container\\\">\\n  <div resize-event=\\\"handleResize()\\\" ng-style=\\\"{ background: options.colors.background }\\\"></div>\\n  <div ng-if=\\\"options.legend.visible && (legendItems.length > 0)\\\"\\n    class=\\\"leaflet-bar map-custom-control\\\" ng-class=\\\"options.legend.position\\\"\\n  >\\n    <div ng-repeat=\\\"item in legendItems\\\" class=\\\"d-flex align-items-center\\\">\\n      <color-box color=\\\"item.color\\\" class=\\\"m-0\\\" style=\\\"line-height: 1px\\\"></color-box>\\n      <div class=\\\"flex-fill text-{{ options.legend.alignText }}\\\">{{ formatValue(item.limit) }}</div>\\n    </div>\\n  </div>\\n</div>\\n\"","module.exports = \"<div>\\n  <ul class=\\\"tab-nav\\\">\\n    <li ng-class=\\\"{active: currentTab == 'general'}\\\">\\n      <a ng-click=\\\"changeTab('general')\\\">General</a>\\n    </li>\\n    <li ng-class=\\\"{active: currentTab == 'colors'}\\\">\\n      <a ng-click=\\\"changeTab('colors')\\\">Colors</a>\\n    </li>\\n    <li ng-class=\\\"{active: currentTab == 'bounds'}\\\">\\n      <a ng-click=\\\"changeTab('bounds')\\\">Bounds</a>\\n    </li>\\n  </ul>\\n  <div ng-if=\\\"currentTab == 'general'\\\" class=\\\"m-t-10 m-b-10\\\">\\n    <div class=\\\"row\\\">\\n      <div class=\\\"col-xs-6\\\">\\n        <div class=\\\"form-group\\\">\\n          <label>Country code column</label>\\n          <select ng-options=\\\"name for name in queryResult.getColumnNames()\\\"\\n            ng-model=\\\"options.countryCodeColumn\\\" class=\\\"form-control\\\"></select>\\n        </div>\\n      </div>\\n      <div class=\\\"col-xs-6\\\">\\n        <div class=\\\"form-group\\\">\\n          <label>Country code type</label>\\n          <select ng-options=\\\"key as value for (key, value) in countryCodeTypes\\\"\\n            ng-model=\\\"options.countryCodeType\\\" class=\\\"form-control\\\"></select>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"row\\\">\\n      <div class=\\\"col-xs-6\\\">\\n        <div class=\\\"form-group\\\">\\n          <label>Value column</label>\\n          <select ng-options=\\\"name for name in queryResult.getColumnNames()\\\"\\n            ng-model=\\\"options.valueColumn\\\" class=\\\"form-control\\\"></select>\\n        </div>\\n      </div>\\n\\n      <div class=\\\"col-xs-6\\\">\\n        <div class=\\\"form-group\\\">\\n          <label for=\\\"legend-value-format\\\">\\n            Value format\\n            <span class=\\\"m-l-5\\\"\\n              uib-popover-html=\\\"'Format <a href=&quot;https://redash.io/help/user-guide/visualizations/formatting-numbers&quot; target=&quot;_blank&quot;>specs.</a>'\\\"\\n              popover-trigger=\\\"'click outsideClick'\\\"><i class=\\\"fa fa-question-circle\\\"></i></span>\\n          </label>\\n          <input class=\\\"form-control\\\" id=\\\"legend-value-format\\\"\\n            ng-model=\\\"options.valueFormat\\\" ng-model-options=\\\"{ allowInvalid: true, debounce: 200 }\\\">\\n        </div>\\n      </div>\\n\\n      <div class=\\\"col-xs-6\\\">\\n        <div class=\\\"form-group\\\">\\n          <label for=\\\"legend-value-placeholder\\\">Value placeholder</label>\\n          <input class=\\\"form-control\\\" id=\\\"legend-value-placeholder\\\"\\n            ng-model=\\\"options.noValuePlaceholder\\\" ng-model-options=\\\"{ allowInvalid: true, debounce: 200 }\\\">\\n        </div>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"form-group\\\">\\n      <label><input type=\\\"checkbox\\\" ng-model=\\\"options.legend.visible\\\"> Show legend</label>\\n    </div>\\n    <div class=\\\"row\\\">\\n      <div class=\\\"col-xs-6\\\">\\n        <div class=\\\"form-group\\\">\\n          <label for=\\\"legend-position\\\">Legend position</label>\\n          <select class=\\\"form-control\\\" id=\\\"legend-position\\\"\\n            ng-options=\\\"key as value for (key, value) in legendPositions\\\"\\n            ng-model=\\\"options.legend.position\\\"\\n            ng-disabled=\\\"!options.legend.visible\\\"\\n          ></select>\\n        </div>\\n      </div>\\n      <div class=\\\"col-xs-6\\\">\\n        <div class=\\\"form-group\\\">\\n          <label for=\\\"legend-position\\\">Legend text alignment</label>\\n          <div class=\\\"btn-group d-flex\\\">\\n            <button type=\\\"button\\\" class=\\\"btn btn-default btn-md flex-fill\\\"\\n              ng-click=\\\"options.legend.alignText = 'left'\\\"\\n              ng-class=\\\"{active: options.legend.alignText == 'left'}\\\"><i class=\\\"fa fa-align-left\\\"></i></button>\\n            <button type=\\\"button\\\" class=\\\"btn btn-default btn-md flex-fill\\\"\\n              ng-click=\\\"options.legend.alignText = 'center'\\\"\\n              ng-class=\\\"{active: options.legend.alignText == 'center'}\\\"><i class=\\\"fa fa-align-center\\\"></i></button>\\n            <button type=\\\"button\\\" class=\\\"btn btn-default btn-md flex-fill\\\"\\n              ng-click=\\\"options.legend.alignText = 'right'\\\"\\n              ng-class=\\\"{active: options.legend.alignText == 'right'}\\\"><i class=\\\"fa fa-align-right\\\"></i></button>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <label><input type=\\\"checkbox\\\" ng-model=\\\"options.tooltip.enabled\\\"> Show tooltip</label>\\n    <div class=\\\"form-group\\\">\\n      <label for=\\\"tooltip-template\\\">Tooltip template</label>\\n      <input class=\\\"form-control\\\" id=\\\"tooltip-template\\\"\\n        ng-model=\\\"options.tooltip.template\\\" ng-model-options=\\\"{ allowInvalid: true, debounce: 200 }\\\"\\n        ng-disabled=\\\"!options.tooltip.enabled\\\">\\n    </div>\\n\\n    <label><input type=\\\"checkbox\\\" ng-model=\\\"options.popup.enabled\\\"> Show popup</label>\\n    <div class=\\\"form-group\\\">\\n      <label for=\\\"popup-template\\\">Popup template</label>\\n      <textarea class=\\\"form-control resize-vertical\\\" id=\\\"popup-template\\\" rows=\\\"3\\\"\\n        ng-model=\\\"options.popup.template\\\" ng-model-options=\\\"{ allowInvalid: true, debounce: 200 }\\\"\\n        ng-disabled=\\\"!options.popup.enabled\\\"></textarea>\\n    </div>\\n\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"ui-sortable-bypass text-muted\\\" style=\\\"font-weight: normal; cursor: pointer;\\\"\\n        uib-popover-html=\\\"templateHint\\\"\\n        popover-trigger=\\\"'click outsideClick'\\\" popover-placement=\\\"top-left\\\">\\n        Format specs <i class=\\\"fa fa-question-circle m-l-5\\\"></i>\\n      </label>\\n    </div>\\n  </div>\\n\\n  <div ng-if=\\\"currentTab == 'colors'\\\" class=\\\"m-t-10 m-b-10\\\">\\n    <div class=\\\"row\\\">\\n      <div class=\\\"col-xs-6\\\">\\n        <div class=\\\"form-group\\\">\\n          <label>Steps</label>\\n          <input type=\\\"number\\\" min=\\\"3\\\" max=\\\"11\\\" class=\\\"form-control\\\"\\n            ng-model=\\\"options.steps\\\">\\n        </div>\\n      </div>\\n      <div class=\\\"col-xs-6\\\">\\n        <div class=\\\"form-group\\\">\\n          <label>Clustering mode</label>\\n          <select ng-options=\\\"key as value for (key, value) in clusteringModes\\\"\\n            ng-model=\\\"options.clusteringMode\\\" class=\\\"form-control\\\"></select>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"row\\\">\\n      <div class=\\\"col-xs-6\\\">\\n        <div class=\\\"form-group\\\">\\n          <label>Min color</label>\\n          <ui-select ng-model=\\\"options.colors.min\\\">\\n            <ui-select-match>\\n              <color-box color=\\\"$select.selected.value\\\"></color-box>\\n              <span ng-bind-html=\\\"$select.selected.key | capitalize\\\"></span>\\n            </ui-select-match>\\n            <ui-select-choices repeat=\\\"color.value as (key, color) in colors\\\">\\n              <color-box color=\\\"color.value\\\"></color-box>\\n              <span ng-bind-html=\\\"color.key | capitalize | highlight: $select.search\\\"></span>\\n            </ui-select-choices>\\n          </ui-select>\\n        </div>\\n      </div>\\n\\n      <div class=\\\"col-xs-6\\\">\\n        <div class=\\\"form-group\\\">\\n          <label>Max color</label>\\n          <ui-select ng-model=\\\"options.colors.max\\\">\\n            <ui-select-match>\\n              <color-box color=\\\"$select.selected.value\\\"></color-box>\\n              <span ng-bind-html=\\\"$select.selected.key | capitalize\\\"></span>\\n            </ui-select-match>\\n            <ui-select-choices repeat=\\\"color.value as (key, color) in colors\\\">\\n              <color-box color=\\\"color.value\\\"></color-box>\\n              <span ng-bind-html=\\\"color.key | capitalize | highlight: $select.search\\\"></span>\\n            </ui-select-choices>\\n          </ui-select>\\n        </div>\\n      </div>\\n\\n      <div class=\\\"col-xs-6\\\">\\n        <div class=\\\"form-group\\\">\\n          <label>No value color</label>\\n          <ui-select ng-model=\\\"options.colors.noValue\\\">\\n            <ui-select-match>\\n              <color-box color=\\\"$select.selected.value\\\"></color-box>\\n              <span ng-bind-html=\\\"$select.selected.key | capitalize\\\"></span>\\n            </ui-select-match>\\n            <ui-select-choices repeat=\\\"color.value as (key, color) in colors\\\">\\n              <color-box color=\\\"color.value\\\"></color-box>\\n              <span ng-bind-html=\\\"color.key | capitalize | highlight: $select.search\\\"></span>\\n            </ui-select-choices>\\n          </ui-select>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"row\\\">\\n      <div class=\\\"col-xs-6\\\">\\n        <div class=\\\"form-group\\\">\\n          <label>Background color</label>\\n          <ui-select ng-model=\\\"options.colors.background\\\">\\n            <ui-select-match>\\n              <color-box color=\\\"$select.selected.value\\\"></color-box>\\n              <span ng-bind-html=\\\"$select.selected.key | capitalize\\\"></span>\\n            </ui-select-match>\\n            <ui-select-choices repeat=\\\"color.value as (key, color) in colors\\\">\\n              <color-box color=\\\"color.value\\\"></color-box>\\n              <span ng-bind-html=\\\"color.key | capitalize | highlight: $select.search\\\"></span>\\n            </ui-select-choices>\\n          </ui-select>\\n        </div>\\n      </div>\\n\\n      <div class=\\\"col-xs-6\\\">\\n        <div class=\\\"form-group\\\">\\n          <label>Borders color</label>\\n          <ui-select ng-model=\\\"options.colors.borders\\\">\\n            <ui-select-match>\\n              <color-box color=\\\"$select.selected.value\\\"></color-box>\\n              <span ng-bind-html=\\\"$select.selected.key | capitalize\\\"></span>\\n            </ui-select-match>\\n            <ui-select-choices repeat=\\\"color.value as (key, color) in colors\\\">\\n              <color-box color=\\\"color.value\\\"></color-box>\\n              <span ng-bind-html=\\\"color.key | capitalize | highlight: $select.search\\\"></span>\\n            </ui-select-choices>\\n          </ui-select>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n\\n  <div ng-if=\\\"currentTab == 'bounds'\\\" class=\\\"m-t-10 m-b-10\\\">\\n    <div class=\\\"form-group\\\">\\n      <label>North-East latitude and longitude</label>\\n      <div class=\\\"row\\\">\\n        <div class=\\\"col-xs-6\\\">\\n          <input class=\\\"form-control\\\" type=\\\"text\\\"\\n            ng-model=\\\"options.bounds[1][0]\\\" ng-model-options=\\\"{ allowInvalid: true, debounce: 200 }\\\">\\n        </div>\\n        <div class=\\\"col-xs-6\\\">\\n          <input class=\\\"form-control\\\" type=\\\"text\\\"\\n            ng-model=\\\"options.bounds[1][1]\\\" ng-model-options=\\\"{ allowInvalid: true, debounce: 200 }\\\">\\n        </div>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"form-group\\\">\\n      <label>South-West latitude and longitude</label>\\n      <div class=\\\"row\\\">\\n        <div class=\\\"col-xs-6\\\">\\n          <input class=\\\"form-control\\\" type=\\\"text\\\"\\n            ng-model=\\\"options.bounds[0][0]\\\" ng-model-options=\\\"{ allowInvalid: true, debounce: 200 }\\\">\\n        </div>\\n        <div class=\\\"col-xs-6\\\">\\n          <input class=\\\"form-control\\\" type=\\\"text\\\"\\n            ng-model=\\\"options.bounds[0][1]\\\" ng-model-options=\\\"{ allowInvalid: true, debounce: 200 }\\\">\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"","module.exports = __webpack_public_path__ + \"data/0962607.countries.geo.json\";","module.exports = \"<ul class=\\\"tab-nav\\\">\\n  <li ng-class=\\\"{active: currentTab == 'columns'}\\\">\\n    <a ng-click=\\\"setCurrentTab('columns')\\\">Columns</a>\\n  </li>\\n  <li ng-class=\\\"{active: currentTab == 'options'}\\\">\\n    <a ng-click=\\\"setCurrentTab('options')\\\">Options</a>\\n  </li>\\n</ul>\\n\\n<div ng-if=\\\"currentTab == 'options'\\\" class=\\\"m-t-10 m-b-10\\\">\\n  <div class=\\\"form-group\\\">\\n    <label class=\\\"control-label\\\">Time Interval</label>\\n    <select class=\\\"form-control\\\" ng-model=\\\"visualization.options.timeInterval\\\">\\n      <option value=\\\"daily\\\">Daily</option>\\n      <option value=\\\"weekly\\\">Weekly</option>\\n      <option value=\\\"monthly\\\">Monthly</option>\\n    </select>\\n  </div>\\n\\n  <div class=\\\"form-group\\\">\\n    <label class=\\\"control-label\\\">Mode</label>\\n    <select class=\\\"form-control\\\" ng-model=\\\"visualization.options.mode\\\">\\n      <option value=\\\"diagonal\\\">Fill gaps with zeros</option>\\n      <option value=\\\"simple\\\">Show data as is</option>\\n    </select>\\n  </div>\\n</div>\\n\\n<div ng-if=\\\"currentTab == 'columns'\\\" class=\\\"m-t-10 m-b-10\\\">\\n  <div class=\\\"form-group\\\">\\n    <label class=\\\"control-label\\\">Date (Bucket)</label>\\n    <select class=\\\"form-control\\\" ng-model=\\\"visualization.options.dateColumn\\\"\\n      ng-options=\\\"column for column in columnNames\\\"></select>\\n  </div>\\n\\n  <div class=\\\"form-group\\\">\\n    <label class=\\\"control-label\\\">Stage</label>\\n    <select class=\\\"form-control\\\" ng-model=\\\"visualization.options.stageColumn\\\"\\n      ng-options=\\\"column for column in columnNames\\\"></select>\\n  </div>\\n\\n  <div class=\\\"form-group\\\">\\n    <label class=\\\"control-label\\\">Bucket Population Size</label>\\n    <select class=\\\"form-control\\\" ng-model=\\\"visualization.options.totalColumn\\\"\\n      ng-options=\\\"column for column in columnNames\\\"></select>\\n  </div>\\n\\n  <div class=\\\"form-group\\\">\\n    <label class=\\\"control-label\\\">Stage Value</label>\\n    <select class=\\\"form-control\\\" ng-model=\\\"visualization.options.valueColumn\\\"\\n      ng-options=\\\"column for column in columnNames\\\"></select>\\n  </div>\\n</div>\\n\"","module.exports = \"<counter\\n  ng-class=\\\"{'positive': targetValue && trendPositive, 'negative': targetValue && !trendPositive}\\\"\\n  resize-event=\\\"handleResize()\\\"\\n>\\n  <div ng-style=\\\"{\\n    '-o-transform': 'scale(' + scale + ')',\\n    '-ms-transform': 'scale(' + scale + ')',\\n    '-moz-transform': 'scale(' + scale + ')',\\n    '-webkit-transform': 'scale(' + scale + ')',\\n    'transform': 'scale(' + scale + ')'\\n  }\\\">\\n    <value ng-if=\\\"isNumber\\\">{{stringPrefix}}{{counterValue | number}}{{stringSuffix}}</value>\\n    <value ng-if=\\\"!isNumber\\\">{{stringPrefix}}{{counterValue}}{{stringSuffix}}</value>\\n    <counter-target ng-if=\\\"targetValue\\\" title=\\\"({{targetValue | number}})\\\">({{targetValue | number}})</counter-target>\\n    <counter-name>{{counterLabel}}</counter-name>\\n  </div>\\n</counter>\\n\"","module.exports = \"<div class=\\\"form-horizontal\\\">\\n  <ul class=\\\"tab-nav\\\">\\n    <li ng-class=\\\"{active: currentTab == 'general'}\\\">\\n      <a ng-click=\\\"changeTab('general')\\\">General</a>\\n    </li>\\n    <li ng-class=\\\"{active: currentTab == 'format'}\\\">\\n      <a ng-click=\\\"changeTab('format')\\\">Format</a>\\n    </li>\\n  </ul>\\n  <div ng-show=\\\"currentTab == 'general'\\\" class=\\\"m-t-10 m-b-10\\\">\\n      <div class=\\\"form-group\\\">\\n          <label class=\\\"col-lg-6\\\">Counter Label</label>\\n          <div class=\\\"col-lg-6\\\">\\n            <input type=\\\"text\\\" ng-model=\\\"visualization.options.counterLabel\\\" placeholder=\\\"{{visualization.name}}\\\" class=\\\"form-control\\\" ng-trim=\\\"false\\\">\\n          </div>\\n        </div>\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"col-lg-6\\\">Counter Value Column Name</label>\\n      <div class=\\\"col-lg-6\\\">\\n        <select ng-options=\\\"name for name in queryResult.getColumnNames()\\\" ng-model=\\\"visualization.options.counterColName\\\" class=\\\"form-control\\\" ng-disabled=\\\"visualization.options.countRow\\\"></select>\\n      </div>\\n    </div>\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"col-lg-6\\\">Counter Value Row Number</label>\\n      <div class=\\\"col-lg-6\\\">\\n        <input type=\\\"number\\\" ng-model=\\\"visualization.options.rowNumber\\\" class=\\\"form-control\\\" ng-disabled=\\\"visualization.options.countRow\\\">\\n      </div>\\n    </div>\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"col-lg-6\\\">Target Value Column Name</label>\\n      <div class=\\\"col-lg-6\\\">\\n        <select ng-options=\\\"name for name in queryResult.getColumnNames()\\\" ng-model=\\\"visualization.options.targetColName\\\" class=\\\"form-control\\\">\\n          <option value=\\\"\\\">No target value</option>\\n        </select>\\n      </div>\\n    </div>\\n    <div class=\\\"form-group\\\" ng-if=\\\"visualization.options.targetColName\\\">\\n      <label class=\\\"col-lg-6\\\">Target Value Row Number</label>\\n      <div class=\\\"col-lg-6\\\">\\n        <input type=\\\"number\\\" ng-model=\\\"visualization.options.targetRowNumber\\\" class=\\\"form-control\\\">\\n      </div>\\n    </div>\\n    <div class=\\\"form-group\\\">\\n      <div class=\\\"col-lg-6\\\">\\n        <label>\\n          <input type=\\\"checkbox\\\" ng-model=\\\"visualization.options.countRow\\\">\\n          Count Rows\\n        </label>\\n      </div>\\n    </div>\\n  </div>\\n\\n  <div ng-show=\\\"currentTab == 'format'\\\" class=\\\"m-t-10 m-b-10\\\">\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"col-lg-6\\\">Formatting Decimal Place</label>\\n      <div class=\\\"col-lg-6\\\">\\n        <input type=\\\"number\\\" ng-model=\\\"visualization.options.stringDecimal\\\" class=\\\"form-control\\\" ng-disabled=\\\"!isValueNumber()\\\">\\n      </div>\\n    </div>\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"col-lg-6\\\">Formatting Decimal Character</label>\\n      <div class=\\\"col-lg-6\\\">\\n        <input type=\\\"text\\\" ng-model=\\\"visualization.options.stringDecChar\\\" class=\\\"form-control\\\" ng-disabled=\\\"!isValueNumber()\\\">\\n      </div>\\n    </div>\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"col-lg-6\\\">Formatting Thousands Separator</label>\\n      <div class=\\\"col-lg-6\\\">\\n        <input type=\\\"text\\\" ng-model=\\\"visualization.options.stringThouSep\\\" class=\\\"form-control\\\" ng-disabled=\\\"!isValueNumber()\\\" ng-trim=\\\"false\\\">\\n      </div>\\n    </div>\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"col-lg-6\\\">Formatting String Prefix</label>\\n      <div class=\\\"col-lg-6\\\">\\n        <input type=\\\"text\\\" ng-model=\\\"visualization.options.stringPrefix\\\" class=\\\"form-control\\\" ng-disabled=\\\"!isValueNumber()\\\" ng-trim=\\\"false\\\">\\n      </div>\\n    </div>\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"col-lg-6\\\">Formatting String Suffix</label>\\n      <div class=\\\"col-lg-6\\\">\\n        <input type=\\\"text\\\" ng-model=\\\"visualization.options.stringSuffix\\\" class=\\\"form-control\\\" ng-disabled=\\\"!isValueNumber()\\\" ng-trim=\\\"false\\\">\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"","module.exports = \"<div class=\\\"visualization-editor\\\">\\n  <div class=\\\"modal-header\\\">\\n    <button type=\\\"button\\\" class=\\\"close\\\" aria-label=\\\"Close\\\" ng-click=\\\"$ctrl.closeDialog()\\\"><span aria-hidden=\\\"true\\\">&times;</span>\\n    </button>\\n    <h4 class=\\\"modal-title\\\">Visualization Editor</h4>\\n  </div>\\n  <div class=\\\"modal-body\\\">\\n    <div class=\\\"row\\\">\\n      <div class=\\\"col-md-5 p-r-10 p-l-0\\\">\\n        <div>\\n          <form name=\\\"$ctrl.visForm\\\">\\n            <div class=\\\"form-group\\\">\\n              <label class=\\\"control-label\\\">Visualization Type</label>\\n\\n              <select required ng-model=\\\"$ctrl.visualization.type\\\"\\n                ng-disabled=\\\"!$ctrl.canChangeType\\\"\\n                ng-options=\\\"type.type as type.name for type in $ctrl.visTypes\\\" class=\\\"form-control\\\"\\n                ng-change=\\\"$ctrl.typeChanged('{{$ctrl.visualization.type}}')\\\"></select>\\n            </div>\\n\\n            <div class=\\\"form-group\\\">\\n              <label class=\\\"control-label\\\">Visualization Name</label>\\n              <input name=\\\"name\\\" type=\\\"text\\\" class=\\\"form-control\\\" ng-model=\\\"$ctrl.visualization.name\\\"\\n                     placeholder=\\\"{{$ctrl.visualization.type | capitalize}}\\\">\\n            </div>\\n\\n            <visualization-options-editor visualization=\\\"$ctrl.visualization\\\"\\n                                          query-result=\\\"$ctrl.queryResult\\\"\\n                                          query=\\\"$ctrl.query\\\">\\n            </visualization-options-editor>\\n          </form>\\n        </div>\\n      </div>\\n      <div class=\\\"col-md-7 p-0 visualization-editor__right\\\">\\n        <visualization-renderer visualization=\\\"$ctrl.visualization\\\" query-result=\\\"$ctrl.queryResult\\\"></visualization-renderer>\\n      </div>\\n    </div>\\n  </div>\\n  <div class=\\\"modal-footer\\\">\\n    <button type=\\\"button\\\" class=\\\"btn btn-default\\\" ng-click=\\\"$ctrl.closeDialog()\\\">Cancel</button>\\n    <button type=\\\"button\\\" class=\\\"btn btn-primary\\\" ng-click=\\\"$ctrl.submit()\\\">Save</button>\\n  </div>\\n</div>\\n\"","module.exports = \"<div class=\\\"form-horizontal\\\">\\n  <div style=\\\"margin-bottom: 20px;\\\">\\n    This visualization constructs funnel chart. Please notice that value column only accept number for values.\\n  </div>\\n  <div class=\\\"form-group\\\">\\n    <label class=\\\"col-lg-6\\\">Step Column Name</label>\\n    <div class=\\\"col-lg-6\\\">\\n      <select ng-options=\\\"name for name in queryResult.getColumnNames()\\\" ng-model=\\\"visualization.options.stepCol.colName\\\" class=\\\"form-control\\\"></select>\\n    </div>\\n  </div>\\n  <div class=\\\"form-group\\\">\\n    <label class=\\\"col-lg-6\\\">Step Column Display Name</label>\\n    <div class=\\\"col-lg-6\\\">\\n      <input type=\\\"text\\\" ng-model=\\\"visualization.options.stepCol.displayAs\\\" class=\\\"form-control\\\">\\n    </div>\\n  </div>\\n  <div class=\\\"form-group\\\">\\n    <label class=\\\"col-lg-6\\\">Funnel Value Column Name</label>\\n    <div class=\\\"col-lg-6\\\">\\n      <select ng-options=\\\"name for name in queryResult.getColumnNames()\\\" ng-model=\\\"visualization.options.valueCol.colName\\\" class=\\\"form-control\\\"></select>\\n    </div>\\n  </div>\\n  <div class=\\\"form-group\\\">\\n    <label class=\\\"col-lg-6\\\">Funnel Value Column Display Name</label>\\n    <div class=\\\"col-lg-6\\\">\\n      <input type=\\\"text\\\" ng-model=\\\"visualization.options.valueCol.displayAs\\\" class=\\\"form-control\\\">\\n    </div>\\n  </div>\\n  <div class=\\\"form-group\\\">\\n    <label class=\\\"col-lg-6\\\">Auto Sort Record By Value</label>\\n    <div class=\\\"col-lg-6\\\">\\n      <input type=\\\"checkbox\\\" ng-model=\\\"visualization.options.autoSort\\\">\\n    </div>\\n  </div>\\n  <div ng-show=\\\"!visualization.options.autoSort\\\">\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"col-lg-6\\\">Funnel Value Columns Name</label>\\n      <div class=\\\"col-lg-6\\\">\\n        <select ng-options=\\\"name for name in queryResult.getColumnNames()\\\" ng-model=\\\"visualization.options.sortKeyCol.colName\\\" class=\\\"form-control\\\"></select>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"","module.exports = \"<div class=\\\"map-visualization-container\\\">\\n  <div resize-event=\\\"handleResize()\\\"></div>\\n</div>\\n\"","module.exports = \"<div>\\n  <ul class=\\\"tab-nav\\\">\\n    <li ng-class=\\\"{active: currentTab == 'general'}\\\"><a ng-click=\\\"currentTab='general'\\\">General</a></li>\\n    <li ng-class=\\\"{active: currentTab == 'groups'}\\\"><a ng-click=\\\"currentTab='groups'\\\">Groups</a></li>\\n    <li ng-class=\\\"{active: currentTab == 'map'}\\\"><a ng-click=\\\"currentTab='map'\\\">Map Settings</a></li>\\n  </ul>\\n\\n  <div ng-show=\\\"currentTab == 'general'\\\" class=\\\"m-t-10 m-b-10\\\">\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"control-label\\\">Latitude Column Name</label>\\n      <ui-select name=\\\"form-control\\\" required ng-model=\\\"visualization.options.latColName\\\">\\n        <ui-select-match placeholder=\\\"Choose column...\\\">{{$select.selected}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"column in columnNames | remove:visualization.options.classify | remove:visualization.options.lonColName\\\">\\n          <span ng-bind-html=\\\"column | highlight: $select.search\\\"></span><span> </span>\\n          <small class=\\\"text-muted\\\" ng-bind=\\\"columns[column].type\\\"></small>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"control-label\\\">Longitude Column Name</label>\\n      <ui-select name=\\\"form-control\\\" required ng-model=\\\"visualization.options.lonColName\\\">\\n        <ui-select-match placeholder=\\\"Choose column...\\\">{{$select.selected}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"column in columnNames | remove:visualization.options.classify | remove:visualization.options.latColName\\\">\\n          <span ng-bind-html=\\\"column | highlight: $select.search\\\"></span><span> </span>\\n          <small class=\\\"text-muted\\\" ng-bind=\\\"columns[column].type\\\"></small>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"control-label\\\">Group By</label>\\n      <ui-select name=\\\"form-control\\\" required ng-model=\\\"visualization.options.classify\\\">\\n        <ui-select-match placeholder=\\\"Choose column...\\\">{{$select.selected}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"column in classify_columns | remove:visualization.options.lonColName | remove:visualization.options.latColName\\\">\\n          <span ng-bind-html=\\\"column | highlight: $select.search\\\"></span><span> </span>\\n          <small class=\\\"text-muted\\\" ng-bind=\\\"columns[column].type\\\"></small>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n  </div>\\n\\n  <div ng-show=\\\"currentTab == 'groups'\\\" class=\\\"m-b-10\\\">\\n    <table class=\\\"table table-condensed col-table\\\">\\n      <thead>\\n      <th>Name</th>\\n      <th>Color</th>\\n      </thead>\\n      <tbody>\\n      <tr ng-repeat=\\\"(name, options) in visualization.options.groups\\\">\\n        <td>{{name}}</td>\\n        <td>\\n          <input class=\\\"form-control\\\" type=\\\"color\\\" ng-model=\\\"options.color\\\"/>\\n        </td>\\n      </tr>\\n      </tbody>\\n    </table>\\n  </div>\\n\\n  <div ng-show=\\\"currentTab == 'map'\\\" class=\\\"m-t-10 m-b-10\\\">\\n    <div class=\\\"checkbox\\\">\\n      <label>\\n        <input type=\\\"checkbox\\\" ng-model=\\\"visualization.options.clusterMarkers\\\">\\n        <i class=\\\"input-helper\\\"></i> Cluster Markers\\n      </label>\\n    </div>\\n\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"control-label\\\">Map Tiles</label>\\n      <select ng-options=\\\"tile.url as tile.name for tile in mapTiles\\\"\\n        ng-model=\\\"visualization.options.mapTileUrl\\\" class=\\\"form-control\\\"></select>\\n    </div>\\n  </div>\\n\\n</div>\\n\"","module.exports = \"<div class=\\\"form-horizontal\\\">\\n  <div class=\\\"form-group\\\">\\n    <div class=\\\"col-lg-6\\\">\\n      <label>\\n        <input type=\\\"checkbox\\\" ng-model=\\\"visualization.options.controls.enabled\\\">\\n        Hide Pivot Controls\\n      </label>\\n    </div>\\n  </div>\\n</div>\\n\"","module.exports = \"<div class=\\\"form-horizontal\\\">\\n  <div>\\n    This visualization expects the query result to have rows in the following format:\\n\\n    <ul>\\n      <li><strong>stage1</strong> - stage 1 value</li>\\n      <li><strong>stage2</strong> - stage 2 value (or null)</li>\\n      <li><strong>stage3</strong> - stage 3 value (or null)</li>\\n      <li><strong>stage4</strong> - stage 4 value (or null)</li>\\n      <li><strong>stage5</strong> - stage 5 value (or null)</li>\\n      <li><strong>value</strong> - number of times this sequence occurred</li>\\n    </ul>\\n  </div>\\n</div>\\n\"","module.exports = \"<div class=\\\"form-horizontal\\\">\\n  <div>\\n    This visualization expects the query result to have rows in one of the following formats:\\n\\n    <strong>Option 1:</strong>\\n    <ul>\\n      <li><strong>sequence</strong> - sequence id</li>\\n      <li><strong>stage</strong> - what stage in sequence this is (1, 2, ...)</li>\\n      <li><strong>node</strong> - stage name</li>\\n      <li><strong>value</strong> - number of times this sequence occurred</li>\\n    </ul>\\n\\n    <strong>Option 2:</strong>\\n    <ul>\\n      <li><strong>stage1</strong> - stage 1 value</li>\\n      <li><strong>stage2</strong> - stage 2 value (or null)</li>\\n      <li><strong>stage3</strong> - stage 3 value (or null)</li>\\n      <li><strong>stage4</strong> - stage 4 value (or null)</li>\\n      <li><strong>stage5</strong> - stage 5 value (or null)</li>\\n      <li><strong>value</strong> - number of times this sequence occurred</li>\\n    </ul>\\n  </div>\\n</div>\\n\"","module.exports = \"<dynamic-table rows=\\\"gridRows\\\" columns=\\\"gridColumns\\\" items-per-page=\\\"options.itemsPerPage\\\"></dynamic-table>\\n\"","module.exports = \"<div class=\\\"table-editor-container\\\">\\n  <ul class=\\\"tab-nav\\\">\\n    <li ng-class=\\\"{active: currentTab == 'columns'}\\\" ng-if=\\\"options.globalSeriesType != 'custom'\\\">\\n      <a ng-click=\\\"setCurrentTab('columns')\\\">Columns</a>\\n    </li>\\n    <li ng-class=\\\"{active: currentTab == 'grid'}\\\">\\n      <a ng-click=\\\"setCurrentTab('grid')\\\">Grid</a>\\n    </li>\\n  </ul>\\n\\n  <div ng-if=\\\"currentTab == 'grid'\\\" class=\\\"m-t-10 m-b-10\\\">\\n    <div class=\\\"form-group\\\">\\n      <label>Items per page</label>\\n      <select ng-options=\\\"value for value in allowedItemsPerPage\\\"\\n        ng-model=\\\"visualization.options.itemsPerPage\\\" class=\\\"form-control\\\">\\n      </select>\\n    </div>\\n  </div>\\n\\n  <div ng-if=\\\"currentTab == 'columns'\\\" class=\\\"table-editor-query-columns m-t-10 m-b-10\\\"\\n    ui-sortable ng-model=\\\"visualization.options.columns\\\">\\n    <div ng-repeat=\\\"column in visualization.options.columns\\\">\\n      <div class=\\\"table-editor-column-header form-group\\\">\\n        <div class=\\\"input-group\\\">\\n          <span class=\\\"input-group-addon\\\"><input type=\\\"checkbox\\\" ng-model=\\\"column.visible\\\"></span>\\n          <input class=\\\"form-control\\\" ng-model=\\\"column.title\\\" ng-model-options=\\\"{ allowInvalid: true, debounce: 200 }\\\">\\n        </div>\\n      </div>\\n      <div class=\\\"form-group\\\">\\n        <div class=\\\"btn-group btn-group-justified\\\">\\n          <button type=\\\"button\\\" class=\\\"btn btn-default btn-xs\\\"\\n            ng-click=\\\"column.alignContent = 'left'\\\"\\n            ng-class=\\\"{active: column.alignContent == 'left'}\\\"><i class=\\\"fa fa-align-left\\\"></i></button>\\n          <button type=\\\"button\\\" class=\\\"btn btn-default btn-xs\\\"\\n            ng-click=\\\"column.alignContent = 'center'\\\"\\n            ng-class=\\\"{active: column.alignContent == 'center'}\\\"><i class=\\\"fa fa-align-center\\\"></i></button>\\n          <button type=\\\"button\\\" class=\\\"btn btn-default btn-xs\\\"\\n            ng-click=\\\"column.alignContent = 'right'\\\"\\n            ng-class=\\\"{active: column.alignContent == 'right'}\\\"><i class=\\\"fa fa-align-right\\\"></i></button>\\n        </div>\\n      </div>\\n\\n      <div class=\\\"form-group\\\">\\n        <label class=\\\"ui-sortable-bypass\\\"><input type=\\\"checkbox\\\" ng-model=\\\"column.allowSearch\\\"> Use for search</label>\\n      </div>\\n\\n      <div class=\\\"form-group\\\">\\n        <label>Display as:</label>\\n        <select ng-options=\\\"item.value as item.name for item in displayAsOptions\\\"\\n          ng-model=\\\"column.displayAs\\\" class=\\\"form-control\\\">\\n        </select>\\n      </div>\\n\\n      <div ng-if=\\\"column.displayAs == 'string'\\\">\\n        <div class=\\\"form-group\\\">\\n          <label class=\\\"ui-sortable-bypass\\\"><input type=\\\"checkbox\\\" ng-model=\\\"column.allowHTML\\\"> Allow HTML content</label>\\n        </div>\\n        <div ng-if=\\\"column.allowHTML\\\" class=\\\"form-group\\\">\\n          <label class=\\\"ui-sortable-bypass\\\"><input type=\\\"checkbox\\\" ng-model=\\\"column.highlightLinks\\\"> Highlight links</label>\\n        </div>\\n      </div>\\n\\n      <div ng-if=\\\"column.displayAs == 'number'\\\">\\n        <div class=\\\"form-group\\\">\\n          <label for=\\\"table-editor-{{ column.name }}-number-format\\\">\\n            Number format\\n            <span class=\\\"m-l-5\\\"\\n              uib-popover-html=\\\"'Format <a href=&quot;https://redash.io/help/user-guide/visualizations/formatting-numbers&quot; target=&quot;_blank&quot;>specs.</a>'\\\"\\n              popover-trigger=\\\"'click outsideClick'\\\"><i class=\\\"fa fa-question-circle\\\"></i></span>\\n          </label>\\n          <input class=\\\"form-control\\\" ng-model=\\\"column.numberFormat\\\" ng-model-options=\\\"{ allowInvalid: true, debounce: 200 }\\\"\\n            id=\\\"table-editor-{{ column.name }}-number-format\\\">\\n        </div>\\n      </div>\\n\\n      <div ng-if=\\\"column.displayAs == 'datetime'\\\">\\n        <div class=\\\"form-group\\\">\\n          <label for=\\\"table-editor-{{ column.name }}-datetime-format\\\">\\n            Date/Time format\\n            <span class=\\\"m-l-5\\\"\\n              uib-popover-html=\\\"'Format <a href=&quot;https://momentjs.com/docs/#/displaying/format/&quot; target=&quot;_blank&quot;>specs.</a>'\\\"\\n              popover-trigger=\\\"'click outsideClick'\\\"><i class=\\\"fa fa-question-circle\\\"></i></span>\\n          </label>\\n          <input class=\\\"form-control\\\" ng-model=\\\"column.dateTimeFormat\\\" ng-model-options=\\\"{ allowInvalid: true, debounce: 200 }\\\"\\n            id=\\\"table-editor-{{ column.name }}-datetime-format\\\">\\n        </div>\\n      </div>\\n\\n      <div ng-if=\\\"column.displayAs == 'boolean'\\\">\\n        <div class=\\\"form-group\\\">\\n          <label for=\\\"table-editor-{{ column.name }}-boolean-false\\\">Value for <code>false</code></label>\\n          <input class=\\\"form-control\\\" ng-model=\\\"column.booleanValues[0]\\\" ng-model-options=\\\"{ allowInvalid: true, debounce: 200 }\\\"\\n            id=\\\"table-editor-{{ column.name }}-boolean-false\\\">\\n        </div>\\n        <div class=\\\"form-group\\\">\\n          <label for=\\\"table-editor-{{ column.name }}-boolean-true\\\">Value for <code>true</code></label>\\n          <input class=\\\"form-control\\\" ng-model=\\\"column.booleanValues[1]\\\" ng-model-options=\\\"{ allowInvalid: true, debounce: 200 }\\\"\\n            id=\\\"table-editor-{{ column.name }}-boolean-true\\\">\\n        </div>\\n      </div>\\n\\n      <div ng-if=\\\"column.displayAs == 'image'\\\">\\n        <div class=\\\"form-group\\\">\\n          <label for=\\\"table-editor-{{ column.name }}-image-url-template\\\">URL template</label>\\n          <input class=\\\"form-control\\\" ng-model=\\\"column.imageUrlTemplate\\\" ng-model-options=\\\"{ allowInvalid: true, debounce: 200 }\\\"\\n            id=\\\"table-editor-{{ column.name }}-image-url-template\\\">\\n        </div>\\n\\n        <div class=\\\"form-group\\\">\\n          <label>\\n            Size\\n            <span class=\\\"m-l-5\\\"\\n              uib-popover-html=\\\"'Any positive integer value that specifies size in pixels. Leave empty to use default value.'\\\"\\n              popover-trigger=\\\"'click outsideClick'\\\" popover-placement=\\\"top-left\\\"><i class=\\\"fa fa-question-circle\\\"></i></span>\\n          </label>\\n          <div class=\\\"d-flex\\\">\\n            <input class=\\\"form-control\\\" ng-model=\\\"column.imageWidth\\\" ng-model-options=\\\"{ allowInvalid: true, debounce: 200 }\\\"\\n              placeholder=\\\"Width\\\">\\n            <span class=\\\"form-control-static m-l-5 m-r-5\\\">&times;</span>\\n            <input class=\\\"form-control\\\" ng-model=\\\"column.imageHeight\\\" ng-model-options=\\\"{ allowInvalid: true, debounce: 200 }\\\"\\n              placeholder=\\\"Height\\\">\\n          </div>\\n        </div>\\n\\n        <div class=\\\"form-group\\\">\\n          <label for=\\\"table-editor-{{ column.name }}-image-title-template\\\">Title template</label>\\n          <input class=\\\"form-control\\\" ng-model=\\\"column.imageTitleTemplate\\\" ng-model-options=\\\"{ allowInvalid: true, debounce: 200 }\\\"\\n            id=\\\"table-editor-{{ column.name }}-image-title-template\\\">\\n        </div>\\n\\n        <div class=\\\"form-group\\\">\\n          <label class=\\\"ui-sortable-bypass text-muted\\\" style=\\\"font-weight: normal; cursor: pointer;\\\"\\n            uib-popover-html=\\\"templateHint\\\"\\n            popover-trigger=\\\"'click outsideClick'\\\" popover-placement=\\\"top-left\\\">\\n            Format specs <i class=\\\"fa fa-question-circle m-l-5\\\"></i>\\n          </label>\\n        </div>\\n      </div>\\n\\n      <div ng-if=\\\"column.displayAs == 'link'\\\">\\n        <div class=\\\"form-group\\\">\\n          <label for=\\\"table-editor-{{ column.name }}-link-url-template\\\">URL template</label>\\n          <input class=\\\"form-control\\\" ng-model=\\\"column.linkUrlTemplate\\\" ng-model-options=\\\"{ allowInvalid: true, debounce: 200 }\\\"\\n            id=\\\"table-editor-{{ column.name }}-link-url-template\\\">\\n        </div>\\n\\n        <div class=\\\"form-group\\\">\\n          <label for=\\\"table-editor-{{ column.name }}-link-text-template\\\">Text template</label>\\n          <input class=\\\"form-control\\\" ng-model=\\\"column.linkTextTemplate\\\" ng-model-options=\\\"{ allowInvalid: true, debounce: 200 }\\\"\\n            id=\\\"table-editor-{{ column.name }}-link-text-template\\\">\\n        </div>\\n\\n        <div class=\\\"form-group\\\">\\n          <label for=\\\"table-editor-{{ column.name }}-link-title-template\\\">Title template</label>\\n          <input class=\\\"form-control\\\" ng-model=\\\"column.linkTitleTemplate\\\" ng-model-options=\\\"{ allowInvalid: true, debounce: 200 }\\\"\\n            id=\\\"table-editor-{{ column.name }}-link-title-template\\\">\\n        </div>\\n\\n        <div class=\\\"form-group\\\">\\n          <label class=\\\"ui-sortable-bypass\\\"><input type=\\\"checkbox\\\" ng-model=\\\"column.linkOpenInNewTab\\\"> Open in new tab</label>\\n        </div>\\n\\n        <div class=\\\"form-group\\\">\\n          <label class=\\\"ui-sortable-bypass text-muted\\\" style=\\\"font-weight: normal; cursor: pointer;\\\"\\n            uib-popover-html=\\\"templateHint\\\"\\n            popover-trigger=\\\"'click outsideClick'\\\" popover-placement=\\\"top-left\\\">\\n            Format specs <i class=\\\"fa fa-question-circle m-l-5\\\"></i>\\n          </label>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"","module.exports = \"<div class=\\\"form-horizontal\\\">\\n  <div class=\\\"form-group\\\">\\n    <label class=\\\"col-lg-6\\\">Word Cloud Column Name</label>\\n    <div class=\\\"col-lg-6\\\">\\n      <select ng-options=\\\"name for name in queryResult.getColumnNames()\\\" ng-model=\\\"visualization.options.column\\\" class=\\\"form-control\\\"></select>\\n    </div>\\n  </div>\\n</div>\\n\"","module.exports = \"<div class=\\\"container\\\">\\n  <page-header title=\\\"'Admin'\\\"></page-header>\\n\\n  <div class=\\\"bg-white tiled\\\">\\n    <ul class=\\\"tab-nav\\\">\\n      <li><a href=\\\"admin/status\\\">System Status</a></li>\\n      <li><a href=\\\"admin/queries/tasks\\\">Celery Status</a></li>\\n      <li class=\\\"active\\\"><a href=\\\"admin/queries/outdated\\\">Outdated Queries</a></li>\\n    </ul>\\n\\n    <div class=\\\"\\\">\\n      <table class=\\\"table table-condensed table-hover\\\">\\n        <thead>\\n        <tr>\\n          <th>Id</th>\\n          <th>Name</th>\\n          <th>Created By</th>\\n          <th>Runtime</th>\\n          <th>Last Executed At</th>\\n          <th>Created At</th>\\n          <th>Update Schedule</th>\\n        </tr>\\n        </thead>\\n        <tbody>\\n        <tr ng-repeat=\\\"row in $ctrl.queries.getPageRows()\\\">\\n          <td>\\n            {{row.data_source_id}}\\n          </td>\\n          <td>\\n            <a ng-href=\\\"queries/{{row.id}}\\\">{{row.name}}</a>\\n          </td>\\n          <td>{{row.user.name}}</td>\\n          <td>{{row.runtime | durationHumanize}}</td>\\n          <td>{{row.retrieved_at | dateTime}}</td>\\n          <td>{{row.created_at | dateTime }}</td>\\n          <td><schedule-phrase schedule=\\\"row.schedule\\\" is-new=\\\"row.isNew()\\\" /></td>\\n        </tr>\\n        </tbody>\\n      </table>\\n      <paginator paginator=\\\"$ctrl.queries\\\"></paginator>\\n\\n      <div class=\\\"p-15\\\">\\n        <div class=\\\"badge\\\">\\n          Last update: <span am-time-ago=\\\"updatedAt\\\"></span>\\n        </div>\\n        (<label><input type=\\\"checkbox\\\" ng-model=\\\"autoUpdate\\\"> Auto Update</label>)\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"","module.exports = \"<div class=\\\"container\\\">\\n  <page-header title=\\\"'Admin'\\\"></page-header>\\n\\n  <div class=\\\"bg-white tiled\\\">\\n    <ul class=\\\"tab-nav\\\">\\n      <li class=\\\"active\\\">\\n        <a href=\\\"admin/status\\\">System Status</a>\\n      </li>\\n      <li>\\n        <a href=\\\"admin/queries/tasks\\\">Celery Status</a>\\n      </li>\\n      <li>\\n        <a href=\\\"admin/queries/outdated\\\">Outdated Queries</a>\\n      </li>\\n    </ul>\\n\\n    <div class=\\\"row p-15\\\">\\n      <ul class=\\\"list-group p-l-15 col-lg-4\\\">\\n        <li class=\\\"list-group-item active\\\">General</li>\\n        <li class=\\\"list-group-item\\\" ng-repeat=\\\"(name, value) in status\\\">\\n          <span class=\\\"badge\\\">{{ value }}</span>\\n          {{ name | toHuman }}\\n        </li>\\n      </ul>\\n\\n      <ul class=\\\"list-group col-lg-4\\\">\\n        <li class=\\\"list-group-item active\\\">Manager</li>\\n        <li class=\\\"list-group-item\\\">\\n          <span\\n            class=\\\"badge\\\"\\n            am-time-ago=\\\"manager.last_refresh_at*1000.0\\\"\\n          ></span>\\n          Last Refresh\\n        </li>\\n        <li class=\\\"list-group-item\\\">\\n          <span class=\\\"badge\\\" am-time-ago=\\\"manager.started_at*1000.0\\\"></span>\\n          Started\\n        </li>\\n        <li class=\\\"list-group-item\\\">\\n          <span class=\\\"badge\\\">{{ manager.outdated_queries_count }}</span>\\n          Outdated Queries Count\\n        </li>\\n      </ul>\\n\\n      <ul class=\\\"list-group col-lg-4\\\">\\n        <li class=\\\"list-group-item active\\\">Queues</li>\\n        <li class=\\\"list-group-item\\\" ng-repeat=\\\"(name, value) in manager.queues\\\">\\n          <span class=\\\"badge\\\">{{ value.size }}</span>\\n          {{ name }}\\n          <span\\n            uib-popover=\\\"{{ value.data_sources }}\\\"\\n            popover-trigger=\\\"'mouseenter'\\\"\\n          >\\n            <i class=\\\"fa fa-question-circle\\\"></i>\\n          </span>\\n        </li>\\n      </ul>\\n    </div>\\n    <div class=\\\"row p-15\\\">\\n      <ul class=\\\"list-group col-lg-4\\\">\\n        <li class=\\\"list-group-item active\\\">Redash Database</li>\\n        <li\\n          class=\\\"list-group-item\\\"\\n          ng-repeat=\\\"(name, size) in database_metrics.metrics\\\"\\n        >\\n          <span class=\\\"badge\\\">{{ size[1] | prettySize }}</span>\\n          <span> {{ size[0] }} </span>\\n        </li>\\n      </ul>\\n    </div>\\n  </div>\\n</div>\\n\"","module.exports = \"<div class=\\\"container\\\">\\n  <page-header title=\\\"'Admin'\\\"></page-header>\\n\\n  <div class=\\\"bg-white tiled\\\">\\n    <ul class=\\\"tab-nav\\\">\\n      <li><a href=\\\"admin/status\\\">System Status</a></li>\\n      <li class=\\\"active\\\"><a href=\\\"admin/queries/tasks\\\">Celery Status</a></li>\\n      <li><a href=\\\"admin/queries/outdated\\\">Outdated Queries</a></li>\\n    </ul>\\n\\n    <admin-celery-status></admin-celery-status>\\n  </div>\\n</div>\\n\"","module.exports = \"<div class=\\\"container\\\">\\n  <page-header title=\\\"$ctrl.alert.name || $ctrl.getDefaultName() || 'New Alert'\\\"></page-header>\\n\\n  <email-settings-warning feature-name=\\\"'alert emails'\\\"></email-settings-warning>\\n\\n  <div class=\\\"container\\\">\\n    <div class=\\\"row bg-white tiled p-10\\\">\\n      <div class=\\\"col-md-8\\\">\\n        <form name=\\\"alertForm\\\" class=\\\"form\\\">\\n          <div class=\\\"form-group\\\">\\n            <label>Query</label>\\n            <query-selector type=\\\"'select'\\\" selected-query=\\\"$ctrl.alert.query\\\" on-change=\\\"$ctrl.onQuerySelected\\\" disabled=\\\"!$ctrl.canEdit\\\" />\\n          </div>\\n\\n          <div class=\\\"form-group\\\" ng-show=\\\"$ctrl.selectedQuery\\\">\\n            <label>Name</label>\\n            <input type=\\\"string\\\" placeholder=\\\"{{$ctrl.getDefaultName()}}\\\" class=\\\"form-control\\\" ng-model=\\\"$ctrl.alert.name\\\" ng-disabled=\\\"!$ctrl.canEdit\\\">\\n          </div>\\n\\n          <div ng-show=\\\"$ctrl.queryResult\\\" class=\\\"form-horizontal\\\">\\n            <div class=\\\"form-group\\\">\\n              <label class=\\\"control-label col-md-2\\\">Value column</label>\\n              <div class=\\\"col-md-4\\\">\\n                <select ng-options=\\\"name for name in $ctrl.queryResult.getColumnNames()\\\" ng-model=\\\"$ctrl.alert.options.column\\\"\\n                        class=\\\"form-control\\\" ng-disabled=\\\"!$ctrl.canEdit\\\"></select>\\n              </div>\\n              <label class=\\\"control-label col-md-2\\\">Value</label>\\n              <div class=\\\"col-md-4\\\">\\n                <p class=\\\"form-control-static\\\">{{$ctrl.queryResult.getData()[0][$ctrl.alert.options.column]}}</p>\\n              </div>\\n            </div>\\n            <div class=\\\"form-group\\\">\\n              <label class=\\\"control-label col-md-2\\\">Op</label>\\n              <div class=\\\"col-md-4\\\">\\n                <select ng-options=\\\"name for name in $ctrl.ops\\\" ng-model=\\\"$ctrl.alert.options.op\\\" class=\\\"form-control\\\" ng-disabled=\\\"!$ctrl.canEdit\\\"></select>\\n              </div>\\n              <label class=\\\"control-label col-md-2\\\">Reference</label>\\n              <div class=\\\"col-md-4\\\">\\n                <input type=\\\"number\\\" step=\\\"any\\\" class=\\\"form-control\\\" ng-model=\\\"$ctrl.alert.options.value\\\" placeholder=\\\"reference value\\\" ng-disabled=\\\"!$ctrl.canEdit\\\"\\n                       required/>\\n              </div>\\n            </div>\\n            <div class=\\\"form-group\\\">\\n              <label class=\\\"control-label col-md-2\\\">Rearm seconds</label>\\n              <div class=\\\"col-md-4\\\">\\n                <input type=\\\"number\\\" class=\\\"form-control\\\" ng-model=\\\"$ctrl.alert.rearm\\\" ng-disabled=\\\"!$ctrl.canEdit\\\"/>\\n              </div>\\n            </div>\\n          </div>\\n\\n          <div class=\\\"form-group\\\" ng-if=\\\"$ctrl.canEdit\\\">\\n            <button class=\\\"btn btn-primary\\\" ng-disabled=\\\"!alertForm.$valid\\\" ng-click=\\\"$ctrl.saveChanges()\\\">Save</button>\\n            <button class=\\\"btn btn-danger\\\" ng-if=\\\"$ctrl.alert.id\\\" ng-click=\\\"$ctrl.delete()\\\">Delete</button>\\n          </div>\\n        </form>\\n      </div>\\n      <div class=\\\"col-md-4\\\" ng-if=\\\"$ctrl.alert.id\\\">\\n        <alert-subscriptions alert-id=\\\"$ctrl.alert.id\\\"></alert-subscriptions>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"","module.exports = \"<div class=\\\"container\\\">\\n  <div class=\\\"row p-l-15 p-r-15 m-b-10 m-l-0 m-r-0 dashboard-header page-header--new\\\">\\n    <div class=\\\"page-title col-xs-8 col-sm-7 col-lg-7 p-l-0\\\">\\n      <favorites-control item=\\\"$ctrl.dashboard\\\"></favorites-control>\\n      <h3>\\n        <edit-in-place class=\\\"edit-in-place\\\" is-editable=\\\"$ctrl.layoutEditing\\\" on-done=\\\"$ctrl.saveName\\\" ignore-blanks=\\\"true\\\" value=\\\"$ctrl.dashboard.name\\\" editor=\\\"'input'\\\"></edit-in-place>\\n      </h3>\\n\\n      <img ng-src=\\\"{{$ctrl.dashboard.user.profile_image_url}}\\\" class=\\\"profile__image_thumb--dashboard\\\" alt=\\\"{{$ctrl.dashboard.user.name}}\\\">\\n\\n      <dashboard-tags-control class=\\\"hidden-xs\\\"\\n        tags=\\\"$ctrl.dashboard.tags\\\" is-draft=\\\"$ctrl.dashboard.is_draft\\\" is-archived=\\\"$ctrl.dashboard.is_archived\\\"\\n        can-edit=\\\"$ctrl.isDashboardOwner\\\" get-available-tags=\\\"$ctrl.loadTags\\\" on-edit=\\\"$ctrl.saveTags\\\"></dashboard-tags-control>\\n\\n    </div>\\n    <div class=\\\"col-xs-4 col-sm-5 col-lg-5 text-right dashboard__control p-r-0\\\">\\n      <span ng-if=\\\"!$ctrl.dashboard.is_archived && !public\\\" class=\\\"hidden-print\\\">\\n          <div class=\\\"btn-group\\\">\\n            <button type=\\\"button\\\" class=\\\"btn btn-primary btn-sm\\\"\\n              ng-disabled=\\\"$ctrl.isGridDisabled\\\"\\n              ng-click=\\\"$ctrl.editLayout(false, true)\\\" ng-if=\\\"$ctrl.layoutEditing\\\">\\n              <i class=\\\"zmdi zmdi-check\\\"></i> Apply Changes\\n            </button>\\n\\n            <button type=\\\"button\\\" class=\\\"btn btn-default btn-sm\\\"\\n              ng-disabled=\\\"$ctrl.isGridDisabled\\\"\\n              ng-click=\\\"$ctrl.editLayout(false, false)\\\" ng-if=\\\"$ctrl.layoutEditing\\\">\\n              <i class=\\\"zmdi zmdi-close\\\"></i> Cancel\\n            </button>\\n          </div>\\n\\n          <button type=\\\"button\\\" class=\\\"btn btn-default btn-sm\\\" ng-click=\\\"$ctrl.togglePublished()\\\" tooltip=\\\"Publish Dashboard\\\" ng-if=\\\"$ctrl.dashboard.is_draft && !$ctrl.layoutEditing\\\">\\n            <span class=\\\"fa fa-paper-plane\\\"></span> Publish\\n          </button>\\n\\n          <div class=\\\"btn-group\\\" uib-dropdown ng-if=\\\"!$ctrl.layoutEditing\\\">\\n            <button id=\\\"split-button\\\" type=\\\"button\\\"\\n                    ng-class=\\\"{'btn-default btn-sm': $ctrl.refreshRate === null,'btn-primary btn-sm':$ctrl.refreshRate !== null}\\\"\\n                    class=\\\"btn btn-sm\\\" ng-click=\\\"$ctrl.refreshDashboard()\\\">\\n              <i class=\\\"zmdi zmdi-refresh\\\"></i> {{$ctrl.refreshRate === null ? 'Refresh' : $ctrl.refreshRate.name}}\\n            </button>\\n            <button type=\\\"button\\\" class=\\\"btn hidden-xs\\\" uib-dropdown-toggle\\n                    ng-class=\\\"{'btn-default btn-sm': $ctrl.refreshRate === null,'btn-primary btn-sm':$ctrl.refreshRate !== null}\\\">\\n              <span class=\\\"caret\\\"></span>\\n              <span class=\\\"sr-only\\\">Split button!</span>\\n            </button>\\n            <ul class=\\\"dropdown-menu pull-right\\\" ng-model=\\\"$ctrl.refreshRate\\\" uib-dropdown-menu role=\\\"menu\\\" aria-labelledby=\\\"split-button\\\">\\n              <li role=\\\"menuitem\\\" ng-repeat=\\\"refreshRate in $ctrl.refreshRates\\\" ng-class=\\\"{disabled: !refreshRate.enabled}\\\">\\n                <a href=\\\"javascript:void(0)\\\" ng-click=\\\"$ctrl.setRefreshRate(refreshRate)\\\">{{refreshRate.name}}</a>\\n              </li>\\n              <li role=\\\"menuitem\\\" ng-if=\\\"$ctrl.refreshRate !== null\\\">\\n                <a href=\\\"#\\\" ng-click=\\\"$ctrl.setRefreshRate(null)\\\">Stop auto refresh</a>\\n              </li>\\n            </ul>\\n          </div>\\n          <button type=\\\"button\\\" class=\\\"btn btn-sm hidden-xs\\\" ng-class=\\\"{'btn-default': !$ctrl.isFullscreen, 'btn-primary': $ctrl.isFullscreen}\\\" tooltip=\\\"Enable/Disable Fullscreen display\\\" ng-click=\\\"$ctrl.toggleFullscreen()\\\" ng-if=\\\"!$ctrl.dashboard.is_draft && !$ctrl.layoutEditing\\\">\\n            <span class=\\\"zmdi zmdi-fullscreen\\\"></span>\\n          </button>\\n          <button type=\\\"button\\\" class=\\\"btn btn-sm hidden-xs\\\" ng-class=\\\"{'btn-default': !$ctrl.dashboard.publicAccessEnabled, 'btn-primary': $ctrl.dashboard.publicAccessEnabled}\\\" tooltip=\\\"Enable/Disable Share URL\\\" ng-click=\\\"$ctrl.openShareForm()\\\" ng-if=\\\"($ctrl.dashboard.canEdit() || $ctrl.dashboard.publicAccessEnabled) && !$ctrl.dashboard.is_draft && !$ctrl.layoutEditing\\\">\\n            <span class=\\\"zmdi zmdi-share\\\"></span>\\n          </button>\\n      </span>\\n\\n      <div class=\\\"btn-group hidden-print hidden-xs\\\" role=\\\"group\\\" ng-show=\\\"$ctrl.dashboard.canEdit()\\\" uib-dropdown ng-if=\\\"!$ctrl.dashboard.is_archived && !$ctrl.layoutEditing\\\" data-test=\\\"DashboardMoreMenu\\\">\\n        <button class=\\\"btn btn-default btn-sm dropdown-toggle\\\" uib-dropdown-toggle>\\n          <span class=\\\"zmdi zmdi-more\\\"></span>\\n        </button>\\n        <ul class=\\\"dropdown-menu pull-right\\\" uib-dropdown-menu>\\n          <li ng-if=\\\"!$ctrl.dashboard.is_archived\\\" ng-class=\\\"{hidden: $ctrl.isGridDisabled}\\\"><a ng-click=\\\"$ctrl.editLayout(true)\\\">Edit</a></li>\\n          <li ng-if=\\\"$ctrl.showPermissionsControl\\\"><a ng-click=\\\"$ctrl.showManagePermissionsModal()\\\">Manage Permissions</a></li>\\n          <li ng-if=\\\"!$ctrl.dashboard.is_draft\\\"><a ng-click=\\\"$ctrl.togglePublished()\\\">Unpublish</a></li>\\n          <li ng-if=\\\"!$ctrl.dashboard.is_archived\\\"><a ng-click=\\\"$ctrl.archiveDashboard()\\\">Archive</a></li>\\n        </ul>\\n      </div>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"m-b-10 p-15 bg-white tiled\\\" ng-if=\\\"$ctrl.layoutEditing\\\">\\n    <label>\\n        <input name=\\\"input\\\" type=\\\"checkbox\\\" ng-model=\\\"$ctrl.dashboard.dashboard_filters_enabled\\\" ng-change=\\\"$ctrl.updateDashboardFiltersState()\\\">\\n        Use Dashboard Level Filters\\n    </label>\\n  </div>\\n\\n  <div class=\\\"m-b-10 p-15 bg-white tiled\\\" ng-if=\\\"$ctrl.globalParameters.length > 0\\\">\\n    <parameters parameters=\\\"$ctrl.globalParameters\\\"></parameters>\\n  </div>\\n\\n  <div class=\\\"m-b-10 p-15 bg-white tiled\\\" ng-if=\\\"$ctrl.filters | notEmpty\\\">\\n    <filters filters=\\\"$ctrl.filters\\\" on-change=\\\"$ctrl.filtersOnChange(filter, $modal)\\\"></filters>\\n  </div>\\n\\n  <div style=\\\"padding-bottom: 5px;\\\" ng-if=\\\"$ctrl.dashboard.widgets.length > 0\\\">\\n    <div gridstack editing=\\\"$ctrl.layoutEditing && !$ctrl.saveInProgress\\\" batch-update=\\\"$ctrl.updateGridItems\\\"\\n      is-one-column-mode=\\\"$ctrl.isGridDisabled\\\" class=\\\"dashboard-wrapper\\\"\\n      ng-class=\\\"{'preview-mode': !$ctrl.layoutEditing, 'editing-mode': $ctrl.layoutEditing}\\\">\\n      <div class=\\\"dashboard-widget-wrapper\\\"\\n        ng-repeat=\\\"widget in $ctrl.dashboard.widgets track by widget.id\\\"\\n        gridstack-item=\\\"widget.options.position\\\" gridstack-item-id=\\\"{{ widget.id }}\\\">\\n        <div class=\\\"grid-stack-item-content\\\" data-test=\\\"WidgetId{{ widget.id }}\\\">\\n          <dashboard-widget widget=\\\"widget\\\" dashboard=\\\"$ctrl.dashboard\\\" on-delete=\\\"$ctrl.removeWidget(widget.id)\\\"></dashboard-widget>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"add-widget-container\\\" ng-if=\\\"$ctrl.layoutEditing\\\">\\n    <h2>\\n      <i class=\\\"zmdi zmdi-widgets\\\"></i>\\n      <span class=\\\"hidden-xs hidden-sm\\\">Widgets are individual query visualizations or text boxes you can place on your dashboard in various arrangements.</span>\\n    </h2>\\n    <div>\\n      <a class=\\\"btn btn-default\\\" ng-click=\\\"$ctrl.showAddTextboxDialog()\\\">Add Textbox</a>\\n      <a class=\\\"btn btn-primary m-l-10\\\" ng-click=\\\"$ctrl.showAddWidgetDialog()\\\">Add Widget</a>\\n    </div>\\n  </div>\\n</div>\\n\"","module.exports = \"<div class=\\\"container p-t-10 p-b-20\\\">\\n  <page-header title=\\\"$ctrl.dashboard.name\\\"></page-header>\\n\\n  <div class=\\\"m-b-5\\\">\\n    <filters ng-if=\\\"$ctrl.dashboard.dashboard_filters_enabled\\\"></filters>\\n  </div>\\n\\n  <div style=\\\"padding-bottom: 5px\\\" ng-if=\\\"$ctrl.dashboard.widgets.length > 0\\\">\\n    <div gridstack editing=\\\"false\\\" class=\\\"dashboard-wrapper preview-mode\\\">\\n      <div class=\\\"dashboard-widget-wrapper\\\"\\n        ng-repeat=\\\"widget in $ctrl.dashboard.widgets\\\"\\n        gridstack-item=\\\"widget.options.position\\\" gridstack-item-id=\\\"{{ widget.id }}\\\">\\n        <div class=\\\"grid-stack-item-content\\\">\\n          <dashboard-widget widget=\\\"widget\\\" dashboard=\\\"$ctrl.dashboard\\\" public=\\\"true\\\"></dashboard-widget>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\\n<div id=\\\"footer\\\">\\n  <div class=\\\"text-center\\\">\\n    <a href=\\\"https://redash.io\\\"><img ng-src=\\\"{{$ctrl.logoUrl}}\\\" width=\\\"38\\\"/></a>\\n  </div>\\n  Powered by <a href=\\\"https://redash.io/?ref=public-dashboard\\\">Redash</a>\\n</div>\\n\"","module.exports = \"<settings-screen>\\n  <div class=\\\"row\\\">\\n    <div class=\\\"col-md-12\\\">\\n      <p>\\n        <a href=\\\"data_sources/new\\\" class=\\\"btn btn-default\\\" ng-class=\\\"{'disabled': !$ctrl.policy.isCreateDataSourceEnabled()}\\\">\\n          <i class=\\\"fa fa-plus\\\"></i> New Data Source</a>\\n        <datasources-list-extra></datasources-list-extra>\\n      </p>\\n      <div class=\\\"database-source\\\">\\n        <a class=\\\"visual-card\\\" ng-href=\\\"data_sources/{{dataSource.id}}\\\" ng-repeat=\\\"dataSource in $ctrl.dataSources\\\" title=\\\"{{dataSource.name}}\\\">\\n          <img ng-src=\\\"/static/images/db-logos/{{dataSource.type}}.png\\\" alt=\\\"{{dataSource.name}}\\\">\\n          <h3>{{dataSource.name}}</h3>\\n        </a>\\n      </div>\\n    </div>\\n  </div>\\n</settings-screen>\"","module.exports = \"<settings-screen>\\n  <div class=\\\"row\\\">\\n    <div class=\\\"col-md-12\\\">\\n      <p>\\n        <a href=\\\"destinations/new\\\" class=\\\"btn btn-default\\\"><i class=\\\"fa fa-plus\\\"></i> New Alert Destination</a>\\n      </p>\\n      <div class=\\\"database-source\\\">\\n        <a class=\\\"visual-card\\\" ng-href=\\\"destinations/{{destination.id}}\\\" ng-repeat=\\\"destination in destinations\\\">\\n          <img ng-src=\\\"/static/images/destinations/{{destination.type}}.png\\\" alt=\\\"{{destination.name}}\\\">\\n          <h3>{{destination.name}}</h3>\\n        </a>\\n      </div>\\n    </div>\\n  </div>\\n</settings-screen>\\n\"","module.exports = \"<div class=\\\"container\\\">\\n  <div ng-if=\\\"!$ctrl.isEmailVerified\\\" class=\\\"alert alert-warning\\\">\\n      We have sent an email with a confirmation link to your email address. Please follow the link to verify your email address. <a ng-click=\\\"$ctrl.verifyEmail()\\\">Resend email</a>.\\n  </div>\\n  <empty-state\\n    title=\\\"'Welcome to Redash 👋'\\\"\\n    description=\\\"'Connect to any data source, easily visualize and share your data'\\\"\\n    illustration=\\\"'dashboard'\\\"\\n    help-link=\\\"'https://redash.io/help/user-guide/getting-started'\\\"\\n    show-dashboard-step=\\\"true\\\"\\n    show-invite-step=\\\"true\\\"\\n    onboarding-mode=\\\"true\\\"\\n  ></empty-state>\\n\\n  <home-extra></home-extra>\\n\\n  <div class=\\\"tile\\\">\\n    <div class=\\\"t-body tb-padding\\\">\\n      <div class=\\\"row\\\">\\n        <div class=\\\"col-sm-6\\\">\\n          <p class=\\\"f-500 m-b-20 c-black\\\">Favorite Dashboards</p>\\n\\n          <p ng-if=\\\"$ctrl.noDashboards\\\">\\n            <span class=\\\"btn-favourite\\\">\\n              <i class=\\\"fa fa-star\\\" aria-hidden=\\\"true\\\"></i>\\n            </span>\\n            Favorite <a href=\\\"dashboards\\\">Dashboards</a> will appear here\\n          </p>\\n\\n          <div class=\\\"list-group\\\">\\n            <a ng-href=\\\"dashboard/{{dashboard.slug}}\\\" class=\\\"list-group-item\\\" ng-repeat=\\\"dashboard in $ctrl.favoriteDashboards\\\"\\n              ng-if=\\\"dashboard.is_favorite\\\">\\n              <span class=\\\"btn-favourite\\\">\\n                <i class=\\\"fa fa-star\\\" aria-hidden=\\\"true\\\"></i>\\n              </span>\\n              {{dashboard.name}}\\n              <span class=\\\"label label-default\\\" ng-if=\\\"dashboard.is_draft\\\">Unpublished</span>\\n            </a>\\n          </div>\\n        </div>\\n\\n        <div class=\\\"col-sm-6\\\">\\n          <p class=\\\"f-500 m-b-20 c-black\\\">Favorite Queries</p>\\n          <p ng-if=\\\"$ctrl.noQueries\\\">\\n            <span class=\\\"btn-favourite\\\">\\n              <i class=\\\"fa fa-star\\\" aria-hidden=\\\"true\\\"></i>\\n            </span>\\n            Favorite <a href=\\\"queries\\\">Queries</a> will appear here\\n          </p>\\n          <div class=\\\"list-group\\\">\\n            <a ng-href=\\\"queries/{{query.id}}\\\" class=\\\"list-group-item\\\" ng-repeat=\\\"query in $ctrl.favoriteQueries\\\" ng-if=\\\"query.is_favorite\\\">\\n              <span class=\\\"btn-favourite\\\">\\n                <i class=\\\"fa fa-star\\\" aria-hidden=\\\"true\\\"></i>\\n              </span>\\n              {{query.name}}\\n              <span class=\\\"label label-default\\\" ng-if=\\\"query.is_draft\\\">Unpublished</span>\\n            </a>\\n          </div>\\n        </div>\\n      </div>\\n\\n    </div>\\n  </div>\\n</div>\\n\"","module.exports = \"<div class=\\\"modal-header\\\">\\n    <button type=\\\"button\\\" class=\\\"close\\\" aria-label=\\\"Close\\\" ng-click=\\\"$ctrl.close()\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\\n    <h4 class=\\\"modal-title\\\">Add to Dashboard</h4>\\n</div>\\n<div class=\\\"modal-body\\\">\\n    <form name=\\\"alertForm\\\" class=\\\"form\\\">\\n      <div class=\\\"form-group\\\">\\n        <label>Choose the dashboard to add this query to:</label>\\n        <ui-select ng-model=\\\"$ctrl.dashboardList\\\" reset-search-input=\\\"false\\\" on-select=\\\"$ctrl.onDashboardSelected($item)\\\" ng-disabled=\\\"$ctrl.saveInProgress\\\">\\n          <ui-select-match placeholder=\\\"Search a dashboard by name\\\">{{$select.selected.name}}</ui-select-match>\\n          <ui-select-choices repeat=\\\"q in $ctrl.dashboards\\\"\\n                             refresh=\\\"$ctrl.searchDashboards($select.search, $ctrl.limitToUsersDashboards)\\\"\\n                             refresh-delay=\\\"0\\\">\\n            <div ng-bind-html=\\\"$ctrl.trustAsHtml(q.name | highlight: $select.search)\\\"></div>\\n          </ui-select-choices>\\n        </ui-select>\\n      </div>\\n    </form>\\n</div>\"","module.exports = \"<settings-screen>\\n  <div class=\\\"\\\">\\n    <form name=\\\"snippetForm\\\" class=\\\"form\\\">\\n      <div class=\\\"form-group\\\">\\n        <label>Trigger</label>\\n        <input type=\\\"string\\\" class=\\\"form-control\\\" ng-model=\\\"$ctrl.snippet.trigger\\\" ng-disabled=\\\"!$ctrl.canEdit\\\" required autofocus>\\n      </div>\\n\\n      <div class=\\\"form-group\\\">\\n        <label>Description</label>\\n        <input type=\\\"string\\\" class=\\\"form-control\\\" ng-model=\\\"$ctrl.snippet.description\\\" ng-disabled=\\\"!$ctrl.canEdit\\\">\\n      </div>\\n\\n      <div class=\\\"form-group\\\">\\n        <label>Snippet</label>\\n        <pre ng-if=\\\"!$ctrl.canEdit\\\">{{$ctrl.snippet.snippet}}</pre>\\n        <div ui-ace=\\\"$ctrl.editorOptions\\\" ng-model=\\\"$ctrl.snippet.snippet\\\" style=\\\"height:300px\\\" ng-if=\\\"$ctrl.canEdit\\\"></div>\\n      </div>\\n\\n      <div class=\\\"form-group\\\" ng-if=\\\"$ctrl.canEdit\\\">\\n        <button class=\\\"btn btn-primary\\\" ng-disabled=\\\"!snippetForm.$valid\\\" ng-click=\\\"$ctrl.saveChanges()\\\">Save</button>\\n        <button class=\\\"btn btn-danger\\\" ng-if=\\\"$ctrl.snippet.id\\\" ng-click=\\\"$ctrl.delete()\\\">Delete</button>\\n      </div>\\n      <small ng-if=\\\"$ctrl.snippet.user\\\">\\n        Created by:\\n        <img ng-src=\\\"{{ $ctrl.snippet.user.profile_image_url }}\\\" class=\\\"profile__image_thumb\\\"/>\\n        <span ng-class=\\\"{'text-muted': $ctrl.snippet.user.is_disabled}\\\">{{$ctrl.snippet.user.name}}</span>\\n      </small>\\n    </form>\\n  </div>\\n</settings-screen>\\n\"","module.exports = \"<settings-screen>\\n    <div class=\\\"row\\\">\\n        <div class=\\\"col-md-12\\\">\\n          <p>\\n            <a href=\\\"query_snippets/new\\\" class=\\\"btn btn-default\\\"><i class=\\\"fa fa-plus\\\"></i> New Snippet</a>\\n          </p>\\n\\n          <table class=\\\"table table-border table-hover\\\">\\n            <thead>\\n              <tr>\\n                <th>Trigger</th>\\n                <th>Description</th>\\n                <th>Snippet</th>\\n                <th>Created By</th>\\n                <th>Updated At</th>\\n              </tr>\\n            </thead>\\n            <tbody>\\n              <tr ng-repeat=\\\"snippet in $ctrl.snippets.getPageRows()\\\">\\n                <td>\\n                  <a href=\\\"query_snippets/{{snippet.id}}\\\">{{snippet.trigger}}</a>\\n                </td>\\n                <td>\\n                  {{snippet.description}}\\n                </td>\\n                <td>\\n                  {{snippet.snippet}}\\n                </td>\\n                <td>\\n                  <img ng-src=\\\"{{ snippet.user.profile_image_url }}\\\" class=\\\"profile__image_thumb\\\"/>\\n                  <span ng-class=\\\"{'text-muted': snippet.user.is_disabled}\\\">{{snippet.user.name}}</span>\\n                </td>\\n                <td>\\n                  <span am-time-ago=\\\"snippet.created_at\\\"></span>\\n                </td>\\n              </tr>\\n            </tbody>\\n          </table>\\n          <paginator paginator=\\\"$ctrl.snippets\\\"></paginator>\\n        </div>\\n    </div>\\n</settings-screen>\\n\"","module.exports = \"<settings-screen>\\n    <div class=\\\"row\\\" data-test=\\\"OrganizationSettings\\\">\\n        <div class=\\\"col-md-offset-4 col-md-4\\\">\\n            <h3 class=\\\"m-t-0\\\">General</h3>\\n            <p>\\n                <label>\\n                    Date Format\\n                </label>\\n                <select class=\\\"form-control\\\" ng-model=\\\"$ctrl.settings.date_format\\\" ng-change=\\\"$ctrl.update('date_format')\\\">\\n                    <option ng-repeat=\\\"date_format in $ctrl.dateFormatList\\\" value=\\\"{{date_format}}\\\">{{date_format}}</option>\\n                </select>\\n            </p>\\n\\n            <p>\\n                <h4>Feature Flags</h4>\\n\\n                <label>\\n                    <input name=\\\"input\\\" type=\\\"checkbox\\\" ng-model=\\\"$ctrl.settings.feature_show_permissions_control\\\" ng-change=\\\"$ctrl.update('feature_show_permissions_control')\\\"\\n                        accesskey=\\\"tab\\\"> Enable experimental multiple owners support\\n                </label>\\n            </p>\\n            <hr>\\n            <h3>Authentication</h3>\\n            <p>\\n                <label>\\n                    <input name=\\\"input\\\" type=\\\"checkbox\\\" ng-model=\\\"$ctrl.settings.auth_password_login_enabled\\\" ng-change=\\\"$ctrl.update('auth_password_login_enabled')\\\"\\n                        accesskey=\\\"tab\\\" ng-disabled=\\\"$ctrl.disablePasswordLoginToggle()\\\"> Password Login Enabled\\n                    <span uib-popover=\\\"Password login can be disabled only if another login method is enabled.\\\" popover-trigger=\\\"'mouseenter'\\\"\\n                        ng-if=\\\"$ctrl.disablePasswordLoginToggle()\\\">\\n                        <i class=\\\"fa fa-question-circle\\\"></i>\\n                    </span>\\n                </label>\\n\\n                <div class=\\\"callout callout-warning\\\" ng-if=\\\"!$ctrl.settings.auth_password_login_enabled\\\">\\n                    Password based login is currently disabled and users will be able to login only with the enabled SSO options.\\n                </div>\\n            </p>\\n\\n            <div ng-if=\\\"$ctrl.googleLoginEnabled\\\">\\n                <h4>Google Login</h4>\\n                <label>\\n                    Allowed Google Apps Domains\\n                </label>\\n                <ui-select multiple tagging tagging-label=\\\"false\\\" ng-model=\\\"$ctrl.settings.auth_google_apps_domains\\\" tagging-tokens=\\\"SPACE|,\\\"\\n                    title=\\\"Google Apps Domain(s)\\\"\\n                    ng-change=\\\"$ctrl.update('auth_google_apps_domains')\\\">\\n                    <ui-select-match placeholder=\\\"Google Apps Domain(s)\\\">{{$item}}</ui-select-match>\\n                    <!-- the ui-select-choices is here just to make ui-select work -->\\n                    <ui-select-choices repeat=\\\"domain in $ctrl.domains\\\">\\n                        {{domain}}\\n                    </ui-select-choices>\\n                </ui-select>\\n\\n                <div class=\\\"callout callout-info m-t-5\\\" ng-if=\\\"$ctrl.settings.auth_google_apps_domains | notEmpty\\\">\\n                    Any user registered with a <strong>{{$ctrl.settings.auth_google_apps_domains | join}}</strong> Google Apps account will be able to login. If they don't have an existing user, a new user will be created and join the <strong>Default</strong> group.\\n                </div>\\n            </div>\\n\\n            <h4>SAML</h4>\\n            <p>\\n                <label>\\n                    <input name=\\\"input\\\" type=\\\"checkbox\\\" ng-model=\\\"$ctrl.settings.auth_saml_enabled\\\" ng-change=\\\"$ctrl.update('auth_saml_enabled')\\\"\\n                        accesskey=\\\"tab\\\"> SAML Enabled\\n                </label>\\n\\n                <div ng-show=\\\"$ctrl.settings.auth_saml_enabled\\\">\\n                    <div class=\\\"form-group\\\">\\n                        <label>SAML Metadata URL</label>\\n                        <input name=\\\"input\\\" type=\\\"string\\\" class=\\\"form-control\\\" ng-model=\\\"$ctrl.settings.auth_saml_metadata_url\\\" accesskey=\\\"tab\\\" ng-change=\\\"$ctrl.update('auth_saml_metadata_url')\\\"\\n                            ng-model-options=\\\"{ debounce: 200 }\\\">\\n                    </div>\\n                    <div class=\\\"form-group\\\">\\n                        <label>SAML Entity ID</label>\\n                        <input name=\\\"input\\\" type=\\\"string\\\" class=\\\"form-control\\\" ng-model=\\\"$ctrl.settings.auth_saml_entity_id\\\" accesskey=\\\"tab\\\" ng-change=\\\"$ctrl.update('auth_saml_entity_id')\\\"\\n                            ng-model-options=\\\"{ debounce: 200 }\\\">\\n                    </div>\\n                    <div class=\\\"form-group\\\">\\n                        <label>SAML NameID Format</label>\\n                        <input name=\\\"input\\\" type=\\\"string\\\" class=\\\"form-control\\\" ng-model=\\\"$ctrl.settings.auth_saml_nameid_format\\\" accesskey=\\\"tab\\\"\\n                            ng-change=\\\"$ctrl.update('auth_saml_nameid_format')\\\" ng-model-options=\\\"{ debounce: 200 }\\\">\\n                    </div>\\n                </div>\\n            </p>\\n        </div>\\n    </div>\\n</settings-screen>\\n\"","var map = {\n\t\"./en-SG\": 462,\n\t\"./en-SG.js\": 462,\n\t\"./en-au\": 463,\n\t\"./en-au.js\": 463,\n\t\"./en-ca\": 464,\n\t\"./en-ca.js\": 464,\n\t\"./en-gb\": 465,\n\t\"./en-gb.js\": 465,\n\t\"./en-ie\": 466,\n\t\"./en-ie.js\": 466,\n\t\"./en-il\": 467,\n\t\"./en-il.js\": 467,\n\t\"./en-nz\": 468,\n\t\"./en-nz.js\": 468\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 749;","var map = {\n\t\"./avatar.svg\": 450,\n\t\"./db-logos/Cassandra.png\": 755,\n\t\"./db-logos/athena.png\": 756,\n\t\"./db-logos/aws_es.png\": 757,\n\t\"./db-logos/axibasetsd.png\": 758,\n\t\"./db-logos/bigquery.png\": 759,\n\t\"./db-logos/clickhouse.png\": 760,\n\t\"./db-logos/cockroach.png\": 761,\n\t\"./db-logos/csv.png\": 762,\n\t\"./db-logos/databricks.png\": 763,\n\t\"./db-logos/db2.png\": 764,\n\t\"./db-logos/drill.png\": 765,\n\t\"./db-logos/druid.png\": 766,\n\t\"./db-logos/dynamodb_sql.png\": 767,\n\t\"./db-logos/elasticsearch.png\": 768,\n\t\"./db-logos/google_analytics.png\": 769,\n\t\"./db-logos/google_spreadsheets.png\": 770,\n\t\"./db-logos/graphite.png\": 771,\n\t\"./db-logos/hive.png\": 772,\n\t\"./db-logos/hive_http.png\": 773,\n\t\"./db-logos/impala.png\": 774,\n\t\"./db-logos/influxdb.png\": 775,\n\t\"./db-logos/jirajql.png\": 776,\n\t\"./db-logos/kibana.png\": 777,\n\t\"./db-logos/kylin.png\": 778,\n\t\"./db-logos/mapd.png\": 779,\n\t\"./db-logos/memsql.png\": 780,\n\t\"./db-logos/mongodb.png\": 781,\n\t\"./db-logos/mssql.png\": 782,\n\t\"./db-logos/mysql.png\": 783,\n\t\"./db-logos/oracle.png\": 784,\n\t\"./db-logos/pg.png\": 785,\n\t\"./db-logos/presto.png\": 786,\n\t\"./db-logos/prometheus.png\": 787,\n\t\"./db-logos/python.png\": 788,\n\t\"./db-logos/qubole.png\": 789,\n\t\"./db-logos/rds_mysql.png\": 790,\n\t\"./db-logos/redshift.png\": 791,\n\t\"./db-logos/results.png\": 792,\n\t\"./db-logos/rockset.png\": 793,\n\t\"./db-logos/salesforce.png\": 794,\n\t\"./db-logos/scylla.png\": 795,\n\t\"./db-logos/snowflake.png\": 796,\n\t\"./db-logos/sqlite.png\": 797,\n\t\"./db-logos/treasuredata.png\": 798,\n\t\"./db-logos/uptycs.png\": 799,\n\t\"./db-logos/url.png\": 800,\n\t\"./db-logos/vertica.png\": 801,\n\t\"./db-logos/yandex_appmetrika.png\": 802,\n\t\"./db-logos/yandex_metrika.png\": 803,\n\t\"./destinations/chatwork.png\": 804,\n\t\"./destinations/email.png\": 805,\n\t\"./destinations/hangouts_chat.png\": 806,\n\t\"./destinations/hipchat.png\": 807,\n\t\"./destinations/mattermost.png\": 808,\n\t\"./destinations/pagerduty.png\": 809,\n\t\"./destinations/slack.png\": 810,\n\t\"./destinations/webhook.png\": 811,\n\t\"./favicon-16x16.png\": 812,\n\t\"./favicon-32x32.png\": 813,\n\t\"./favicon-96x96.png\": 814,\n\t\"./google_logo.svg\": 815,\n\t\"./illustrations/alert.svg\": 816,\n\t\"./illustrations/dashboard.svg\": 817,\n\t\"./illustrations/query.svg\": 818,\n\t\"./logo.png\": 819,\n\t\"./logo_white.png\": 820,\n\t\"./redash_icon_small.png\": 162\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 754;","module.exports = __webpack_public_path__ + \"images/db-logos/Cassandra.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/athena.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/aws_es.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/axibasetsd.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/bigquery.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/clickhouse.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/cockroach.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/csv.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/databricks.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/db2.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/drill.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/druid.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/dynamodb_sql.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/elasticsearch.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/google_analytics.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/google_spreadsheets.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/graphite.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/hive.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/hive_http.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/impala.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/influxdb.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/jirajql.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/kibana.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/kylin.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/mapd.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/memsql.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/mongodb.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/mssql.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/mysql.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/oracle.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/pg.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/presto.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/prometheus.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/python.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/qubole.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/rds_mysql.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/redshift.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/results.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/rockset.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/salesforce.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/scylla.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/snowflake.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/sqlite.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/treasuredata.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/uptycs.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/url.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/vertica.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/yandex_appmetrika.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/yandex_metrika.png\";","module.exports = __webpack_public_path__ + \"images/destinations/chatwork.png\";","module.exports = __webpack_public_path__ + \"images/destinations/email.png\";","module.exports = __webpack_public_path__ + \"images/destinations/hangouts_chat.png\";","module.exports = __webpack_public_path__ + \"images/destinations/hipchat.png\";","module.exports = __webpack_public_path__ + \"images/destinations/mattermost.png\";","module.exports = __webpack_public_path__ + \"images/destinations/pagerduty.png\";","module.exports = __webpack_public_path__ + \"images/destinations/slack.png\";","module.exports = __webpack_public_path__ + \"images/destinations/webhook.png\";","module.exports = __webpack_public_path__ + \"images/favicon-16x16.png\";","module.exports = __webpack_public_path__ + \"images/favicon-32x32.png\";","module.exports = __webpack_public_path__ + \"images/favicon-96x96.png\";","module.exports = __webpack_public_path__ + \"images/google_logo.svg\";","module.exports = __webpack_public_path__ + \"images/illustrations/alert.svg\";","module.exports = __webpack_public_path__ + \"images/illustrations/dashboard.svg\";","module.exports = __webpack_public_path__ + \"images/illustrations/query.svg\";","module.exports = __webpack_public_path__ + \"images/logo.png\";","module.exports = __webpack_public_path__ + \"images/logo_white.png\";","var map = {\n\t\"./AutocompleteToggle.jsx\": 392,\n\t\"./BigMessage.jsx\": 60,\n\t\"./DateInput.jsx\": 394,\n\t\"./DateRangeInput.jsx\": 397,\n\t\"./DateTimeInput.jsx\": 291,\n\t\"./DateTimeRangeInput.jsx\": 292,\n\t\"./DialogWrapper.jsx\": 34,\n\t\"./DynamicComponent.jsx\": 219,\n\t\"./EditInPlace.jsx\": 398,\n\t\"./EditParameterSettingsDialog.jsx\": 220,\n\t\"./EmailSettingsWarning.jsx\": 402,\n\t\"./FavoritesControl.jsx\": 403,\n\t\"./Footer.jsx\": 1039,\n\t\"./HelpTrigger.jsx\": 223,\n\t\"./InputWithCopy.jsx\": 139,\n\t\"./NoTaggedObjectsFound.jsx\": 224,\n\t\"./PageHeader.jsx\": 163,\n\t\"./Paginator.jsx\": 79,\n\t\"./ParameterMappingInput.jsx\": 72,\n\t\"./ParameterValueInput.jsx\": 404,\n\t\"./PreviewCard.jsx\": 106,\n\t\"./QueryBasedParameterInput.jsx\": 405,\n\t\"./QueryEditor.jsx\": 1442,\n\t\"./QuerySelector.jsx\": 221,\n\t\"./SelectItemsDialog.jsx\": 225,\n\t\"./SortIcon.jsx\": 1093,\n\t\"./TagsList.jsx\": 409,\n\t\"./TimeAgo.jsx\": 410,\n\t\"./admin/CeleryStatus.jsx\": 411,\n\t\"./alerts/alert-subscriptions/index.js\": 1109,\n\t\"./app-header/index.js\": 1110,\n\t\"./app-view/error-handler.js\": 412,\n\t\"./app-view/index.js\": 1112,\n\t\"./cancel-query-button/index.js\": 1113,\n\t\"./dashboards/AddTextboxDialog.jsx\": 413,\n\t\"./dashboards/AddWidgetDialog.jsx\": 414,\n\t\"./dashboards/EditParameterMappingsDialog.jsx\": 415,\n\t\"./dashboards/edit-dashboard-dialog.js\": 1115,\n\t\"./dashboards/gridstack/gridstack.js\": 542,\n\t\"./dashboards/gridstack/index.js\": 1122,\n\t\"./dashboards/widget.js\": 1124,\n\t\"./dynamic-form/DynamicForm.jsx\": 226,\n\t\"./dynamic-form/dynamicFormHelper.js\": 171,\n\t\"./dynamic-table/default-cell/index.js\": 1147,\n\t\"./dynamic-table/default-cell/utils.js\": 234,\n\t\"./dynamic-table/dynamic-table-row.js\": 1148,\n\t\"./dynamic-table/index.js\": 1149,\n\t\"./dynamic-table/json-cell/index.js\": 1152,\n\t\"./dynamic-table/json-cell/json-view-interactive.js\": 417,\n\t\"./empty-state/EmptyState.jsx\": 165,\n\t\"./filters.js\": 1155,\n\t\"./groups/CreateGroupDialog.jsx\": 418,\n\t\"./groups/DeleteGroupButton.jsx\": 227,\n\t\"./groups/DetailsPageSidebar.jsx\": 228,\n\t\"./groups/GroupName.jsx\": 229,\n\t\"./groups/ListItemAddon.jsx\": 169,\n\t\"./items-list/ItemsList.jsx\": 48,\n\t\"./items-list/classes/ItemsFetcher.js\": 296,\n\t\"./items-list/classes/ItemsSource.js\": 80,\n\t\"./items-list/classes/Paginator.js\": 419,\n\t\"./items-list/classes/Sorter.js\": 168,\n\t\"./items-list/classes/StateStorage.js\": 69,\n\t\"./items-list/components/EmptyState.jsx\": 230,\n\t\"./items-list/components/ItemsTable.jsx\": 24,\n\t\"./items-list/components/LoadingState.jsx\": 59,\n\t\"./items-list/components/Sidebar.jsx\": 52,\n\t\"./keywordBuilder.js\": 408,\n\t\"./layouts/ContentWithSidebar.jsx\": 54,\n\t\"./overlay.js\": 1157,\n\t\"./parameters.js\": 1158,\n\t\"./permissions-editor/index.js\": 1159,\n\t\"./proptypes.js\": 36,\n\t\"./queries/ScheduleDialog.jsx\": 420,\n\t\"./queries/SchedulePhrase.jsx\": 421,\n\t\"./queries/alert-unsaved-changes.js\": 1160,\n\t\"./queries/api-key-dialog.js\": 1161,\n\t\"./queries/embed-code-dialog.js\": 1162,\n\t\"./queries/query-results-link.js\": 1163,\n\t\"./queries/schema-browser.js\": 1164,\n\t\"./queries/visualization-embed.js\": 1165,\n\t\"./query-link.js\": 1166,\n\t\"./rd-tab/index.js\": 1167,\n\t\"./rd-timer.js\": 1168,\n\t\"./settings-screen.js\": 1169,\n\t\"./tab-nav/index.js\": 1170,\n\t\"./tags-control/EditTagsDialog.jsx\": 399,\n\t\"./tags-control/TagsControl.jsx\": 120,\n\t\"./type-picker.js\": 1171,\n\t\"./users/ChangePasswordDialog.jsx\": 422,\n\t\"./users/CreateUserDialog.jsx\": 423,\n\t\"./users/UserEdit.jsx\": 424,\n\t\"./users/UserShow.jsx\": 425\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 821;","import React from 'react';\nimport { react2angular } from 'react2angular';\n\nexport function Footer() {\n  const separator = ' \\u2022 ';\n\n  return (\n    <div id=\"footer\">\n      <a href=\"https://redash.io\">Redash</a>\n      {separator}\n      <a href=\"https://redash.io/help/\">Documentation</a>\n      {separator}\n      <a href=\"https://github.com/getredash/redash\">Contribute</a>\n    </div>\n  );\n}\n\nexport default function init(ngModule) {\n  ngModule.component('footer', react2angular(Footer));\n}\n\ninit.init = true;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { react2angular } from 'react2angular';\n\nexport function SortIcon({ column, sortColumn, reverse }) {\n  if (column !== sortColumn) {\n    return null;\n  }\n\n  return (\n    <span><i className={'fa fa-sort-' + (reverse ? 'desc' : 'asc')} /></span>\n  );\n}\n\nSortIcon.propTypes = {\n  column: PropTypes.string,\n  sortColumn: PropTypes.string,\n  reverse: PropTypes.bool,\n};\n\nSortIcon.defaultProps = {\n  column: null,\n  sortColumn: null,\n  reverse: false,\n};\n\nexport default function init(ngModule) {\n  ngModule.component('sortIcon', react2angular(SortIcon));\n}\n\ninit.init = true;\n","import { includes, without, compact } from 'lodash';\nimport template from './alert-subscriptions.html';\n\nfunction controller($scope, $q, $sce, currentUser, AlertSubscription, Destination, toastr) {\n  'ngInject';\n\n  $scope.newSubscription = {};\n  $scope.subscribers = [];\n  $scope.destinations = [];\n  $scope.currentUser = currentUser;\n\n  $q\n    .all([\n      Destination.query().$promise,\n      AlertSubscription.query({ alertId: $scope.alertId }).$promise,\n    ])\n    .then((responses) => {\n      const destinations = responses[0];\n      const subscribers = responses[1];\n\n      const mapF = s => s.destination && s.destination.id;\n      const subscribedDestinations = compact(subscribers.map(mapF));\n\n      const subscribedUsers = compact(subscribers.map(s => !s.destination && s.user.id));\n\n      $scope.destinations = destinations.filter(d => !includes(subscribedDestinations, d.id));\n\n      if (!includes(subscribedUsers, currentUser.id)) {\n        $scope.destinations.unshift({ user: { name: currentUser.name } });\n      }\n\n      $scope.newSubscription.destination = $scope.destinations[0];\n      $scope.subscribers = subscribers;\n    });\n\n  $scope.destinationsDisplay = (d) => {\n    if (!d) {\n      return '';\n    }\n\n    let destination = d;\n    if (d.destination) {\n      destination = destination.destination;\n    } else if (destination.user) {\n      destination = {\n        name: `${d.user.name} (Email)`,\n        icon: 'fa-envelope',\n        type: 'user',\n      };\n    }\n\n    return $sce.trustAsHtml(`<i class=\"fa ${destination.icon}\"></i>&nbsp;${destination.name}`);\n  };\n\n  $scope.saveSubscriber = () => {\n    const sub = new AlertSubscription({ alert_id: $scope.alertId });\n    if ($scope.newSubscription.destination.id) {\n      sub.destination_id = $scope.newSubscription.destination.id;\n    }\n\n    sub.$save(\n      () => {\n        toastr.success('Subscribed.');\n        $scope.subscribers.push(sub);\n        $scope.destinations = without($scope.destinations, $scope.newSubscription.destination);\n        if ($scope.destinations.length > 0) {\n          $scope.newSubscription.destination = $scope.destinations[0];\n        } else {\n          $scope.newSubscription.destination = undefined;\n        }\n      },\n      () => {\n        toastr.error('Failed saving subscription.');\n      },\n    );\n  };\n\n  $scope.unsubscribe = (subscriber) => {\n    const destination = subscriber.destination;\n    const user = subscriber.user;\n\n    subscriber.$delete(\n      () => {\n        toastr.success('Unsubscribed');\n        $scope.subscribers = without($scope.subscribers, subscriber);\n        if (destination) {\n          $scope.destinations.push(destination);\n        } else if (user.id === currentUser.id) {\n          $scope.destinations.push({ user: { name: currentUser.name } });\n        }\n\n        if ($scope.destinations.length === 1) {\n          $scope.newSubscription.destination = $scope.destinations[0];\n        }\n      },\n      () => {\n        toastr.error('Failed unsubscribing.');\n      },\n    );\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.directive('alertSubscriptions', () => ({\n    restrict: 'E',\n    replace: true,\n    scope: {\n      alertId: '=',\n    },\n    template,\n    controller,\n  }));\n}\n\ninit.init = true;\n","import debug from 'debug';\n\nimport logoUrl from '@/assets/images/redash_icon_small.png';\nimport frontendVersion from '@/version.json';\nimport template from './app-header.html';\nimport './app-header.css';\n\nconst logger = debug('redash:appHeader');\n\nfunction controller($rootScope, $location, $route, $uibModal, Auth, currentUser, clientConfig, Dashboard, Query) {\n  this.logoUrl = logoUrl;\n  this.basePath = clientConfig.basePath;\n  this.currentUser = currentUser;\n  this.showQueriesMenu = currentUser.hasPermission('view_query');\n  this.showAlertsLink = currentUser.hasPermission('list_alerts');\n  this.showNewQueryMenu = currentUser.hasPermission('create_query');\n  this.showSettingsMenu = currentUser.hasPermission('list_users');\n  this.showDashboardsMenu = currentUser.hasPermission('list_dashboards');\n\n  this.frontendVersion = frontendVersion;\n  this.backendVersion = clientConfig.version;\n  this.newVersionAvailable = clientConfig.newVersionAvailable && currentUser.isAdmin;\n\n  this.reload = () => {\n    logger('Reloading dashboards and queries.');\n    Dashboard.favorites().$promise.then((data) => {\n      this.dashboards = data.results;\n    });\n    Query.favorites().$promise.then((data) => {\n      this.queries = data.results;\n    });\n  };\n\n  this.reload();\n\n  $rootScope.$on('reloadFavorites', this.reload);\n\n  this.newDashboard = () => {\n    $uibModal.open({\n      component: 'editDashboardDialog',\n      resolve: {\n        dashboard: () => ({ name: null, layout: null }),\n      },\n    });\n  };\n\n  this.searchQueries = () => {\n    $location.path('/queries').search({ q: this.searchTerm });\n    $route.reload();\n  };\n\n  this.logout = () => {\n    Auth.logout();\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.component('appHeader', {\n    template,\n    controller,\n  });\n}\n\ninit.init = true;\n","import debug from 'debug';\nimport PromiseRejectionError from '@/lib/promise-rejection-error';\nimport { ErrorHandler } from './error-handler';\nimport template from './template.html';\n\nconst logger = debug('redash:app-view');\n\nconst handler = new ErrorHandler();\n\nconst layouts = {\n  default: {\n    showHeader: true,\n    showFooter: true,\n    bodyClass: false,\n  },\n  fixed: {\n    showHeader: true,\n    showFooter: false,\n    bodyClass: 'fixed-layout',\n  },\n  defaultSignedOut: {\n    showHeader: false,\n    showFooter: false,\n  },\n};\n\nfunction selectLayout(route) {\n  let layout = layouts.default;\n  if (route.layout) {\n    layout = layouts[route.layout] || layouts.default;\n  } else if (!route.authenticated) {\n    layout = layouts.defaultSignedOut;\n  }\n  return layout;\n}\n\nclass AppViewComponent {\n  constructor($rootScope, $route, Auth) {\n    this.$rootScope = $rootScope;\n    this.showHeaderAndFooter = false;\n    this.layout = layouts.defaultSignedOut;\n    this.handler = handler;\n\n    $rootScope.$on('$routeChangeStart', (event, route) => {\n      this.handler.reset();\n\n      // In case we're handling $routeProvider.otherwise call, there will be no\n      // $$route.\n      const $$route = route.$$route || { authenticated: true };\n\n      if ($$route.authenticated) {\n        // For routes that need authentication, check if session is already\n        // loaded, and load it if not.\n        logger('Requested authenticated route: ', route);\n        if (!Auth.isAuthenticated()) {\n          event.preventDefault();\n          // Auth.requireSession resolves only if session loaded\n          Auth.requireSession().then(() => {\n            this.applyLayout($$route);\n            $route.reload();\n          });\n        }\n      }\n    });\n\n    $rootScope.$on('$routeChangeSuccess', (event, route) => {\n      const $$route = route.$$route || { authenticated: true };\n      this.applyLayout($$route);\n    });\n\n    $rootScope.$on('$routeChangeError', (event, current, previous, rejection) => {\n      const $$route = current.$$route || { authenticated: true };\n      this.applyLayout($$route);\n      throw new PromiseRejectionError(rejection);\n    });\n  }\n\n  applyLayout(route) {\n    this.layout = selectLayout(route);\n    this.$rootScope.bodyClass = this.layout.bodyClass;\n  }\n}\n\nexport default function init(ngModule) {\n  ngModule.factory(\n    '$exceptionHandler',\n    () => function exceptionHandler(exception) {\n      handler.process(exception);\n    },\n  );\n\n  ngModule.component('appView', {\n    template,\n    controller: AppViewComponent,\n  });\n}\n\ninit.init = true;\n","function cancelQueryButton() {\n  return {\n    restrict: 'E',\n    scope: {\n      queryId: '=',\n      taskId: '=',\n    },\n    transclude: true,\n    template:\n      '<button class=\"btn btn-default\" ng-disabled=\"inProgress\" ng-click=\"cancelExecution()\"><i class=\"zmdi zmdi-spinner zmdi-hc-spin\" ng-if=\"inProgress\"></i> Cancel</button>',\n    replace: true,\n    controller($scope, $http, currentUser, Events) {\n      $scope.inProgress = false;\n\n      $scope.cancelExecution = () => {\n        $http.delete(`api/jobs/${$scope.taskId}`).success(() => {});\n\n        let queryId = $scope.queryId;\n        if ($scope.queryId === 'adhoc') {\n          queryId = null;\n        }\n\n        Events.record('cancel_execute', 'query', queryId, { admin: true });\n        $scope.inProgress = true;\n      };\n    },\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.directive('cancelQueryButton', cancelQueryButton);\n}\n\ninit.init = true;\n","import { isEmpty } from 'lodash';\nimport { policy } from '@/services/policy';\nimport template from './edit-dashboard-dialog.html';\n\nconst EditDashboardDialog = {\n  bindings: {\n    resolve: '<',\n    close: '&',\n    dismiss: '&',\n  },\n  template,\n  controller($location, $http, Events) {\n    'ngInject';\n\n    this.dashboard = this.resolve.dashboard;\n    this.policy = policy;\n\n    this.isFormValid = () => !isEmpty(this.dashboard.name);\n\n    this.saveDashboard = () => {\n      if (!this.isFormValid()) {\n        return;\n      }\n\n      this.saveInProgress = true;\n\n      $http\n        .post('api/dashboards', {\n          name: this.dashboard.name,\n        })\n        .success((response) => {\n          this.close();\n          $location\n            .path(`/dashboard/${response.slug}`)\n            .search('edit')\n            .replace();\n        });\n      Events.record('create', 'dashboard');\n    };\n  },\n};\n\nexport default function init(ngModule) {\n  ngModule.component('editDashboardDialog', EditDashboardDialog);\n}\n\ninit.init = true;\n","import $ from 'jquery';\nimport _ from 'lodash';\nimport './gridstack';\nimport './gridstack.less';\n\nfunction toggleAutoHeightClass($element, isEnabled) {\n  const className = 'widget-auto-height-enabled';\n  if (isEnabled) {\n    $element.addClass(className);\n  } else {\n    $element.removeClass(className);\n  }\n}\n\nfunction computeAutoHeight($element, grid, node, minHeight, maxHeight) {\n  const wrapper = $element[0];\n  const element = wrapper.querySelector('.scrollbox, .spinner-container');\n\n  let resultHeight = _.isObject(node) ? node.height : 1;\n  if (element) {\n    const childrenBounds = _.chain(element.children)\n      .map((child) => {\n        const bounds = child.getBoundingClientRect();\n        const style = window.getComputedStyle(child);\n        return {\n          top: bounds.top - parseFloat(style.marginTop),\n          bottom: bounds.bottom + parseFloat(style.marginBottom),\n        };\n      })\n      .reduce((result, bounds) => ({\n        top: Math.min(result.top, bounds.top),\n        bottom: Math.max(result.bottom, bounds.bottom),\n      }))\n      .value() || { top: 0, bottom: 0 };\n\n    // Height of controls outside visualization area\n    const bodyWrapper = wrapper.querySelector('.body-container');\n    if (bodyWrapper) {\n      const elementStyle = window.getComputedStyle(element);\n      const controlsHeight = _.chain(bodyWrapper.children)\n        .filter(n => n !== element)\n        .reduce((result, n) => {\n          const b = n.getBoundingClientRect();\n          return result + (b.bottom - b.top);\n        }, 0)\n        .value();\n\n      const additionalHeight = grid.opts.verticalMargin +\n        // include container paddings too\n        parseFloat(elementStyle.paddingTop) + parseFloat(elementStyle.paddingBottom) +\n        // add few pixels for scrollbar (if visible)\n        (element.scrollWidth > element.offsetWidth ? 16 : 0);\n\n      const contentsHeight = childrenBounds.bottom - childrenBounds.top;\n\n      const cellHeight = grid.cellHeight() + grid.opts.verticalMargin;\n      resultHeight = Math.ceil(Math.round(controlsHeight + contentsHeight + additionalHeight) / cellHeight);\n    }\n  }\n\n  // minHeight <= resultHeight <= maxHeight\n  return Math.min(Math.max(minHeight, resultHeight), maxHeight);\n}\n\nfunction gridstack($parse, dashboardGridOptions) {\n  return {\n    restrict: 'A',\n    replace: false,\n    scope: {\n      editing: '=',\n      batchUpdate: '=', // set by directive - for using in wrapper components\n      isOneColumnMode: '=',\n    },\n    controller() {\n      this.$el = null;\n\n      this.resizingWidget = null;\n      this.draggingWidget = null;\n\n      this.grid = () => (this.$el ? this.$el.data('gridstack') : null);\n\n      this._updateStyles = () => {\n        const grid = this.grid();\n        if (grid) {\n          // compute real grid height; `gridstack` sometimes uses only \"dirty\"\n          // items and computes wrong height\n          const gridHeight = _.chain(grid.grid.nodes)\n            .map(node => node.y + node.height)\n            .max()\n            .value();\n          // `_updateStyles` is internal, but grid sometimes \"forgets\"\n          // to rebuild stylesheet, so we need to force it\n          if (_.isObject(grid._styles)) {\n            grid._styles._max = 0; // reset size cache\n          }\n          grid._updateStyles(gridHeight + 10);\n        }\n      };\n\n      this.addWidget = ($element, item, itemId) => {\n        const grid = this.grid();\n        if (grid) {\n          grid.addWidget(\n            $element,\n            item.col, item.row, item.sizeX, item.sizeY,\n            false, // auto position\n            item.minSizeX, item.maxSizeX, item.minSizeY, item.maxSizeY,\n            itemId,\n          );\n          this._updateStyles();\n        }\n      };\n\n      this.updateWidget = ($element, item) => {\n        this.update((grid) => {\n          grid.update($element, item.col, item.row, item.sizeX, item.sizeY);\n          grid.minWidth($element, item.minSizeX);\n          grid.maxWidth($element, item.maxSizeX);\n          grid.minHeight($element, item.minSizeY);\n          grid.maxHeight($element, item.maxSizeY);\n        });\n      };\n\n      this.batchUpdateWidgets = (items) => {\n        // This method is used to update multiple widgets with a single\n        // reflow (for example, restore positions when dashboard editing cancelled).\n        // \"dirty\" part of code: updating grid and DOM nodes directly.\n        // layout reflow is triggered by `batchUpdate`/`commit` calls\n        this.update((grid) => {\n          _.each(grid.grid.nodes, (node) => {\n            const item = items[node.id];\n            if (item) {\n              if (_.isNumber(item.col)) {\n                node.x = parseFloat(item.col);\n                node.el.attr('data-gs-x', node.x);\n                node._dirty = true;\n              }\n\n              if (_.isNumber(item.row)) {\n                node.y = parseFloat(item.row);\n                node.el.attr('data-gs-y', node.y);\n                node._dirty = true;\n              }\n\n              if (_.isNumber(item.sizeX)) {\n                node.width = parseFloat(item.sizeX);\n                node.el.attr('data-gs-width', node.width);\n                node._dirty = true;\n              }\n\n              if (_.isNumber(item.sizeY)) {\n                node.height = parseFloat(item.sizeY);\n                node.el.attr('data-gs-height', node.height);\n                node._dirty = true;\n              }\n\n              if (_.isNumber(item.minSizeX)) {\n                node.minWidth = parseFloat(item.minSizeX);\n                node.el.attr('data-gs-min-width', node.minWidth);\n                node._dirty = true;\n              }\n\n              if (_.isNumber(item.maxSizeX)) {\n                node.maxWidth = parseFloat(item.maxSizeX);\n                node.el.attr('data-gs-max-width', node.maxWidth);\n                node._dirty = true;\n              }\n\n              if (_.isNumber(item.minSizeY)) {\n                node.minHeight = parseFloat(item.minSizeY);\n                node.el.attr('data-gs-min-height', node.minHeight);\n                node._dirty = true;\n              }\n\n              if (_.isNumber(item.maxSizeY)) {\n                node.maxHeight = parseFloat(item.maxSizeY);\n                node.el.attr('data-gs-max-height', node.maxHeight);\n                node._dirty = true;\n              }\n            }\n          });\n        });\n      };\n\n      this.removeWidget = ($element) => {\n        const grid = this.grid();\n        if (grid) {\n          grid.removeWidget($element, false);\n          this._updateStyles();\n        }\n      };\n\n      this.getNodeByElement = (element) => {\n        const grid = this.grid();\n        if (grid && grid.grid) {\n          // This method seems to be internal\n          return grid.grid.getNodeDataByDOMEl($(element));\n        }\n      };\n\n      this.setWidgetId = ($element, id) => {\n        // `gridstack` has no API method to change node id; but since it's not used\n        // by library, we can just update grid and DOM node\n        const node = this.getNodeByElement($element);\n        if (node) {\n          node.id = id;\n          $element.attr('data-gs-id', _.isUndefined(id) ? null : id);\n        }\n      };\n\n      this.setEditing = (value) => {\n        const grid = this.grid();\n        if (grid) {\n          if (value) {\n            grid.enable();\n          } else {\n            grid.disable();\n          }\n        }\n      };\n\n      this.update = (callback) => {\n        const grid = this.grid();\n        if (grid) {\n          grid.batchUpdate();\n          try {\n            if (_.isFunction(callback)) {\n              callback(grid);\n            }\n          } finally {\n            grid.commit();\n            this._updateStyles();\n          }\n        }\n      };\n    },\n    link: ($scope, $element, $attr, controller) => {\n      const batchUpdateAssignable = _.isFunction($parse($attr.batchUpdate).assign);\n      const isOneColumnModeAssignable = _.isFunction($parse($attr.batchUpdate).assign);\n\n      let enablePolling = true;\n\n      $element.addClass('grid-stack');\n      $element.gridstack({\n        auto: false,\n        verticalMargin: dashboardGridOptions.margins,\n        // real row height will be `cellHeight` + `verticalMargin`\n        cellHeight: dashboardGridOptions.rowHeight - dashboardGridOptions.margins,\n        width: dashboardGridOptions.columns, // columns\n        height: 0, // max rows (0 for unlimited)\n        animate: true,\n        float: false,\n        minWidth: dashboardGridOptions.mobileBreakPoint,\n        resizable: {\n          handles: 'e, se, s, sw, w',\n          start: (event, ui) => {\n            controller.resizingWidget = ui.element;\n            $(ui.element).trigger(\n              'gridstack.resize-start',\n              controller.getNodeByElement(ui.element),\n            );\n          },\n          stop: (event, ui) => {\n            controller.resizingWidget = null;\n            $(ui.element).trigger(\n              'gridstack.resize-end',\n              controller.getNodeByElement(ui.element),\n            );\n            controller.update();\n          },\n        },\n        draggable: {\n          start: (event, ui) => {\n            controller.draggingWidget = ui.helper;\n            $(ui.helper).trigger(\n              'gridstack.drag-start',\n              controller.getNodeByElement(ui.helper),\n            );\n          },\n          stop: (event, ui) => {\n            controller.draggingWidget = null;\n            $(ui.helper).trigger(\n              'gridstack.drag-end',\n              controller.getNodeByElement(ui.helper),\n            );\n            controller.update();\n          },\n        },\n      });\n      controller.$el = $element;\n\n      // `change` events sometimes fire too frequently (for example,\n      // on initial rendering when all widgets add themselves to grid, grid\n      // will fire `change` event will _all_ items available at that moment).\n      // Collect changed items, and then delegate event with some delay\n      let changedNodes = {};\n      const triggerChange = _.debounce(() => {\n        _.each(changedNodes, (node) => {\n          if (node.el) {\n            $(node.el).trigger('gridstack.changed', node);\n          }\n        });\n        changedNodes = {};\n      });\n\n      $element.on('change', (event, nodes) => {\n        nodes = _.isArray(nodes) ? nodes : [];\n        _.each(nodes, (node) => {\n          changedNodes[node.id] = node;\n        });\n        triggerChange();\n      });\n\n      $scope.$watch('editing', (value) => {\n        controller.setEditing(!!value);\n      });\n\n      if (batchUpdateAssignable) {\n        $scope.batchUpdate = controller.batchUpdateWidgets;\n      }\n\n      $scope.$on('$destroy', () => {\n        enablePolling = false;\n        controller.$el = null;\n      });\n\n      // `gridstack` does not provide API to detect when one-column mode changes.\n      // Just watch `$element` for specific class\n      function updateOneColumnMode() {\n        const grid = controller.grid();\n        if (grid) {\n          const isOneColumnMode = $element.hasClass(grid.opts.oneColumnModeClass);\n          if ($scope.isOneColumnMode !== isOneColumnMode) {\n            $scope.isOneColumnMode = isOneColumnMode;\n            $scope.$applyAsync();\n          }\n        }\n\n        if (enablePolling) {\n          setTimeout(updateOneColumnMode, 150);\n        }\n      }\n\n      // Start polling only if we can update scope binding; otherwise it\n      // will just waisting CPU time (example: public dashboards don't need it)\n      if (isOneColumnModeAssignable) {\n        updateOneColumnMode();\n      }\n    },\n  };\n}\n\nfunction gridstackItem($timeout) {\n  return {\n    restrict: 'A',\n    replace: false,\n    require: '^gridstack',\n    scope: {\n      gridstackItem: '=',\n      gridstackItemId: '@',\n    },\n    link: ($scope, $element, $attr, controller) => {\n      let enablePolling = true;\n      let heightBeforeResize = null;\n\n      controller.addWidget($element, $scope.gridstackItem, $scope.gridstackItemId);\n\n      // these events are triggered only on user interaction\n      $element.on('gridstack.resize-start', () => {\n        const node = controller.getNodeByElement($element);\n        heightBeforeResize = _.isObject(node) ? node.height : null;\n      });\n      $element.on('gridstack.resize-end', (event, node) => {\n        const item = $scope.gridstackItem;\n        if (\n          _.isObject(node) && _.isObject(item) &&\n          (node.height !== heightBeforeResize) &&\n          (heightBeforeResize !== null)\n        ) {\n          item.autoHeight = false;\n          toggleAutoHeightClass($element, item.autoHeight);\n          $scope.$applyAsync();\n        }\n      });\n\n      $element.on('gridstack.changed', (event, node) => {\n        const item = $scope.gridstackItem;\n        if (_.isObject(node) && _.isObject(item)) {\n          let dirty = false;\n          if (node.x !== item.col) {\n            item.col = node.x;\n            dirty = true;\n          }\n          if (node.y !== item.row) {\n            item.row = node.y;\n            dirty = true;\n          }\n          if (node.width !== item.sizeX) {\n            item.sizeX = node.width;\n            dirty = true;\n          }\n          if (node.height !== item.sizeY) {\n            item.sizeY = node.height;\n            dirty = true;\n          }\n          if (dirty) {\n            $scope.$applyAsync();\n          }\n        }\n      });\n\n      $scope.$watch('gridstackItem.autoHeight', () => {\n        const item = $scope.gridstackItem;\n        if (_.isObject(item)) {\n          toggleAutoHeightClass($element, item.autoHeight);\n        } else {\n          toggleAutoHeightClass($element, false);\n        }\n      });\n\n      $scope.$watch('gridstackItemId', () => {\n        controller.setWidgetId($element, $scope.gridstackItemId);\n      });\n\n      $scope.$on('$destroy', () => {\n        enablePolling = false;\n        $timeout(() => {\n          controller.removeWidget($element);\n        });\n      });\n\n      function update() {\n        if (!controller.resizingWidget && !controller.draggingWidget) {\n          const item = $scope.gridstackItem;\n          const grid = controller.grid();\n          if (grid && _.isObject(item) && item.autoHeight) {\n            const sizeY = computeAutoHeight(\n              $element, grid, controller.getNodeByElement($element),\n              item.minSizeY, item.maxSizeY,\n            );\n            if (sizeY !== item.sizeY) {\n              item.sizeY = sizeY;\n              controller.updateWidget($element, { sizeY });\n              $scope.$applyAsync();\n            }\n          }\n        }\n        if (enablePolling) {\n          setTimeout(update, 150);\n        }\n      }\n\n      update();\n    },\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.directive('gridstack', gridstack);\n  ngModule.directive('gridstackItem', gridstackItem);\n}\n\ninit.init = true;\n","import { filter } from 'lodash';\nimport template from './widget.html';\nimport editTextBoxTemplate from './edit-text-box.html';\nimport widgetDialogTemplate from './widget-dialog.html';\nimport EditParameterMappingsDialog from '@/components/dashboards/EditParameterMappingsDialog';\nimport './widget.less';\nimport './widget-dialog.less';\n\nconst WidgetDialog = {\n  template: widgetDialogTemplate,\n  bindings: {\n    resolve: '<',\n    close: '&',\n    dismiss: '&',\n  },\n  controller() {\n    this.widget = this.resolve.widget;\n  },\n};\n\nconst EditTextBoxComponent = {\n  template: editTextBoxTemplate,\n  bindings: {\n    resolve: '<',\n    close: '&',\n    dismiss: '&',\n  },\n  controller(toastr) {\n    'ngInject';\n\n    this.saveInProgress = false;\n    this.widget = this.resolve.widget;\n    this.saveWidget = () => {\n      this.saveInProgress = true;\n      if (this.widget.new_text !== this.widget.existing_text) {\n        this.widget.text = this.widget.new_text;\n        this.widget\n          .save()\n          .then(() => {\n            this.close();\n          })\n          .catch(() => {\n            toastr.error('Widget can not be updated');\n          })\n          .finally(() => {\n            this.saveInProgress = false;\n          });\n      } else {\n        this.close();\n      }\n    };\n  },\n};\n\nfunction DashboardWidgetCtrl($scope, $location, $uibModal, $window, $rootScope, $timeout, Events, currentUser) {\n  this.canViewQuery = currentUser.hasPermission('view_query');\n\n  this.editTextBox = () => {\n    this.widget.existing_text = this.widget.text;\n    this.widget.new_text = this.widget.text;\n    $uibModal.open({\n      component: 'editTextBox',\n      resolve: {\n        widget: this.widget,\n      },\n    });\n  };\n\n  this.expandVisualization = () => {\n    $uibModal.open({\n      component: 'widgetDialog',\n      resolve: {\n        widget: this.widget,\n      },\n      size: 'lg',\n    });\n  };\n\n  this.hasParameters = () => this.widget.query.getParametersDefs().length > 0;\n\n  this.editParameterMappings = () => {\n    EditParameterMappingsDialog.showModal({\n      dashboard: this.dashboard,\n      widget: this.widget,\n    }).result.then((valuesChanged) => {\n      this.localParameters = null;\n\n      // refresh widget if any parameter value has been updated\n      if (valuesChanged) {\n        $timeout(() => this.refresh());\n      }\n      $scope.$applyAsync();\n      $rootScope.$broadcast('dashboard.update-parameters');\n    });\n  };\n\n  this.localParametersDefs = () => {\n    if (!this.localParameters) {\n      this.localParameters = filter(\n        this.widget.getParametersDefs(),\n        param => !this.widget.isStaticParam(param),\n      );\n    }\n    return this.localParameters;\n  };\n\n  this.deleteWidget = () => {\n    if (!$window.confirm(`Are you sure you want to remove \"${this.widget.getName()}\" from the dashboard?`)) {\n      return;\n    }\n\n    this.widget.delete().then(() => {\n      if (this.deleted) {\n        this.deleted({});\n      }\n    });\n  };\n\n  Events.record('view', 'widget', this.widget.id);\n\n  this.load = (refresh = false) => {\n    const maxAge = $location.search().maxAge;\n    this.widget.load(refresh, maxAge);\n  };\n\n  this.refresh = () => {\n    this.load(true);\n  };\n\n  if (this.widget.visualization) {\n    Events.record('view', 'query', this.widget.visualization.query.id, { dashboard: true });\n    Events.record('view', 'visualization', this.widget.visualization.id, { dashboard: true });\n\n    this.type = 'visualization';\n    this.load();\n  } else if (this.widget.restricted) {\n    this.type = 'restricted';\n  } else {\n    this.type = 'textbox';\n  }\n}\n\nexport default function init(ngModule) {\n  ngModule.component('editTextBox', EditTextBoxComponent);\n  ngModule.component('widgetDialog', WidgetDialog);\n  ngModule.component('dashboardWidget', {\n    template,\n    controller: DashboardWidgetCtrl,\n    bindings: {\n      widget: '<',\n      public: '<',\n      dashboard: '<',\n      deleted: '&onDelete',\n    },\n  });\n}\n\ninit.init = true;\n","import { includes, identity } from 'lodash';\nimport { renderDefault, renderImage, renderLink } from './utils';\nimport template from './template.html';\n\nconst renderFunctions = {\n  image: renderImage,\n  link: renderLink,\n};\n\nexport default function init(ngModule) {\n  ngModule.directive('dynamicTableDefaultCell', $sanitize => ({\n    template,\n    restrict: 'E',\n    replace: true,\n    scope: {\n      column: '=',\n      row: '=',\n    },\n    link: ($scope) => {\n      // `dynamicTable` will recreate all table cells if some columns changed.\n      // This means two things:\n      // 1. `column` object will be always \"fresh\" - no need to watch it.\n      // 2. we will always have a column object already available in `link` function.\n      // Note that `row` may change during this directive's lifetime.\n\n      if ($scope.column.displayAs === 'string') {\n        $scope.allowHTML = $scope.column.allowHTML;\n      } else {\n        $scope.allowHTML = includes(['image', 'link'], $scope.column.displayAs);\n      }\n\n      const sanitize = $scope.allowHTML ? $sanitize : identity;\n\n      const renderValue = renderFunctions[$scope.column.displayAs] || renderDefault;\n\n      $scope.value = sanitize(renderValue($scope.column, $scope.row));\n\n      $scope.$watch('row', (newValue, oldValue) => {\n        if (newValue !== oldValue) {\n          $scope.value = sanitize(renderValue($scope.column, $scope.row));\n        }\n      });\n    },\n  }));\n}\n\ninit.init = true;\n","import { isFunction } from 'lodash';\n\nexport default function init(ngModule) {\n  ngModule.directive('dynamicTableRow', () => ({\n    template: '',\n    // AngularJS has a strange love to table-related tags, therefore\n    // we should use this directive as an attribute\n    restrict: 'A',\n    replace: false,\n    scope: {\n      columns: '=',\n      row: '=',\n      render: '=',\n    },\n    link: ($scope, $element) => {\n      $scope.$watch('render', () => {\n        if (isFunction($scope.render)) {\n          $scope.render($scope, (clonedElement) => {\n            $element\n              .empty()\n              .append(clonedElement)\n              .append('<td></td>');\n          });\n        }\n      });\n    },\n  }));\n}\n\ninit.init = true;\n","import { find, filter, map, each } from 'lodash';\nimport template from './dynamic-table.html';\nimport './dynamic-table.less';\n\nfunction isNullOrUndefined(v) {\n  return v === null || v === undefined;\n}\n\nfunction filterRows(rows, searchTerm, columns) {\n  if (searchTerm === '' || columns.length === 0 || rows.length === 0) {\n    return rows;\n  }\n  searchTerm = searchTerm.toUpperCase();\n  return filter(rows, (row) => {\n    for (let i = 0; i < columns.length; i += 1) {\n      const columnName = columns[i].name;\n      const formatFunction = columns[i].formatFunction;\n      if (row[columnName] !== undefined) {\n        let value = formatFunction ? formatFunction(row[columnName]) : row[columnName];\n        value = ('' + value).toUpperCase();\n        if (value.indexOf(searchTerm) >= 0) {\n          return true;\n        }\n      }\n    }\n    return false;\n  });\n}\n\nfunction sortRows(rows, orderBy) {\n  if (orderBy.length === 0 || rows.length === 0) {\n    return rows;\n  }\n  // Create a copy of array before sorting, because .sort() will modify original array\n  return [].concat(rows).sort((a, b) => {\n    let va;\n    let vb;\n    for (let i = 0; i < orderBy.length; i += 1) {\n      va = a[orderBy[i].name];\n      vb = b[orderBy[i].name];\n      if (isNullOrUndefined(va) || va < vb) {\n        // if a < b - we should return -1, but take in account direction\n        return orderBy[i].direction * -1;\n      }\n      if (va > vb || isNullOrUndefined(vb)) {\n        // if a > b - we should return 1, but take in account direction\n        return orderBy[i].direction * 1;\n      }\n    }\n    return 0;\n  });\n}\n\nfunction validateItemsPerPage(value, defaultValue) {\n  defaultValue = defaultValue || 25;\n  value = parseInt(value, 10) || defaultValue;\n  return value > 0 ? value : defaultValue;\n}\n\n// Optimized rendering\n// Instead of using two nested `ng-repeat`s by rows and columns,\n// we'll create a template for row (and update it when columns changed),\n// compile it, and then use `ng-repeat` by rows and bind this template\n// to each row's scope. The goal is to reduce amount of scopes and watchers\n// from `count(rows) * count(cols)` to `count(rows)`. The major disadvantage\n// is that cell markup should be specified here instead of template.\nfunction createRowRenderTemplate(columns, $compile) {\n  const rowTemplate = map(columns, (column, index) => {\n    switch (column.displayAs) {\n      case 'json':\n        return `\n          <dynamic-table-json-cell column=\"columns[${index}]\" \n            value=\"row[columns[${index}].name]\"></dynamic-table-json-cell>\n        `;\n      default:\n        return `\n          <dynamic-table-default-cell column=\"columns[${index}]\" \n            row=\"row\"></dynamic-table-default-cell>\n        `;\n    }\n  }).join('');\n  return $compile(rowTemplate);\n}\n\nclass DynamicTablePaginatorAdapter {\n  constructor($ctrl) {\n    this.$ctrl = $ctrl;\n  }\n\n  get page() {\n    return this.$ctrl.currentPage;\n  }\n\n  get itemsPerPage() {\n    return this.$ctrl.itemsPerPage;\n  }\n\n  get totalCount() {\n    return this.$ctrl.preparedRows.length;\n  }\n\n  setPage(page) {\n    this.$ctrl.onPageChanged(page);\n  }\n}\n\nfunction DynamicTable($scope, $compile) {\n  'ngInject';\n\n  this.paginatorAdapter = new DynamicTablePaginatorAdapter(this);\n\n  this.itemsPerPage = validateItemsPerPage(this.itemsPerPage);\n  this.currentPage = 1;\n  this.searchTerm = '';\n\n  this.columns = [];\n  this.rows = [];\n  this.preparedRows = [];\n  this.rowsToDisplay = [];\n  this.orderBy = [];\n  this.orderByColumnsIndex = {};\n  this.orderByColumnsDirection = {};\n\n  this.searchColumns = [];\n\n  const updateOrderByColumnsInfo = () => {\n    this.orderByColumnsIndex = {};\n    this.orderByColumnsDirection = {};\n    each(this.orderBy, (column, index) => {\n      this.orderByColumnsIndex[column.name] = index + 1;\n      this.orderByColumnsDirection[column.name] = column.direction;\n    });\n  };\n\n  const updateRowsToDisplay = (performFilterAndSort) => {\n    if (performFilterAndSort) {\n      this.preparedRows = sortRows(filterRows(this.rows, this.searchTerm, this.searchColumns), this.orderBy);\n    }\n    const first = (this.currentPage - 1) * this.itemsPerPage;\n    const last = first + this.itemsPerPage;\n    this.rowsToDisplay = this.preparedRows.slice(first, last);\n  };\n\n  const setColumns = (columns) => {\n    // 1. reset sorting\n    // 2. reset current page\n    // 3. reset search\n    // 4. get columns for search\n    // 5. update row rendering template\n    // 6. prepare rows\n\n    this.columns = columns;\n    updateOrderByColumnsInfo();\n    this.orderBy = [];\n    this.currentPage = 1;\n    this.searchTerm = '';\n    this.searchColumns = filter(this.columns, 'allowSearch');\n    this.renderSingleRow = createRowRenderTemplate(this.columns, $compile);\n    updateRowsToDisplay(true);\n  };\n\n  const setRows = (rows) => {\n    // 1. reset current page\n    // 2. prepare rows\n\n    this.rows = rows;\n    this.currentPage = 1;\n    updateRowsToDisplay(true);\n  };\n\n  this.renderSingleRow = null;\n\n  this.onColumnHeaderClick = ($event, column) => {\n    const orderBy = find(this.orderBy, item => item.name === column.name);\n    if (orderBy) {\n      // ASC -> DESC -> off\n      if (orderBy.direction === 1) {\n        orderBy.direction = -1;\n        if (!$event.shiftKey) {\n          this.orderBy = [orderBy];\n        }\n      } else {\n        if ($event.shiftKey) {\n          this.orderBy = filter(this.orderBy, item => item.name !== column.name);\n        } else {\n          this.orderBy = [];\n        }\n      }\n    } else {\n      if (!$event.shiftKey) {\n        this.orderBy = [];\n      }\n      this.orderBy.push({\n        name: column.name,\n        direction: 1,\n      });\n    }\n    updateOrderByColumnsInfo();\n    updateRowsToDisplay(true);\n\n    // Remove text selection - may occur accidentally\n    if ($event.shiftKey) {\n      document.getSelection().removeAllRanges();\n    }\n  };\n\n  this.onPageChanged = (page) => {\n    this.currentPage = page;\n    updateRowsToDisplay(false);\n    $scope.$applyAsync();\n  };\n\n  this.onSearchTermChanged = () => {\n    this.preparedRows = sortRows(filterRows(this.rows, this.searchTerm, this.searchColumns), this.orderBy);\n    this.currentPage = 1;\n    updateRowsToDisplay(true);\n  };\n\n  this.$onChanges = (changes) => {\n    if (changes.columns) {\n      if (changes.rows) {\n        // if rows also changed - temporarily set if to empty array - to avoid\n        // filtering and sorting\n        this.rows = [];\n      }\n      setColumns(changes.columns.currentValue);\n    }\n\n    if (changes.rows) {\n      setRows(changes.rows.currentValue);\n    }\n\n    if (changes.itemsPerPage) {\n      this.itemsPerPage = validateItemsPerPage(this.itemsPerPage);\n      this.currentPage = 1;\n      updateRowsToDisplay(false);\n    }\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.component('dynamicTable', {\n    template,\n    controller: DynamicTable,\n    bindings: {\n      rows: '<',\n      columns: '<',\n      itemsPerPage: '<',\n    },\n  });\n}\n\ninit.init = true;\n","import { isUndefined, isString } from 'lodash';\nimport renderJsonView from './json-view-interactive';\nimport template from './template.html';\n\nfunction parseValue(value, clientConfig) {\n  if (isString(value) && value.length <= clientConfig.tableCellMaxJSONSize) {\n    try {\n      return JSON.parse(value);\n    } catch (e) {\n      return undefined;\n    }\n  }\n}\n\nfunction DynamicTableJsonCell(clientConfig) {\n  return {\n    template,\n    restrict: 'E',\n    replace: true,\n    scope: {\n      column: '=',\n      value: '=',\n    },\n    link: ($scope, $element) => {\n      const container = $element.find('.json-cell-valid');\n\n      $scope.isValid = false;\n      $scope.parsedValue = null;\n\n      $scope.$watch('value', () => {\n        $scope.parsedValue = parseValue($scope.value, clientConfig);\n        $scope.isValid = !isUndefined($scope.parsedValue);\n        container.empty();\n        renderJsonView(container, $scope.parsedValue);\n      });\n    },\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.directive('dynamicTableJsonCell', DynamicTableJsonCell);\n}\n\ninit.init = true;\n","import template from './filters.html';\n\nconst FiltersComponent = {\n  template,\n  bindings: {\n    onChange: '&',\n    filters: '<',\n  },\n  controller() {\n    'ngInject';\n\n    this.filterChangeListener = (filter, modal) => {\n      this.onChange({ filter, $modal: modal });\n    };\n\n    this.itemGroup = (item) => {\n      if (item === '*' || item === '-') {\n        return '';\n      }\n\n      return 'Values';\n    };\n  },\n};\n\nexport default function init(ngModule) {\n  ngModule.component('filters', FiltersComponent);\n}\n\ninit.init = true;\n","const Overlay = {\n  template: `\n  <div>\n    <div class=\"overlay\"></div>\n    <div style=\"width: 100%; position:absolute; top:50px; z-index:2000\">\n      <div class=\"well well-lg\" style=\"width: 70%; margin: auto;\" ng-transclude>\n      </div>\n    </div>\n  </div>\n  `,\n  transclude: true,\n};\n\nexport default function init(ngModule) {\n  ngModule.component('overlay', Overlay);\n}\n\ninit.init = true;\n","import { extend } from 'lodash';\nimport template from './parameters.html';\nimport EditParameterSettingsDialog from './EditParameterSettingsDialog';\n\nfunction ParametersDirective($location) {\n  return {\n    restrict: 'E',\n    transclude: true,\n    scope: {\n      parameters: '=',\n      syncValues: '=?',\n      editable: '=?',\n      changed: '&onChange',\n      onUpdated: '=',\n    },\n    template,\n    link(scope) {\n      // is this the correct location for this logic?\n      if (scope.syncValues !== false) {\n        scope.$watch(\n          'parameters',\n          () => {\n            if (scope.changed) {\n              scope.changed({});\n            }\n            const params = extend({}, $location.search());\n            scope.parameters.forEach((param) => {\n              extend(params, param.toUrlParams());\n            });\n            $location.search(params);\n          },\n          true,\n        );\n      }\n\n      scope.showParameterSettings = (parameter, index) => {\n        EditParameterSettingsDialog\n          .showModal({ parameter })\n          .result.then((updated) => {\n            scope.parameters[index] = extend(parameter, updated);\n            scope.onUpdated();\n          });\n      };\n    },\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.directive('parameters', ParametersDirective);\n}\n\ninit.init = true;\n","import { includes, each, filter } from 'lodash';\nimport template from './permissions-editor.html';\n\nconst PermissionsEditorComponent = {\n  template,\n  bindings: {\n    resolve: '<',\n    close: '&',\n    dismiss: '&',\n  },\n  controller($http, User, toastr) {\n    'ngInject';\n\n    this.grantees = [];\n    this.newGrantees = {};\n    this.aclUrl = this.resolve.aclUrl.url;\n    this.owner = this.resolve.owner;\n\n    // List users that are granted permissions\n    const loadGrantees = () => {\n      $http.get(this.aclUrl).success((result) => {\n        this.grantees = [];\n\n        each(result, (grantees, accessType) => {\n          grantees.forEach((grantee) => {\n            grantee.access_type = accessType;\n            this.grantees.push(grantee);\n          });\n        });\n      });\n    };\n\n    loadGrantees();\n\n    // Search for user\n    this.findUser = (search) => {\n      if (search === '') {\n        this.foundUsers = [];\n        return;\n      }\n\n      User.query({ q: search }, (response) => {\n        const users = filter(response.results, u => u.id !== this.owner.id);\n        const existingIds = this.grantees.map(m => m.id);\n        users.forEach((user) => {\n          user.alreadyGrantee = includes(existingIds, user.id);\n        });\n        this.foundUsers = users;\n      });\n    };\n\n    // Add new user to grantees list\n    this.addGrantee = (user) => {\n      this.newGrantees = {};\n      const body = { access_type: 'modify', user_id: user.id };\n      $http.post(this.aclUrl, body).success(() => {\n        user.alreadyGrantee = true;\n        loadGrantees();\n      }).catch((error) => {\n        if (error.status === 403) {\n          toastr.error('You cannot add a user to this dashboard. Ask the dashboard owner to grant them permissions.');\n        } else {\n          toastr.error('Something went wrong.');\n        }\n      });\n    };\n\n    // Remove user from grantees list\n    this.removeGrantee = (user) => {\n      const body = { access_type: 'modify', user_id: user.id };\n      $http({\n        url: this.aclUrl,\n        method: 'DELETE',\n        data: body,\n        headers: { 'Content-Type': 'application/json' },\n      }).success(() => {\n        this.grantees = this.grantees.filter(m => m !== user);\n\n        if (this.foundUsers) {\n          this.foundUsers.forEach((u) => {\n            if (u.id === user.id) {\n              u.alreadyGrantee = false;\n            }\n          });\n        }\n      });\n    };\n  },\n};\n\nexport default function init(ngModule) {\n  ngModule.component('permissionsEditor', PermissionsEditorComponent);\n}\n\ninit.init = true;\n","function alertUnsavedChanges($window) {\n  return {\n    restrict: 'E',\n    replace: true,\n    scope: {\n      isDirty: '=',\n    },\n    link($scope) {\n      const unloadMessage = 'You will lose your changes if you leave';\n      const confirmMessage = `${unloadMessage}\\n\\nAre you sure you want to leave this page?`;\n      // store original handler (if any)\n      const _onbeforeunload = $window.onbeforeunload;\n\n      $window.onbeforeunload = function onbeforeunload() {\n        return $scope.isDirty ? unloadMessage : null;\n      };\n\n      $scope.$on('$locationChangeStart', (event, next, current) => {\n        if (next.split('?')[0] === current.split('?')[0] || next.split('#')[0] === current.split('#')[0]) {\n          return;\n        }\n\n        if ($scope.isDirty && !$window.confirm(confirmMessage)) {\n          event.preventDefault();\n        }\n      });\n\n      $scope.$on('$destroy', () => {\n        $window.onbeforeunload = _onbeforeunload;\n      });\n    },\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.directive('alertUnsavedChanges', alertUnsavedChanges);\n}\n\ninit.init = true;\n","const ApiKeyDialog = {\n  template: `<div class=\"modal-header\">\n    <button type=\"button\" class=\"close\" aria-label=\"Close\" ng-click=\"$ctrl.close()\"><span aria-hidden=\"true\">&times;</span></button>\n</div>\n<div class=\"modal-body\">\n    <h5>API Key</h5>\n    <pre>{{$ctrl.apiKey}}</pre>\n\n    <h5>Example API Calls:</h5>\n\n    <div>\n        Results in CSV format:\n\n        <pre>{{$ctrl.csvUrl}}</pre>\n\n        Results in JSON format:\n\n        <pre>{{$ctrl.jsonUrl}}</pre>\n    </div>\n</div>`,\n  controller(clientConfig) {\n    'ngInject';\n\n    this.apiKey = this.resolve.query.api_key;\n    this.csvUrl = `${clientConfig.basePath}api/queries/${this.resolve.query.id}/results.csv?api_key=${this.apiKey}`;\n    this.jsonUrl = `${clientConfig.basePath}api/queries/${this.resolve.query.id}/results.json?api_key=${this.apiKey}`;\n  },\n  bindings: {\n    resolve: '<',\n    close: '&',\n    dismiss: '&',\n  },\n};\n\nexport default function init(ngModule) {\n  ngModule.component('apiKeyDialog', ApiKeyDialog);\n}\n\ninit.init = true;\n","import template from './embed-code-dialog.html';\n\nconst EmbedCodeDialog = {\n  controller(clientConfig) {\n    'ngInject';\n\n    this.query = this.resolve.query;\n    this.visualization = this.resolve.visualization;\n\n    this.embedUrl = `${clientConfig.basePath}embed/query/${this.query.id}/visualization/${\n      this.visualization.id\n    }?api_key=${this.query.api_key}`;\n    if (window.snapshotUrlBuilder) {\n      this.snapshotUrl = window.snapshotUrlBuilder(this.query, this.visualization);\n    }\n  },\n  bindings: {\n    resolve: '<',\n    close: '&',\n    dismiss: '&',\n  },\n  template,\n};\n\nexport default function init(ngModule) {\n  ngModule.component('embedCodeDialog', EmbedCodeDialog);\n}\n\ninit.init = true;\n","function queryResultLink() {\n  return {\n    restrict: 'A',\n    link(scope, element, attrs) {\n      const fileType = attrs.fileType ? attrs.fileType : 'csv';\n      scope.$watch('queryResult && queryResult.getData() && query.name', (data) => {\n        if (!data) {\n          return;\n        }\n\n        if (scope.queryResult.getId() == null) {\n          element.attr('href', '');\n        } else {\n          let url;\n          if (scope.query.id) {\n            url = `api/queries/${scope.query.id}/results/${scope.queryResult.getId()}.${fileType}${scope.embed\n              ? `?api_key=${scope.apiKey}`\n              : ''}`;\n          } else {\n            url = `api/query_results/${scope.queryResult.getId()}.${fileType}`;\n          }\n          element.attr('href', url);\n        }\n      });\n    },\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.directive('queryResultLink', queryResultLink);\n}\n\ninit.init = true;\n","import template from './schema-browser.html';\n\nfunction SchemaBrowserCtrl($rootScope, $scope) {\n  'ngInject';\n\n  this.showTable = (table) => {\n    table.collapsed = !table.collapsed;\n    $scope.$broadcast('vsRepeatTrigger');\n  };\n\n  this.getSize = (table) => {\n    let size = 22;\n\n    if (!table.collapsed) {\n      size += 18 * table.columns.length;\n    }\n\n    return size;\n  };\n\n  this.isEmpty = function isEmpty() {\n    return this.schema === undefined || this.schema.length === 0;\n  };\n\n  this.itemSelected = ($event, hierarchy) => {\n    $rootScope.$broadcast('query-editor.command', 'paste', hierarchy.join('.'));\n    $event.preventDefault();\n    $event.stopPropagation();\n  };\n\n  this.splitFilter = (filter) => {\n    filter = filter.replace(/ {2}/g, ' ');\n    if (filter.includes(' ')) {\n      const splitTheFilter = filter.split(' ');\n      this.schemaFilterObject = { name: splitTheFilter[0], columns: splitTheFilter[1] };\n      this.schemaFilterColumn = splitTheFilter[1];\n    } else {\n      this.schemaFilterObject = filter;\n      this.schemaFilterColumn = '';\n    }\n  };\n}\n\nconst SchemaBrowser = {\n  bindings: {\n    schema: '<',\n    onRefresh: '&',\n  },\n  controller: SchemaBrowserCtrl,\n  template,\n};\n\nexport default function init(ngModule) {\n  ngModule.component('schemaBrowser', SchemaBrowser);\n}\n\ninit.init = true;\n","import { find } from 'lodash';\nimport logoUrl from '@/assets/images/redash_icon_small.png';\nimport template from './visualization-embed.html';\n\nconst VisualizationEmbed = {\n  template,\n  bindings: {\n    data: '<',\n  },\n  controller($routeParams, Query, QueryResult) {\n    'ngInject';\n\n    document.querySelector('body').classList.add('headless');\n    const visualizationId = parseInt($routeParams.visualizationId, 10);\n    this.showQueryDescription = $routeParams.showDescription;\n    this.apiKey = $routeParams.api_key;\n    this.logoUrl = logoUrl;\n    this.query = new Query(this.data[0]);\n    this.queryResult = new QueryResult(this.data[1]);\n    this.visualization =\n      find(this.query.visualizations, visualization => visualization.id === visualizationId);\n  },\n};\n\nexport default function init(ngModule) {\n  ngModule.component('visualizationEmbed', VisualizationEmbed);\n\n  function session($http, $route, Auth) {\n    'ngInject';\n\n    const apiKey = $route.current.params.api_key;\n    Auth.setApiKey(apiKey);\n    return Auth.loadConfig();\n  }\n\n  function loadData($http, $route, $q, Auth) {\n    return session($http, $route, Auth).then(() => {\n      const queryId = $route.current.params.queryId;\n      const query = $http.get(`api/queries/${queryId}`).then(response => response.data);\n      const queryResult = $http.get(`api/queries/${queryId}/results.json${location.search}`).then(response => response.data);\n      return $q.all([query, queryResult]);\n    });\n  }\n\n  ngModule.config(($routeProvider) => {\n    $routeProvider.when('/embed/query/:queryId/visualization/:visualizationId', {\n      template: '<visualization-embed data=\"$resolve.data\"></visualization-embed>',\n      resolve: {\n        data: loadData,\n      },\n    });\n  });\n}\n\ninit.init = true;\n","export default function init(ngModule) {\n  ngModule.component('queryLink', {\n    bindings: {\n      query: '<',\n      visualization: '<',\n      readonly: '<',\n    },\n    template: `\n      <a ng-href=\"{{$ctrl.readonly ? undefined : $ctrl.getUrl()}}\" class=\"query-link\">\n        <visualization-name visualization=\"$ctrl.visualization\"/>\n        <span>{{$ctrl.query.name}}</span>\n      </a>\n    `,\n    controller() {\n      this.getUrl = () => {\n        let hash = null;\n        if (this.visualization) {\n          if (this.visualization.type === 'TABLE') {\n            // link to hard-coded table tab instead of the (hidden) visualization tab\n            hash = 'table';\n          } else {\n            hash = this.visualization.id;\n          }\n        }\n\n        return this.query.getUrl(false, hash);\n      };\n    },\n  });\n}\n\ninit.init = true;\n","function rdTab($location) {\n  return {\n    restrict: 'E',\n    scope: {\n      tabId: '@',\n      name: '@',\n      basePath: '=?',\n    },\n    transclude: true,\n    template: '<li class=\"rd-tab\" ng-class=\"{active: tabId==selectedTab}\"><a href=\"{{basePath}}#{{tabId}}\">{{name}}<span ng-transclude></span></a></li>',\n    replace: true,\n    link(scope) {\n      scope.basePath = scope.basePath || $location.path().substring(1);\n      scope.$watch(\n        () => scope.$parent.selectedTab,\n        (tab) => { scope.selectedTab = tab; },\n      );\n    },\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.directive('rdTab', rdTab);\n}\n\ninit.init = true;\n","import moment from 'moment';\n\nfunction rdTimer() {\n  return {\n    restrict: 'E',\n    scope: { timestamp: '=' },\n    template: '{{currentTime}}',\n    controller($scope) {\n      $scope.currentTime = '00:00:00';\n\n      // We're using setInterval directly instead of $timeout, to avoid using $apply, to\n      // prevent the digest loop being run every second.\n      let currentTimer = setInterval(() => {\n        $scope.currentTime = moment(moment() - moment($scope.timestamp)).utc().format('HH:mm:ss');\n        $scope.$digest();\n      }, 1000);\n\n      $scope.$on('$destroy', () => {\n        if (currentTimer) {\n          clearInterval(currentTimer);\n          currentTimer = null;\n        }\n      });\n    },\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.directive('rdTimer', rdTimer);\n}\n\ninit.init = true;\n","import settingsMenu from '@/services/settingsMenu';\nimport template from './settings-screen.html';\n\nexport default function init(ngModule) {\n  ngModule.component('settingsScreen', {\n    transclude: true,\n    template,\n    controller($location, currentUser) {\n      this.settingsMenu = settingsMenu;\n      this.isActive = menuItem => menuItem.isActive($location.path());\n      this.isAvailable = permission => permission === undefined || currentUser.hasPermission(permission);\n    },\n  });\n}\n\ninit.init = true;\n","function controller($location) {\n  this.tabs.forEach((tab) => {\n    if (tab.isActive) {\n      tab.active = tab.isActive($location.path());\n    } else {\n      tab.active = $location.path().startsWith(`/${tab.path}`);\n    }\n  });\n}\n\nexport default function init(ngModule) {\n  ngModule.component('tabNav', {\n    template: '<ul class=\"tab-nav bg-white\">' +\n                '<li ng-repeat=\"tab in $ctrl.tabs\" ng-class=\"{\\'active\\': tab.active }\"><a ng-href=\"{{tab.path}}\">{{tab.name}}</a></li>' +\n              '</ul>',\n    controller,\n    bindings: {\n      tabs: '<',\n    },\n  });\n}\n\ninit.init = true;\n","import template from './type-picker.html';\n\nexport default function init(ngModule) {\n  ngModule.component('typePicker', {\n    template,\n    bindings: {\n      types: '<',\n      title: '@',\n      imgRoot: '@',\n      onTypeSelect: '=',\n    },\n    controller() {\n      this.filter = {};\n    },\n  });\n}\n\ninit.init = true;\n","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 1172;","var map = {\n\t\"./alert-dialog.js\": 1174,\n\t\"./alert-subscription.js\": 1175,\n\t\"./alert.js\": 235,\n\t\"./auth.js\": 13,\n\t\"./dashboard.js\": 172,\n\t\"./data-source.js\": 170,\n\t\"./destination.js\": 1176,\n\t\"./events.js\": 1177,\n\t\"./getTags.js\": 164,\n\t\"./group.js\": 55,\n\t\"./keyboard-shortcuts.js\": 407,\n\t\"./navigateTo.js\": 129,\n\t\"./ng.js\": 11,\n\t\"./notifications.js\": 236,\n\t\"./offline-listener.js\": 1178,\n\t\"./organizationStatus.js\": 130,\n\t\"./policy/DefaultPolicy.js\": 416,\n\t\"./policy/index.js\": 82,\n\t\"./query-result.js\": 426,\n\t\"./query-snippet.js\": 406,\n\t\"./query.js\": 47,\n\t\"./recordEvent.js\": 127,\n\t\"./settingsMenu.js\": 70,\n\t\"./user.js\": 45,\n\t\"./utils.js\": 231,\n\t\"./widget.js\": 91\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 1173;","export let AlertDialog = null; // eslint-disable-line import/no-mutable-exports\n\nconst AlertDialogComponent = {\n  template: `\n<div class=\"modal-header\">\n    <h4 class=\"modal-title\" ng-if=\"$ctrl.title\">{{$ctrl.title}}</h4>\n</div>\n<div class=\"modal-body\">\n  <p ng-bind-html=\"$ctrl.message\"></p>\n</div>\n<div class=\"modal-footer\">\n  <button class=\"btn btn-default\" ng-click=\"$ctrl.dismiss()\">Cancel</button>\n  <button class=\"btn\" ng-class=\"$ctrl.confirm.class\" ng-click=\"$ctrl.close()\" ng-if=\"$ctrl.confirm.show\">{{$ctrl.confirm.title}}</button>\n</div>\n  `,\n  bindings: {\n    close: '&',\n    dismiss: '&',\n    resolve: '<',\n  },\n  controller() {\n    this.title = this.resolve.title;\n    this.message = this.resolve.message;\n    this.confirm = Object.assign({}, { class: 'btn-sucess', show: true, title: 'OK' }, this.resolve.confirm);\n  },\n};\n\nfunction AlertDialogService($uibModal) {\n  return {\n    open(title, message, confirm) {\n      return $uibModal.open({\n        component: 'alertDialog',\n        resolve: {\n          title: () => title,\n          message: () => message,\n          confirm: () => confirm,\n        },\n      }).result;\n    },\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.component('alertDialog', AlertDialogComponent);\n  ngModule.factory('AlertDialog', AlertDialogService);\n\n  ngModule.run(($injector) => {\n    AlertDialog = $injector.get('AlertDialog');\n  });\n}\n\ninit.init = true;\n","export let AlertSubscription = null; // eslint-disable-line import/no-mutable-exports\n\nfunction AlertSubscriptionService($resource) {\n  return $resource('api/alerts/:alertId/subscriptions/:subscriberId', { alertId: '@alert_id', subscriberId: '@id' });\n}\n\nexport default function init(ngModule) {\n  ngModule.factory('AlertSubscription', AlertSubscriptionService);\n\n  ngModule.run(($injector) => {\n    AlertSubscription = $injector.get('AlertSubscription');\n  });\n}\n\ninit.init = true;\n","export let Destination = null; // eslint-disable-line import/no-mutable-exports\n\nfunction DestinationService($resource) {\n  const actions = {\n    get: { method: 'GET', cache: false, isArray: false },\n    query: { method: 'GET', cache: false, isArray: true },\n  };\n  return $resource('api/destinations/:id', { id: '@id' }, actions);\n}\n\nexport default function init(ngModule) {\n  ngModule.factory('Destination', DestinationService);\n\n  ngModule.run(($injector) => {\n    Destination = $injector.get('Destination');\n  });\n}\n\ninit.init = true;\n","import recordEvent from '@/services/recordEvent';\n\nfunction Events() {\n  this.record = recordEvent;\n}\n\nexport default function init(ngModule) {\n  ngModule.service('Events', Events);\n}\n\ninit.init = true;\n","import { toastr } from '@/services/ng';\n\nfunction addOnlineListener(toast) {\n  function onlineStateHandler() {\n    toastr.remove(toast.toastId);\n    window.removeEventListener('online', onlineStateHandler);\n  }\n  window.addEventListener('online', onlineStateHandler);\n}\n\nexport default function init(ngModule) {\n  ngModule.run(() => {\n    window.addEventListener('offline', () => {\n      const toast = toastr.warning('<div>Please check your Internet connection.</div>', '', {\n        allowHtml: true,\n        autoDismiss: false,\n        timeOut: false,\n        tapToDismiss: true,\n      });\n      addOnlineListener(toast);\n    });\n  });\n}\n\ninit.init = true;\n","var map = {\n\t\"./box-plot/index.js\": 1443,\n\t\"./chart/index.js\": 1182,\n\t\"./chart/plotly/index.js\": 1183,\n\t\"./chart/plotly/utils.js\": 83,\n\t\"./choropleth/index.js\": 1371,\n\t\"./choropleth/utils.js\": 107,\n\t\"./cohort/index.js\": 1372,\n\t\"./counter/index.js\": 1375,\n\t\"./edit-visualization-dialog.js\": 1376,\n\t\"./funnel/index.js\": 1377,\n\t\"./index.js\": 1379,\n\t\"./map/index.js\": 1380,\n\t\"./pivot/index.js\": 1384,\n\t\"./sankey/index.js\": 1445,\n\t\"./sunburst/index.js\": 1444,\n\t\"./table/index.js\": 1390,\n\t\"./word-cloud/index.js\": 1392\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 1179;","import {\n  some, extend, defaults, has, partial, intersection, without, includes, isUndefined,\n  sortBy, each, map, keys, difference,\n} from 'lodash';\nimport template from './chart.html';\nimport editorTemplate from './chart-editor.html';\n\nconst DEFAULT_OPTIONS = {\n  globalSeriesType: 'column',\n  sortX: true,\n  legend: { enabled: true },\n  yAxis: [{ type: 'linear' }, { type: 'linear', opposite: true }],\n  xAxis: { type: '-', labels: { enabled: true } },\n  error_y: { type: 'data', visible: true },\n  series: { stacking: null, error_y: { type: 'data', visible: true } },\n  seriesOptions: {},\n  valuesOptions: {},\n  columnMapping: {},\n\n  // showDataLabels: false, // depends on chart type\n  numberFormat: '0,0[.]00000',\n  percentFormat: '0[.]00%',\n  // dateTimeFormat: 'DD/MM/YYYY HH:mm', // will be set from clientConfig\n  textFormat: '', // default: combination of {{ @@yPercent }} ({{ @@y }} ± {{ @@yError }})\n\n  defaultColumns: 3,\n  defaultRows: 8,\n  minColumns: 1,\n  minRows: 5,\n};\n\nfunction ChartRenderer() {\n  return {\n    restrict: 'E',\n    scope: {\n      queryResult: '=',\n      options: '=?',\n    },\n    template,\n    replace: false,\n    controller($scope, clientConfig) {\n      $scope.chartSeries = [];\n\n      function zIndexCompare(series) {\n        if ($scope.options.seriesOptions[series.name]) {\n          return $scope.options.seriesOptions[series.name].zIndex;\n        }\n        return 0;\n      }\n\n      function reloadData() {\n        if (!isUndefined($scope.queryResult) && $scope.queryResult.getData()) {\n          const data = $scope.queryResult.getChartData($scope.options.columnMapping);\n          $scope.chartSeries = sortBy(data, zIndexCompare);\n        }\n      }\n\n      function reloadChart() {\n        reloadData();\n        $scope.plotlyOptions = extend({\n          showDataLabels: $scope.options.globalSeriesType === 'pie',\n          dateTimeFormat: clientConfig.dateTimeFormat,\n        }, DEFAULT_OPTIONS, $scope.options);\n      }\n\n      $scope.$watch('options', reloadChart, true);\n      $scope.$watch('queryResult && queryResult.getData()', reloadData);\n    },\n  };\n}\n\nfunction ChartEditor(ColorPalette, clientConfig) {\n  return {\n    restrict: 'E',\n    template: editorTemplate,\n    scope: {\n      queryResult: '=',\n      options: '=?',\n    },\n    link(scope) {\n      scope.currentTab = 'general';\n      scope.colors = extend({ Automatic: null }, ColorPalette);\n\n      scope.stackingOptions = {\n        Disabled: null,\n        Stack: 'stack',\n      };\n\n      scope.changeTab = (tab) => {\n        scope.currentTab = tab;\n      };\n\n      scope.chartTypes = {\n        line: { name: 'Line', icon: 'line-chart' },\n        column: { name: 'Bar', icon: 'bar-chart' },\n        area: { name: 'Area', icon: 'area-chart' },\n        pie: { name: 'Pie', icon: 'pie-chart' },\n        scatter: { name: 'Scatter', icon: 'circle-o' },\n        bubble: { name: 'Bubble', icon: 'circle-o' },\n        heatmap: { name: 'Heatmap', icon: 'th' },\n        box: { name: 'Box', icon: 'square-o' },\n      };\n\n      if (clientConfig.allowCustomJSVisualizations) {\n        scope.chartTypes.custom = { name: 'Custom', icon: 'code' };\n      }\n\n      scope.xAxisScales = [\n        { label: 'Auto Detect', value: '-' },\n        { label: 'Datetime', value: 'datetime' },\n        { label: 'Linear', value: 'linear' },\n        { label: 'Logarithmic', value: 'logarithmic' },\n        { label: 'Category', value: 'category' },\n      ];\n      scope.yAxisScales = ['linear', 'logarithmic', 'datetime', 'category'];\n\n      scope.chartTypeChanged = () => {\n        keys(scope.options.seriesOptions).forEach((key) => {\n          scope.options.seriesOptions[key].type = scope.options.globalSeriesType;\n        });\n        scope.options.showDataLabels = scope.options.globalSeriesType === 'pie';\n        scope.$applyAsync();\n      };\n\n      scope.colorScheme = ['Blackbody', 'Bluered', 'Blues', 'Earth', 'Electric',\n        'Greens', 'Greys', 'Hot', 'Jet', 'Picnic', 'Portland',\n        'Rainbow', 'RdBu', 'Reds', 'Viridis', 'YlGnBu', 'YlOrRd', 'Custom...'];\n\n      scope.showSizeColumnPicker = () => some(scope.options.seriesOptions, options => options.type === 'bubble');\n      scope.showZColumnPicker = () => some(scope.options.seriesOptions, options => options.type === 'heatmap');\n\n      if (scope.options.customCode === undefined) {\n        scope.options.customCode = `// Available variables are x, ys, element, and Plotly\n// Type console.log(x, ys); for more info about x and ys\n// To plot your graph call Plotly.plot(element, ...)\n// Plotly examples and docs: https://plot.ly/javascript/`;\n      }\n\n      function refreshColumns() {\n        scope.columns = scope.queryResult.getColumns();\n        scope.columnNames = map(scope.columns, i => i.name);\n        if (scope.columnNames.length > 0) {\n          each(difference(keys(scope.options.columnMapping), scope.columnNames), (column) => {\n            delete scope.options.columnMapping[column];\n          });\n        }\n      }\n\n      function refreshColumnsAndForm() {\n        refreshColumns();\n        if (!scope.queryResult.getData() ||\n            scope.queryResult.getData().length === 0 ||\n            scope.columns.length === 0) {\n          return;\n        }\n        scope.form.yAxisColumns = intersection(scope.form.yAxisColumns, scope.columnNames);\n        if (!includes(scope.columnNames, scope.form.xAxisColumn)) {\n          scope.form.xAxisColumn = undefined;\n        }\n        if (!includes(scope.columnNames, scope.form.groupby)) {\n          scope.form.groupby = undefined;\n        }\n      }\n\n      function refreshSeries() {\n        const chartData = scope.queryResult.getChartData(scope.options.columnMapping);\n        const seriesNames = map(chartData, i => i.name);\n        const existing = keys(scope.options.seriesOptions);\n        each(difference(seriesNames, existing), (name) => {\n          scope.options.seriesOptions[name] = {\n            type: scope.options.globalSeriesType,\n            yAxis: 0,\n          };\n          scope.form.seriesList.push(name);\n        });\n        each(difference(existing, seriesNames), (name) => {\n          scope.form.seriesList = without(scope.form.seriesList, name);\n          delete scope.options.seriesOptions[name];\n        });\n\n        if (scope.options.globalSeriesType === 'pie') {\n          const uniqueValuesNames = new Set();\n          each(chartData, (series) => {\n            each(series.data, (row) => {\n              uniqueValuesNames.add(row.x);\n            });\n          });\n          const valuesNames = [];\n          uniqueValuesNames.forEach(v => valuesNames.push(v));\n\n          // initialize newly added values\n          const newValues = difference(valuesNames, keys(scope.options.valuesOptions));\n          each(newValues, (name) => {\n            scope.options.valuesOptions[name] = {};\n            scope.form.valuesList.push(name);\n          });\n          // remove settings for values that are no longer available\n          each(keys(scope.options.valuesOptions), (name) => {\n            if (valuesNames.indexOf(name) === -1) {\n              delete scope.options.valuesOptions[name];\n            }\n          });\n          scope.form.valuesList = intersection(scope.form.valuesList, valuesNames);\n        }\n      }\n\n      function setColumnRole(role, column) {\n        scope.options.columnMapping[column] = role;\n      }\n\n      function unsetColumn(column) {\n        setColumnRole('unused', column);\n      }\n\n      refreshColumns();\n\n      scope.$watch('options.columnMapping', () => {\n        if (scope.queryResult.status === 'done') {\n          refreshSeries();\n        }\n      }, true);\n\n      scope.$watch(() => [scope.queryResult.getId(), scope.queryResult.status], (changed) => {\n        if (!changed[0] || changed[1] !== 'done') {\n          return;\n        }\n\n        refreshColumnsAndForm();\n        refreshSeries();\n      }, true);\n\n      scope.form = {\n        yAxisColumns: [],\n        seriesList: sortBy(keys(scope.options.seriesOptions), name => scope.options.seriesOptions[name].zIndex),\n        valuesList: keys(scope.options.valuesOptions),\n      };\n\n      scope.$watchCollection('form.seriesList', (value) => {\n        each(value, (name, index) => {\n          scope.options.seriesOptions[name].zIndex = index;\n          scope.options.seriesOptions[name].index = 0; // is this needed?\n        });\n      });\n\n\n      scope.$watchCollection('form.yAxisColumns', (value, old) => {\n        each(old, unsetColumn);\n        each(value, partial(setColumnRole, 'y'));\n      });\n\n      scope.$watch('form.xAxisColumn', (value, old) => {\n        if (old !== undefined) {\n          unsetColumn(old);\n        }\n        if (value !== undefined) { setColumnRole('x', value); }\n      });\n\n      scope.$watch('form.errorColumn', (value, old) => {\n        if (old !== undefined) {\n          unsetColumn(old);\n        }\n        if (value !== undefined) {\n          setColumnRole('yError', value);\n        }\n      });\n\n      scope.$watch('form.sizeColumn', (value, old) => {\n        if (old !== undefined) {\n          unsetColumn(old);\n        }\n        if (value !== undefined) {\n          setColumnRole('size', value);\n        }\n      });\n\n      scope.$watch('form.zValColumn', (value, old) => {\n        if (old !== undefined) {\n          unsetColumn(old);\n        }\n        if (value !== undefined) {\n          setColumnRole('zVal', value);\n        }\n      });\n\n      scope.$watch('form.groupby', (value, old) => {\n        if (old !== undefined) {\n          unsetColumn(old);\n        }\n        if (value !== undefined) {\n          setColumnRole('series', value);\n        }\n      });\n\n      if (!has(scope.options, 'legend')) {\n        scope.options.legend = { enabled: true };\n      }\n\n      if (scope.columnNames) {\n        each(scope.options.columnMapping, (value, key) => {\n          if (scope.columnNames.length > 0 && !includes(scope.columnNames, key)) {\n            return;\n          }\n          if (value === 'x') {\n            scope.form.xAxisColumn = key;\n          } else if (value === 'y') {\n            scope.form.yAxisColumns.push(key);\n          } else if (value === 'series') {\n            scope.form.groupby = key;\n          } else if (value === 'yError') {\n            scope.form.errorColumn = key;\n          } else if (value === 'size') {\n            scope.form.sizeColumn = key;\n          } else if (value === 'zVal') {\n            scope.form.zValColumn = key;\n          }\n        });\n      }\n\n      function setOptionsDefaults() {\n        if (scope.options) {\n          // For existing visualization - set default options\n          defaults(scope.options, extend({}, DEFAULT_OPTIONS, {\n            showDataLabels: scope.options.globalSeriesType === 'pie',\n            dateTimeFormat: clientConfig.dateTimeFormat,\n          }));\n        }\n      }\n      setOptionsDefaults();\n      scope.$watch('options', setOptionsDefaults);\n\n      scope.templateHint = `\n        <div class=\"p-b-5\">Use special names to access additional properties:</div>\n        <div><code>{{ @@name }}</code> series name;</div>\n        <div><code>{{ @@x }}</code> x-value;</div>\n        <div><code>{{ @@y }}</code> y-value;</div>\n        <div><code>{{ @@yPercent }}</code> relative y-value;</div>\n        <div><code>{{ @@yError }}</code> y deviation;</div>\n        <div><code>{{ @@size }}</code> bubble size;</div>\n        <div class=\"p-t-5\">Also, all query result columns can be referenced using\n          <code class=\"text-nowrap\">{{ column_name }}</code> syntax.</div>\n      `;\n    },\n  };\n}\n\nconst ColorBox = {\n  bindings: {\n    color: '<',\n  },\n  template: \"<span style='width: 12px; height: 12px; background-color: {{$ctrl.color}}; display: inline-block; margin-right: 5px;'></span>\",\n};\n\nexport default function init(ngModule) {\n  ngModule.component('colorBox', ColorBox);\n  ngModule.directive('chartRenderer', ChartRenderer);\n  ngModule.directive('chartEditor', ChartEditor);\n  ngModule.config((VisualizationProvider) => {\n    const renderTemplate = '<chart-renderer options=\"visualization.options\" query-result=\"queryResult\"></chart-renderer>';\n    const editTemplate = '<chart-editor options=\"visualization.options\" query-result=\"queryResult\"></chart-editor>';\n\n    VisualizationProvider.registerVisualization({\n      type: 'CHART',\n      name: 'Chart',\n      renderTemplate,\n      editorTemplate: editTemplate,\n      defaultOptions: DEFAULT_OPTIONS,\n    });\n  });\n}\n\ninit.init = true;\n","import { each, debounce, isArray, isObject } from 'lodash';\n\nimport Plotly from 'plotly.js/lib/core';\nimport bar from 'plotly.js/lib/bar';\nimport pie from 'plotly.js/lib/pie';\nimport histogram from 'plotly.js/lib/histogram';\nimport box from 'plotly.js/lib/box';\nimport heatmap from 'plotly.js/lib/heatmap';\n\nimport {\n  ColorPalette,\n  prepareData,\n  prepareLayout,\n  updateData,\n  updateLayout,\n  normalizeValue,\n} from './utils';\n\nPlotly.register([bar, pie, histogram, box, heatmap]);\nPlotly.setPlotConfig({\n  modeBarButtonsToRemove: ['sendDataToCloud'],\n});\n\nconst PlotlyChart = () => ({\n  restrict: 'E',\n  template: '<div class=\"plotly-chart-container\" resize-event=\"handleResize()\"></div>',\n  scope: {\n    options: '=',\n    series: '=',\n  },\n  link(scope, element) {\n    const plotlyElement = element[0].querySelector('.plotly-chart-container');\n    const plotlyOptions = { showLink: false, displaylogo: false };\n    let layout = {};\n    let data = [];\n\n    function update() {\n      if (['normal', 'percent'].indexOf(scope.options.series.stacking) >= 0) {\n        // Backward compatibility\n        scope.options.series.percentValues = scope.options.series.stacking === 'percent';\n        scope.options.series.stacking = 'stack';\n      }\n\n      data = prepareData(scope.series, scope.options);\n      updateData(data, scope.options);\n      layout = prepareLayout(plotlyElement, scope.series, scope.options, data);\n\n      // It will auto-purge previous graph\n      Plotly.newPlot(plotlyElement, data, layout, plotlyOptions).then(() => {\n        updateLayout(plotlyElement, layout, (e, u) => Plotly.relayout(e, u));\n      });\n\n      plotlyElement.on('plotly_restyle', (updates) => {\n        // This event is triggered if some plotly data/layout has changed.\n        // We need to catch only changes of traces visibility to update stacking\n        if (isArray(updates) && isObject(updates[0]) && updates[0].visible) {\n          updateData(data, scope.options);\n          Plotly.relayout(plotlyElement, layout);\n        }\n      });\n    }\n    update();\n\n    scope.$watch('series', (oldValue, newValue) => {\n      if (oldValue !== newValue) {\n        update();\n      }\n    });\n    scope.$watch('options', (oldValue, newValue) => {\n      if (oldValue !== newValue) {\n        update();\n      }\n    }, true);\n\n    scope.handleResize = debounce(() => {\n      updateLayout(plotlyElement, layout, (e, u) => Plotly.relayout(e, u));\n    }, 50);\n  },\n});\n\nconst CustomPlotlyChart = clientConfig => ({\n  restrict: 'E',\n  template: '<div class=\"plotly-chart-container\" resize-event=\"handleResize()\"></div>',\n  scope: {\n    series: '=',\n    options: '=',\n  },\n  link(scope, element) {\n    if (!clientConfig.allowCustomJSVisualizations) {\n      return;\n    }\n\n    const refresh = () => {\n      // Clear existing data with blank data for succeeding codeCall adds data to existing plot.\n      Plotly.newPlot(element[0].firstChild);\n\n      try {\n        // eslint-disable-next-line no-new-func\n        const codeCall = new Function('x, ys, element, Plotly', scope.options.customCode);\n        codeCall(scope.x, scope.ys, element[0].children[0], Plotly);\n      } catch (err) {\n        if (scope.options.enableConsoleLogs) {\n          // eslint-disable-next-line no-console\n          console.log(`Error while executing custom graph: ${err}`);\n        }\n      }\n    };\n\n    const timeSeriesToPlotlySeries = () => {\n      scope.x = [];\n      scope.ys = {};\n      each(scope.series, (series) => {\n        scope.ys[series.name] = [];\n        each(series.data, (point) => {\n          scope.x.push(normalizeValue(point.x));\n          scope.ys[series.name].push(normalizeValue(point.y));\n        });\n      });\n    };\n\n    scope.handleResize = () => {\n      refresh();\n    };\n\n    scope.$watch('[options.customCode, options.autoRedraw]', () => {\n      refresh();\n    }, true);\n\n    scope.$watch('series', () => {\n      timeSeriesToPlotlySeries();\n      refresh();\n    }, true);\n  },\n});\n\nexport default function init(ngModule) {\n  ngModule.constant('ColorPalette', ColorPalette);\n  ngModule.directive('plotlyChart', PlotlyChart);\n  ngModule.directive('customPlotlyChart', CustomPlotlyChart);\n}\n\ninit.init = true;\n","import _ from 'lodash';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport { formatSimpleTemplate } from '@/lib/value-format';\nimport 'leaflet-fullscreen';\nimport 'leaflet-fullscreen/dist/leaflet.fullscreen.css';\n\nimport {\n  AdditionalColors,\n  darkenColor,\n  createNumberFormatter,\n  prepareData,\n  getValueForFeature,\n  createScale,\n  prepareFeatureProperties,\n  getColorByValue,\n  inferCountryCodeType,\n} from './utils';\n\nimport template from './choropleth.html';\nimport editorTemplate from './choropleth-editor.html';\n\nimport countriesDataUrl from './countries.geo.json';\n\nconst loadCountriesData = _.bind(function loadCountriesData($http, url) {\n  if (!this[url]) {\n    this[url] = $http.get(url).then(response => response.data);\n  }\n  return this[url];\n}, {});\n\nfunction choroplethRenderer($sanitize, $http) {\n  return {\n    restrict: 'E',\n    template,\n    scope: {\n      queryResult: '=',\n      options: '=?',\n    },\n    link($scope, $element) {\n      let countriesData = null;\n      let map = null;\n      let choropleth = null;\n      let updateBoundsLock = false;\n\n      function getBounds() {\n        if (!updateBoundsLock) {\n          const bounds = map.getBounds();\n          $scope.options.bounds = [\n            [bounds._southWest.lat, bounds._southWest.lng],\n            [bounds._northEast.lat, bounds._northEast.lng],\n          ];\n          $scope.$applyAsync();\n        }\n      }\n\n      function setBounds({ disableAnimation = false } = {}) {\n        if (map && choropleth) {\n          const bounds = $scope.options.bounds || choropleth.getBounds();\n          const options = disableAnimation ? {\n            animate: false,\n            duration: 0,\n          } : null;\n          map.fitBounds(bounds, options);\n        }\n      }\n\n      function render() {\n        if (map) {\n          map.remove();\n          map = null;\n          choropleth = null;\n        }\n        if (!countriesData) {\n          return;\n        }\n\n        $scope.formatValue = createNumberFormatter(\n          $scope.options.valueFormat,\n          $scope.options.noValuePlaceholder,\n        );\n\n        const data = prepareData(\n          $scope.queryResult.getData(),\n          $scope.options.countryCodeColumn,\n          $scope.options.valueColumn,\n        );\n\n        const { limits, colors, legend } = createScale(\n          countriesData.features,\n          data,\n          $scope.options,\n        );\n\n        // Update data for legend block\n        $scope.legendItems = legend;\n\n        choropleth = L.geoJson(countriesData, {\n          onEachFeature: (feature, layer) => {\n            const value = getValueForFeature(feature, data, $scope.options.countryCodeType);\n            const valueFormatted = $scope.formatValue(value);\n            const featureData = prepareFeatureProperties(\n              feature,\n              valueFormatted,\n              data,\n              $scope.options.countryCodeType,\n            );\n            const color = getColorByValue(value, limits, colors, $scope.options.colors.noValue);\n\n            layer.setStyle({\n              color: $scope.options.colors.borders,\n              weight: 1,\n              fillColor: color,\n              fillOpacity: 1,\n            });\n\n            if ($scope.options.tooltip.enabled) {\n              layer.bindTooltip($sanitize(formatSimpleTemplate(\n                $scope.options.tooltip.template,\n                featureData,\n              )));\n            }\n\n            if ($scope.options.popup.enabled) {\n              layer.bindPopup($sanitize(formatSimpleTemplate(\n                $scope.options.popup.template,\n                featureData,\n              )));\n            }\n\n            layer.on('mouseover', () => {\n              layer.setStyle({\n                weight: 2,\n                fillColor: darkenColor(color),\n              });\n            });\n            layer.on('mouseout', () => {\n              layer.setStyle({\n                weight: 1,\n                fillColor: color,\n              });\n            });\n          },\n        });\n\n        const choroplethBounds = choropleth.getBounds();\n\n        map = L.map($element[0].children[0].children[0], {\n          center: choroplethBounds.getCenter(),\n          zoom: 1,\n          zoomSnap: 0,\n          layers: [choropleth],\n          scrollWheelZoom: false,\n          maxBounds: choroplethBounds,\n          maxBoundsViscosity: 1,\n          attributionControl: false,\n          fullscreenControl: true,\n        });\n\n        map.on('focus', () => { map.on('moveend', getBounds); });\n        map.on('blur', () => { map.off('moveend', getBounds); });\n\n        setBounds({ disableAnimation: true });\n      }\n\n      loadCountriesData($http, countriesDataUrl).then((data) => {\n        if (_.isObject(data)) {\n          countriesData = data;\n          render();\n        }\n      });\n\n      $scope.handleResize = _.debounce(() => {\n        if (map) {\n          map.invalidateSize(false);\n          setBounds({ disableAnimation: true });\n        }\n      }, 50);\n\n      $scope.$watch('queryResult && queryResult.getData()', render);\n      $scope.$watch(() => _.omit($scope.options, 'bounds'), render, true);\n      $scope.$watch('options.bounds', () => {\n        // Prevent infinite digest loop\n        const savedLock = updateBoundsLock;\n        updateBoundsLock = true;\n        setBounds();\n        updateBoundsLock = savedLock;\n      }, true);\n    },\n  };\n}\n\nfunction choroplethEditor(ChoroplethPalette) {\n  return {\n    restrict: 'E',\n    template: editorTemplate,\n    scope: {\n      queryResult: '=',\n      options: '=?',\n    },\n    link($scope) {\n      $scope.currentTab = 'general';\n      $scope.changeTab = (tab) => {\n        $scope.currentTab = tab;\n      };\n\n      $scope.colors = ChoroplethPalette;\n\n      $scope.clusteringModes = {\n        q: 'quantile',\n        e: 'equidistant',\n        k: 'k-means',\n      };\n\n      $scope.legendPositions = {\n        'top-left': 'top / left',\n        'top-right': 'top / right',\n        'bottom-left': 'bottom / left',\n        'bottom-right': 'bottom / right',\n      };\n\n      $scope.countryCodeTypes = {\n        name: 'Short name',\n        name_long: 'Full name',\n        abbrev: 'Abbreviated name',\n        iso_a2: 'ISO code (2 letters)',\n        iso_a3: 'ISO code (3 letters)',\n        iso_n3: 'ISO code (3 digits)',\n      };\n\n      $scope.templateHint = `\n        <div class=\"p-b-5\">All query result columns can be referenced using <code>{{ column_name }}</code> syntax.</div>\n        <div class=\"p-b-5\">Use special names to access additional properties:</div>\n        <div><code>{{ @@value }}</code> formatted value;</div>\n        <div><code>{{ @@name }}</code> short country name;</div>\n        <div><code>{{ @@name_long }}</code> full country name;</div>\n        <div><code>{{ @@abbrev }}</code> abbreviated country name;</div>\n        <div><code>{{ @@iso_a2 }}</code> two-letter ISO country code;</div>\n        <div><code>{{ @@iso_a3 }}</code> three-letter ISO country code;</div>\n        <div><code>{{ @@iso_n3 }}</code> three-digit ISO country code.</div>\n        <div class=\"p-t-5\">This syntax is applicable to tooltip and popup templates.</div>\n      `;\n\n      function updateCountryCodeType() {\n        $scope.options.countryCodeType = inferCountryCodeType(\n          $scope.queryResult.getData(),\n          $scope.options.countryCodeColumn,\n        ) || $scope.options.countryCodeType;\n      }\n\n      $scope.$watch('options.countryCodeColumn', updateCountryCodeType);\n      $scope.$watch('queryResult.getData()', updateCountryCodeType);\n    },\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.constant('ChoroplethPalette', {});\n  ngModule.directive('choroplethRenderer', choroplethRenderer);\n  ngModule.directive('choroplethEditor', choroplethEditor);\n  ngModule.config((VisualizationProvider, ColorPalette, ChoroplethPalette) => {\n    _.extend(ChoroplethPalette, AdditionalColors, ColorPalette);\n\n    const renderTemplate =\n      '<choropleth-renderer options=\"visualization.options\" query-result=\"queryResult\"></choropleth-renderer>';\n\n    const editTemplate = '<choropleth-editor options=\"visualization.options\" query-result=\"queryResult\"></choropleth-editor>';\n\n    const defaultOptions = {\n      defaultColumns: 3,\n      defaultRows: 8,\n      minColumns: 2,\n\n      countryCodeColumn: '',\n      countryCodeType: 'iso_a3',\n      valueColumn: '',\n      clusteringMode: 'e',\n      steps: 5,\n      valueFormat: '0,0.00',\n      noValuePlaceholder: 'N/A',\n      colors: {\n        min: ChoroplethPalette['Light Blue'],\n        max: ChoroplethPalette['Dark Blue'],\n        background: ChoroplethPalette.White,\n        borders: ChoroplethPalette.White,\n        noValue: ChoroplethPalette['Light Gray'],\n      },\n      legend: {\n        visible: true,\n        position: 'bottom-left',\n        alignText: 'right',\n      },\n      tooltip: {\n        enabled: true,\n        template: '<b>{{ @@name }}</b>: {{ @@value }}',\n      },\n      popup: {\n        enabled: true,\n        template: 'Country: <b>{{ @@name_long }} ({{ @@iso_a2 }})</b>\\n<br>\\nValue: <b>{{ @@value }}</b>',\n      },\n    };\n\n    VisualizationProvider.registerVisualization({\n      type: 'CHOROPLETH',\n      name: 'Map (Choropleth)',\n      renderTemplate,\n      editorTemplate: editTemplate,\n      defaultOptions,\n    });\n  });\n}\n\ninit.init = true;\n","/* global Cornelius */\nimport _ from 'lodash';\nimport moment from 'moment';\nimport 'cornelius/src/cornelius';\nimport 'cornelius/src/cornelius.css';\n\nimport editorTemplate from './cohort-editor.html';\n\nconst momentInterval = {\n  weekly: 'weeks',\n  daily: 'days',\n  monthly: 'months',\n};\n\nconst DEFAULT_OPTIONS = {\n  timeInterval: 'daily',\n  mode: 'diagonal',\n  dateColumn: 'date',\n  stageColumn: 'day_number',\n  totalColumn: 'total',\n  valueColumn: 'value',\n\n  autoHeight: true,\n  defaultRows: 8,\n};\n\nfunction groupData(sortedData) {\n  const result = {};\n\n  _.each(sortedData, (item) => {\n    const groupKey = item.date + 0;\n    result[groupKey] = result[groupKey] || {\n      date: moment(item.date),\n      total: parseInt(item.total, 10),\n      values: {},\n    };\n    result[groupKey].values[item.stage] = parseInt(item.value, 10);\n  });\n\n  return _.values(result);\n}\n\nfunction prepareDiagonalData(sortedData, options) {\n  const timeInterval = options.timeInterval;\n  const grouped = groupData(sortedData);\n  const firstStage = _.min(_.map(sortedData, i => i.stage));\n  const stageCount = moment(_.last(grouped).date).diff(_.first(grouped).date, momentInterval[timeInterval]);\n  let lastStage = firstStage + stageCount;\n\n  let previousDate = null;\n\n  const data = [];\n  _.each(grouped, (group) => {\n    if (previousDate !== null) {\n      let diff = Math.abs(previousDate.diff(group.date, momentInterval[timeInterval]));\n      while (diff > 1) {\n        const row = [0];\n        for (let stage = firstStage; stage <= lastStage; stage += 1) {\n          row.push(group.values[stage] || 0);\n        }\n        data.push(row);\n        // It should be diagonal, so decrease count of stages for each next row\n        lastStage -= 1;\n        diff -= 1;\n      }\n    }\n\n    previousDate = group.date;\n\n    const row = [group.total];\n    for (let stage = firstStage; stage <= lastStage; stage += 1) {\n      row.push(group.values[stage] || 0);\n    }\n    // It should be diagonal, so decrease count of stages for each next row\n    lastStage -= 1;\n\n    data.push(row);\n  });\n\n  return data;\n}\n\nfunction prepareSimpleData(sortedData, options) {\n  const timeInterval = options.timeInterval;\n  const grouped = groupData(sortedData);\n  const stages = _.map(sortedData, i => i.stage);\n  const firstStage = _.min(stages);\n  const lastStage = _.max(stages);\n\n  let previousDate = null;\n\n  const data = [];\n  _.each(grouped, (group) => {\n    if (previousDate !== null) {\n      let diff = Math.abs(previousDate.diff(group.date, momentInterval[timeInterval]));\n      while (diff > 1) {\n        data.push([0]);\n        diff -= 1;\n      }\n    }\n\n    previousDate = group.date;\n\n    const row = [group.total];\n    for (let stage = firstStage; stage <= lastStage; stage += 1) {\n      row.push(group.values[stage]);\n    }\n\n    data.push(row);\n  });\n\n  return data;\n}\n\nfunction prepareData(rawData, options) {\n  rawData = _.map(rawData, item => ({\n    date: item[options.dateColumn],\n    stage: parseInt(item[options.stageColumn], 10),\n    total: parseFloat(item[options.totalColumn]),\n    value: parseFloat(item[options.valueColumn]),\n  }));\n  const sortedData = _.sortBy(rawData, r => r.date + r.stage);\n  const initialDate = moment(sortedData[0].date).toDate();\n\n  let data;\n  switch (options.mode) {\n    case 'simple':\n      data = prepareSimpleData(sortedData, options);\n      break;\n    default:\n      data = prepareDiagonalData(sortedData, options);\n      break;\n  }\n\n  return { data, initialDate };\n}\n\nfunction cohortRenderer() {\n  return {\n    restrict: 'E',\n    scope: {\n      queryResult: '=',\n      options: '=',\n    },\n    template: '',\n    replace: false,\n    link($scope, element) {\n      $scope.options = _.extend({}, DEFAULT_OPTIONS, $scope.options);\n\n      function updateCohort() {\n        element.empty();\n\n        if ($scope.queryResult.getData() === null) {\n          return;\n        }\n\n        const columnNames = _.map($scope.queryResult.getColumns(), i => i.name);\n        if (\n          !_.includes(columnNames, $scope.options.dateColumn) ||\n          !_.includes(columnNames, $scope.options.stageColumn) ||\n          !_.includes(columnNames, $scope.options.totalColumn) ||\n          !_.includes(columnNames, $scope.options.valueColumn)\n        ) {\n          return;\n        }\n\n        const { data, initialDate } = prepareData($scope.queryResult.getData(), $scope.options);\n\n        Cornelius.draw({\n          initialDate,\n          container: element[0],\n          cohort: data,\n          title: null,\n          timeInterval: $scope.options.timeInterval,\n          labels: {\n            time: 'Time',\n            people: 'Users',\n            weekOf: 'Week of',\n          },\n        });\n      }\n\n      $scope.$watch('queryResult && queryResult.getData()', updateCohort);\n      $scope.$watch('options', updateCohort, true);\n    },\n  };\n}\n\nfunction cohortEditor() {\n  return {\n    restrict: 'E',\n    template: editorTemplate,\n    link: ($scope) => {\n      $scope.visualization.options = _.extend({}, DEFAULT_OPTIONS, $scope.visualization.options);\n\n      $scope.currentTab = 'columns';\n      $scope.setCurrentTab = (tab) => {\n        $scope.currentTab = tab;\n      };\n\n      function refreshColumns() {\n        $scope.columns = $scope.queryResult.getColumns();\n        $scope.columnNames = _.map($scope.columns, i => i.name);\n      }\n\n      refreshColumns();\n\n      $scope.$watch(\n        () => [$scope.queryResult.getId(), $scope.queryResult.status],\n        (changed) => {\n          if (!changed[0] || changed[1] !== 'done') {\n            return;\n          }\n          refreshColumns();\n        },\n        true,\n      );\n    },\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.directive('cohortRenderer', cohortRenderer);\n  ngModule.directive('cohortEditor', cohortEditor);\n\n  ngModule.config((VisualizationProvider) => {\n    const editTemplate = '<cohort-editor></cohort-editor>';\n\n    VisualizationProvider.registerVisualization({\n      type: 'COHORT',\n      name: 'Cohort',\n      renderTemplate: '<cohort-renderer options=\"visualization.options\" query-result=\"queryResult\"></cohort-renderer>',\n      editorTemplate: editTemplate,\n      defaultOptions: DEFAULT_OPTIONS,\n    });\n  });\n}\n\ninit.init = true;\n","import numberFormat from 'underscore.string/numberFormat';\nimport { isNumber } from 'lodash';\n\nimport counterTemplate from './counter.html';\nimport counterEditorTemplate from './counter-editor.html';\n\nfunction getRowNumber(index, size) {\n  if (index >= 0) {\n    return index - 1;\n  }\n\n  if (Math.abs(index) > size) {\n    index %= size;\n  }\n\n  return size + index;\n}\n\nfunction CounterRenderer($timeout) {\n  return {\n    restrict: 'E',\n    template: counterTemplate,\n    link($scope, $element) {\n      $scope.fontSize = '1em';\n\n      $scope.scale = 1;\n      const root = $element[0].querySelector('counter');\n      const container = $element[0].querySelector('counter > div');\n      $scope.handleResize = () => {\n        const scale = Math.min(root.offsetWidth / container.offsetWidth, root.offsetHeight / container.offsetHeight);\n        $scope.scale = Math.floor(scale * 100) / 100; // keep only two decimal places\n      };\n\n      const refreshData = () => {\n        const queryData = $scope.queryResult.getData();\n        if (queryData) {\n          const rowNumber = getRowNumber($scope.visualization.options.rowNumber, queryData.length);\n          const targetRowNumber = getRowNumber($scope.visualization.options.targetRowNumber, queryData.length);\n          const counterColName = $scope.visualization.options.counterColName;\n          const targetColName = $scope.visualization.options.targetColName;\n          const counterLabel = $scope.visualization.options.counterLabel;\n\n          if (counterLabel) {\n            $scope.counterLabel = counterLabel;\n          } else {\n            $scope.counterLabel = $scope.visualization.name;\n          }\n\n          if ($scope.visualization.options.countRow) {\n            $scope.counterValue = queryData.length;\n          } else if (counterColName) {\n            $scope.counterValue = queryData[rowNumber][counterColName];\n          }\n          if (targetColName) {\n            $scope.targetValue = queryData[targetRowNumber][targetColName];\n\n            if ($scope.targetValue) {\n              $scope.delta = $scope.counterValue - $scope.targetValue;\n              $scope.trendPositive = $scope.delta >= 0;\n            }\n          } else {\n            $scope.targetValue = null;\n          }\n\n          $scope.isNumber = isNumber($scope.counterValue);\n          if ($scope.isNumber) {\n            $scope.stringPrefix = $scope.visualization.options.stringPrefix;\n            $scope.stringSuffix = $scope.visualization.options.stringSuffix;\n\n            const stringDecimal = $scope.visualization.options.stringDecimal;\n            const stringDecChar = $scope.visualization.options.stringDecChar;\n            const stringThouSep = $scope.visualization.options.stringThouSep;\n            if (stringDecimal || stringDecChar || stringThouSep) {\n              $scope.counterValue = numberFormat($scope.counterValue, stringDecimal, stringDecChar, stringThouSep);\n              $scope.isNumber = false;\n            }\n          } else {\n            $scope.stringPrefix = null;\n            $scope.stringSuffix = null;\n          }\n        }\n\n        $timeout(() => {\n          $scope.handleResize();\n        });\n      };\n\n      $scope.$watch('visualization.options', refreshData, true);\n      $scope.$watch('queryResult && queryResult.getData()', refreshData);\n    },\n  };\n}\n\nfunction CounterEditor() {\n  return {\n    restrict: 'E',\n    template: counterEditorTemplate,\n    link(scope) {\n      scope.currentTab = 'general';\n      scope.changeTab = (tab) => {\n        scope.currentTab = tab;\n      };\n      scope.isValueNumber = () => {\n        const queryData = scope.queryResult.getData();\n        if (queryData) {\n          const rowNumber = getRowNumber(scope.visualization.options.rowNumber, queryData.length);\n          const counterColName = scope.visualization.options.counterColName;\n\n          if (scope.visualization.options.countRow) {\n            scope.counterValue = queryData.length;\n          } else if (counterColName) {\n            scope.counterValue = queryData[rowNumber][counterColName];\n          }\n        }\n        return isNumber(scope.counterValue);\n      };\n    },\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.directive('counterEditor', CounterEditor);\n  ngModule.directive('counterRenderer', CounterRenderer);\n\n  ngModule.config((VisualizationProvider) => {\n    const renderTemplate =\n      '<counter-renderer options=\"visualization.options\" query-result=\"queryResult\"></counter-renderer>';\n\n    const editTemplate = '<counter-editor></counter-editor>';\n    const defaultOptions = {\n      counterColName: 'counter',\n      rowNumber: 1,\n      targetRowNumber: 1,\n      stringDecimal: 0,\n      stringDecChar: '.',\n      stringThouSep: ',',\n      defaultColumns: 2,\n      defaultRows: 5,\n    };\n\n    VisualizationProvider.registerVisualization({\n      type: 'COUNTER',\n      name: 'Counter',\n      renderTemplate,\n      editorTemplate: editTemplate,\n      defaultOptions,\n    });\n  });\n}\n\ninit.init = true;\n","import { map } from 'lodash';\nimport { copy } from 'angular';\nimport template from './edit-visualization-dialog.html';\n\nconst EditVisualizationDialog = {\n  template,\n  bindings: {\n    resolve: '<',\n    close: '&',\n    dismiss: '&',\n  },\n  controller($window, currentUser, Events, Visualization, toastr) {\n    'ngInject';\n\n    this.query = this.resolve.query;\n    this.queryResult = this.resolve.queryResult;\n    this.originalVisualization = this.resolve.visualization;\n    this.onNewSuccess = this.resolve.onNewSuccess;\n    this.visualization = copy(this.originalVisualization);\n    this.visTypes = Visualization.visualizationTypes;\n\n    // Don't allow to change type after creating visualization\n    this.canChangeType = !(this.visualization && this.visualization.id);\n\n    this.newVisualization = () => ({\n      type: Visualization.defaultVisualization.type,\n      name: Visualization.defaultVisualization.name,\n      description: '',\n      options: Visualization.defaultVisualization.defaultOptions,\n    });\n    if (!this.visualization) {\n      this.visualization = this.newVisualization();\n    }\n\n    this.typeChanged = (oldType) => {\n      const type = this.visualization.type;\n      // if not edited by user, set name to match type\n      // todo: this is wrong, because he might have edited it before.\n      if (type && oldType !== type && this.visualization && !this.visForm.name.$dirty) {\n        this.visualization.name = Visualization.visualizations[this.visualization.type].name;\n      }\n\n      // Bring default options\n      if (type && oldType !== type && this.visualization) {\n        this.visualization.options = Visualization.visualizations[this.visualization.type].defaultOptions;\n      }\n    };\n\n    this.submit = () => {\n      if (this.visualization.id) {\n        Events.record('update', 'visualization', this.visualization.id, { type: this.visualization.type });\n      } else {\n        Events.record('create', 'visualization', null, { type: this.visualization.type });\n      }\n\n      this.visualization.query_id = this.query.id;\n\n      Visualization.save(\n        this.visualization,\n        (result) => {\n          toastr.success('Visualization saved');\n\n          const visIds = map(this.query.visualizations, i => i.id);\n          const index = visIds.indexOf(result.id);\n          if (index > -1) {\n            this.query.visualizations[index] = result;\n          } else {\n            // new visualization\n            this.query.visualizations.push(result);\n            if (this.onNewSuccess) {\n              this.onNewSuccess(result);\n            }\n          }\n          this.close();\n        },\n        () => {\n          toastr.error('Visualization could not be saved');\n        },\n      );\n    };\n\n    this.closeDialog = () => {\n      if (this.visForm.$dirty) {\n        if ($window.confirm('Are you sure you want to close the editor without saving?')) {\n          this.close();\n        }\n      } else {\n        this.close();\n      }\n    };\n  },\n};\n\nexport default function init(ngModule) {\n  ngModule.component('editVisualizationDialog', EditVisualizationDialog);\n}\n\ninit.init = true;\n","import { debounce, sortBy, isNumber, every, difference } from 'lodash';\nimport d3 from 'd3';\nimport angular from 'angular';\n\nimport { ColorPalette, normalizeValue } from '@/visualizations/chart/plotly/utils';\nimport editorTemplate from './funnel-editor.html';\nimport './funnel.less';\n\nfunction isNoneNaNNum(val) {\n  if (!isNumber(val) || isNaN(val)) {\n    return false;\n  }\n  return true;\n}\n\nfunction normalizePercentage(num) {\n  if (num < 0.01) {\n    return '<0.01%';\n  }\n  if (num > 1000) {\n    return '>1000%';\n  }\n  return num.toFixed(2) + '%';\n}\n\nfunction Funnel(scope, element) {\n  this.element = element;\n  this.watches = [];\n  const vis = d3.select(element);\n  const options = scope.visualization.options;\n\n  function drawFunnel(data) {\n    const maxToPrevious = d3.max(data, d => d.pctPrevious);\n    // Table\n    const table = vis.append('table').attr('class', 'table table-condensed table-hover table-borderless');\n\n    // Header\n    const header = table.append('thead').append('tr');\n    header.append('th').text(options.stepCol.displayAs);\n    header\n      .append('th')\n      .attr('class', 'text-center')\n      .text(options.valueCol.displayAs);\n    header\n      .append('th')\n      .attr('class', 'text-center')\n      .text('% Max');\n    header\n      .append('th')\n      .attr('class', 'text-center')\n      .text('% Previous');\n\n    // Body\n    const trs = table\n      .append('tbody')\n      .selectAll('tr')\n      .data(data)\n      .enter()\n      .append('tr');\n\n    // Steps row\n    trs\n      .append('td')\n      .attr('class', 'col-xs-3 step')\n      .text(d => d.step)\n      .append('div')\n      .attr('class', 'step-name')\n      .text(d => d.step);\n\n    // Funnel bars\n    const valContainers = trs\n      .append('td')\n      .attr('class', 'col-xs-5')\n      .append('div')\n      .attr('class', 'container');\n    valContainers\n      .append('div')\n      .attr('class', 'bar centered')\n      .style('background-color', ColorPalette.Cyan)\n      .style('width', d => d.pctMax + '%');\n    valContainers\n      .append('div')\n      .attr('class', 'value')\n      .text(d => d.value.toLocaleString());\n\n    // pctMax\n    trs\n      .append('td')\n      .attr('class', 'col-xs-2 text-center')\n      .text(d => normalizePercentage(d.pctMax));\n\n    // pctPrevious\n    const pctContainers = trs\n      .append('td')\n      .attr('class', 'col-xs-2')\n      .append('div')\n      .attr('class', 'container');\n    pctContainers\n      .append('div')\n      .attr('class', 'bar')\n      .style('background-color', ColorPalette.Gray)\n      .style('opacity', '0.2')\n      .style('width', d => (d.pctPrevious / maxToPrevious) * 100.0 + '%');\n    pctContainers\n      .append('div')\n      .attr('class', 'value')\n      .text(d => normalizePercentage(d.pctPrevious));\n  }\n\n  function createVisualization(data) {\n    drawFunnel(data); // draw funnel\n  }\n\n  function removeVisualization() {\n    vis.selectAll('table').remove();\n  }\n\n  function prepareData(queryData) {\n    const data = queryData.map(\n      row => ({\n        step: normalizeValue(row[options.stepCol.colName]),\n        value: Number(row[options.valueCol.colName]),\n        sortVal: options.autoSort ? '' : row[options.sortKeyCol.colName],\n      }),\n      [],\n    );\n    let sortedData;\n    if (options.autoSort) {\n      sortedData = sortBy(data, 'value').reverse();\n    } else {\n      sortedData = sortBy(data, 'sortVal');\n    }\n\n    // Column validity\n    if (sortedData[0].value === 0 || !every(sortedData, d => isNoneNaNNum(d.value))) {\n      return;\n    }\n    const maxVal = d3.max(data, d => d.value);\n    sortedData.forEach((d, i) => {\n      d.pctMax = (d.value / maxVal) * 100.0;\n      d.pctPrevious = i === 0 ? 100.0 : (d.value / sortedData[i - 1].value) * 100.0;\n    });\n    return sortedData.slice(0, 100);\n  }\n\n  function invalidColNames() {\n    const colNames = scope.queryResult.getColumnNames();\n    const colToCheck = [options.stepCol.colName, options.valueCol.colName];\n    if (!options.autoSort) {\n      colToCheck.push(options.sortKeyCol.colName);\n    }\n    if (difference(colToCheck, colNames).length > 0) {\n      return true;\n    }\n    return false;\n  }\n\n  function refresh() {\n    removeVisualization();\n    if (invalidColNames()) {\n      return;\n    }\n\n    const queryData = scope.queryResult.getData();\n    const data = prepareData(queryData, options);\n    if (data) {\n      createVisualization(data); // draw funnel\n    }\n  }\n\n  refresh();\n  this.watches.push(scope.$watch('visualization.options', refresh, true));\n  this.watches.push(scope.$watch('queryResult && queryResult.getData()', refresh));\n}\n\nFunnel.prototype.remove = function remove() {\n  this.watches.forEach((unregister) => {\n    unregister();\n  });\n  angular.element(this.element).empty('.vis-container');\n};\n\nfunction funnelRenderer() {\n  return {\n    restrict: 'E',\n    template: '<div class=\"funnel-visualization-container resize-event=\"handleResize()\"></div>',\n    link(scope, element) {\n      const container = element[0].querySelector('.funnel-visualization-container');\n      let funnel = new Funnel(scope, container);\n\n      function resize() {\n        funnel.remove();\n        funnel = new Funnel(scope, container);\n      }\n\n      scope.handleResize = debounce(resize, 50);\n\n      scope.$watch('visualization.options', (oldValue, newValue) => {\n        if (oldValue !== newValue) {\n          resize();\n        }\n      });\n    },\n  };\n}\n\nfunction funnelEditor() {\n  return {\n    restrict: 'E',\n    template: editorTemplate,\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.directive('funnelRenderer', funnelRenderer);\n  ngModule.directive('funnelEditor', funnelEditor);\n\n  ngModule.config((VisualizationProvider) => {\n    const renderTemplate =\n      '<funnel-renderer options=\"visualization.options\" query-result=\"queryResult\"></funnel-renderer>';\n\n    const editTemplate = '<funnel-editor></funnel-editor>';\n    const defaultOptions = {\n      stepCol: { colName: '', displayAs: 'Steps' },\n      valueCol: { colName: '', displayAs: 'Value' },\n      sortKeyCol: { colName: '' },\n      autoSort: true,\n      defaultRows: 10,\n    };\n\n    VisualizationProvider.registerVisualization({\n      type: 'FUNNEL',\n      name: 'Funnel',\n      renderTemplate,\n      editorTemplate: editTemplate,\n      defaultOptions,\n    });\n  });\n}\n\ninit.init = true;\n","import moment from 'moment';\nimport { isArray, reduce } from 'lodash';\n\nfunction VisualizationProvider() {\n  this.visualizations = {};\n  // this.visualizationTypes = {};\n  this.visualizationTypes = [];\n  const defaultConfig = {\n    defaultOptions: {},\n    skipTypes: false,\n    editorTemplate: null,\n  };\n\n  this.registerVisualization = (config) => {\n    const visualization = Object.assign({}, defaultConfig, config);\n\n    // TODO: this is prone to errors; better refactor.\n    if (this.defaultVisualization === undefined && !visualization.name.match(/Deprecated/)) {\n      this.defaultVisualization = visualization;\n    }\n\n    this.visualizations[config.type] = visualization;\n\n    if (!config.skipTypes) {\n      this.visualizationTypes.push({ name: config.name, type: config.type });\n    }\n  };\n\n  this.getSwitchTemplate = (property) => {\n    const pattern = /(<[a-zA-Z0-9-]*?)( |>)/;\n\n    let mergedTemplates = reduce(\n      this.visualizations,\n      (templates, visualization) => {\n        if (visualization[property]) {\n          const ngSwitch = `$1 ng-switch-when=\"${visualization.type}\" $2`;\n          const template = visualization[property].replace(pattern, ngSwitch);\n\n          return `${templates}\\n${template}`;\n        }\n\n        return templates;\n      },\n      '',\n    );\n\n    mergedTemplates = `<div ng-switch on=\"visualization.type\">${mergedTemplates}</div>`;\n\n    return mergedTemplates;\n  };\n\n  this.$get = ($resource) => {\n    const Visualization = $resource('api/visualizations/:id', { id: '@id' });\n    Visualization.visualizations = this.visualizations;\n    Visualization.visualizationTypes = this.visualizationTypes;\n    Visualization.renderVisualizationsTemplate = this.getSwitchTemplate('renderTemplate');\n    Visualization.editorTemplate = this.getSwitchTemplate('editorTemplate');\n    Visualization.defaultVisualization = this.defaultVisualization;\n\n    return Visualization;\n  };\n}\n\nfunction VisualizationName(Visualization) {\n  return {\n    restrict: 'E',\n    scope: {\n      visualization: '=',\n    },\n    template: '{{name}}',\n    replace: false,\n    link(scope) {\n      if (Visualization.visualizations[scope.visualization.type]) {\n        const defaultName = Visualization.visualizations[scope.visualization.type].name;\n        if (defaultName !== scope.visualization.name) {\n          scope.name = scope.visualization.name;\n        }\n      }\n    },\n  };\n}\n\nfunction VisualizationRenderer(Visualization) {\n  return {\n    restrict: 'E',\n    scope: {\n      visualization: '=',\n      queryResult: '=',\n    },\n    // TODO: using switch here (and in the options editor) might introduce errors and bad\n    // performance wise. It's better to eventually show the correct template based on the\n    // visualization type and not make the browser render all of them.\n    template: `<filters filters=\"filters\"></filters>\\n${Visualization.renderVisualizationsTemplate}`,\n    replace: false,\n    link(scope) {\n      scope.$watch('queryResult && queryResult.getFilters()', (filters) => {\n        if (filters) {\n          scope.filters = filters;\n        }\n      });\n    },\n  };\n}\n\nfunction VisualizationOptionsEditor(Visualization) {\n  return {\n    restrict: 'E',\n    template: Visualization.editorTemplate,\n    replace: false,\n    scope: {\n      visualization: '=',\n      query: '=',\n      queryResult: '=',\n    },\n  };\n}\n\nfunction FilterValueFilter(clientConfig) {\n  return (value, filter) => {\n    let firstValue = value;\n    if (isArray(value)) {\n      firstValue = value[0];\n    }\n\n    // TODO: deduplicate code with table.js:\n    if (filter.column.type === 'date') {\n      if (firstValue && moment.isMoment(firstValue)) {\n        return firstValue.format(clientConfig.dateFormat);\n      }\n    } else if (filter.column.type === 'datetime') {\n      if (firstValue && moment.isMoment(firstValue)) {\n        return firstValue.format(clientConfig.dateTimeFormat);\n      }\n    }\n\n    return firstValue;\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.provider('Visualization', VisualizationProvider);\n  ngModule.directive('visualizationRenderer', VisualizationRenderer);\n  ngModule.directive('visualizationOptionsEditor', VisualizationOptionsEditor);\n  ngModule.directive('visualizationName', VisualizationName);\n  ngModule.filter('filterValue', FilterValueFilter);\n}\n\ninit.init = true;\n","import _ from 'lodash';\nimport d3 from 'd3';\nimport L from 'leaflet';\nimport 'leaflet.markercluster';\nimport 'leaflet/dist/leaflet.css';\nimport 'leaflet.markercluster/dist/MarkerCluster.css';\nimport 'leaflet.markercluster/dist/MarkerCluster.Default.css';\nimport markerIcon from 'leaflet/dist/images/marker-icon.png';\nimport markerIconRetina from 'leaflet/dist/images/marker-icon-2x.png';\nimport markerShadow from 'leaflet/dist/images/marker-shadow.png';\nimport 'leaflet-fullscreen';\nimport 'leaflet-fullscreen/dist/leaflet.fullscreen.css';\n\nimport template from './map.html';\nimport editorTemplate from './map-editor.html';\n\n/*\nThis is a workaround for an issue with giving Leaflet load the icon on its own.\n*/\nL.Icon.Default.mergeOptions({\n  iconUrl: markerIcon,\n  iconRetinaUrl: markerIconRetina,\n  shadowUrl: markerShadow,\n});\n\ndelete L.Icon.Default.prototype._getIconUrl;\n\nfunction mapRenderer() {\n  return {\n    restrict: 'E',\n    template,\n    link($scope, elm) {\n      const colorScale = d3.scale.category10();\n      const map = L.map(elm[0].children[0].children[0], {\n        scrollWheelZoom: false,\n        fullscreenControl: true,\n      });\n      const mapControls = L.control.layers().addTo(map);\n      const layers = {};\n      const tileLayer = L.tileLayer('//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n        attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n      }).addTo(map);\n\n      function getBounds() {\n        $scope.visualization.options.bounds = map.getBounds();\n      }\n\n      function setBounds() {\n        const b = $scope.visualization.options.bounds;\n\n        if (b) {\n          map.fitBounds([[b._southWest.lat, b._southWest.lng],\n            [b._northEast.lat, b._northEast.lng]]);\n        } else if (layers) {\n          const allMarkers = _.flatten(_.map(_.values(layers), l => l.getLayers()));\n          // eslint-disable-next-line new-cap\n          const group = new L.featureGroup(allMarkers);\n          map.fitBounds(group.getBounds());\n        }\n      }\n\n\n      map.on('focus', () => { map.on('moveend', getBounds); });\n      map.on('blur', () => { map.off('moveend', getBounds); });\n\n      function resize() {\n        if (!map) return;\n        map.invalidateSize(false);\n        setBounds();\n      }\n\n      const createMarker = (lat, lon) => L.marker([lat, lon]);\n\n      const heatpoint = (lat, lon, color) => {\n        const style = {\n          fillColor: color,\n          fillOpacity: 0.9,\n          stroke: false,\n        };\n\n        return L.circleMarker([lat, lon], style);\n      };\n\n      function createDescription(latCol, lonCol, row) {\n        const lat = row[latCol];\n        const lon = row[lonCol];\n\n        let description = '<ul style=\"list-style-type: none;padding-left: 0\">';\n        description += `<li><strong>${lat}, ${lon}</strong>`;\n\n        _.each(row, (v, k) => {\n          if (!(k === latCol || k === lonCol)) {\n            description += `<li>${k}: ${v}</li>`;\n          }\n        });\n\n        return description;\n      }\n\n      function removeLayer(layer) {\n        if (layer) {\n          mapControls.removeLayer(layer);\n          map.removeLayer(layer);\n        }\n      }\n\n      function addLayer(name, points) {\n        const latCol = $scope.visualization.options.latColName || 'lat';\n        const lonCol = $scope.visualization.options.lonColName || 'lon';\n        const classify = $scope.visualization.options.classify;\n\n        let markers;\n        if ($scope.visualization.options.clusterMarkers) {\n          const color = $scope.visualization.options.groups[name].color;\n          const options = {};\n\n          if (classify) {\n            options.iconCreateFunction = (cluster) => {\n              const childCount = cluster.getChildCount();\n\n              let c = ' marker-cluster-';\n              if (childCount < 10) {\n                c += 'small';\n              } else if (childCount < 100) {\n                c += 'medium';\n              } else {\n                c += 'large';\n              }\n\n              c = '';\n\n              const style = `color: white; background-color: ${color};`;\n              return L.divIcon({ html: `<div style=\"${style}\"><span>${childCount}</span></div>`, className: `marker-cluster${c}`, iconSize: new L.Point(40, 40) });\n            };\n          }\n\n          markers = L.markerClusterGroup(options);\n        } else {\n          markers = L.layerGroup();\n        }\n\n        // create markers\n        _.each(points, (row) => {\n          let marker;\n\n          const lat = row[latCol];\n          const lon = row[lonCol];\n\n          if (lat === null || lon === null) return;\n\n          if (classify && classify !== 'none') {\n            const groupColor = $scope.visualization.options.groups[name].color;\n            marker = heatpoint(lat, lon, groupColor);\n          } else {\n            marker = createMarker(lat, lon);\n          }\n\n          marker.bindPopup(createDescription(latCol, lonCol, row));\n          markers.addLayer(marker);\n        });\n\n        markers.addTo(map);\n\n        layers[name] = markers;\n        mapControls.addOverlay(markers, name);\n      }\n\n      function render() {\n        const queryData = $scope.queryResult.getData();\n        const classify = $scope.visualization.options.classify;\n\n        $scope.visualization.options.mapTileUrl = $scope.visualization.options.mapTileUrl || '//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';\n\n        tileLayer.setUrl($scope.visualization.options.mapTileUrl);\n\n        if ($scope.visualization.options.clusterMarkers === undefined) {\n          $scope.visualization.options.clusterMarkers = true;\n        }\n\n        if (queryData) {\n          let pointGroups;\n          if (classify && classify !== 'none') {\n            pointGroups = _.groupBy(queryData, classify);\n          } else {\n            pointGroups = { All: queryData };\n          }\n\n          const groupNames = _.keys(pointGroups);\n          const options = _.map(groupNames, (group) => {\n            if ($scope.visualization.options.groups && $scope.visualization.options.groups[group]) {\n              return $scope.visualization.options.groups[group];\n            }\n            return { color: colorScale(group) };\n          });\n\n          $scope.visualization.options.groups = _.zipObject(groupNames, options);\n\n          _.each(layers, (v) => {\n            removeLayer(v);\n          });\n\n          _.each(pointGroups, (v, k) => {\n            addLayer(k, v);\n          });\n\n          setBounds();\n        }\n      }\n\n      $scope.handleResize = () => {\n        resize();\n      };\n\n      $scope.$watch('queryResult && queryResult.getData()', render);\n      $scope.$watch('visualization.options', render, true);\n    },\n  };\n}\n\nfunction mapEditor() {\n  return {\n    restrict: 'E',\n    template: editorTemplate,\n    link($scope) {\n      $scope.currentTab = 'general';\n      $scope.columns = $scope.queryResult.getColumns();\n      $scope.columnNames = _.map($scope.columns, i => i.name);\n      $scope.classify_columns = $scope.columnNames.concat('none');\n      $scope.mapTiles = [\n        {\n          name: 'OpenStreetMap',\n          url: '//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\n        },\n        {\n          name: 'OpenStreetMap BW',\n          url: '//{s}.tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png',\n        },\n        {\n          name: 'OpenStreetMap DE',\n          url: '//{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png',\n        },\n        {\n          name: 'OpenStreetMap FR',\n          url: '//{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png',\n        },\n        {\n          name: 'OpenStreetMap Hot',\n          url: '//{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png',\n        },\n        {\n          name: 'Thunderforest',\n          url: '//{s}.tile.thunderforest.com/cycle/{z}/{x}/{y}.png',\n        },\n        {\n          name: 'Thunderforest Spinal',\n          url: '//{s}.tile.thunderforest.com/spinal-map/{z}/{x}/{y}.png',\n        },\n        {\n          name: 'OpenMapSurfer',\n          url: '//korona.geog.uni-heidelberg.de/tiles/roads/x={x}&y={y}&z={z}',\n        },\n        {\n          name: 'Stamen Toner',\n          url: '//stamen-tiles-{s}.a.ssl.fastly.net/toner/{z}/{x}/{y}.png',\n        },\n        {\n          name: 'Stamen Toner Background',\n          url: '//stamen-tiles-{s}.a.ssl.fastly.net/toner-background/{z}/{x}/{y}.png',\n        },\n        {\n          name: 'Stamen Toner Lite',\n          url: '//stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}.png',\n        },\n        {\n          name: 'OpenTopoMap',\n          url: '//{s}.tile.opentopomap.org/{z}/{x}/{y}.png',\n        },\n      ];\n    },\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.directive('mapRenderer', mapRenderer);\n  ngModule.directive('mapEditor', mapEditor);\n  ngModule.config((VisualizationProvider) => {\n    const renderTemplate =\n      '<map-renderer ' +\n      'options=\"visualization.options\" query-result=\"queryResult\">' +\n      '</map-renderer>';\n\n    const editTemplate = '<map-editor></map-editor>';\n    const defaultOptions = {\n      defaultColumns: 3,\n      defaultRows: 8,\n      minColumns: 2,\n      classify: 'none',\n      clusterMarkers: true,\n    };\n\n    VisualizationProvider.registerVisualization({\n      type: 'MAP',\n      name: 'Map (Markers)',\n      renderTemplate,\n      editorTemplate: editTemplate,\n      defaultOptions,\n    });\n  });\n}\n\ninit.init = true;\n","import angular from 'angular';\nimport $ from 'jquery';\nimport 'pivottable';\nimport 'pivottable/dist/pivot.css';\n\nimport editorTemplate from './pivottable-editor.html';\nimport './pivot.less';\n\nfunction pivotTableRenderer() {\n  return {\n    restrict: 'E',\n    scope: {\n      queryResult: '=',\n      visualization: '=',\n    },\n    template: '',\n    replace: false,\n    link($scope, element) {\n      function removeControls() {\n        const hideControls = $scope.visualization.options.controls && $scope.visualization.options.controls.enabled;\n\n        element[0].querySelectorAll('.pvtAxisContainer, .pvtRenderer, .pvtVals').forEach((control) => {\n          if (hideControls) {\n            control.style.display = 'none';\n          } else {\n            control.style.display = '';\n          }\n        });\n      }\n\n      function updatePivot() {\n        $scope.$watch('queryResult && queryResult.getData()', (data) => {\n          if (!data) {\n            return;\n          }\n\n          if ($scope.queryResult.getData() !== null) {\n            // We need to give the pivot table its own copy of the data, because it changes\n            // it which interferes with other visualizations.\n            data = angular.copy($scope.queryResult.getData());\n            const options = {\n              renderers: $.pivotUtilities.renderers,\n              onRefresh(config) {\n                const configCopy = Object.assign({}, config);\n                // delete some values which are functions\n                delete configCopy.aggregators;\n                delete configCopy.renderers;\n                delete configCopy.onRefresh;\n                // delete some bulky default values\n                delete configCopy.rendererOptions;\n                delete configCopy.localeStrings;\n\n                if ($scope.visualization) {\n                  $scope.visualization.options = configCopy;\n                }\n              },\n            };\n\n            if ($scope.visualization) {\n              Object.assign(options, $scope.visualization.options);\n            }\n\n            $(element).pivotUI(data, options, true);\n            removeControls();\n          }\n        });\n      }\n\n      $scope.$watch('queryResult && queryResult.getData()', updatePivot);\n      $scope.$watch('visualization.options.controls.enabled', removeControls);\n    },\n  };\n}\n\nfunction pivotTableEditor() {\n  return {\n    restrict: 'E',\n    template: editorTemplate,\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.directive('pivotTableRenderer', pivotTableRenderer);\n  ngModule.directive('pivotTableEditor', pivotTableEditor);\n\n  ngModule.config((VisualizationProvider) => {\n    const editTemplate = '<pivot-table-editor></pivot-table-editor>';\n    const defaultOptions = {\n      defaultRows: 10,\n      defaultColumns: 3,\n      minColumns: 2,\n    };\n\n    VisualizationProvider.registerVisualization({\n      type: 'PIVOT',\n      name: 'Pivot Table',\n      renderTemplate:\n        '<pivot-table-renderer visualization=\"visualization\" query-result=\"queryResult\"></pivot-table-renderer>',\n      editorTemplate: editTemplate,\n      defaultOptions,\n    });\n  });\n}\n\ninit.init = true;\n","import _ from 'lodash';\nimport { getColumnCleanName } from '@/services/query-result';\nimport { createFormatter } from '@/lib/value-format';\nimport template from './table.html';\nimport editorTemplate from './table-editor.html';\nimport './table-editor.less';\n\nconst ALLOWED_ITEM_PER_PAGE = [5, 10, 15, 20, 25, 50, 100, 150, 200, 250];\n\nconst DISPLAY_AS_OPTIONS = [\n  { name: 'Text', value: 'string' },\n  { name: 'Number', value: 'number' },\n  { name: 'Date/Time', value: 'datetime' },\n  { name: 'Boolean', value: 'boolean' },\n  { name: 'JSON', value: 'json' },\n  { name: 'Image', value: 'image' },\n  { name: 'Link', value: 'link' },\n];\n\nconst DEFAULT_OPTIONS = {\n  itemsPerPage: 25,\n  autoHeight: true,\n  defaultRows: 14,\n  defaultColumns: 3,\n  minColumns: 2,\n};\n\nfunction getColumnContentAlignment(type) {\n  return ['integer', 'float', 'boolean', 'date', 'datetime'].indexOf(type) >= 0 ? 'right' : 'left';\n}\n\nfunction getDefaultColumnsOptions(columns) {\n  const displayAs = {\n    integer: 'number',\n    float: 'number',\n    boolean: 'boolean',\n    date: 'datetime',\n    datetime: 'datetime',\n  };\n\n  return _.map(columns, (col, index) => ({\n    name: col.name,\n    type: col.type,\n    displayAs: displayAs[col.type] || 'string',\n    visible: true,\n    order: 100000 + index,\n    title: getColumnCleanName(col.name),\n    allowSearch: false,\n    alignContent: getColumnContentAlignment(col.type),\n    // `string` cell options\n    allowHTML: true,\n    highlightLinks: false,\n  }));\n}\n\nfunction getDefaultFormatOptions(column, clientConfig) {\n  const dateTimeFormat = {\n    date: clientConfig.dateFormat || 'DD/MM/YYYY',\n    datetime: clientConfig.dateTimeFormat || 'DD/MM/YYYY HH:mm',\n  };\n  const numberFormat = {\n    integer: clientConfig.integerFormat || '0,0',\n    float: clientConfig.floatFormat || '0,0.00',\n  };\n  return {\n    dateTimeFormat: dateTimeFormat[column.type],\n    numberFormat: numberFormat[column.type],\n    booleanValues: clientConfig.booleanValues || ['false', 'true'],\n    // `image` cell options\n    imageUrlTemplate: '{{ @ }}',\n    imageTitleTemplate: '{{ @ }}',\n    imageWidth: '',\n    imageHeight: '',\n    // `link` cell options\n    linkUrlTemplate: '{{ @ }}',\n    linkTextTemplate: '{{ @ }}',\n    linkTitleTemplate: '{{ @ }}',\n    linkOpenInNewTab: true,\n  };\n}\n\nfunction wereColumnsReordered(queryColumns, visualizationColumns) {\n  queryColumns = _.map(queryColumns, col => col.name);\n  visualizationColumns = _.map(visualizationColumns, col => col.name);\n\n  // Some columns may be removed - so skip them (but keep original order)\n  visualizationColumns = _.filter(visualizationColumns, col => _.includes(queryColumns, col));\n  // Pick query columns that were previously saved with viz (but keep order too)\n  queryColumns = _.filter(queryColumns, col => _.includes(visualizationColumns, col));\n\n  // Both array now have the same size as they both contains only common columns\n  // (in fact, it was an intersection, that kept order of items on both arrays).\n  // Now check for equality item-by-item; if common columns are in the same order -\n  // they were not reordered in editor\n  for (let i = 0; i < queryColumns.length; i += 1) {\n    if (visualizationColumns[i] !== queryColumns[i]) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction getColumnsOptions(columns, visualizationColumns) {\n  const options = getDefaultColumnsOptions(columns);\n\n  if ((wereColumnsReordered(columns, visualizationColumns))) {\n    visualizationColumns = _.fromPairs(_.map(\n      visualizationColumns,\n      (col, index) => [col.name, _.extend({}, col, { order: index })],\n    ));\n  } else {\n    visualizationColumns = _.fromPairs(_.map(\n      visualizationColumns,\n      col => [col.name, _.omit(col, 'order')],\n    ));\n  }\n\n  _.each(options, col => _.extend(col, visualizationColumns[col.name]));\n\n  return _.sortBy(options, 'order');\n}\n\nfunction getColumnsToDisplay(columns, options, clientConfig) {\n  columns = _.fromPairs(_.map(columns, col => [col.name, col]));\n  let result = _.map(options, col => _.extend(\n    getDefaultFormatOptions(col, clientConfig),\n    col,\n    columns[col.name],\n  ));\n\n  result = _.map(result, col => _.extend(col, {\n    formatFunction: createFormatter(col),\n  }));\n\n  return _.sortBy(_.filter(result, 'visible'), 'order');\n}\n\nfunction GridRenderer(clientConfig) {\n  return {\n    restrict: 'E',\n    scope: {\n      queryResult: '=',\n      options: '=',\n    },\n    template,\n    replace: false,\n    controller($scope) {\n      $scope.gridColumns = [];\n      $scope.gridRows = [];\n\n      function update() {\n        if ($scope.queryResult.getData() == null) {\n          $scope.gridColumns = [];\n          $scope.filters = [];\n        } else {\n          $scope.filters = $scope.queryResult.getFilters();\n          $scope.gridRows = $scope.queryResult.getData();\n          const columns = $scope.queryResult.getColumns();\n          const columnsOptions = getColumnsOptions(columns, _.extend({}, $scope.options).columns);\n          $scope.gridColumns = getColumnsToDisplay(columns, columnsOptions, clientConfig);\n        }\n      }\n\n      $scope.$watch('queryResult && queryResult.getData()', (queryResult) => {\n        if (queryResult) {\n          update();\n        }\n      });\n\n      $scope.$watch('options', (newValue, oldValue) => {\n        if (newValue !== oldValue) {\n          update();\n        }\n      }, true);\n    },\n  };\n}\n\nfunction GridEditor(clientConfig) {\n  return {\n    restrict: 'E',\n    template: editorTemplate,\n    link: ($scope) => {\n      $scope.allowedItemsPerPage = ALLOWED_ITEM_PER_PAGE;\n      $scope.displayAsOptions = DISPLAY_AS_OPTIONS;\n\n      $scope.currentTab = 'columns';\n      $scope.setCurrentTab = (tab) => {\n        $scope.currentTab = tab;\n      };\n\n      $scope.$watch('visualization', () => {\n        if ($scope.visualization) {\n          // For existing visualization - set default options\n          $scope.visualization.options = _.extend({}, DEFAULT_OPTIONS, $scope.visualization.options);\n        }\n      });\n\n      $scope.$watch('queryResult && queryResult.getData()', (queryResult) => {\n        if (queryResult) {\n          const columns = $scope.queryResult.getData() !== null ? $scope.queryResult.getColumns() : [];\n          $scope.visualization.options.columns = _.map(\n            getColumnsOptions(columns, $scope.visualization.options.columns),\n            col => _.extend(getDefaultFormatOptions(col, clientConfig), col),\n          );\n        }\n      });\n\n      $scope.templateHint = `\n        All columns can be referenced using <code>{{ column_name }}</code> syntax.\n        Use <code>{{ @ }}</code> to reference current (this) column.\n        This syntax is applicable to URL, Title and Size options.\n      `;\n    },\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.directive('gridRenderer', GridRenderer);\n  ngModule.directive('gridEditor', GridEditor);\n\n  ngModule.config((VisualizationProvider) => {\n    const defaultOptions = DEFAULT_OPTIONS;\n\n    VisualizationProvider.registerVisualization({\n      type: 'TABLE',\n      name: 'Table',\n      renderTemplate: '<grid-renderer options=\"visualization.options\" query-result=\"queryResult\"></grid-renderer>',\n      editorTemplate: '<grid-editor></grid-editor>',\n      defaultOptions,\n    });\n  });\n}\n\ninit.init = true;\n","import d3 from 'd3';\nimport angular from 'angular';\nimport cloud from 'd3-cloud';\nimport { each } from 'lodash';\n\nimport editorTemplate from './word-cloud-editor.html';\n\nfunction findWordFrequencies(data, columnName) {\n  const wordsHash = {};\n\n  data.forEach((row) => {\n    const wordsList = row[columnName].toString().split(' ');\n    wordsList.forEach((d) => {\n      if (d in wordsHash) {\n        wordsHash[d] += 1;\n      } else {\n        wordsHash[d] = 1;\n      }\n    });\n  });\n\n  return wordsHash;\n}\n\nfunction wordCloudRenderer() {\n  return {\n    restrict: 'E',\n    link($scope, elem) {\n      function reloadCloud() {\n        if (!angular.isDefined($scope.queryResult)) return;\n\n        const data = $scope.queryResult.getData();\n        let wordsHash = {};\n\n        if ($scope.visualization.options.column) {\n          wordsHash = findWordFrequencies(data, $scope.visualization.options.column);\n        }\n\n        const wordList = [];\n        each(wordsHash, (v, key) => {\n          wordList.push({ text: key, size: 10 + Math.pow(v, 2) });\n        });\n\n        const fill = d3.scale.category20();\n        const layout = cloud()\n          .size([500, 500])\n          .words(wordList)\n          .padding(5)\n          .rotate(() => Math.floor(Math.random() * 2) * 90)\n          .font('Impact')\n          .fontSize(d => d.size);\n\n        function draw(words) {\n          d3.select(elem[0].parentNode)\n            .select('svg')\n            .remove();\n\n          d3.select(elem[0].parentNode)\n            .append('svg')\n            .attr('width', layout.size()[0])\n            .attr('height', layout.size()[1])\n            .append('g')\n            .attr('transform', `translate(${layout.size()[0] / 2},${layout.size()[1] / 2})`)\n            .selectAll('text')\n            .data(words)\n            .enter()\n            .append('text')\n            .style('font-size', d => `${d.size}px`)\n            .style('font-family', 'Impact')\n            .style('fill', (d, i) => fill(i))\n            .attr('text-anchor', 'middle')\n            .attr('transform', d => `translate(${[d.x, d.y]})rotate(${d.rotate})`)\n            .text(d => d.text);\n        }\n\n        layout.on('end', draw);\n\n        layout.start();\n      }\n\n      $scope.$watch('queryResult && queryResult.getData()', reloadCloud);\n      $scope.$watch('visualization.options.column', reloadCloud);\n    },\n  };\n}\n\nfunction wordCloudEditor() {\n  return {\n    restrict: 'E',\n    template: editorTemplate,\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.directive('wordCloudEditor', wordCloudEditor);\n  ngModule.directive('wordCloudRenderer', wordCloudRenderer);\n\n  const defaultOptions = {\n    defaultRows: 8,\n  };\n\n  ngModule.config((VisualizationProvider) => {\n    VisualizationProvider.registerVisualization({\n      type: 'WORD_CLOUD',\n      name: 'Word Cloud',\n      renderTemplate:\n        '<word-cloud-renderer options=\"visualization.options\" query-result=\"queryResult\"></word-cloud-renderer>',\n      editorTemplate: '<word-cloud-editor></word-cloud-editor>',\n      defaultOptions,\n    });\n  });\n}\n\ninit.init = true;\n","var map = {\n\t\"./admin/outdated-queries/index.js\": 1394,\n\t\"./admin/status/index.js\": 1395,\n\t\"./admin/tasks/index.js\": 1396,\n\t\"./alert/index.js\": 1397,\n\t\"./alerts/AlertsList.jsx\": 1398,\n\t\"./dashboards/DashboardList.jsx\": 1399,\n\t\"./dashboards/DashboardListEmptyState.jsx\": 428,\n\t\"./dashboards/ShareDashboardDialog.jsx\": 429,\n\t\"./dashboards/dashboard.js\": 1403,\n\t\"./dashboards/public-dashboard-page.js\": 1404,\n\t\"./data-sources/list.js\": 1405,\n\t\"./data-sources/show.js\": 237,\n\t\"./destinations/list.js\": 1406,\n\t\"./destinations/show.js\": 1407,\n\t\"./groups/GroupDataSources.jsx\": 1408,\n\t\"./groups/GroupMembers.jsx\": 1409,\n\t\"./groups/GroupsList.jsx\": 1410,\n\t\"./home/index.js\": 1411,\n\t\"./queries-list/QueriesList.jsx\": 1412,\n\t\"./queries-list/QueriesListEmptyState.jsx\": 430,\n\t\"./queries/add-to-dashboard.js\": 1414,\n\t\"./queries/source-view.js\": 1415,\n\t\"./queries/view.js\": 1416,\n\t\"./query-snippets/edit.js\": 1417,\n\t\"./query-snippets/list.js\": 1419,\n\t\"./settings/organization.js\": 1420,\n\t\"./users/UserProfile.jsx\": 1421,\n\t\"./users/UsersList.jsx\": 1423,\n\t\"./users/index.js\": 1424\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 1393;","import moment from 'moment';\n\nimport { Paginator } from '@/lib/pagination';\nimport template from './outdated-queries.html';\n\nfunction OutdatedQueriesCtrl($scope, $http, $timeout) {\n  $scope.autoUpdate = true;\n\n  this.queries = new Paginator([], { itemsPerPage: 50 });\n\n  const refresh = () => {\n    if ($scope.autoUpdate) {\n      $scope.refresh_time = moment().add(1, 'minutes');\n      $http.get('/api/admin/queries/outdated').success((data) => {\n        this.queries.updateRows(data.queries);\n        $scope.updatedAt = data.updated_at * 1000.0;\n      });\n    }\n\n    const timer = $timeout(refresh, 59 * 1000);\n\n    $scope.$on('$destroy', () => {\n      if (timer) {\n        $timeout.cancel(timer);\n      }\n    });\n  };\n\n  refresh();\n}\n\nexport default function init(ngModule) {\n  ngModule.component('outdatedQueriesPage', {\n    template,\n    controller: OutdatedQueriesCtrl,\n  });\n\n  return {\n    '/admin/queries/outdated': {\n      template: '<outdated-queries-page></outdated-queries-page>',\n      title: 'Outdated Queries',\n    },\n  };\n}\n\ninit.init = true;\n","import template from './status.html';\n\n// TODO: switch to $ctrl instead of $scope.\nfunction AdminStatusCtrl($scope, $http, $timeout, currentUser, Events) {\n  Events.record('view', 'page', 'admin/status');\n\n  const refresh = () => {\n    $http.get('/status.json').success((data) => {\n      $scope.workers = data.workers;\n      delete data.workers;\n      $scope.manager = data.manager;\n      delete data.manager;\n      $scope.database_metrics = data.database_metrics;\n      delete data.database_metrics;\n      $scope.status = data;\n    });\n\n    const timer = $timeout(refresh, 59 * 1000);\n\n    $scope.$on('$destroy', () => {\n      if (timer) {\n        $timeout.cancel(timer);\n      }\n    });\n  };\n\n  refresh();\n}\n\nexport default function init(ngModule) {\n  ngModule.component('statusPage', {\n    template,\n    controller: AdminStatusCtrl,\n  });\n\n  return {\n    '/admin/status': {\n      template: '<status-page></status-page>',\n      title: 'System Status',\n    },\n  };\n}\n\ninit.init = true;\n","import { react2angular } from 'react2angular';\nimport CeleryStatus from '@/components/admin/CeleryStatus';\nimport template from './tasks.html';\n\nfunction TasksCtrl(Events) {\n  Events.record('view', 'page', 'admin/tasks');\n}\n\nexport default function init(ngModule) {\n  ngModule.component('adminCeleryStatus', react2angular(CeleryStatus));\n  ngModule.component('tasksPage', {\n    template,\n    controller: TasksCtrl,\n  });\n\n  return {\n    '/admin/queries/tasks': {\n      template: '<tasks-page></tasks-page>',\n      title: 'Celery Status',\n    },\n  };\n}\n\ninit.init = true;\n","import { template as templateBuilder } from 'lodash';\nimport template from './alert.html';\n\nfunction AlertCtrl($scope, $routeParams, $location, $sce, toastr, currentUser, Query, Events, Alert) {\n  this.alertId = $routeParams.alertId;\n\n  if (this.alertId === 'new') {\n    Events.record('view', 'page', 'alerts/new');\n  }\n\n  this.trustAsHtml = html => $sce.trustAsHtml(html);\n\n  this.onQuerySelected = (item) => {\n    this.alert.query = item;\n    this.selectedQuery = new Query(item);\n    this.selectedQuery.getQueryResultPromise().then((result) => {\n      this.queryResult = result;\n      this.alert.options.column = this.alert.options.column || result.getColumnNames()[0];\n    });\n    $scope.$applyAsync();\n  };\n\n  if (this.alertId === 'new') {\n    this.alert = new Alert({ options: {} });\n    this.canEdit = true;\n  } else {\n    this.alert = Alert.get({ id: this.alertId }, (alert) => {\n      this.onQuerySelected(alert.query);\n      this.canEdit = currentUser.canEdit(this.alert);\n    });\n  }\n\n  this.ops = ['greater than', 'less than', 'equals'];\n  this.selectedQuery = null;\n\n  const defaultNameBuilder = templateBuilder('<%= query.name %>: <%= options.column %> <%= options.op %> <%= options.value %>');\n\n  this.getDefaultName = () => {\n    if (!this.alert.query) {\n      return undefined;\n    }\n    return defaultNameBuilder(this.alert);\n  };\n\n  this.searchQueries = (term) => {\n    if (!term || term.length < 3) {\n      return;\n    }\n\n    Query.query({ q: term }, (results) => {\n      this.queries = results.results;\n    });\n  };\n\n  this.saveChanges = () => {\n    if (this.alert.name === undefined || this.alert.name === '') {\n      this.alert.name = this.getDefaultName();\n    }\n    if (this.alert.rearm === '' || this.alert.rearm === 0) {\n      this.alert.rearm = null;\n    }\n    this.alert.$save(\n      (alert) => {\n        toastr.success('Saved.');\n        if (this.alertId === 'new') {\n          $location.path(`/alerts/${alert.id}`).replace();\n        }\n      },\n      () => {\n        toastr.error('Failed saving alert.');\n      },\n    );\n  };\n\n  this.delete = () => {\n    this.alert.$delete(\n      () => {\n        $location.path('/alerts');\n        toastr.success('Alert deleted.');\n      },\n      () => {\n        toastr.error('Failed deleting alert.');\n      },\n    );\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.component('alertPage', {\n    template,\n    controller: AlertCtrl,\n  });\n\n  return {\n    '/alerts/:alertId': {\n      template: '<alert-page></alert-page>',\n      title: 'Alerts',\n    },\n  };\n}\n\ninit.init = true;\n","import React from 'react';\nimport { react2angular } from 'react2angular';\n\nimport { toUpper } from 'lodash';\nimport { PageHeader } from '@/components/PageHeader';\nimport { Paginator } from '@/components/Paginator';\nimport { EmptyState } from '@/components/empty-state/EmptyState';\n\nimport { wrap as liveItemsList, ControllerType } from '@/components/items-list/ItemsList';\nimport { ResourceItemsSource } from '@/components/items-list/classes/ItemsSource';\nimport { StateStorage } from '@/components/items-list/classes/StateStorage';\n\nimport LoadingState from '@/components/items-list/components/LoadingState';\nimport ItemsTable, { Columns } from '@/components/items-list/components/ItemsTable';\n\nimport { Alert } from '@/services/alert';\nimport { routesToAngularRoutes } from '@/lib/utils';\n\nconst STATE_CLASS = {\n  unknown: 'label-warning',\n  ok: 'label-success',\n  triggered: 'label-danger',\n};\n\nclass AlertsList extends React.Component {\n  static propTypes = {\n    controller: ControllerType.isRequired,\n  };\n\n  listColumns = [\n    Columns.custom.sortable((text, alert) => (\n      <div>\n        <a className=\"table-main-title\" href={'alerts/' + alert.id}>{alert.name}</a>\n      </div>\n    ), {\n      title: 'Name',\n      field: 'name',\n    }),\n    Columns.custom.sortable((text, alert) => (\n      <div>\n        <span className={`label ${STATE_CLASS[alert.state]}`}>{toUpper(alert.state)}</span>\n      </div>\n    ), {\n      title: 'State',\n      field: 'state',\n      width: '1%',\n    }),\n    Columns.timeAgo.sortable({ title: 'Last Updated At',\n      field: 'updated_at',\n      className: 'text-nowrap',\n      width: '1%' }),\n    Columns.avatar({ field: 'user', className: 'p-l-0 p-r-0' }, name => `Created by ${name}`),\n    Columns.dateTime.sortable({ title: 'Created At',\n      field: 'created_at',\n      className: 'text-nowrap',\n      width: '1%' }),\n  ];\n\n  render() {\n    const { controller } = this.props;\n\n    return (\n      <div className=\"container\">\n        <PageHeader title={controller.params.title} />\n        <div className=\"m-l-15 m-r-15\">\n          {!controller.isLoaded && <LoadingState className=\"\" />}\n          {controller.isLoaded && controller.isEmpty && (\n            <EmptyState\n              icon=\"fa fa-bell-o\"\n              illustration=\"alert\"\n              description=\"Get notified on certain events\"\n              helpLink=\"https://redash.io/help/user-guide/alerts/\"\n              showAlertStep\n            />\n          )}\n          {\n            controller.isLoaded && !controller.isEmpty && (\n              <div className=\"table-responsive bg-white tiled\">\n                <ItemsTable\n                  items={controller.pageItems}\n                  columns={this.listColumns}\n                  orderByField={controller.orderByField}\n                  orderByReverse={controller.orderByReverse}\n                  toggleSorting={controller.toggleSorting}\n                />\n                <Paginator\n                  totalCount={controller.totalItemsCount}\n                  itemsPerPage={controller.itemsPerPage}\n                  page={controller.page}\n                  onChange={page => controller.updatePagination({ page })}\n                />\n              </div>\n            )\n          }\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default function init(ngModule) {\n  ngModule.component('pageAlertsList', react2angular(liveItemsList(\n    AlertsList,\n    new ResourceItemsSource({\n      isPlainList: true,\n      getRequest() {\n        return {};\n      },\n      getResource() {\n        return Alert.query.bind(Alert);\n      },\n      getItemProcessor() {\n        return (item => new Alert(item));\n      },\n    }),\n    new StateStorage({ orderByField: 'created_at', orderByReverse: true, itemsPerPage: 20 }),\n  )));\n  return routesToAngularRoutes([\n    {\n      path: '/alerts',\n      title: 'Alerts',\n      key: 'alerts',\n    },\n  ], {\n    reloadOnSearch: false,\n    template: '<page-alerts-list on-error=\"handleError\"></page-alerts-list>',\n    controller($scope, $exceptionHandler) {\n      'ngInject';\n\n      $scope.handleError = $exceptionHandler;\n    },\n  });\n}\n\ninit.init = true;\n","import React from 'react';\nimport { react2angular } from 'react2angular';\n\nimport { PageHeader } from '@/components/PageHeader';\nimport { Paginator } from '@/components/Paginator';\nimport { DashboardTagsControl } from '@/components/tags-control/TagsControl';\n\nimport { wrap as itemsList, ControllerType } from '@/components/items-list/ItemsList';\nimport { ResourceItemsSource } from '@/components/items-list/classes/ItemsSource';\nimport { UrlStateStorage } from '@/components/items-list/classes/StateStorage';\n\nimport LoadingState from '@/components/items-list/components/LoadingState';\nimport * as Sidebar from '@/components/items-list/components/Sidebar';\nimport ItemsTable, { Columns } from '@/components/items-list/components/ItemsTable';\n\nimport Layout from '@/components/layouts/ContentWithSidebar';\n\nimport { Dashboard } from '@/services/dashboard';\nimport { routesToAngularRoutes } from '@/lib/utils';\n\nimport DashboardListEmptyState from './DashboardListEmptyState';\n\nimport './dashboard-list.css';\n\nclass DashboardList extends React.Component {\n  static propTypes = {\n    controller: ControllerType.isRequired,\n  };\n\n  sidebarMenu = [\n    {\n      key: 'all',\n      href: 'dashboards',\n      title: 'All Dashboards',\n    },\n    {\n      key: 'favorites',\n      href: 'dashboards/favorites',\n      title: 'Favorites',\n      icon: () => <Sidebar.MenuIcon icon=\"fa fa-star\" />,\n    },\n  ];\n\n  listColumns = [\n    Columns.favorites({ className: 'p-r-0' }),\n    Columns.custom.sortable((text, item) => (\n      <React.Fragment>\n        <a className=\"table-main-title\" href={'dashboard/' + item.slug} data-test={item.slug}>{ item.name }</a>\n        <DashboardTagsControl\n          className=\"d-block\"\n          tags={item.tags}\n          isDraft={item.is_draft}\n          isArchived={item.is_archived}\n        />\n      </React.Fragment>\n    ), {\n      title: 'Name',\n      field: 'name',\n      width: null,\n    }),\n    Columns.avatar({ field: 'user', className: 'p-l-0 p-r-0' }, name => `Created by ${name}`),\n    Columns.dateTime.sortable({\n      title: 'Created At',\n      field: 'created_at',\n      className: 'text-nowrap',\n      width: '1%',\n    }),\n  ];\n\n  render() {\n    const { controller } = this.props;\n    return (\n      <div className=\"container\">\n        <PageHeader title={controller.params.title} />\n        <Layout className=\"m-l-15 m-r-15\">\n          <Layout.Sidebar className=\"m-b-0\">\n            <Sidebar.SearchInput\n              placeholder=\"Search Dashboards...\"\n              value={controller.searchTerm}\n              onChange={controller.updateSearch}\n            />\n            <Sidebar.Menu items={this.sidebarMenu} selected={controller.params.currentPage} />\n            <Sidebar.Tags url=\"api/dashboards/tags\" onChange={controller.updateSelectedTags} />\n            <Sidebar.PageSizeSelect\n              options={controller.pageSizeOptions}\n              value={controller.itemsPerPage}\n              onChange={itemsPerPage => controller.updatePagination({ itemsPerPage })}\n            />\n          </Layout.Sidebar>\n          <Layout.Content>\n            {controller.isLoaded ? (\n              <div data-test=\"DashboardLayoutContent\">\n                {controller.isEmpty ? (\n                  <DashboardListEmptyState\n                    page={controller.params.currentPage}\n                    searchTerm={controller.searchTerm}\n                    selectedTags={controller.selectedTags}\n                  />\n                ) : (\n                  <div className=\"bg-white tiled table-responsive\">\n                    <ItemsTable\n                      items={controller.pageItems}\n                      columns={this.listColumns}\n                      orderByField={controller.orderByField}\n                      orderByReverse={controller.orderByReverse}\n                      toggleSorting={controller.toggleSorting}\n                    />\n                    <Paginator\n                      totalCount={controller.totalItemsCount}\n                      itemsPerPage={controller.itemsPerPage}\n                      page={controller.page}\n                      onChange={page => controller.updatePagination({ page })}\n                    />\n                  </div>\n                )}\n              </div>\n            ) : (\n              <LoadingState />\n            )}\n          </Layout.Content>\n        </Layout>\n      </div>\n    );\n  }\n}\n\nexport default function init(ngModule) {\n  ngModule.component('pageDashboardList', react2angular(itemsList(\n    DashboardList,\n    new ResourceItemsSource({\n      getResource({ params: { currentPage } }) {\n        return {\n          all: Dashboard.query.bind(Dashboard),\n          favorites: Dashboard.favorites.bind(Dashboard),\n        }[currentPage];\n      },\n      getItemProcessor() {\n        return (item => new Dashboard(item));\n      },\n    }),\n    new UrlStateStorage({ orderByField: 'created_at', orderByReverse: true }),\n  )));\n\n  return routesToAngularRoutes([\n    {\n      path: '/dashboards',\n      title: 'Dashboards',\n      key: 'all',\n    },\n    {\n      path: '/dashboards/favorites',\n      title: 'Favorite Dashboards',\n      key: 'favorites',\n    },\n  ], {\n    reloadOnSearch: false,\n    template: '<page-dashboard-list on-error=\"handleError\"></page-dashboard-list>',\n    controller($scope, $exceptionHandler) {\n      'ngInject';\n\n      $scope.handleError = $exceptionHandler;\n    },\n  });\n}\n\ninit.init = true;\n","import * as _ from 'lodash';\nimport PromiseRejectionError from '@/lib/promise-rejection-error';\nimport getTags from '@/services/getTags';\nimport { policy } from '@/services/policy';\nimport { Widget } from '@/services/widget';\nimport {\n  editableMappingsToParameterMappings,\n  synchronizeWidgetTitles,\n} from '@/components/ParameterMappingInput';\nimport { durationHumanize } from '@/filters';\nimport template from './dashboard.html';\nimport ShareDashboardDialog from './ShareDashboardDialog';\nimport AddWidgetDialog from '@/components/dashboards/AddWidgetDialog';\nimport AddTextboxDialog from '@/components/dashboards/AddTextboxDialog';\n\nimport './dashboard.less';\n\nfunction isWidgetPositionChanged(oldPosition, newPosition) {\n  const fields = ['col', 'row', 'sizeX', 'sizeY', 'autoHeight'];\n  oldPosition = _.pick(oldPosition, fields);\n  newPosition = _.pick(newPosition, fields);\n  return !!_.find(fields, key => newPosition[key] !== oldPosition[key]);\n}\n\nfunction getWidgetsWithChangedPositions(widgets) {\n  return _.filter(widgets, (widget) => {\n    if (!_.isObject(widget.$originalPosition)) {\n      return true;\n    }\n    return isWidgetPositionChanged(widget.$originalPosition, widget.options.position);\n  });\n}\n\nfunction DashboardCtrl(\n  $routeParams,\n  $location,\n  $timeout,\n  $q,\n  $uibModal,\n  $scope,\n  Title,\n  AlertDialog,\n  Dashboard,\n  currentUser,\n  clientConfig,\n  Events,\n  toastr,\n) {\n  this.saveInProgress = false;\n\n  const saveDashboardLayout = (widgets) => {\n    if (!this.dashboard.canEdit()) {\n      return;\n    }\n\n    this.saveInProgress = true;\n    const showMessages = true;\n    return $q\n      .all(_.map(widgets, widget => widget.save()))\n      .then(() => {\n        if (showMessages) {\n          toastr.success('Changes saved.');\n        }\n        // Update original widgets positions\n        _.each(widgets, (widget) => {\n          _.extend(widget.$originalPosition, widget.options.position);\n        });\n      })\n      .catch(() => {\n        if (showMessages) {\n          toastr.error('Error saving changes.');\n        }\n      })\n      .finally(() => {\n        this.saveInProgress = false;\n      });\n  };\n\n  this.layoutEditing = false;\n  this.isFullscreen = false;\n  this.refreshRate = null;\n  this.isGridDisabled = false;\n  this.updateGridItems = null;\n  this.showPermissionsControl = clientConfig.showPermissionsControl;\n  this.globalParameters = [];\n  this.isDashboardOwner = false;\n\n  this.refreshRates = clientConfig.dashboardRefreshIntervals.map(interval => ({\n    name: durationHumanize(interval),\n    rate: interval,\n    enabled: true,\n  }));\n\n  const allowedIntervals = policy.getDashboardRefreshIntervals();\n  if (_.isArray(allowedIntervals)) {\n    _.each(this.refreshRates, (rate) => {\n      rate.enabled = allowedIntervals.indexOf(rate.rate) >= 0;\n    });\n  }\n\n  this.setRefreshRate = (rate, load = true) => {\n    this.refreshRate = rate;\n    if (rate !== null) {\n      if (load) {\n        this.refreshDashboard();\n      }\n      this.autoRefresh();\n    }\n  };\n\n  this.extractGlobalParameters = () => {\n    this.globalParameters = this.dashboard.getParametersDefs();\n  };\n\n  $scope.$on('dashboard.update-parameters', () => {\n    this.extractGlobalParameters();\n  });\n\n  const collectFilters = (dashboard, forceRefresh) => {\n    const queryResultPromises = _.compact(this.dashboard.widgets.map((widget) => {\n      widget.getParametersDefs(); // Force widget to read parameters values from URL\n      return widget.load(forceRefresh);\n    }));\n\n    $q.all(queryResultPromises).then((queryResults) => {\n      const filters = {};\n      queryResults.forEach((queryResult) => {\n        const queryFilters = queryResult.getFilters();\n        queryFilters.forEach((queryFilter) => {\n          const hasQueryStringValue = _.has($location.search(), queryFilter.name);\n\n          if (!(hasQueryStringValue || dashboard.dashboard_filters_enabled)) {\n            // If dashboard filters not enabled, or no query string value given,\n            // skip filters linking.\n            return;\n          }\n\n          if (hasQueryStringValue) {\n            queryFilter.current = $location.search()[queryFilter.name];\n          }\n\n          if (!_.has(filters, queryFilter.name)) {\n            const filter = _.extend({}, queryFilter);\n            filters[filter.name] = filter;\n            filters[filter.name].originFilters = [];\n          }\n\n          // TODO: merge values.\n          filters[queryFilter.name].originFilters.push(queryFilter);\n        });\n      });\n\n      this.filters = _.values(filters);\n      this.filtersOnChange = (filter) => {\n        _.each(filter.originFilters, (originFilter) => {\n          originFilter.current = filter.current;\n        });\n      };\n    });\n  };\n\n  const renderDashboard = (dashboard, force) => {\n    Title.set(dashboard.name);\n    this.extractGlobalParameters();\n    collectFilters(dashboard, force);\n  };\n\n  this.loadDashboard = _.throttle((force) => {\n    Dashboard.get(\n      { slug: $routeParams.dashboardSlug },\n      (dashboard) => {\n        this.dashboard = dashboard;\n        this.isDashboardOwner = currentUser.id === dashboard.user.id || currentUser.hasPermission('admin');\n        Events.record('view', 'dashboard', dashboard.id);\n        renderDashboard(dashboard, force);\n\n        if ($location.search().edit === true) {\n          $location.search('edit', null);\n          this.editLayout(true);\n        }\n\n        if ($location.search().refresh !== undefined) {\n          if (this.refreshRate === null) {\n            const refreshRate = Math.max(30, parseFloat($location.search().refresh));\n\n            this.setRefreshRate(\n              {\n                name: durationHumanize(refreshRate),\n                rate: refreshRate,\n              },\n              false,\n            );\n          }\n        }\n      },\n      (rejection) => {\n        const statusGroup = Math.floor(rejection.status / 100);\n        if (statusGroup === 5) {\n          // recoverable errors - all 5** (server is temporarily unavailable\n          // for some reason, but it should get up soon).\n          this.loadDashboard();\n        } else {\n          // all kind of 4** errors are not recoverable, so just display them\n          throw new PromiseRejectionError(rejection);\n        }\n      },\n    );\n  }, 1000);\n\n  this.loadDashboard();\n\n  this.refreshDashboard = () => {\n    renderDashboard(this.dashboard, true);\n  };\n\n  this.autoRefresh = () => {\n    $timeout(() => {\n      this.refreshDashboard();\n    }, this.refreshRate.rate * 1000).then(() => this.autoRefresh());\n  };\n\n  this.archiveDashboard = () => {\n    const archive = () => {\n      Events.record('archive', 'dashboard', this.dashboard.id);\n      this.dashboard.$delete();\n    };\n\n    const title = 'Archive Dashboard';\n    const message = `Are you sure you want to archive the \"${this.dashboard.name}\" dashboard?`;\n    const confirm = { class: 'btn-warning', title: 'Archive' };\n\n    AlertDialog.open(title, message, confirm).then(archive);\n  };\n\n  this.showManagePermissionsModal = () => {\n    $uibModal.open({\n      component: 'permissionsEditor',\n      resolve: {\n        aclUrl: { url: `api/dashboards/${this.dashboard.id}/acl` },\n        owner: this.dashboard.user,\n      },\n    });\n  };\n\n  this.editLayout = (enableEditing, applyChanges) => {\n    if (!this.isGridDisabled) {\n      if (!enableEditing) {\n        if (applyChanges) {\n          const changedWidgets = getWidgetsWithChangedPositions(this.dashboard.widgets);\n          saveDashboardLayout(changedWidgets);\n        } else {\n          // Revert changes\n          const items = {};\n          _.each(this.dashboard.widgets, (widget) => {\n            _.extend(widget.options.position, widget.$originalPosition);\n            items[widget.id] = widget.options.position;\n          });\n          this.dashboard.widgets = Dashboard.prepareWidgetsForDashboard(this.dashboard.widgets);\n          if (this.updateGridItems) {\n            this.updateGridItems(items);\n          }\n        }\n      }\n\n      this.layoutEditing = enableEditing;\n    }\n  };\n\n  this.loadTags = () => getTags('api/dashboards/tags').then(tags => _.map(tags, t => t.name));\n\n  const updateDashboard = (data) => {\n    _.extend(this.dashboard, data);\n    data = _.extend({}, data, {\n      slug: this.dashboard.id,\n      version: this.dashboard.version,\n    });\n    Dashboard.save(\n      data,\n      (dashboard) => {\n        _.extend(this.dashboard, _.pick(dashboard, _.keys(data)));\n      },\n      (error) => {\n        if (error.status === 403) {\n          toastr.error('Dashboard update failed: Permission Denied.');\n        } else if (error.status === 409) {\n          toastr.error(\n            'It seems like the dashboard has been modified by another user. ' +\n            'Please copy/backup your changes and reload this page.',\n            { autoDismiss: false },\n          );\n        }\n      },\n    );\n  };\n\n  this.saveName = (name) => {\n    updateDashboard({ name });\n  };\n\n  this.saveTags = (tags) => {\n    updateDashboard({ tags });\n  };\n\n  this.updateDashboardFiltersState = () => {\n    collectFilters(this.dashboard, false);\n    Dashboard.save(\n      {\n        slug: this.dashboard.id,\n        version: this.dashboard.version,\n        dashboard_filters_enabled: this.dashboard.dashboard_filters_enabled,\n      },\n      (dashboard) => {\n        this.dashboard = dashboard;\n      },\n      (error) => {\n        if (error.status === 403) {\n          toastr.error('Name update failed: Permission denied.');\n        } else if (error.status === 409) {\n          toastr.error(\n            'It seems like the dashboard has been modified by another user. ' +\n              'Please copy/backup your changes and reload this page.',\n            { autoDismiss: false },\n          );\n        }\n      },\n    );\n  };\n\n  this.showAddTextboxDialog = () => {\n    AddTextboxDialog.showModal({\n      dashboard: this.dashboard,\n      onConfirm: this.addTextbox,\n    });\n  };\n\n  this.addTextbox = (text) => {\n    const widget = new Widget({\n      dashboard_id: this.dashboard.id,\n      options: {\n        isHidden: false,\n        position: {},\n      },\n      text,\n      visualization: null,\n      visualization_id: null,\n    });\n\n    const position = this.dashboard.calculateNewWidgetPosition(widget);\n    widget.options.position.col = position.col;\n    widget.options.position.row = position.row;\n\n    return widget.save()\n      .then(() => {\n        this.dashboard.widgets.push(widget);\n        this.onWidgetAdded();\n      });\n  };\n\n  this.showAddWidgetDialog = () => {\n    AddWidgetDialog.showModal({\n      dashboard: this.dashboard,\n      onConfirm: this.addWidget,\n    });\n  };\n\n  this.addWidget = (selectedVis, parameterMappings) => {\n    const widget = new Widget({\n      visualization_id: selectedVis && selectedVis.id,\n      dashboard_id: this.dashboard.id,\n      options: {\n        isHidden: false,\n        position: {},\n        parameterMappings: editableMappingsToParameterMappings(parameterMappings),\n      },\n      visualization: selectedVis,\n      text: '',\n    });\n\n    const position = this.dashboard.calculateNewWidgetPosition(widget);\n    widget.options.position.col = position.col;\n    widget.options.position.row = position.row;\n\n    const widgetsToSave = [\n      widget,\n      ...synchronizeWidgetTitles(widget.options.parameterMappings, this.dashboard.widgets),\n    ];\n\n    return Promise.all(widgetsToSave.map(w => w.save()))\n      .then(() => {\n        this.dashboard.widgets.push(widget);\n        this.onWidgetAdded();\n      });\n  };\n\n  this.onWidgetAdded = () => {\n    this.extractGlobalParameters();\n    // Save position of newly added widget (but not entire layout)\n    const widget = _.last(this.dashboard.widgets);\n    if (_.isObject(widget)) {\n      return widget.save();\n    }\n    $scope.$applyAsync();\n  };\n\n  this.removeWidget = (widgetId) => {\n    this.dashboard.widgets = this.dashboard.widgets.filter(w => w.id !== undefined && w.id !== widgetId);\n    this.extractGlobalParameters();\n    if (!this.layoutEditing) {\n      // We need to wait a bit while `angular` updates widgets, and only then save new layout\n      $timeout(() => {\n        const changedWidgets = getWidgetsWithChangedPositions(this.dashboard.widgets);\n        saveDashboardLayout(changedWidgets);\n      }, 50);\n    }\n  };\n\n  this.toggleFullscreen = () => {\n    this.isFullscreen = !this.isFullscreen;\n    document.querySelector('body').classList.toggle('headless');\n\n    if (this.isFullscreen) {\n      $location.search('fullscreen', true);\n    } else {\n      $location.search('fullscreen', null);\n    }\n  };\n\n  this.togglePublished = () => {\n    Events.record('toggle_published', 'dashboard', this.dashboard.id);\n    this.dashboard.is_draft = !this.dashboard.is_draft;\n    this.saveInProgress = true;\n    Dashboard.save(\n      {\n        slug: this.dashboard.id,\n        name: this.dashboard.name,\n        is_draft: this.dashboard.is_draft,\n      },\n      (dashboard) => {\n        this.saveInProgress = false;\n        this.dashboard.version = dashboard.version;\n      },\n    );\n  };\n\n  if (_.has($location.search(), 'fullscreen')) {\n    this.toggleFullscreen();\n  }\n\n  this.openShareForm = () => {\n    // check if any of the wigets have query parameters\n    const hasQueryParams = _.some(\n      this.dashboard.widgets,\n      w => !_.isEmpty(w.getQuery() && w.getQuery().getParametersDefs()),\n    );\n\n    ShareDashboardDialog.showModal({\n      dashboard: this.dashboard,\n      hasQueryParams,\n    });\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.component('dashboardPage', {\n    template,\n    controller: DashboardCtrl,\n  });\n\n  return {\n    '/dashboard/:dashboardSlug': {\n      template: '<dashboard-page></dashboard-page>',\n      reloadOnSearch: false,\n    },\n  };\n}\n\ninit.init = true;\n","import logoUrl from '@/assets/images/redash_icon_small.png';\nimport template from './public-dashboard-page.html';\nimport './dashboard.less';\n\nfunction loadDashboard($http, $route) {\n  const token = $route.current.params.token;\n  return $http.get(`api/dashboards/public/${token}`).then(response => response.data);\n}\n\nconst PublicDashboardPage = {\n  template,\n  bindings: {\n    dashboard: '<',\n  },\n  controller($timeout, $location, $http, $route, dashboardGridOptions, Dashboard) {\n    'ngInject';\n\n    this.dashboardGridOptions = Object.assign({}, dashboardGridOptions, {\n      resizable: { enabled: false },\n      draggable: { enabled: false },\n    });\n\n    this.logoUrl = logoUrl;\n    this.public = true;\n    this.dashboard.widgets = Dashboard.prepareDashboardWidgets(this.dashboard.widgets);\n\n    const refreshRate = Math.max(30, parseFloat($location.search().refresh));\n\n    if (refreshRate) {\n      const refresh = () => {\n        loadDashboard($http, $route).then((data) => {\n          this.dashboard = data;\n          this.dashboard.widgets = Dashboard.prepareDashboardWidgets(this.dashboard.widgets);\n\n          $timeout(refresh, refreshRate * 1000.0);\n        });\n      };\n\n      $timeout(refresh, refreshRate * 1000.0);\n    }\n  },\n};\n\nexport default function init(ngModule) {\n  ngModule.component('publicDashboardPage', PublicDashboardPage);\n\n  function loadPublicDashboard($http, $route) {\n    'ngInject';\n\n    return loadDashboard($http, $route);\n  }\n\n  function session($http, $route, Auth) {\n    const token = $route.current.params.token;\n    Auth.setApiKey(token);\n    return Auth.loadConfig();\n  }\n\n  ngModule.config(($routeProvider) => {\n    $routeProvider.when('/public/dashboards/:token', {\n      template: '<public-dashboard-page dashboard=\"$resolve.dashboard\"></public-dashboard-page>',\n      reloadOnSearch: false,\n      resolve: {\n        dashboard: loadPublicDashboard,\n        session,\n      },\n    });\n  });\n\n  return [];\n}\n\ninit.init = true;\n","import settingsMenu from '@/services/settingsMenu';\nimport { policy } from '@/services/policy';\nimport template from './list.html';\n\nfunction DataSourcesCtrl(DataSource) {\n  this.policy = policy;\n  this.dataSources = DataSource.query();\n}\n\nexport default function init(ngModule) {\n  settingsMenu.add({\n    permission: 'admin',\n    title: 'Data Sources',\n    path: 'data_sources',\n    order: 1,\n  });\n\n  ngModule.component('dsListPage', {\n    controller: DataSourcesCtrl,\n    template,\n  });\n\n  return {\n    '/data_sources': {\n      template: '<ds-list-page></ds-list-page>',\n      title: 'Data Sources',\n    },\n  };\n}\n\ninit.init = true;\n","import settingsMenu from '@/services/settingsMenu';\nimport template from './list.html';\n\nfunction DestinationsCtrl($scope, $location, toastr, currentUser, Destination) {\n  $scope.destinations = Destination.query();\n}\n\nexport default function init(ngModule) {\n  settingsMenu.add({\n    permission: 'admin',\n    title: 'Alert Destinations',\n    path: 'destinations',\n    order: 4,\n  });\n\n  ngModule.controller('DestinationsCtrl', DestinationsCtrl);\n\n  return {\n    '/destinations': {\n      template,\n      controller: 'DestinationsCtrl',\n      title: 'Destinations',\n    },\n  };\n}\n\ninit.init = true;\n","import { find } from 'lodash';\nimport template from './show.html';\nimport { deleteConfirm, logAndToastrError, toastrSuccessAndPath } from '../data-sources/show';\n\nfunction DestinationCtrl(\n  $scope, $route, $routeParams, $http, $location, toastr,\n  currentUser, AlertDialog, Destination,\n) {\n  $scope.destination = $route.current.locals.destination;\n  $scope.destinationId = $routeParams.destinationId;\n  $scope.types = $route.current.locals.types;\n  $scope.type = find($scope.types, { type: $scope.destination.type });\n  $scope.canChangeType = $scope.destination.id === undefined;\n\n  $scope.$watch('destination.id', (id) => {\n    if (id !== $scope.destinationId && id !== undefined) {\n      $location.path(`/destinations/${id}`).replace();\n    }\n  });\n\n  $scope.setType = (type) => {\n    $scope.type = type;\n    $scope.destination.type = type.type;\n  };\n\n  $scope.resetType = () => {\n    $scope.type = undefined;\n    $scope.destination = new Destination({ options: {} });\n  };\n\n  function deleteDestination(callback) {\n    const doDelete = () => {\n      $scope.destination.$delete(() => {\n        toastrSuccessAndPath('Destination', 'destinations', toastr, $location);\n      }, (httpResponse) => {\n        logAndToastrError('destination', httpResponse, toastr);\n      });\n    };\n\n    const title = 'Delete Destination';\n    const message = `Are you sure you want to delete the \"${$scope.destination.name}\" destination?`;\n\n    AlertDialog.open(title, message, deleteConfirm).then(doDelete, callback);\n  }\n\n  $scope.actions = [\n    { name: 'Delete', type: 'danger', callback: deleteDestination },\n  ];\n}\n\nexport default function init(ngModule) {\n  ngModule.controller('DestinationCtrl', DestinationCtrl);\n\n  return {\n    '/destinations/new': {\n      template,\n      controller: 'DestinationCtrl',\n      title: 'Destinations',\n      resolve: {\n        destination: (Destination) => {\n          'ngInject';\n\n          return new Destination({ options: {} });\n        },\n        types: ($http) => {\n          'ngInject';\n\n          return $http.get('api/destinations/types').then(response => response.data);\n        },\n      },\n    },\n    '/destinations/:destinationId': {\n      template,\n      controller: 'DestinationCtrl',\n      title: 'Destinations',\n      resolve: {\n        destination: (Destination, $route) => {\n          'ngInject';\n\n          return Destination.get({ id: $route.current.params.destinationId }).$promise;\n        },\n        types: ($http) => {\n          'ngInject';\n\n          return $http.get('api/destinations/types').then(response => response.data);\n        },\n      },\n    },\n  };\n}\n\ninit.init = true;\n","import { filter, map, includes } from 'lodash';\nimport React from 'react';\nimport { react2angular } from 'react2angular';\nimport Button from 'antd/lib/button';\nimport Dropdown from 'antd/lib/dropdown';\nimport Menu from 'antd/lib/menu';\nimport Icon from 'antd/lib/icon';\n\nimport { Paginator } from '@/components/Paginator';\n\nimport { wrap as liveItemsList, ControllerType } from '@/components/items-list/ItemsList';\nimport { ResourceItemsSource } from '@/components/items-list/classes/ItemsSource';\nimport { StateStorage } from '@/components/items-list/classes/StateStorage';\n\nimport LoadingState from '@/components/items-list/components/LoadingState';\nimport ItemsTable, { Columns } from '@/components/items-list/components/ItemsTable';\nimport SelectItemsDialog from '@/components/SelectItemsDialog';\nimport { DataSourcePreviewCard } from '@/components/PreviewCard';\n\nimport GroupName from '@/components/groups/GroupName';\nimport ListItemAddon from '@/components/groups/ListItemAddon';\nimport Sidebar from '@/components/groups/DetailsPageSidebar';\nimport Layout from '@/components/layouts/ContentWithSidebar';\n\nimport { toastr } from '@/services/ng';\nimport { currentUser } from '@/services/auth';\nimport { Group } from '@/services/group';\nimport { DataSource } from '@/services/data-source';\nimport navigateTo from '@/services/navigateTo';\nimport { routesToAngularRoutes } from '@/lib/utils';\n\nclass GroupDataSources extends React.Component {\n  static propTypes = {\n    controller: ControllerType.isRequired,\n  };\n\n  groupId = parseInt(this.props.controller.params.groupId, 10);\n\n  group = null;\n\n  sidebarMenu = [\n    {\n      key: 'users',\n      href: `groups/${this.groupId}`,\n      title: 'Members',\n    },\n    {\n      key: 'datasources',\n      href: `groups/${this.groupId}/data_sources`,\n      title: 'Data Sources',\n      isAvailable: () => currentUser.isAdmin,\n    },\n  ];\n\n  listColumns = [\n    Columns.custom((text, datasource) => (\n      <DataSourcePreviewCard dataSource={datasource} withLink />\n    ), {\n      title: 'Name',\n      field: 'name',\n      width: null,\n    }),\n    Columns.custom((text, datasource) => {\n      const menu = (\n        <Menu\n          selectedKeys={[datasource.view_only ? 'viewonly' : 'full']}\n          onClick={item => this.setDataSourcePermissions(datasource, item.key)}\n        >\n          <Menu.Item key=\"full\">Full Access</Menu.Item>\n          <Menu.Item key=\"viewonly\">View Only</Menu.Item>\n        </Menu>\n      );\n\n      return (\n        <Dropdown trigger={['click']} overlay={menu}>\n          <Button className=\"w-100\">{datasource.view_only ? 'View Only' : 'Full Access'}<Icon type=\"down\" /></Button>\n        </Dropdown>\n      );\n    }, {\n      width: '1%',\n      className: 'p-r-0',\n      isAvailable: () => currentUser.isAdmin,\n    }),\n    Columns.custom((text, datasource) => (\n      <Button className=\"w-100\" type=\"danger\" onClick={() => this.removeGroupDataSource(datasource)}>Remove</Button>\n    ), {\n      width: '1%',\n      isAvailable: () => currentUser.isAdmin,\n    }),\n  ];\n\n  componentDidMount() {\n    Group.get({ id: this.groupId }).$promise\n      .then((group) => {\n        this.group = group;\n        this.forceUpdate();\n      })\n      .catch((error) => {\n        this.props.controller.handleError(error);\n      });\n  }\n\n  removeGroupDataSource = (datasource) => {\n    Group.removeDataSource({ id: this.groupId, dataSourceId: datasource.id }).$promise\n      .then(() => {\n        this.props.controller.updatePagination({ page: 1 });\n        this.props.controller.update();\n      })\n      .catch(() => {\n        toastr.error('Failed to remove data source from group.');\n      });\n  };\n\n  setDataSourcePermissions = (datasource, permission) => {\n    const viewOnly = permission !== 'full';\n\n    Group.updateDataSource({ id: this.groupId, dataSourceId: datasource.id }, { view_only: viewOnly }).$promise\n      .then(() => {\n        datasource.view_only = viewOnly;\n        this.forceUpdate();\n      })\n      .catch(() => {\n        toastr.error('Failed change data source permissions.');\n      });\n  };\n\n  addDataSources = () => {\n    const allDataSources = DataSource.query().$promise;\n    const alreadyAddedDataSources = map(this.props.controller.allItems, ds => ds.id);\n    SelectItemsDialog.showModal({\n      dialogTitle: 'Add Data Sources',\n      inputPlaceholder: 'Search data sources...',\n      selectedItemsTitle: 'New Data Sources',\n      searchItems: (searchTerm) => {\n        searchTerm = searchTerm.toLowerCase();\n        return allDataSources.then(items => filter(items, ds => ds.name.toLowerCase().includes(searchTerm)));\n      },\n      renderItem: (item, { isSelected }) => {\n        const alreadyInGroup = includes(alreadyAddedDataSources, item.id);\n        return {\n          content: (\n            <DataSourcePreviewCard dataSource={item}>\n              <ListItemAddon isSelected={isSelected} alreadyInGroup={alreadyInGroup} />\n            </DataSourcePreviewCard>\n          ),\n          isDisabled: alreadyInGroup,\n          className: isSelected || alreadyInGroup ? 'selected' : '',\n        };\n      },\n      renderStagedItem: (item, { isSelected }) => ({\n        content: (\n          <DataSourcePreviewCard dataSource={item}>\n            <ListItemAddon isSelected={isSelected} isStaged />\n          </DataSourcePreviewCard>\n        ),\n      }),\n      save: (items) => {\n        const promises = map(items, ds => Group.addDataSource({ id: this.groupId, data_source_id: ds.id }).$promise);\n        return Promise.all(promises);\n      },\n    }).result.finally(() => {\n      this.props.controller.update();\n    });\n  };\n\n  render() {\n    const { controller } = this.props;\n    return (\n      <div data-test=\"Group\">\n        <GroupName className=\"d-block m-t-0 m-b-15\" group={this.group} onChange={() => this.forceUpdate()} />\n        <Layout>\n          <Layout.Sidebar>\n            <Sidebar\n              controller={controller}\n              group={this.group}\n              items={this.sidebarMenu}\n              canAddDataSources={currentUser.isAdmin}\n              onAddDataSourcesClick={this.addDataSources}\n              onGroupDeleted={() => navigateTo('/groups', true)}\n            />\n          </Layout.Sidebar>\n          <Layout.Content>\n            {!controller.isLoaded && <LoadingState className=\"\" />}\n            {controller.isLoaded && controller.isEmpty && (\n              <div className=\"text-center\">\n                There are no data sources in this group yet.\n                {currentUser.isAdmin && (\n                  <div className=\"m-t-5\">\n                    <a href=\"javascript:void(0)\" onClick={this.addDataSources}>Click here</a>\n                    {' '} to add data sources.\n                  </div>\n                )}\n              </div>\n            )}\n            {\n              controller.isLoaded && !controller.isEmpty && (\n                <div className=\"table-responsive\">\n                  <ItemsTable\n                    items={controller.pageItems}\n                    columns={this.listColumns}\n                    showHeader={false}\n                    context={this.actions}\n                    orderByField={controller.orderByField}\n                    orderByReverse={controller.orderByReverse}\n                    toggleSorting={controller.toggleSorting}\n                  />\n                  <Paginator\n                    totalCount={controller.totalItemsCount}\n                    itemsPerPage={controller.itemsPerPage}\n                    page={controller.page}\n                    onChange={page => controller.updatePagination({ page })}\n                  />\n                </div>\n              )\n            }\n          </Layout.Content>\n        </Layout>\n      </div>\n    );\n  }\n}\n\nexport default function init(ngModule) {\n  ngModule.component('pageGroupDataSources', react2angular(liveItemsList(\n    GroupDataSources,\n    new ResourceItemsSource({\n      isPlainList: true,\n      getRequest(unused, { params: { groupId } }) {\n        return { id: groupId };\n      },\n      getResource() {\n        return Group.dataSources.bind(Group);\n      },\n      getItemProcessor() {\n        return (item => new DataSource(item));\n      },\n    }),\n    new StateStorage({ orderByField: 'name' }),\n  )));\n\n  return routesToAngularRoutes([\n    {\n      path: '/groups/:groupId/data_sources',\n      title: 'Group Data Sources',\n      key: 'datasources',\n    },\n  ], {\n    reloadOnSearch: false,\n    template: '<settings-screen><page-group-data-sources on-error=\"handleError\"></page-group-data-sources></settings-screen>',\n    controller($scope, $exceptionHandler) {\n      'ngInject';\n\n      $scope.handleError = $exceptionHandler;\n    },\n  });\n}\n\ninit.init = true;\n","import { includes, map } from 'lodash';\nimport React from 'react';\nimport { react2angular } from 'react2angular';\nimport Button from 'antd/lib/button';\n\nimport { Paginator } from '@/components/Paginator';\n\nimport { wrap as liveItemsList, ControllerType } from '@/components/items-list/ItemsList';\nimport { ResourceItemsSource } from '@/components/items-list/classes/ItemsSource';\nimport { StateStorage } from '@/components/items-list/classes/StateStorage';\n\nimport LoadingState from '@/components/items-list/components/LoadingState';\nimport ItemsTable, { Columns } from '@/components/items-list/components/ItemsTable';\nimport SelectItemsDialog from '@/components/SelectItemsDialog';\nimport { UserPreviewCard } from '@/components/PreviewCard';\n\nimport GroupName from '@/components/groups/GroupName';\nimport ListItemAddon from '@/components/groups/ListItemAddon';\nimport Sidebar from '@/components/groups/DetailsPageSidebar';\nimport Layout from '@/components/layouts/ContentWithSidebar';\n\nimport { toastr } from '@/services/ng';\nimport { currentUser } from '@/services/auth';\nimport { Group } from '@/services/group';\nimport { User } from '@/services/user';\nimport navigateTo from '@/services/navigateTo';\nimport { routesToAngularRoutes } from '@/lib/utils';\n\nclass GroupMembers extends React.Component {\n  static propTypes = {\n    controller: ControllerType.isRequired,\n  };\n\n  groupId = parseInt(this.props.controller.params.groupId, 10);\n\n  group = null;\n\n  sidebarMenu = [\n    {\n      key: 'users',\n      href: `groups/${this.groupId}`,\n      title: 'Members',\n    },\n    {\n      key: 'datasources',\n      href: `groups/${this.groupId}/data_sources`,\n      title: 'Data Sources',\n      isAvailable: () => currentUser.isAdmin,\n    },\n  ];\n\n  listColumns = [\n    Columns.custom((text, user) => (\n      <UserPreviewCard user={user} withLink />\n    ), {\n      title: 'Name',\n      field: 'name',\n      width: null,\n    }),\n    Columns.custom((text, user) => {\n      if (!this.group) {\n        return null;\n      }\n\n      // cannot remove self from built-in groups\n      if ((this.group.type === 'builtin') && (currentUser.id === user.id)) {\n        return null;\n      }\n      return <Button className=\"w-100\" type=\"danger\" onClick={event => this.removeGroupMember(event, user)}>Remove</Button>;\n    }, {\n      width: '1%',\n      isAvailable: () => currentUser.isAdmin,\n    }),\n  ];\n\n  componentDidMount() {\n    Group.get({ id: this.groupId }).$promise\n      .then((group) => {\n        this.group = group;\n        this.forceUpdate();\n      })\n      .catch((error) => {\n        this.props.controller.handleError(error);\n      });\n  }\n\n  removeGroupMember = (event, user) => Group.removeMember({ id: this.groupId, userId: user.id }).$promise\n    .then(() => {\n      this.props.controller.updatePagination({ page: 1 });\n      this.props.controller.update();\n    })\n    .catch(() => {\n      toastr.error('Failed to remove member from group.');\n    });\n\n  addMembers = () => {\n    const alreadyAddedUsers = map(this.props.controller.allItems, u => u.id);\n    SelectItemsDialog.showModal({\n      dialogTitle: 'Add Members',\n      inputPlaceholder: 'Search users...',\n      selectedItemsTitle: 'New Members',\n      searchItems: searchTerm => User.query({ q: searchTerm }).$promise.then(({ results }) => results),\n      renderItem: (item, { isSelected }) => {\n        const alreadyInGroup = includes(alreadyAddedUsers, item.id);\n        return {\n          content: (\n            <UserPreviewCard user={item}>\n              <ListItemAddon isSelected={isSelected} alreadyInGroup={alreadyInGroup} />\n            </UserPreviewCard>\n          ),\n          isDisabled: alreadyInGroup,\n          className: isSelected || alreadyInGroup ? 'selected' : '',\n        };\n      },\n      renderStagedItem: (item, { isSelected }) => ({\n        content: (\n          <UserPreviewCard user={item}>\n            <ListItemAddon isSelected={isSelected} isStaged />\n          </UserPreviewCard>\n        ),\n      }),\n      save: (items) => {\n        const promises = map(items, u => Group.addMember({ id: this.groupId }, { user_id: u.id }).$promise);\n        return Promise.all(promises);\n      },\n    }).result.finally(() => {\n      this.props.controller.update();\n    });\n  };\n\n  render() {\n    const { controller } = this.props;\n    return (\n      <div data-test=\"Group\">\n        <GroupName className=\"d-block m-t-0 m-b-15\" group={this.group} onChange={() => this.forceUpdate()} />\n        <Layout>\n          <Layout.Sidebar>\n            <Sidebar\n              controller={controller}\n              group={this.group}\n              items={this.sidebarMenu}\n              canAddMembers={currentUser.isAdmin}\n              onAddMembersClick={this.addMembers}\n              onGroupDeleted={() => navigateTo('/groups', true)}\n            />\n          </Layout.Sidebar>\n          <Layout.Content>\n            {!controller.isLoaded && <LoadingState className=\"\" />}\n            {controller.isLoaded && controller.isEmpty && (\n              <div className=\"text-center\">\n                There are no members in this group yet.\n                {currentUser.isAdmin && (\n                  <div className=\"m-t-5\">\n                    <a href=\"javascript:void(0)\" onClick={this.addMembers}>Click here</a>\n                    {' '} to add members.\n                  </div>\n                )}\n              </div>\n            )}\n            {\n              controller.isLoaded && !controller.isEmpty && (\n                <div className=\"table-responsive\">\n                  <ItemsTable\n                    items={controller.pageItems}\n                    columns={this.listColumns}\n                    showHeader={false}\n                    context={this.actions}\n                    orderByField={controller.orderByField}\n                    orderByReverse={controller.orderByReverse}\n                    toggleSorting={controller.toggleSorting}\n                  />\n                  <Paginator\n                    totalCount={controller.totalItemsCount}\n                    itemsPerPage={controller.itemsPerPage}\n                    page={controller.page}\n                    onChange={page => controller.updatePagination({ page })}\n                  />\n                </div>\n              )\n            }\n          </Layout.Content>\n        </Layout>\n      </div>\n    );\n  }\n}\n\nexport default function init(ngModule) {\n  ngModule.component('pageGroupMembers', react2angular(liveItemsList(\n    GroupMembers,\n    new ResourceItemsSource({\n      isPlainList: true,\n      getRequest(unused, { params: { groupId } }) {\n        return { id: groupId };\n      },\n      getResource() {\n        return Group.members.bind(Group);\n      },\n      getItemProcessor() {\n        return (item => new User(item));\n      },\n    }),\n    new StateStorage({ orderByField: 'name' }),\n  )));\n\n  return routesToAngularRoutes([\n    {\n      path: '/groups/:groupId',\n      title: 'Group Members',\n      key: 'users',\n    },\n  ], {\n    reloadOnSearch: false,\n    template: '<settings-screen><page-group-members on-error=\"handleError\"></page-group-members></settings-screen>',\n    controller($scope, $exceptionHandler) {\n      'ngInject';\n\n      $scope.handleError = $exceptionHandler;\n    },\n  });\n}\n\ninit.init = true;\n","import React from 'react';\nimport { react2angular } from 'react2angular';\n\nimport Button from 'antd/lib/button';\nimport { Paginator } from '@/components/Paginator';\n\nimport { wrap as liveItemsList, ControllerType } from '@/components/items-list/ItemsList';\nimport { ResourceItemsSource } from '@/components/items-list/classes/ItemsSource';\nimport { StateStorage } from '@/components/items-list/classes/StateStorage';\n\nimport LoadingState from '@/components/items-list/components/LoadingState';\nimport EmptyState from '@/components/items-list/components/EmptyState';\nimport ItemsTable, { Columns } from '@/components/items-list/components/ItemsTable';\n\nimport CreateGroupDialog from '@/components/groups/CreateGroupDialog';\nimport DeleteGroupButton from '@/components/groups/DeleteGroupButton';\n\nimport { Group } from '@/services/group';\nimport settingsMenu from '@/services/settingsMenu';\nimport { currentUser } from '@/services/auth';\nimport navigateTo from '@/services/navigateTo';\nimport { routesToAngularRoutes } from '@/lib/utils';\n\nclass GroupsList extends React.Component {\n  static propTypes = {\n    controller: ControllerType.isRequired,\n  };\n\n  listColumns = [\n    Columns.custom((text, group) => (\n      <div>\n        <a href={'groups/' + group.id}>{group.name}</a>\n        {(group.type === 'builtin') && <span className=\"label label-default m-l-10\">built-in</span>}\n      </div>\n    ), {\n      field: 'name',\n      width: null,\n    }),\n    Columns.custom((text, group) => (\n      <Button.Group>\n        <Button href={`groups/${group.id}`}>Members</Button>\n        {currentUser.isAdmin && (\n          <Button href={`groups/${group.id}/data_sources`}>Data Sources</Button>\n        )}\n      </Button.Group>\n    ), {\n      width: '1%',\n      className: 'text-nowrap',\n    }),\n    Columns.custom((text, group) => {\n      const canRemove = group.type !== 'builtin';\n      return (\n        <DeleteGroupButton\n          className=\"w-100\"\n          disabled={!canRemove}\n          group={group}\n          title={canRemove ? null : 'Cannot delete built-in group'}\n          onClick={() => this.onGroupDeleted()}\n        >\n          Delete\n        </DeleteGroupButton>\n      );\n    }, {\n      width: '1%',\n      className: 'text-nowrap p-l-0',\n      isAvailable: () => currentUser.isAdmin,\n    }),\n  ];\n\n  createGroup = () => {\n    CreateGroupDialog.showModal().result.then((group) => {\n      group.$save().then(newGroup => navigateTo(`/groups/${newGroup.id}`));\n    });\n  };\n\n  onGroupDeleted = () => {\n    this.props.controller.updatePagination({ page: 1 });\n    this.props.controller.update();\n  };\n\n  render() {\n    const { controller } = this.props;\n\n    return (\n      <div data-test=\"GroupList\">\n        {currentUser.isAdmin && (\n          <div className=\"m-b-15\">\n            <Button type=\"primary\" onClick={this.createGroup}>\n              <i className=\"fa fa-plus m-r-5\" />\n              New Group\n            </Button>\n          </div>\n        )}\n\n        {!controller.isLoaded && <LoadingState className=\"\" />}\n        {controller.isLoaded && controller.isEmpty && <EmptyState className=\"\" />}\n        {\n          controller.isLoaded && !controller.isEmpty && (\n            <div className=\"table-responsive\">\n              <ItemsTable\n                items={controller.pageItems}\n                columns={this.listColumns}\n                showHeader={false}\n                context={this.actions}\n                orderByField={controller.orderByField}\n                orderByReverse={controller.orderByReverse}\n                toggleSorting={controller.toggleSorting}\n              />\n              <Paginator\n                totalCount={controller.totalItemsCount}\n                itemsPerPage={controller.itemsPerPage}\n                page={controller.page}\n                onChange={page => controller.updatePagination({ page })}\n              />\n            </div>\n          )\n        }\n      </div>\n    );\n  }\n}\n\nexport default function init(ngModule) {\n  settingsMenu.add({\n    permission: 'list_users',\n    title: 'Groups',\n    path: 'groups',\n    order: 3,\n  });\n\n  ngModule.component('pageGroupsList', react2angular(liveItemsList(\n    GroupsList,\n    new ResourceItemsSource({\n      isPlainList: true,\n      getRequest() {\n        return {};\n      },\n      getResource() {\n        return Group.query.bind(Group);\n      },\n      getItemProcessor() {\n        return (item => new Group(item));\n      },\n    }),\n    new StateStorage({ orderByField: 'name', itemsPerPage: 10 }),\n  )));\n\n  return routesToAngularRoutes([\n    {\n      path: '/groups',\n      title: 'Groups',\n      key: 'groups',\n    },\n  ], {\n    reloadOnSearch: false,\n    template: '<settings-screen><page-groups-list on-error=\"handleError\"></page-groups-list></settings-screen>',\n    controller($scope, $exceptionHandler) {\n      'ngInject';\n\n      $scope.handleError = $exceptionHandler;\n    },\n  });\n}\n\ninit.init = true;\n","import template from './home.html';\n\nfunction HomeCtrl(Events, Dashboard, Query, $http, currentUser, toastr) {\n  Events.record('view', 'page', 'personal_homepage');\n\n  this.noDashboards = false;\n  this.noQueries = false;\n\n  this.isEmailVerified = currentUser.is_email_verified;\n\n  Dashboard.favorites().$promise.then((data) => {\n    this.favoriteDashboards = data.results;\n    this.noDashboards = data.results.length === 0;\n  });\n  Query.favorites().$promise.then((data) => {\n    this.favoriteQueries = data.results;\n    this.noQueries = data.results.length === 0;\n  });\n\n  this.verifyEmail = () => {\n    $http.post('verification_email/').success(({ message }) => {\n      toastr.success(message);\n    });\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.component('homePage', {\n    template,\n    controller: HomeCtrl,\n  });\n\n  return {\n    '/': {\n      template: '<home-page></home-page>',\n      title: 'Redash',\n    },\n  };\n}\n\ninit.init = true;\n","import React from 'react';\nimport { react2angular } from 'react2angular';\n\nimport { PageHeader } from '@/components/PageHeader';\nimport { Paginator } from '@/components/Paginator';\nimport { QueryTagsControl } from '@/components/tags-control/TagsControl';\nimport { SchedulePhrase } from '@/components/queries/SchedulePhrase';\n\nimport { wrap as itemsList, ControllerType } from '@/components/items-list/ItemsList';\nimport { ResourceItemsSource } from '@/components/items-list/classes/ItemsSource';\nimport { UrlStateStorage } from '@/components/items-list/classes/StateStorage';\n\nimport LoadingState from '@/components/items-list/components/LoadingState';\nimport * as Sidebar from '@/components/items-list/components/Sidebar';\nimport ItemsTable, { Columns } from '@/components/items-list/components/ItemsTable';\n\nimport Layout from '@/components/layouts/ContentWithSidebar';\n\nimport { Query } from '@/services/query';\nimport { currentUser } from '@/services/auth';\nimport { routesToAngularRoutes } from '@/lib/utils';\n\nimport QueriesListEmptyState from './QueriesListEmptyState';\n\nimport './queries-list.css';\n\nclass QueriesList extends React.Component {\n  static propTypes = {\n    controller: ControllerType.isRequired,\n  };\n\n  sidebarMenu = [\n    {\n      key: 'all',\n      href: 'queries',\n      title: 'All Queries',\n    },\n    {\n      key: 'favorites',\n      href: 'queries/favorites',\n      title: 'Favorites',\n      icon: () => <Sidebar.MenuIcon icon=\"fa fa-star\" />,\n    },\n    {\n      key: 'archive',\n      href: 'queries/archive',\n      title: 'Archived',\n      icon: () => <Sidebar.MenuIcon icon=\"fa fa-archive\" />,\n    },\n    {\n      key: 'my',\n      href: 'queries/my',\n      title: 'My Queries',\n      icon: () => <Sidebar.ProfileImage user={currentUser} />,\n      isAvailable: () => currentUser.hasPermission('create_query'),\n    },\n  ];\n\n  listColumns = [\n    Columns.favorites({ className: 'p-r-0' }),\n    Columns.custom.sortable((text, item) => (\n      <React.Fragment>\n        <a className=\"table-main-title\" href={'queries/' + item.id}>{ item.name }</a>\n        <QueryTagsControl\n          className=\"d-block\"\n          tags={item.tags}\n          isDraft={item.is_draft}\n          isArchived={item.is_archived}\n        />\n      </React.Fragment>\n    ), {\n      title: 'Name',\n      field: 'name',\n      width: null,\n    }),\n    Columns.avatar({ field: 'user', className: 'p-l-0 p-r-0' }, name => `Created by ${name}`),\n    Columns.dateTime.sortable({ title: 'Created At', field: 'created_at' }),\n    Columns.duration.sortable({ title: 'Runtime', field: 'runtime' }),\n    Columns.dateTime.sortable({ title: 'Last Executed At', field: 'retrieved_at', orderByField: 'executed_at' }),\n    Columns.custom.sortable(\n      (text, item) => <SchedulePhrase schedule={item.schedule} isNew={item.isNew()} />,\n      { title: 'Update Schedule', field: 'schedule' },\n    ),\n  ];\n\n  render() {\n    const { controller } = this.props;\n    return (\n      <div className=\"container\">\n        <PageHeader title={controller.params.title} />\n        <Layout className=\"m-l-15 m-r-15\">\n          <Layout.Sidebar className=\"m-b-0\">\n            <Sidebar.SearchInput\n              placeholder=\"Search Queries...\"\n              value={controller.searchTerm}\n              onChange={controller.updateSearch}\n            />\n            <Sidebar.Menu items={this.sidebarMenu} selected={controller.params.currentPage} />\n            <Sidebar.Tags url=\"api/queries/tags\" onChange={controller.updateSelectedTags} />\n            <Sidebar.PageSizeSelect\n              options={controller.pageSizeOptions}\n              value={controller.itemsPerPage}\n              onChange={itemsPerPage => controller.updatePagination({ itemsPerPage })}\n            />\n          </Layout.Sidebar>\n          <Layout.Content>\n            {!controller.isLoaded && <LoadingState />}\n            {\n              controller.isLoaded && controller.isEmpty && (\n                <QueriesListEmptyState\n                  page={controller.params.currentPage}\n                  searchTerm={controller.searchTerm}\n                  selectedTags={controller.selectedTags}\n                />\n              )\n            }\n            {\n              controller.isLoaded && !controller.isEmpty && (\n                <div className=\"bg-white tiled table-responsive\">\n                  <ItemsTable\n                    items={controller.pageItems}\n                    columns={this.listColumns}\n                    orderByField={controller.orderByField}\n                    orderByReverse={controller.orderByReverse}\n                    toggleSorting={controller.toggleSorting}\n                  />\n                  <Paginator\n                    totalCount={controller.totalItemsCount}\n                    itemsPerPage={controller.itemsPerPage}\n                    page={controller.page}\n                    onChange={page => controller.updatePagination({ page })}\n                  />\n                </div>\n              )\n            }\n          </Layout.Content>\n        </Layout>\n      </div>\n    );\n  }\n}\n\nexport default function init(ngModule) {\n  ngModule.component('pageQueriesList', react2angular(itemsList(\n    QueriesList,\n    new ResourceItemsSource({\n      getResource({ params: { currentPage } }) {\n        return {\n          all: Query.query.bind(Query),\n          my: Query.myQueries.bind(Query),\n          favorites: Query.favorites.bind(Query),\n          archive: Query.archive.bind(Query),\n        }[currentPage];\n      },\n      getItemProcessor() {\n        return (item => new Query(item));\n      },\n    }),\n    new UrlStateStorage({ orderByField: 'created_at', orderByReverse: true }),\n  )));\n\n  return routesToAngularRoutes([\n    {\n      path: '/queries',\n      title: 'Queries',\n      key: 'all',\n    },\n    {\n      path: '/queries/favorites',\n      title: 'Favorite Queries',\n      key: 'favorites',\n    },\n    {\n      path: '/queries/archive',\n      title: 'Archived Queries',\n      key: 'archive',\n    },\n    {\n      path: '/queries/my',\n      title: 'My Queries',\n      key: 'my',\n    },\n  ], {\n    reloadOnSearch: false,\n    template: '<page-queries-list on-error=\"handleError\"></page-queries-list>',\n    controller($scope, $exceptionHandler) {\n      'ngInject';\n\n      $scope.handleError = $exceptionHandler;\n    },\n  });\n}\n\ninit.init = true;\n","import template from './add-to-dashboard.html';\n\nconst AddToDashboardForm = {\n  controller($sce, Dashboard, currentUser, toastr, Widget) {\n    'ngInject';\n\n    this.vis = this.resolve.vis;\n    this.saveInProgress = false;\n    this.trustAsHtml = html => $sce.trustAsHtml(html);\n    this.onDashboardSelected = (dash) => {\n      this.saveInProgress = true;\n      this.selected_query = this.resolve.query.id;\n      const widget = new Widget({\n        visualization_id: this.vis && this.vis.id,\n        dashboard_id: dash.id,\n        options: {},\n        width: 1,\n        type: 'visualization',\n      });\n      widget\n        .save()\n        .then(() => {\n          this.close();\n          toastr.success('Widget added to dashboard.');\n        })\n        .catch(() => {\n          toastr.error('Widget not added.');\n        })\n        .finally(() => {\n          this.saveInProgress = false;\n        });\n    };\n    this.selectedDashboard = null;\n    this.searchDashboards = (searchTerm) => {\n      // , limitToUsersDashboards\n      if (!searchTerm || searchTerm.length < 3) {\n        return;\n      }\n      Dashboard.get(\n        {\n          search_term: searchTerm,\n        },\n        (results) => {\n          this.dashboards = results.results;\n        },\n      );\n    };\n  },\n  bindings: {\n    resolve: '<',\n    close: '&',\n    dismiss: '&',\n    vis: '<',\n  },\n  template,\n};\nexport default function init(ngModule) {\n  ngModule.component('addToDashboardDialog', AddToDashboardForm);\n}\n\ninit.init = true;\n","import { map, defer } from 'lodash';\nimport template from './query.html';\nimport EditParameterSettingsDialog from '@/components/EditParameterSettingsDialog';\n\nfunction QuerySourceCtrl(\n  Events,\n  $controller,\n  $scope,\n  $location,\n  $uibModal,\n  currentUser,\n  KeyboardShortcuts,\n  $rootScope,\n) {\n  // extends QueryViewCtrl\n  $controller('QueryViewCtrl', { $scope });\n\n  Events.record('view_source', 'query', $scope.query.id);\n\n  const isNewQuery = !$scope.query.id;\n  let queryText = $scope.query.query;\n  const saveQuery = $scope.saveQuery;\n\n  $scope.sourceMode = true;\n  $scope.isDirty = false;\n  $scope.base_url = `${$location.protocol()}://${$location.host()}:${$location.port()}`;\n  $scope.modKey = KeyboardShortcuts.modKey;\n\n  // @override\n  Object.defineProperty($scope, 'showDataset', {\n    get() {\n      return $scope.queryResult && $scope.queryResult.getStatus() === 'done';\n    },\n  });\n\n  const shortcuts = {\n    'mod+s': function save() {\n      if ($scope.canEdit) {\n        $scope.saveQuery();\n      }\n    },\n    'mod+p': () => {\n      $scope.addNewParameter();\n    },\n  };\n\n  KeyboardShortcuts.bind(shortcuts);\n\n  $scope.$on('$destroy', () => {\n    KeyboardShortcuts.unbind(shortcuts);\n  });\n\n  $scope.canForkQuery = () => currentUser.hasPermission('edit_query') && !$scope.dataSource.view_only;\n\n  $scope.updateQuery = newQueryText => defer(() => $scope.$apply(() => { $scope.query.query = newQueryText; }));\n\n  // @override\n  $scope.saveQuery = (options, data) => {\n    const savePromise = saveQuery(options, data);\n\n    savePromise.then((savedQuery) => {\n      queryText = savedQuery.query;\n      $scope.isDirty = $scope.query.query !== queryText;\n      // update to latest version number\n      $scope.query.version = savedQuery.version;\n\n      if (isNewQuery) {\n        // redirect to new created query (keep hash)\n        $location.path(savedQuery.getSourceLink());\n      }\n    });\n\n    return savePromise;\n  };\n\n  $scope.addNewParameter = () => {\n    EditParameterSettingsDialog\n      .showModal({\n        parameter: {\n          title: null,\n          name: '',\n          type: 'text',\n          value: null,\n        },\n        existingParams: map($scope.query.getParameters().get(), p => p.name),\n      })\n      .result.then((param) => {\n        param = $scope.query.getParameters().add(param);\n        $rootScope.$broadcast('query-editor.command', 'paste', param.toQueryTextFragment());\n        $rootScope.$broadcast('query-editor.command', 'focus');\n      });\n  };\n\n  $scope.onParametersUpdated = () => {\n    // save if query clean\n    // https://discuss.redash.io/t/query-unsaved-changes-indication/3302/5\n    if (!$scope.isDirty) {\n      $scope.saveQuery();\n    }\n  };\n\n  $scope.listenForEditorCommand = f => $scope.$on('query-editor.command', f);\n  $scope.listenForResize = f => $scope.$parent.$on('angular-resizable.resizing', f);\n\n  $scope.$watch('query.query', (newQueryText) => {\n    $scope.isDirty = newQueryText !== queryText;\n  });\n}\n\nexport default function init(ngModule) {\n  ngModule.controller('QuerySourceCtrl', QuerySourceCtrl);\n\n  return {\n    '/queries/new': {\n      template,\n      layout: 'fixed',\n      controller: 'QuerySourceCtrl',\n      reloadOnSearch: false,\n      resolve: {\n        query: function newQuery(Query) {\n          'ngInject';\n\n          return Query.newQuery();\n        },\n        dataSources(DataSource) {\n          'ngInject';\n\n          return DataSource.query().$promise;\n        },\n      },\n    },\n    '/queries/:queryId/source': {\n      template,\n      layout: 'fixed',\n      controller: 'QuerySourceCtrl',\n      reloadOnSearch: false,\n      resolve: {\n        query: (Query, $route) => {\n          'ngInject';\n\n          return Query.get({ id: $route.current.params.queryId }).$promise;\n        },\n      },\n    },\n  };\n}\n\ninit.init = true;\n","import { pick, some, find, minBy, map, intersection, isArray, isObject } from 'lodash';\nimport { SCHEMA_NOT_SUPPORTED, SCHEMA_LOAD_ERROR } from '@/services/data-source';\nimport getTags from '@/services/getTags';\nimport { policy } from '@/services/policy';\nimport Notifications from '@/services/notifications';\nimport ScheduleDialog from '@/components/queries/ScheduleDialog';\nimport template from './query.html';\n\nconst DEFAULT_TAB = 'table';\n\nfunction QueryViewCtrl(\n  $scope,\n  Events,\n  $route,\n  $routeParams,\n  $location,\n  $window,\n  $q,\n  KeyboardShortcuts,\n  Title,\n  AlertDialog,\n  clientConfig,\n  toastr,\n  $uibModal,\n  currentUser,\n  Query,\n  DataSource,\n  Visualization,\n) {\n  function getQueryResult(maxAge, selectedQueryText) {\n    if (maxAge === undefined) {\n      maxAge = $location.search().maxAge;\n    }\n\n    if (maxAge === undefined) {\n      maxAge = -1;\n    }\n\n    $scope.showLog = false;\n    if ($scope.isDirty) {\n      $scope.queryResult = $scope.query.getQueryResultByText(maxAge, selectedQueryText);\n    } else {\n      $scope.queryResult = $scope.query.getQueryResult(maxAge);\n    }\n  }\n\n\n  function getDataSourceId() {\n    // Try to get the query's data source id\n    let dataSourceId = $scope.query.data_source_id;\n\n    // If there is no source yet, then parse what we have in localStorage\n    //   e.g. `null` -> `NaN`, malformed data -> `NaN`, \"1\" -> 1\n    if (dataSourceId === undefined) {\n      dataSourceId = parseInt(localStorage.lastSelectedDataSourceId, 10);\n    }\n\n    // If we had an invalid value in localStorage (e.g. nothing, deleted source),\n    // then use the first data source\n    const isValidDataSourceId = !isNaN(dataSourceId) && some($scope.dataSources, ds => ds.id === dataSourceId);\n\n    if (!isValidDataSourceId) {\n      dataSourceId = $scope.dataSources[0].id;\n    }\n\n    // Return our data source id\n    return dataSourceId;\n  }\n\n  function getSchema(refresh = undefined) {\n    // TODO: is it possible this will be called before dataSource is set?\n    $scope.schema = [];\n    $scope.dataSource.getSchema(refresh).then((data) => {\n      if (data.schema) {\n        $scope.schema = data.schema;\n        $scope.schema.forEach((table) => {\n          table.collapsed = true;\n        });\n      } else if (data.error.code === SCHEMA_NOT_SUPPORTED) {\n        $scope.schema = undefined;\n      } else if (data.error.code === SCHEMA_LOAD_ERROR) {\n        toastr.error('Schema refresh failed. Please try again later.');\n      } else {\n        toastr.error('Schema refresh failed. Please try again later.');\n      }\n    });\n  }\n\n  $scope.refreshSchema = () => getSchema(true);\n\n  function updateDataSources(dataSources) {\n    // Filter out data sources the user can't query (or used by current query):\n    function canUseDataSource(dataSource) {\n      return !dataSource.view_only || dataSource.id === $scope.query.data_source_id;\n    }\n    $scope.dataSources = dataSources.filter(canUseDataSource);\n\n    if ($scope.dataSources.length === 0) {\n      $scope.noDataSources = true;\n      return;\n    }\n\n    if ($scope.query.isNew()) {\n      $scope.query.data_source_id = getDataSourceId();\n    }\n\n    $scope.dataSource = find(dataSources, ds => ds.id === $scope.query.data_source_id);\n\n    $scope.canCreateQuery = some(dataSources, ds => !ds.view_only);\n\n    getSchema();\n  }\n\n  $scope.updateSelectedQuery = (selectedQueryText) => {\n    $scope.selectedQueryText = selectedQueryText;\n  };\n\n  $scope.executeQuery = () => {\n    if (!$scope.canExecuteQuery()) {\n      return;\n    }\n\n    if (!$scope.query.query) {\n      return;\n    }\n\n    getQueryResult(0, $scope.selectedQueryText);\n    $scope.lockButton(true);\n    $scope.cancelling = false;\n    Events.record('execute', 'query', $scope.query.id);\n\n    Notifications.getPermissions();\n  };\n\n  $scope.selectedTab = DEFAULT_TAB;\n  $scope.currentUser = currentUser;\n  $scope.dataSource = {};\n  $scope.query = $route.current.locals.query;\n  $scope.showPermissionsControl = clientConfig.showPermissionsControl;\n\n  const shortcuts = {\n    'mod+enter': $scope.executeQuery,\n    'alt+enter': $scope.executeQuery,\n  };\n\n  KeyboardShortcuts.bind(shortcuts);\n\n  $scope.$on('$destroy', () => {\n    KeyboardShortcuts.unbind(shortcuts);\n  });\n\n  if ($scope.query.hasResult() || $scope.query.paramsRequired()) {\n    getQueryResult();\n  }\n  $scope.queryExecuting = false;\n\n  $scope.isQueryOwner = currentUser.id === $scope.query.user.id || currentUser.hasPermission('admin');\n  $scope.canEdit = currentUser.canEdit($scope.query) || $scope.query.can_edit;\n  $scope.canViewSource = currentUser.hasPermission('view_source');\n\n  $scope.canExecuteQuery = () => $scope.query.is_safe || (currentUser.hasPermission('execute_query') && !$scope.dataSource.view_only);\n\n  $scope.canForkQuery = () => currentUser.hasPermission('edit_query') && !$scope.dataSource.view_only;\n\n  $scope.canScheduleQuery = currentUser.hasPermission('schedule_query');\n\n  if ($route.current.locals.dataSources) {\n    $scope.dataSources = $route.current.locals.dataSources;\n    updateDataSources($route.current.locals.dataSources);\n  } else {\n    $scope.dataSources = DataSource.query(updateDataSources);\n  }\n\n  // in view mode, latest dataset is always visible\n  // source mode changes this behavior\n  $scope.showDataset = true;\n  $scope.showLog = false;\n\n  $scope.lockButton = (lock) => {\n    $scope.queryExecuting = lock;\n  };\n\n  $scope.showApiKey = () => {\n    $uibModal.open({\n      component: 'apiKeyDialog',\n      resolve: {\n        query: $scope.query,\n      },\n    });\n  };\n\n  $scope.duplicateQuery = () => {\n    // To prevent opening the same tab, name must be unique for each browser\n    const tabName = 'duplicatedQueryTab' + Math.random().toString();\n\n    $window.open('', tabName);\n    Query.fork({ id: $scope.query.id }, (newQuery) => {\n      const queryUrl = newQuery.getUrl(true);\n      $window.open(queryUrl, tabName);\n    });\n  };\n\n  $scope.saveTags = (tags) => {\n    $scope.query.tags = tags;\n    $scope.saveQuery({}, { tags: $scope.query.tags });\n  };\n\n  $scope.loadTags = () => getTags('api/queries/tags').then(tags => map(tags, t => t.name));\n\n  $scope.saveQuery = (customOptions, data) => {\n    let request = data;\n\n    if (request) {\n      // Don't save new query with partial data\n      if ($scope.query.isNew()) {\n        return $q.reject();\n      }\n      request.id = $scope.query.id;\n      request.version = $scope.query.version;\n    } else {\n      request = pick($scope.query, [\n        'schedule',\n        'query',\n        'id',\n        'description',\n        'name',\n        'data_source_id',\n        'options',\n        'latest_query_data_id',\n        'version',\n        'is_draft',\n      ]);\n    }\n\n    const options = Object.assign(\n      {},\n      {\n        successMessage: 'Query saved',\n        errorMessage: 'Query could not be saved',\n      },\n      customOptions,\n    );\n\n    if (options.force) {\n      delete request.version;\n    }\n\n    function overwrite() {\n      options.force = true;\n      $scope.saveQuery(options, data);\n    }\n\n    return Query.save(\n      request,\n      (updatedQuery) => {\n        toastr.success(options.successMessage);\n        $scope.query.version = updatedQuery.version;\n      },\n      (error) => {\n        if (error.status === 409) {\n          const errorMessage = 'It seems like the query has been modified by another user.';\n\n          if ($scope.isQueryOwner) {\n            const title = 'Overwrite Query';\n            const message = errorMessage + '<br>Are you sure you want to overwrite the query with your version?';\n            const confirm = { class: 'btn-warning', title: 'Overwrite' };\n\n            AlertDialog.open(title, message, confirm).then(overwrite);\n          } else {\n            toastr.error(\n              errorMessage + ' Please copy/backup your changes and reload this page.',\n              { autoDismiss: false },\n            );\n          }\n        } else {\n          toastr.error(options.errorMessage);\n        }\n      },\n    ).$promise;\n  };\n\n  $scope.togglePublished = () => {\n    Events.record('toggle_published', 'query', $scope.query.id);\n    $scope.query.is_draft = !$scope.query.is_draft;\n    $scope.saveQuery(undefined, { is_draft: $scope.query.is_draft });\n  };\n\n  $scope.saveDescription = (desc) => {\n    $scope.query.description = desc;\n    Events.record('edit_description', 'query', $scope.query.id);\n    $scope.saveQuery(undefined, { description: $scope.query.description });\n  };\n\n  $scope.saveName = (name) => {\n    $scope.query.name = name;\n    Events.record('edit_name', 'query', $scope.query.id);\n    if ($scope.query.is_draft && clientConfig.autoPublishNamedQueries && $scope.query.name !== 'New Query') {\n      $scope.query.is_draft = false;\n    }\n\n    $scope.saveQuery(undefined, { name: $scope.query.name, is_draft: $scope.query.is_draft });\n  };\n\n  $scope.cancelExecution = () => {\n    $scope.cancelling = true;\n    $scope.queryResult.cancelExecution();\n    Events.record('cancel_execute', 'query', $scope.query.id);\n  };\n\n  $scope.archiveQuery = () => {\n    function archive() {\n      Query.delete(\n        { id: $scope.query.id },\n        () => {\n          $scope.query.is_archived = true;\n          $scope.query.schedule = null;\n        },\n        () => {\n          toastr.error('Query could not be archived.');\n        },\n      );\n    }\n\n    const title = 'Archive Query';\n    const message =\n      'Are you sure you want to archive this query?<br/> All alerts and dashboard widgets created with its visualizations will be deleted.';\n    const confirm = { class: 'btn-warning', title: 'Archive' };\n\n    AlertDialog.open(title, message, confirm).then(archive);\n  };\n\n  $scope.updateDataSource = () => {\n    Events.record('update_data_source', 'query', $scope.query.id);\n    localStorage.lastSelectedDataSourceId = $scope.query.data_source_id;\n\n    $scope.query.latest_query_data = null;\n    $scope.query.latest_query_data_id = null;\n\n    if ($scope.query.id) {\n      Query.save(\n        {\n          id: $scope.query.id,\n          data_source_id: $scope.query.data_source_id,\n          latest_query_data_id: null,\n        },\n        (updatedQuery) => {\n          $scope.query.version = updatedQuery.version;\n        },\n      );\n    }\n\n    $scope.dataSource = find($scope.dataSources, ds => ds.id === $scope.query.data_source_id);\n    getSchema();\n    $scope.executeQuery();\n  };\n\n  $scope.setVisualizationTab = (visualization) => {\n    $scope.selectedTab = visualization.id;\n    $location.hash(visualization.id);\n  };\n\n  $scope.deleteVisualization = ($e, vis) => {\n    $e.preventDefault();\n\n    const title = undefined;\n    const message = `Are you sure you want to delete ${vis.name} ?`;\n    const confirm = { class: 'btn-danger', title: 'Delete' };\n\n    AlertDialog.open(title, message, confirm).then(() => {\n      Visualization.delete(\n        { id: vis.id },\n        () => {\n          if ($scope.selectedTab === String(vis.id)) {\n            $scope.selectedTab = DEFAULT_TAB;\n            $location.hash($scope.selectedTab);\n          }\n          $scope.query.visualizations = $scope.query.visualizations.filter(v => vis.id !== v.id);\n        },\n        () => {\n          toastr.error(\"Error deleting visualization. Maybe it's used in a dashboard?\");\n        },\n      );\n    });\n  };\n\n  $scope.$watch('query.name', () => {\n    Title.set($scope.query.name);\n  });\n\n  $scope.$watch('queryResult && queryResult.getData()', (data) => {\n    if (!data) {\n      return;\n    }\n\n    $scope.filters = $scope.queryResult.getFilters();\n  });\n\n  $scope.$watch('queryResult && queryResult.getStatus()', (status) => {\n    if (!status) {\n      return;\n    }\n\n    if (status === 'done') {\n      const ranSelectedQuery = $scope.query.query !== $scope.queryResult.query_result.query;\n      if (!ranSelectedQuery) {\n        $scope.query.latest_query_data_id = $scope.queryResult.getId();\n        $scope.query.queryResult = $scope.queryResult;\n      }\n\n      Notifications.showNotification('Redash', `${$scope.query.name} updated.`);\n    } else if (status === 'failed') {\n      Notifications.showNotification('Redash', `${$scope.query.name} failed to run: ${$scope.queryResult.getError()}`);\n    }\n\n    if (status === 'done' || status === 'failed') {\n      $scope.lockButton(false);\n    }\n\n    if ($scope.queryResult.getLog() != null) {\n      $scope.showLog = true;\n    }\n  });\n\n  function getVisualization(visId) {\n    // eslint-disable-next-line eqeqeq\n    return find($scope.query.visualizations, item => item.id == visId);\n  }\n\n  $scope.openVisualizationEditor = (visId) => {\n    const visualization = getVisualization(visId);\n\n    function openModal() {\n      $uibModal.open({\n        windowClass: 'modal-xl',\n        component: 'editVisualizationDialog',\n        resolve: {\n          query: $scope.query,\n          visualization,\n          queryResult: $scope.queryResult,\n          onNewSuccess: () => $scope.setVisualizationTab,\n        },\n      });\n    }\n\n    if ($scope.query.isNew()) {\n      $scope.saveQuery().then((query) => {\n        // Because we have a path change, we need to \"signal\" the next page to\n        // open the visualization editor.\n        // TODO: we don't really need this. Just need to assign query to $scope.query\n        // and maybe a few more small changes. Not worth handling this now, but also\n        // we shouldn't copy this bizzare method to the React codebase.\n        $location.path(query.getSourceLink()).hash('add');\n      });\n    } else {\n      openModal();\n    }\n  };\n\n  if ($location.hash() === 'add') {\n    $location.hash(null);\n    $scope.openVisualizationEditor();\n  }\n  const intervals = clientConfig.queryRefreshIntervals;\n  const allowedIntervals = policy.getQueryRefreshIntervals();\n  $scope.refreshOptions = isArray(allowedIntervals) ? intersection(intervals, allowedIntervals) : intervals;\n\n  $scope.showScheduleForm = false;\n  $scope.editSchedule = () => {\n    if (!$scope.canEdit || !$scope.canScheduleQuery) {\n      return;\n    }\n    ScheduleDialog.showModal({\n      schedule: $scope.query.schedule,\n      refreshOptions: $scope.refreshOptions,\n    }).result.then((schedule) => {\n      $scope.query.schedule = schedule;\n      $scope.saveQuery();\n    });\n  };\n  $scope.closeScheduleForm = () => {\n    $scope.$apply(() => {\n      $scope.showScheduleForm = false;\n    });\n  };\n\n  $scope.openAddToDashboardForm = (visId) => {\n    const visualization = getVisualization(visId);\n    $uibModal.open({\n      component: 'addToDashboardDialog',\n      size: 'sm',\n      resolve: {\n        query: $scope.query,\n        vis: visualization,\n      },\n    });\n  };\n\n  $scope.showEmbedDialog = (query, visId) => {\n    const visualization = getVisualization(visId);\n    $uibModal.open({\n      component: 'embedCodeDialog',\n      resolve: {\n        query,\n        visualization,\n      },\n    });\n  };\n\n  $scope.$watch(\n    () => $location.hash(),\n    (hash) => {\n      // eslint-disable-next-line eqeqeq\n      const exists = find($scope.query.visualizations, item => item.id == hash);\n      let visualization = minBy($scope.query.visualizations, viz => viz.id);\n      if (!isObject(visualization)) {\n        visualization = {};\n      }\n      $scope.selectedTab = (exists ? hash : visualization.id) || DEFAULT_TAB;\n    },\n  );\n\n  $scope.showManagePermissionsModal = () => {\n    $uibModal.open({\n      component: 'permissionsEditor',\n      resolve: {\n        aclUrl: { url: `api/queries/${$routeParams.queryId}/acl` },\n        owner: $scope.query.user,\n      },\n    });\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.controller('QueryViewCtrl', QueryViewCtrl);\n\n  return {\n    '/queries/:queryId': {\n      template,\n      layout: 'fixed',\n      controller: 'QueryViewCtrl',\n      reloadOnSearch: false,\n      resolve: {\n        query: (Query, $route) => {\n          'ngInject';\n\n          return Query.get({ id: $route.current.params.queryId }).$promise;\n        },\n      },\n    },\n  };\n}\n\ninit.init = true;\n","import 'brace/mode/snippets';\nimport template from './edit.html';\n\nfunction SnippetCtrl($routeParams, $http, $location, toastr, currentUser, AlertDialog, QuerySnippet) {\n  this.snippetId = $routeParams.snippetId;\n\n  this.editorOptions = {\n    mode: 'snippets',\n    advanced: {\n      behavioursEnabled: true,\n      enableSnippets: false,\n      autoScrollEditorIntoView: true,\n    },\n    onLoad(editor) {\n      editor.$blockScrolling = Infinity;\n      editor.getSession().setUseWrapMode(true);\n      editor.setShowPrintMargin(false);\n    },\n  };\n\n  this.saveChanges = () => {\n    this.snippet.$save((snippet) => {\n      toastr.success('Saved.');\n      if (this.snippetId === 'new') {\n        $location.path(`/query_snippets/${snippet.id}`).replace();\n      }\n    }, () => {\n      toastr.error('Failed saving snippet.');\n    });\n  };\n\n  this.delete = () => {\n    const doDelete = () => {\n      this.snippet.$delete(() => {\n        $location.path('/query_snippets');\n        toastr.success('Query snippet deleted.');\n      }, () => {\n        toastr.error('Failed deleting query snippet.');\n      });\n    };\n\n    const title = 'Delete Snippet';\n    const message = `Are you sure you want to delete the \"${this.snippet.trigger}\" snippet?`;\n    const confirm = { class: 'btn-warning', title: 'Delete' };\n\n    AlertDialog.open(title, message, confirm).then(doDelete);\n  };\n\n  if (this.snippetId === 'new') {\n    this.snippet = new QuerySnippet({ description: '' });\n    this.canEdit = true;\n  } else {\n    this.snippet = QuerySnippet.get({ id: this.snippetId }, (snippet) => {\n      this.canEdit = currentUser.canEdit(snippet);\n    });\n  }\n}\n\nexport default function init(ngModule) {\n  ngModule.component('snippetPage', {\n    template,\n    controller: SnippetCtrl,\n  });\n\n  return {\n    '/query_snippets/:snippetId': {\n      template: '<snippet-page></snippet-page>',\n      title: 'Query Snippets',\n    },\n  };\n}\n\ninit.init = true;\n","import settingsMenu from '@/services/settingsMenu';\nimport { Paginator } from '@/lib/pagination';\nimport template from './list.html';\n\nfunction SnippetsCtrl($location, currentUser, QuerySnippet) {\n  this.snippets = new Paginator([], { itemsPerPage: 20 });\n  QuerySnippet.query((snippets) => {\n    this.snippets.updateRows(snippets);\n  });\n}\n\nexport default function init(ngModule) {\n  settingsMenu.add({\n    permission: 'create_query',\n    title: 'Query Snippets',\n    path: 'query_snippets',\n    order: 5,\n  });\n\n  ngModule.component('snippetsListPage', {\n    template,\n    controller: SnippetsCtrl,\n  });\n\n  return {\n    '/query_snippets': {\n      template: '<snippets-list-page></snippets-list-page>',\n      title: 'Query Snippets',\n    },\n  };\n}\n\ninit.init = true;\n","import settingsMenu from '@/services/settingsMenu';\nimport template from './organization.html';\n\nfunction OrganizationSettingsCtrl($http, toastr, clientConfig, Events) {\n  Events.record('view', 'page', 'org_settings');\n\n  this.settings = {};\n  $http.get('api/settings/organization').then((response) => {\n    this.settings = response.data.settings;\n  });\n\n  this.update = (key) => {\n    $http.post('api/settings/organization', { [key]: this.settings[key] }).then((response) => {\n      this.settings = response.data.settings;\n      toastr.success('Settings changes saved.');\n\n      if (this.disablePasswordLoginToggle() && this.settings.auth_password_login_enabled === false) {\n        this.settings.auth_password_login_enabled = true;\n        this.update('auth_password_login_enabled');\n      }\n    }).catch(() => {\n      toastr.error('Failed saving changes.');\n    });\n  };\n\n  this.dateFormatList = clientConfig.dateFormatList;\n  this.googleLoginEnabled = clientConfig.googleLoginEnabled;\n\n  // eslint-disable-next-line max-len\n  this.disablePasswordLoginToggle = () => (clientConfig.googleLoginEnabled || this.settings.auth_saml_enabled) === false;\n}\n\nexport default function init(ngModule) {\n  settingsMenu.add({\n    permission: 'admin',\n    title: 'Settings',\n    path: 'settings/organization',\n    order: 6,\n  });\n\n  ngModule.component('organizationSettingsPage', {\n    template,\n    controller: OrganizationSettingsCtrl,\n  });\n\n  return {\n    '/settings/organization': {\n      template: '<organization-settings-page></organization-settings-page>',\n      title: 'Organization Settings',\n    },\n  };\n}\n\ninit.init = true;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { react2angular } from 'react2angular';\n\nimport { EmailSettingsWarning } from '@/components/EmailSettingsWarning';\nimport UserEdit from '@/components/users/UserEdit';\nimport UserShow from '@/components/users/UserShow';\nimport LoadingState from '@/components/items-list/components/LoadingState';\n\nimport { User } from '@/services/user';\nimport settingsMenu from '@/services/settingsMenu';\nimport { $route } from '@/services/ng';\nimport { currentUser } from '@/services/auth';\nimport PromiseRejectionError from '@/lib/promise-rejection-error';\nimport './settings.less';\n\nclass UserProfile extends React.Component {\n  static propTypes = {\n    onError: PropTypes.func,\n  };\n\n  static defaultProps = {\n    onError: () => {},\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = { user: null };\n  }\n\n  componentDidMount() {\n    const userId = $route.current.params.userId || currentUser.id;\n    User.get({ id: userId }).$promise\n      .then(user => this.setState({ user: User.convertUserInfo(user) }))\n      .catch((error) => {\n        // ANGULAR_REMOVE_ME This code is related to Angular's HTTP services\n        if (error.status && error.data) {\n          error = new PromiseRejectionError(error);\n        }\n        this.props.onError(error);\n      });\n  }\n\n  render() {\n    const { user } = this.state;\n    const canEdit = user && (currentUser.isAdmin || currentUser.id === user.id);\n    const UserComponent = canEdit ? UserEdit : UserShow;\n    return (\n      <React.Fragment>\n        <EmailSettingsWarning featureName=\"invite emails\" />\n        <div className=\"row\">\n          {user ? <UserComponent user={user} /> : <LoadingState className=\"\" />}\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default function init(ngModule) {\n  settingsMenu.add({\n    title: 'Account',\n    path: 'users/me',\n    order: 7,\n  });\n\n  ngModule.component('pageUserProfile', react2angular(UserProfile));\n}\n\ninit.init = true;\n","import { map, get } from 'lodash';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { react2angular } from 'react2angular';\n\nimport Button from 'antd/lib/button';\nimport Modal from 'antd/lib/modal';\nimport { Paginator } from '@/components/Paginator';\nimport DynamicComponent from '@/components/DynamicComponent';\nimport { UserPreviewCard } from '@/components/PreviewCard';\nimport InputWithCopy from '@/components/InputWithCopy';\n\nimport { wrap as itemsList, ControllerType } from '@/components/items-list/ItemsList';\nimport { ResourceItemsSource } from '@/components/items-list/classes/ItemsSource';\nimport { UrlStateStorage } from '@/components/items-list/classes/StateStorage';\n\nimport LoadingState from '@/components/items-list/components/LoadingState';\nimport EmptyState from '@/components/items-list/components/EmptyState';\nimport * as Sidebar from '@/components/items-list/components/Sidebar';\nimport ItemsTable, { Columns } from '@/components/items-list/components/ItemsTable';\n\nimport Layout from '@/components/layouts/ContentWithSidebar';\nimport CreateUserDialog from '@/components/users/CreateUserDialog';\n\nimport settingsMenu from '@/services/settingsMenu';\nimport { currentUser } from '@/services/auth';\nimport { policy } from '@/services/policy';\nimport { User } from '@/services/user';\nimport navigateTo from '@/services/navigateTo';\nimport { toastr } from '@/services/ng';\nimport { absoluteUrl } from '@/services/utils';\n\nfunction UsersListActions({ user, enableUser, disableUser, deleteUser }) {\n  if (user.id === currentUser.id) {\n    return null;\n  }\n  if (user.is_invitation_pending) {\n    return (\n      <Button type=\"danger\" className=\"w-100\" onClick={event => deleteUser(event, user)}>Delete</Button>\n    );\n  }\n  return user.is_disabled ? (\n    <Button type=\"primary\" className=\"w-100\" onClick={event => enableUser(event, user)}>Enable</Button>\n  ) : (\n    <Button className=\"w-100\" onClick={event => disableUser(event, user)}>Disable</Button>\n  );\n}\n\nUsersListActions.propTypes = {\n  user: PropTypes.shape({\n    id: PropTypes.number,\n    is_invitation_pending: PropTypes.bool,\n    is_disabled: PropTypes.bool,\n  }).isRequired,\n  enableUser: PropTypes.func.isRequired,\n  disableUser: PropTypes.func.isRequired,\n  deleteUser: PropTypes.func.isRequired,\n};\n\nclass UsersList extends React.Component {\n  static propTypes = {\n    controller: ControllerType.isRequired,\n  };\n\n  sidebarMenu = [\n    {\n      key: 'active',\n      href: 'users',\n      title: 'Active Users',\n    },\n    {\n      key: 'pending',\n      href: 'users/pending',\n      title: 'Pending Invitations',\n    },\n    {\n      key: 'disabled',\n      href: 'users/disabled',\n      title: 'Disabled Users',\n      isAvailable: () => policy.canCreateUser(),\n    },\n  ];\n\n  listColumns = [\n    Columns.custom.sortable((text, user) => (\n      <UserPreviewCard user={user} withLink />\n    ), {\n      title: 'Name',\n      field: 'name',\n      width: null,\n    }),\n    Columns.custom.sortable((text, user) => map(user.groups, group => (\n      <a key={'group' + group.id} className=\"label label-tag\" href={'groups/' + group.id}>{group.name}</a>\n    )), {\n      title: 'Groups',\n      field: 'groups',\n    }),\n    Columns.timeAgo.sortable({\n      title: 'Joined',\n      field: 'created_at',\n      className: 'text-nowrap',\n      width: '1%',\n    }),\n    Columns.timeAgo.sortable({\n      title: 'Last Active At',\n      field: 'active_at',\n      className: 'text-nowrap',\n      width: '1%',\n    }),\n    Columns.custom((text, user) => (\n      <UsersListActions\n        user={user}\n        enableUser={this.enableUser}\n        disableUser={this.disableUser}\n        deleteUser={this.deleteUser}\n      />\n    ), {\n      width: '1%',\n      isAvailable: () => policy.canCreateUser(),\n    }),\n  ];\n\n  componentDidMount() {\n    if (this.props.controller.params.isNewUserPage) {\n      this.showCreateUserDialog();\n    }\n  }\n\n  createUser = values => User.create(values).$promise.then((user) => {\n    toastr.success('Saved.');\n    if (user.invite_link) {\n      Modal.warning({ title: 'Email not sent!',\n        content: (\n          <React.Fragment>\n            <p>\n              The mail server is not configured, please send the following link\n              to <b>{user.name}</b>:\n            </p>\n            <InputWithCopy value={absoluteUrl(user.invite_link)} readOnly />\n          </React.Fragment>\n        ) });\n    }\n  }).catch((error) => {\n    if (!(error instanceof Error)) {\n      error = new Error(get(error, 'data.message', 'Failed saving.'));\n    }\n    return Promise.reject(error);\n  });\n\n  showCreateUserDialog = () => {\n    if (policy.isCreateUserEnabled()) {\n      CreateUserDialog.showModal({ onCreate: this.createUser }).result\n        .then(() => this.props.controller.update())\n        .finally(() => {\n          if (this.props.controller.params.isNewUserPage) {\n            navigateTo('users');\n          }\n        });\n    }\n  };\n\n  enableUser = (event, user) => User.enableUser(user).then(() => this.props.controller.update());\n\n  disableUser = (event, user) => User.disableUser(user).then(() => this.props.controller.update());\n\n  deleteUser = (event, user) => User.deleteUser(user).then(() => this.props.controller.update());\n\n  // eslint-disable-next-line class-methods-use-this\n  renderPageHeader() {\n    if (!policy.canCreateUser()) {\n      return null;\n    }\n    return (\n      <div className=\"m-b-15\">\n        <Button type=\"primary\" disabled={!policy.isCreateUserEnabled()} onClick={this.showCreateUserDialog}>\n          <i className=\"fa fa-plus m-r-5\" />\n          New User\n        </Button>\n        <DynamicComponent name=\"UsersListExtra\" />\n      </div>\n    );\n  }\n\n  render() {\n    const { controller } = this.props;\n    return (\n      <React.Fragment>\n        {this.renderPageHeader()}\n        <Layout>\n          <Layout.Sidebar className=\"m-b-0\">\n            <Sidebar.SearchInput\n              value={controller.searchTerm}\n              onChange={controller.updateSearch}\n            />\n            <Sidebar.Menu items={this.sidebarMenu} selected={controller.params.currentPage} />\n            <Sidebar.PageSizeSelect\n              options={controller.pageSizeOptions}\n              value={controller.itemsPerPage}\n              onChange={itemsPerPage => controller.updatePagination({ itemsPerPage })}\n            />\n          </Layout.Sidebar>\n          <Layout.Content>\n            {!controller.isLoaded && <LoadingState className=\"\" />}\n            {controller.isLoaded && controller.isEmpty && <EmptyState className=\"\" />}\n            {\n              controller.isLoaded && !controller.isEmpty && (\n                <div className=\"table-responsive\">\n                  <ItemsTable\n                    items={controller.pageItems}\n                    columns={this.listColumns}\n                    context={this.actions}\n                    orderByField={controller.orderByField}\n                    orderByReverse={controller.orderByReverse}\n                    toggleSorting={controller.toggleSorting}\n                  />\n                  <Paginator\n                    totalCount={controller.totalItemsCount}\n                    itemsPerPage={controller.itemsPerPage}\n                    page={controller.page}\n                    onChange={page => controller.updatePagination({ page })}\n                  />\n                </div>\n              )\n            }\n          </Layout.Content>\n        </Layout>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default function init(ngModule) {\n  settingsMenu.add({\n    permission: 'list_users',\n    title: 'Users',\n    path: 'users',\n    isActive: path => path.startsWith('/users') && (path !== '/users/me'),\n    order: 2,\n  });\n\n  ngModule.component('pageUsersList', react2angular(itemsList(\n    UsersList,\n    new ResourceItemsSource({\n      getRequest(request, { params: { currentPage } }) {\n        switch (currentPage) {\n          case 'active':\n            request.pending = false;\n            break;\n          case 'pending':\n            request.pending = true;\n            break;\n          case 'disabled':\n            request.disabled = true;\n            break;\n          // no default\n        }\n        return request;\n      },\n      getResource() {\n        return User.query.bind(User);\n      },\n      getItemProcessor() {\n        return (item => new User(item));\n      },\n    }),\n    new UrlStateStorage({ orderByField: 'created_at', orderByReverse: true }),\n  )));\n}\n\ninit.init = true;\n","import { extend } from 'lodash';\nimport { routesToAngularRoutes } from '@/lib/utils';\n\nexport default function init() {\n  const listRoutes = routesToAngularRoutes([\n    {\n      path: '/users',\n      title: 'Users',\n      key: 'active',\n    },\n    {\n      path: '/users/new',\n      title: 'Users',\n      key: 'active',\n      isNewUserPage: true,\n    },\n    {\n      path: '/users/pending',\n      title: 'Pending Invitations',\n      key: 'pending',\n    },\n    {\n      path: '/users/disabled',\n      title: 'Disabled Users',\n      key: 'disabled',\n    },\n  ], {\n    template: '<settings-screen><page-users-list on-error=\"handleError\"></page-users-list></settings-screen>',\n    reloadOnSearch: false,\n    controller($scope, $exceptionHandler) {\n      'ngInject';\n\n      $scope.handleError = $exceptionHandler;\n    },\n  });\n\n  const profileRoutes = routesToAngularRoutes([\n    {\n      path: '/users/me',\n      title: 'Account',\n      key: 'users',\n    },\n    {\n      path: '/users/:userId',\n      title: 'Users',\n      key: 'users',\n    },\n  ], {\n    reloadOnSearch: false,\n    template: '<settings-screen><page-user-profile on-error=\"handleError\"></page-user-profile></settings-screen>',\n    controller($scope, $exceptionHandler) {\n      'ngInject';\n\n      $scope.handleError = $exceptionHandler;\n    },\n  });\n\n  return extend(listRoutes, profileRoutes);\n}\n\ninit.init = true;\n","/* eslint-disable */\n/*\nTODO:\n1. export module name.\n2. publish into its own repo?\n3. fix lint errors.\n*/\nimport angular from 'angular';\nimport jQuery from 'jquery';\nimport sortable from 'jquery-ui/ui/widgets/sortable';\n\n/*\n jQuery UI Sortable plugin wrapper\n\n @param [ui-sortable] {object} Options to pass to $.fn.sortable() merged onto ui.config\n */\nangular.module('ui.sortable', [])\n  .value('uiSortableConfig', {\n    // the default for jquery-ui sortable is \"> *\", we need to restrict this to\n    // ng-repeat items\n    // if the user uses\n    items: '> [ng-repeat],> [data-ng-repeat],> [x-ng-repeat]',\n    cancel: 'input, textarea, button, select, option, .ui-sortable-bypass',\n  })\n  .directive('uiSortable', [\n    'uiSortableConfig', '$timeout', '$log',\n    function (uiSortableConfig, $timeout, $log) {\n      return {\n        require: '?ngModel',\n        scope: {\n          ngModel: '=',\n          uiSortable: '=',\n        },\n        link(scope, element, attrs, ngModel) {\n          let savedNodes;\n          element = jQuery(element);\n\n          function combineCallbacks(first, second) {\n            const firstIsFunc = typeof first === 'function';\n            const secondIsFunc = typeof second === 'function';\n            if (firstIsFunc && secondIsFunc) {\n              return function () {\n                first.apply(this, arguments);\n                second.apply(this, arguments);\n              };\n            } else if (secondIsFunc) {\n              return second;\n            }\n            return first;\n          }\n\n          function getSortableWidgetInstance(element) {\n            // this is a fix to support jquery-ui prior to v1.11.x\n            // otherwise we should be using `element.sortable('instance')`\n            const data = element.data('ui-sortable');\n            if (data && typeof data === 'object' && data.widgetFullName === 'ui-sortable') {\n              return data;\n            }\n            return null;\n          }\n\n          function patchSortableOption(key, value) {\n            if (callbacks[key]) {\n              if (key === 'stop') {\n                // call apply after stop\n                value = combineCallbacks(\n                  value, () => { scope.$apply(); });\n\n                value = combineCallbacks(value, afterStop);\n              }\n              // wrap the callback\n              value = combineCallbacks(callbacks[key], value);\n            } else if (wrappers[key]) {\n              value = wrappers[key](value);\n            }\n\n            // patch the options that need to have values set\n            if (!value && (key === 'items' || key === 'ui-model-items')) {\n              value = uiSortableConfig.items;\n            }\n\n            return value;\n          }\n\n          function patchUISortableOptions(newVal, oldVal, sortableWidgetInstance) {\n            function addDummyOptionKey(value, key) {\n              if (!(key in opts)) {\n                // add the key in the opts object so that\n                // the patch function detects and handles it\n                opts[key] = null;\n              }\n            }\n            // for this directive to work we have to attach some callbacks\n            angular.forEach(callbacks, addDummyOptionKey);\n\n            // only initialize it in case we have to\n            // update some options of the sortable\n            let optsDiff = null;\n\n            if (oldVal) {\n              // reset deleted options to default\n              let defaultOptions;\n              angular.forEach(oldVal, (oldValue, key) => {\n                if (!newVal || !(key in newVal)) {\n                  if (key in directiveOpts) {\n                    if (key === 'ui-floating') {\n                      opts[key] = 'auto';\n                    } else {\n                      opts[key] = patchSortableOption(key, undefined);\n                    }\n                    return;\n                  }\n\n                  if (!defaultOptions) {\n                    defaultOptions = sortable().options;\n                  }\n                  let defaultValue = defaultOptions[key];\n                  defaultValue = patchSortableOption(key, defaultValue);\n\n                  if (!optsDiff) {\n                    optsDiff = {};\n                  }\n                  optsDiff[key] = defaultValue;\n                  opts[key] = defaultValue;\n                }\n              });\n            }\n\n            // update changed options\n            angular.forEach(newVal, (value, key) => {\n              // if it's a custom option of the directive,\n              // handle it approprietly\n              if (key in directiveOpts) {\n                if (key === 'ui-floating' && (value === false || value === true) && sortableWidgetInstance) {\n                  sortableWidgetInstance.floating = value;\n                }\n\n                opts[key] = patchSortableOption(key, value);\n                return;\n              }\n\n              value = patchSortableOption(key, value);\n\n              if (!optsDiff) {\n                optsDiff = {};\n              }\n              optsDiff[key] = value;\n              opts[key] = value;\n            });\n\n            return optsDiff;\n          }\n\n          function getPlaceholderElement(element) {\n            const placeholder = element.sortable('option', 'placeholder');\n\n            // placeholder.element will be a function if the placeholder, has\n            // been created (placeholder will be an object).  If it hasn't\n            // been created, either placeholder will be false if no\n            // placeholder class was given or placeholder.element will be\n            // undefined if a class was given (placeholder will be a string)\n            if (placeholder && placeholder.element && typeof placeholder.element === 'function') {\n              let result = placeholder.element();\n              // workaround for jquery ui 1.9.x,\n              // not returning jquery collection\n              result = jQuery(result);\n              return result;\n            }\n            return null;\n          }\n\n          function getPlaceholderExcludesludes(element, placeholder) {\n            // exact match with the placeholder's class attribute to handle\n            // the case that multiple connected sortables exist and\n            // the placeholder option equals the class of sortable items\n            const notCssSelector = opts['ui-model-items'].replace(/[^,]*>/g, '');\n            const excludes = element.find(`[class=\"${placeholder.attr('class')}\"]:not(${notCssSelector})`);\n            return excludes;\n          }\n\n          function hasSortingHelper(element, ui) {\n            const helperOption = element.sortable('option', 'helper');\n            return helperOption === 'clone' || (typeof helperOption === 'function' && ui.item.sortable.isCustomHelperUsed());\n          }\n\n          function getSortingHelper(element, ui, savedNodes) {\n            let result = null;\n            if (hasSortingHelper(element, ui) &&\n                element.sortable('option', 'appendTo') === 'parent') {\n              // The .ui-sortable-helper element (that's the default class name)\n              // is placed last.\n              result = savedNodes.last();\n            }\n            return result;\n          }\n\n          // thanks jquery-ui\n          function isFloating(item) {\n            return (/left|right/).test(item.css('float')) || (/inline|table-cell/).test(item.css('display'));\n          }\n\n          function getElementScope(elementScopes, element) {\n            let result = null;\n            for (let i = 0; i < elementScopes.length; i++) {\n              const x = elementScopes[i];\n              if (x.element[0] === element[0]) {\n                result = x.scope;\n                break;\n              }\n            }\n            return result;\n          }\n\n          function afterStop(e, ui) {\n            ui.item.sortable._destroy();\n          }\n\n          // return the index of ui.item among the items\n          // we can't just do ui.item.index() because there it might have siblings\n          // which are not items\n          function getItemIndex(item) {\n            return item.parent()\n              .find(opts['ui-model-items'])\n              .index(item);\n          }\n\n          let opts = {};\n\n          // directive specific options\n          let directiveOpts = {\n            'ui-floating': undefined,\n            'ui-model-items': uiSortableConfig.items,\n          };\n\n          let callbacks = {\n            receive: null,\n            remove: null,\n            start: null,\n            stop: null,\n            update: null,\n          };\n\n          let wrappers = {\n            helper: null,\n          };\n\n          angular.extend(opts, directiveOpts, uiSortableConfig, scope.uiSortable);\n\n          function wireUp() {\n            // When we add or remove elements, we need the sortable to 'refresh'\n            // so it can find the new/removed elements.\n            scope.$watchCollection('ngModel', () => {\n              // Timeout to let ng-repeat modify the DOM\n              $timeout(() => {\n                // ensure that the jquery-ui-sortable widget instance\n                // is still bound to the directive's element\n                if (!!getSortableWidgetInstance(element)) {\n                  element.sortable('refresh');\n                }\n              }, 0, false);\n            });\n\n            callbacks.start = function (e, ui) {\n              if (opts['ui-floating'] === 'auto') {\n                // since the drag has started, the element will be\n                // absolutely positioned, so we check its siblings\n                const siblings = ui.item.siblings();\n                const sortableWidgetInstance = getSortableWidgetInstance(jQuery(e.target));\n                sortableWidgetInstance.floating = isFloating(siblings);\n              }\n\n              // Save the starting position of dragged item\n              const index = getItemIndex(ui.item);\n              ui.item.sortable = {\n                model: ngModel.$modelValue[index],\n                index,\n                source: ui.item.parent(),\n                sourceModel: ngModel.$modelValue,\n                cancel() {\n                  ui.item.sortable._isCanceled = true;\n                },\n                isCanceled() {\n                  return ui.item.sortable._isCanceled;\n                },\n                isCustomHelperUsed() {\n                  return !!ui.item.sortable._isCustomHelperUsed;\n                },\n                _isCanceled: false,\n                _isCustomHelperUsed: ui.item.sortable._isCustomHelperUsed,\n                _destroy() {\n                  angular.forEach(ui.item.sortable, (value, key) => {\n                    ui.item.sortable[key] = undefined;\n                  });\n                },\n              };\n            };\n\n            callbacks.activate = function (e, ui) {\n              // We need to make a copy of the current element's contents so\n              // we can restore it after sortable has messed it up.\n              // This is inside activate (instead of start) in order to save\n              // both lists when dragging between connected lists.\n              savedNodes = element.contents();\n\n              // If this list has a placeholder (the connected lists won't),\n              // don't inlcude it in saved nodes.\n              const placeholder = getPlaceholderElement(element);\n              if (placeholder && placeholder.length) {\n                const excludes = getPlaceholderExcludesludes(element, placeholder);\n                savedNodes = savedNodes.not(excludes);\n              }\n\n              // save the directive's scope so that it is accessible from ui.item.sortable\n              const connectedSortables = ui.item.sortable._connectedSortables || [];\n\n              connectedSortables.push({\n                element,\n                scope,\n              });\n\n              ui.item.sortable._connectedSortables = connectedSortables;\n            };\n\n            callbacks.update = function (e, ui) {\n              // Save current drop position but only if this is not a second\n              // update that happens when moving between lists because then\n              // the value will be overwritten with the old value\n              if (!ui.item.sortable.received) {\n                ui.item.sortable.dropindex = getItemIndex(ui.item);\n                const droptarget = ui.item.parent();\n                ui.item.sortable.droptarget = droptarget;\n\n                const droptargetScope = getElementScope(ui.item.sortable._connectedSortables, droptarget);\n                ui.item.sortable.droptargetModel = droptargetScope.ngModel;\n\n                // Cancel the sort (let ng-repeat do the sort for us)\n                // Don't cancel if this is the received list because it has\n                // already been canceled in the other list, and trying to cancel\n                // here will mess up the DOM.\n                element.sortable('cancel');\n              }\n\n              // Put the nodes back exactly the way they started (this is very\n              // important because ng-repeat uses comment elements to delineate\n              // the start and stop of repeat sections and sortable doesn't\n              // respect their order (even if we cancel, the order of the\n              // comments are still messed up).\n              const sortingHelper = !ui.item.sortable.received && getSortingHelper(element, ui, savedNodes);\n              if (sortingHelper && sortingHelper.length) {\n                // Restore all the savedNodes except from the sorting helper element.\n                // That way it will be garbage collected.\n                savedNodes = savedNodes.not(sortingHelper);\n              }\n              savedNodes.appendTo(element);\n\n              // If this is the target connected list then\n              // it's safe to clear the restored nodes since:\n              // update is currently running and\n              // stop is not called for the target list.\n              if (ui.item.sortable.received) {\n                savedNodes = null;\n              }\n\n              // If received is true (an item was dropped in from another list)\n              // then we add the new item to this list otherwise wait until the\n              // stop event where we will know if it was a sort or item was\n              // moved here from another list\n              if (ui.item.sortable.received && !ui.item.sortable.isCanceled()) {\n                scope.$apply(() => {\n                  ngModel.$modelValue.splice(ui.item.sortable.dropindex, 0,\n                                             ui.item.sortable.moved);\n                });\n              }\n            };\n\n            callbacks.stop = function (e, ui) {\n              // If the received flag hasn't be set on the item, this is a\n              // normal sort, if dropindex is set, the item was moved, so move\n              // the items in the list.\n              if (!ui.item.sortable.received &&\n                 ('dropindex' in ui.item.sortable) &&\n                 !ui.item.sortable.isCanceled()) {\n                scope.$apply(() => {\n                  ngModel.$modelValue.splice(\n                    ui.item.sortable.dropindex, 0,\n                    ngModel.$modelValue.splice(ui.item.sortable.index, 1)[0]);\n                });\n              } else {\n                // if the item was not moved, then restore the elements\n                // so that the ngRepeat's comment are correct.\n                if ((!('dropindex' in ui.item.sortable) || ui.item.sortable.isCanceled()) &&\n                    !angular.equals(element.contents(), savedNodes)) {\n                  const sortingHelper = getSortingHelper(element, ui, savedNodes);\n                  if (sortingHelper && sortingHelper.length) {\n                    // Restore all the savedNodes except from the sorting helper element.\n                    // That way it will be garbage collected.\n                    savedNodes = savedNodes.not(sortingHelper);\n                  }\n                  savedNodes.appendTo(element);\n                }\n              }\n\n              // It's now safe to clear the savedNodes\n              // since stop is the last callback.\n              savedNodes = null;\n            };\n\n            callbacks.receive = function (e, ui) {\n              // An item was dropped here from another list, set a flag on the\n              // item.\n              ui.item.sortable.received = true;\n            };\n\n            callbacks.remove = function (e, ui) {\n              // Workaround for a problem observed in nested connected lists.\n              // There should be an 'update' event before 'remove' when moving\n              // elements. If the event did not fire, cancel sorting.\n              if (!('dropindex' in ui.item.sortable)) {\n                element.sortable('cancel');\n                ui.item.sortable.cancel();\n              }\n\n              // Remove the item from this list's model and copy data into item,\n              // so the next list can retrive it\n              if (!ui.item.sortable.isCanceled()) {\n                scope.$apply(() => {\n                  ui.item.sortable.moved = ngModel.$modelValue.splice(\n                    ui.item.sortable.index, 1)[0];\n                });\n              }\n            };\n\n            wrappers.helper = function (inner) {\n              if (inner && typeof inner === 'function') {\n                return function (e, item) {\n                  const oldItemSortable = item.sortable;\n                  const index = getItemIndex(item);\n                  item.sortable = {\n                    model: ngModel.$modelValue[index],\n                    index,\n                    source: item.parent(),\n                    sourceModel: ngModel.$modelValue,\n                    _restore() {\n                      angular.forEach(item.sortable, (value, key) => {\n                        item.sortable[key] = undefined;\n                      });\n\n                      item.sortable = oldItemSortable;\n                    },\n                  };\n\n                  const innerResult = inner.apply(this, arguments);\n                  item.sortable._restore();\n                  item.sortable._isCustomHelperUsed = item !== innerResult;\n                  return innerResult;\n                };\n              }\n              return inner;\n            };\n\n            scope.$watchCollection('uiSortable', (newVal, oldVal) => {\n              // ensure that the jquery-ui-sortable widget instance\n              // is still bound to the directive's element\n              const sortableWidgetInstance = getSortableWidgetInstance(element);\n              if (!!sortableWidgetInstance) {\n                const optsDiff = patchUISortableOptions(newVal, oldVal, sortableWidgetInstance);\n\n                if (optsDiff) {\n                  element.sortable('option', optsDiff);\n                }\n              }\n            }, true);\n\n            patchUISortableOptions(opts);\n          }\n\n          function init() {\n            if (ngModel) {\n              wireUp();\n            } else {\n              $log.info('ui.sortable: ngModel not provided!', element);\n            }\n\n            // Create sortable\n            element.sortable(opts);\n          }\n\n          function initIfEnabled() {\n            if (scope.uiSortable && scope.uiSortable.disabled) {\n              return false;\n            }\n\n            init();\n\n            // Stop Watcher\n            initIfEnabled.cancelWatcher();\n            initIfEnabled.cancelWatcher = angular.noop;\n\n            return true;\n          }\n\n          initIfEnabled.cancelWatcher = angular.noop;\n\n          if (!initIfEnabled()) {\n            initIfEnabled.cancelWatcher = scope.$watch('uiSortable.disabled', initIfEnabled);\n          }\n        },\n      };\n    },\n  ]);\n","function autofocus($timeout) {\n  return {\n    link(scope, element) {\n      $timeout(() => {\n        element[0].focus();\n      });\n    },\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.directive('autofocus', autofocus);\n}\n\ninit.init = true;\n","function compareTo() {\n  return {\n    require: 'ngModel',\n    scope: {\n      otherModelValue: '=compareTo',\n    },\n    link(scope, element, attributes, ngModel) {\n      const validate = (value) => {\n        ngModel.$setValidity('compareTo', value === scope.otherModelValue);\n      };\n\n      scope.$watch('otherModelValue', () => {\n        validate(ngModel.$modelValue);\n      });\n\n      ngModel.$parsers.push((value) => {\n        validate(value);\n        return value;\n      });\n    },\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.directive('compareTo', compareTo);\n}\n\ninit.init = true;\n","import debug from 'debug';\n\nexport const logger = debug('redash:directives');\n\nexport const requestAnimationFrame = window.requestAnimationFrame ||\n  window.webkitRequestAnimationFrame ||\n  window.mozRequestAnimationFrame ||\n  window.msRequestAnimationFrame ||\n  function requestAnimationFrameFallback(callback) {\n    setTimeout(callback, 10);\n  };\n","import { logger } from './utils';\n\nfunction TitleService($rootScope) {\n  const Title = {\n    title: 'Redash',\n    set(newTitle) {\n      this.title = newTitle;\n      $rootScope.$broadcast('$titleChange');\n    },\n    get() {\n      return this.title;\n    },\n  };\n\n  return Title;\n}\n\nfunction title($rootScope, Title) {\n  return {\n    restrict: 'E',\n    link(scope, element) {\n      function updateTitle() {\n        const newTitle = Title.get();\n        logger('Updating title to: %s', newTitle);\n        element.text(newTitle);\n      }\n\n      $rootScope.$on('$routeChangeSuccess', (event, to) => {\n        if (to.title) {\n          Title.set(to.title);\n        }\n      });\n      $rootScope.$on('$titleChange', updateTitle);\n    },\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule\n    .factory('Title', TitleService)\n    .directive('title', title);\n}\n\ninit.init = true;\n","import { findIndex } from 'lodash';\n\nconst items = new Map();\n\nfunction checkItems() {\n  items.forEach((item, node) => {\n    const offsetWidth = node.offsetWidth;\n    const offsetHeight = node.offsetHeight;\n\n    if (\n      (item.offsetWidth !== offsetWidth) ||\n      (item.offsetHeight !== offsetHeight)\n    ) {\n      item.offsetWidth = offsetWidth;\n      item.offsetHeight = offsetHeight;\n      item.callback(node);\n    }\n  });\n\n  setTimeout(checkItems, 50);\n}\n\ncheckItems(); // ensure it was called only once!\n\nfunction resizeEvent() {\n  return {\n    restrict: 'A',\n    link($scope, $element, attrs) {\n      const node = $element[0];\n      if (!items.has(node)) {\n        items.set(node, {\n          callback: () => {\n            $scope.$evalAsync(attrs.resizeEvent);\n          },\n        });\n\n        $scope.$on('$destroy', () => {\n          const index = findIndex(items, item => item.node === node);\n          if (index >= 0) {\n            items.splice(index, 1); // remove item\n          }\n        });\n      }\n    },\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.directive('resizeEvent', resizeEvent);\n}\n\ninit.init = true;\n","import { find } from 'lodash';\n\nfunction sameNumber(a, b) {\n  return (isNaN(a) && isNaN(b)) || (a === b);\n}\n\nconst flexBasis = find(\n  ['flexBasis', 'webkitFlexBasis', 'msFlexPreferredSize'],\n  prop => prop in document.documentElement.style,\n) || 'flexBasis';\n\nconst threshold = 5;\n\nfunction resizableToggle(KeyboardShortcuts) {\n  return {\n    link($scope, $element, $attrs) {\n      if ($attrs.resizable === 'false') return;\n\n      let ignoreResizeEvents = false;\n\n      let resizeStartInfo = null;\n      let allowHClick = true;\n      let allowVClick = true;\n      let lastWidth = $element.width();\n      let lastHeight = $element.height();\n\n      const isFlex = $scope.$eval($attrs.rFlex);\n\n      const shortcuts = {\n        [$attrs.toggleShortcut]: () => {\n          // It's a bit jQuery-way to handle this, but I really don't want\n          // to add any custom code that will detect resizer direction (keep\n          // in mind that this component is a hook to another 3dr-party one).\n          // So let's just find any available handle and \"click\" it, and let\n          // `angular-resizable` does it's job\n          $element.find('.rg-left, .rg-right, .rg-top, .rg-bottom').click();\n        },\n      };\n\n      KeyboardShortcuts.bind(shortcuts);\n      $scope.$on('$destroy', () => {\n        KeyboardShortcuts.unbind(shortcuts);\n      });\n\n      $scope.$on('angular-resizable.resizeStart', ($event, info) => {\n        if (!ignoreResizeEvents) {\n          resizeStartInfo = Object.assign({}, info);\n        }\n      });\n\n      $scope.$on('angular-resizable.resizeEnd', ($event, info) => {\n        if (!ignoreResizeEvents) {\n          allowHClick = true;\n          if (info.width !== false) {\n            allowHClick = sameNumber(info.width, resizeStartInfo.width);\n          }\n          allowVClick = true;\n          if (info.height !== false) {\n            allowVClick = sameNumber(info.height, resizeStartInfo.height);\n          }\n        }\n      });\n\n      function emulateAngularResizableEvents(width, height) {\n        ignoreResizeEvents = true;\n        const info = {\n          width,\n          height,\n          id: $element.attr('id'),\n          evt: null,\n        };\n        $scope.$emit('angular-resizable.resizeStart', info);\n        $scope.$emit('angular-resizable.resizing', info);\n        $scope.$emit('angular-resizable.resizeEnd', info);\n        ignoreResizeEvents = false;\n      }\n\n      $element.on('click', '.rg-left, .rg-right', () => {\n        if (allowHClick) {\n          const minSize = parseFloat($element.css('min-width')) + threshold;\n          const currentSize = $element.width();\n          const isCollapsed = currentSize <= minSize;\n          const animateProp = isFlex ? flexBasis : 'width';\n          if (isCollapsed) {\n            $element.animate({ [animateProp]: lastWidth + 'px' }, 300, () => {\n              emulateAngularResizableEvents(lastWidth, false);\n            });\n          } else {\n            lastWidth = currentSize;\n            $element\n              .css({ [animateProp]: currentSize + 'px' })\n              .animate({ [animateProp]: 0 }, 300, () => {\n                emulateAngularResizableEvents(0, false);\n              });\n          }\n        }\n      });\n\n      $element.on('click', '.rg-top, .rg-bottom', () => {\n        if (allowVClick) {\n          const minSize = parseFloat($element.css('min-height')) + threshold;\n          const currentSize = $element.height();\n          const isCollapsed = currentSize <= minSize;\n          const animateProp = isFlex ? flexBasis : 'height';\n          if (isCollapsed) {\n            $element.animate({ [animateProp]: lastHeight + 'px' }, 300, () => {\n              emulateAngularResizableEvents(false, lastHeight);\n            });\n          } else {\n            lastHeight = currentSize;\n            $element\n              .css({ [animateProp]: currentSize + 'px' })\n              .animate({ [animateProp]: 0 }, 300, () => {\n                emulateAngularResizableEvents(false, 0);\n              });\n          }\n        }\n      });\n    },\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.directive('resizableToggle', resizableToggle);\n}\n\ninit.init = true;\n","import autofocus from './autofocus';\nimport compareTo from './compare-to';\nimport title from './title';\nimport resizeEvent from './resize-event';\nimport resizableToggle from './resizable-toggle';\n\nexport default function init(ngModule) {\n  autofocus(ngModule);\n  compareTo(ngModule);\n  title(ngModule);\n  resizeEvent(ngModule);\n  resizableToggle(ngModule);\n}\n\ninit.init = true;\n","import { markdown } from 'markdown';\n\nexport default function init(ngModule) {\n  ngModule.filter('markdown', ($sce, clientConfig) => function parseMarkdown(text) {\n    if (!text) {\n      return '';\n    }\n\n    let html = markdown.toHTML(String(text));\n    if (clientConfig.allowScriptsInUserInput) {\n      html = $sce.trustAsHtml(html);\n    }\n\n    return html;\n  });\n}\n\ninit.init = true;\n","const dashboardGridOptions = {\n  columns: 6, // grid columns count\n  rowHeight: 50, // grid row height (incl. bottom padding)\n  margins: 15, // widget margins\n  mobileBreakPoint: 800,\n  // defaults for widgets\n  defaultSizeX: 3,\n  defaultSizeY: 3,\n  minSizeX: 1,\n  maxSizeX: 6,\n  minSizeY: 1,\n  maxSizeY: 1000,\n};\n\nexport default function init(ngModule) {\n  ngModule.constant('dashboardGridOptions', dashboardGridOptions);\n}\n\ninit.init = true;\n","// This polyfill is needed to support PhantomJS which we use to generate PNGs from embeds.\nimport 'core-js/fn/typed/array-buffer';\n\n// Ensure that this image will be available in assets folder\nimport '@/assets/images/avatar.svg';\n\nimport * as Pace from 'pace-progress';\nimport debug from 'debug';\nimport angular from 'angular';\nimport ngSanitize from 'angular-sanitize';\nimport ngRoute from 'angular-route';\nimport ngResource from 'angular-resource';\nimport uiBootstrap from 'angular-ui-bootstrap';\nimport uiSelect from 'ui-select';\nimport ngMessages from 'angular-messages';\nimport toastr from 'angular-toastr';\nimport ngUpload from 'angular-base64-upload';\nimport vsRepeat from 'angular-vs-repeat';\nimport 'brace';\nimport 'angular-ui-ace';\nimport 'angular-resizable';\nimport { each, isFunction, extend } from 'lodash';\n\nimport '@/lib/sortable';\n\nimport DialogWrapper from '@/components/DialogWrapper';\nimport organizationStatus from '@/services/organizationStatus';\n\nimport * as filters from '@/filters';\nimport registerDirectives from '@/directives';\nimport markdownFilter from '@/filters/markdown';\nimport dateTimeFilter from '@/filters/datetime';\nimport dashboardGridOptions from './dashboard-grid-options';\n\nconst logger = debug('redash:config');\n\nPace.options.shouldHandlePushState = (prevUrl, newUrl) => {\n  // Show pace progress bar only if URL path changed; when query params\n  // or hash changed - ignore that history event\n  const [prevPrefix] = prevUrl.split('?');\n  const [newPrefix] = newUrl.split('?');\n  return prevPrefix !== newPrefix;\n};\n\nconst requirements = [\n  ngRoute,\n  ngResource,\n  ngSanitize,\n  uiBootstrap,\n  ngMessages,\n  uiSelect,\n  toastr,\n  'ui.ace',\n  ngUpload,\n  'angularResizable',\n  vsRepeat,\n  'ui.sortable',\n];\n\nconst ngModule = angular.module('app', requirements);\n\ndashboardGridOptions(ngModule);\n\nfunction registerAll(context) {\n  const modules = context\n    .keys()\n    .map(context)\n    .map(module => module.default);\n\n  return modules\n    .filter(isFunction)\n    .filter(f => f.init)\n    .map(f => f(ngModule));\n}\n\nfunction requireImages() {\n  // client/app/assets/images/<path> => /images/<path>\n  const ctx = require.context('@/assets/images/', true, /\\.(png|jpe?g|gif|svg)$/);\n  ctx.keys().forEach(ctx);\n}\n\nfunction registerComponents() {\n  // We repeat this code in other register functions, because if we don't use a literal for the path\n  // Webpack won't be able to statcily analyze our imports.\n  const context = require.context('@/components', true, /^((?![\\\\/.]test[\\\\./]).)*\\.jsx?$/);\n  registerAll(context);\n}\n\nfunction registerExtensions() {\n  const context = require.context('extensions', true, /^((?![\\\\/.]test[\\\\./]).)*\\.jsx?$/);\n  registerAll(context);\n}\n\nfunction registerServices() {\n  const context = require.context('@/services', true, /^((?![\\\\/.]test[\\\\./]).)*\\.js$/);\n  registerAll(context);\n}\n\nfunction registerVisualizations() {\n  const context = require.context('@/visualizations', true, /^((?![\\\\/.]test[\\\\./]).)*\\.jsx?$/);\n  registerAll(context);\n}\n\nfunction registerPages() {\n  const context = require.context('@/pages', true, /^((?![\\\\/.]test[\\\\./]).)*\\.jsx?$/);\n  const routesCollection = registerAll(context);\n  routesCollection.forEach((routes) => {\n    ngModule.config(($routeProvider) => {\n      each(routes, (route, path) => {\n        logger('Registering route: %s', path);\n        route.authenticated = true;\n        route.resolve = extend(\n          {\n            __organizationStatus: () => organizationStatus.refresh(),\n          },\n          route.resolve,\n        );\n        $routeProvider.when(path, route);\n      });\n    });\n  });\n\n  ngModule.config(($routeProvider) => {\n    $routeProvider.otherwise({\n      resolve: {\n        // Ugly hack to show 404 when hitting an unknown route.\n        error: () => {\n          const error = { status: 404 };\n          throw error;\n        },\n      },\n    });\n  });\n}\n\nfunction registerFilters() {\n  each(filters, (filter, name) => {\n    ngModule.filter(name, () => filter);\n  });\n}\n\nrequireImages();\nregisterDirectives(ngModule);\nregisterServices();\nregisterFilters();\nmarkdownFilter(ngModule);\ndateTimeFilter(ngModule);\nregisterComponents();\nregisterPages();\nregisterExtensions();\nregisterVisualizations(ngModule);\n\nngModule.run(($q) => {\n  DialogWrapper.Promise = $q;\n});\n\nexport default ngModule;\n","import ngModule from '@/config';\n\nngModule.config(($locationProvider, $compileProvider, uiSelectConfig, toastrConfig) => {\n  $compileProvider.debugInfoEnabled(false);\n  $compileProvider.aHrefSanitizationWhitelist(/^\\s*(https?|data|tel|sms|mailto):/);\n  $locationProvider.html5Mode(true);\n  uiSelectConfig.theme = 'bootstrap';\n\n  Object.assign(toastrConfig, {\n    positionClass: 'toast-bottom-right',\n    timeOut: 2000,\n  });\n});\n\n// Update ui-select's template to use Font-Awesome instead of glyphicon.\nngModule.run(($templateCache) => {\n  const templateName = 'bootstrap/match.tpl.html';\n  let template = $templateCache.get(templateName);\n  template = template.replace('glyphicon glyphicon-remove', 'fa fa-remove');\n  $templateCache.put(templateName, template);\n});\n\nexport default ngModule;\n","const PREFIX = 'localOptions:';\n\nfunction get(key, defaultValue = undefined) {\n  const fullKey = PREFIX + key;\n  if (fullKey in window.localStorage) {\n    return JSON.parse(window.localStorage.getItem(fullKey));\n  }\n  return defaultValue;\n}\n\nfunction set(key, value) {\n  const fullKey = PREFIX + key;\n  window.localStorage.setItem(fullKey, JSON.stringify(value));\n}\n\nexport default {\n  get,\n  set,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Tooltip from 'antd/lib/tooltip';\nimport { react2angular } from 'react2angular';\n\nimport AceEditor from 'react-ace';\nimport ace from 'brace';\nimport toastr from 'angular-toastr';\n\nimport 'brace/ext/language_tools';\nimport 'brace/mode/json';\nimport 'brace/mode/python';\nimport 'brace/mode/sql';\nimport 'brace/mode/yaml';\nimport 'brace/theme/textmate';\nimport 'brace/ext/searchbox';\n\nimport { Query } from '@/services/query';\nimport { QuerySnippet } from '@/services/query-snippet';\nimport { KeyboardShortcuts } from '@/services/keyboard-shortcuts';\n\nimport localOptions from '@/lib/localOptions';\nimport AutocompleteToggle from '@/components/AutocompleteToggle';\nimport keywordBuilder from './keywordBuilder';\nimport { DataSource, Schema } from './proptypes';\n\nimport './QueryEditor.css';\n\nconst langTools = ace.acequire('ace/ext/language_tools');\nconst snippetsModule = ace.acequire('ace/snippets');\n\n// By default Ace will try to load snippet files for the different modes and fail.\n// We don't need them, so we use these placeholders until we define our own.\nfunction defineDummySnippets(mode) {\n  ace.define(`ace/snippets/${mode}`, ['require', 'exports', 'module'], (require, exports) => {\n    exports.snippetText = '';\n    exports.scope = mode;\n  });\n}\n\ndefineDummySnippets('python');\ndefineDummySnippets('sql');\ndefineDummySnippets('json');\ndefineDummySnippets('yaml');\n\nclass QueryEditor extends React.Component {\n  static propTypes = {\n    queryText: PropTypes.string.isRequired,\n    schema: Schema, // eslint-disable-line react/no-unused-prop-types\n    addNewParameter: PropTypes.func.isRequired,\n    dataSources: PropTypes.arrayOf(DataSource),\n    dataSource: DataSource,\n    canEdit: PropTypes.bool.isRequired,\n    isDirty: PropTypes.bool.isRequired,\n    isQueryOwner: PropTypes.bool.isRequired,\n    updateDataSource: PropTypes.func.isRequired,\n    canExecuteQuery: PropTypes.func.isRequired,\n    executeQuery: PropTypes.func.isRequired,\n    queryExecuting: PropTypes.bool.isRequired,\n    saveQuery: PropTypes.func.isRequired,\n    updateQuery: PropTypes.func.isRequired,\n    updateSelectedQuery: PropTypes.func.isRequired,\n    listenForResize: PropTypes.func.isRequired,\n    listenForEditorCommand: PropTypes.func.isRequired,\n  };\n\n  static defaultProps = {\n    schema: null,\n    dataSource: {},\n    dataSources: [],\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.refEditor = React.createRef();\n\n    this.state = {\n      schema: null, // eslint-disable-line react/no-unused-state\n      keywords: {\n        table: [],\n        column: [],\n        tableColumn: [],\n      },\n      autocompleteQuery: localOptions.get('liveAutocomplete', true),\n      liveAutocompleteDisabled: false,\n      // XXX temporary while interfacing with angular\n      queryText: props.queryText,\n      selectedQueryText: null,\n    };\n\n    const schemaCompleter = {\n      identifierRegexps: [/[a-zA-Z_0-9.\\-\\u00A2-\\uFFFF]/],\n      getCompletions: (state, session, pos, prefix, callback) => {\n        const tableKeywords = this.state.keywords.table;\n        const columnKeywords = this.state.keywords.column;\n        const tableColumnKeywords = this.state.keywords.tableColumn;\n\n        if (prefix.length === 0 || tableKeywords.length === 0) {\n          callback(null, []);\n          return;\n        }\n\n        if (prefix[prefix.length - 1] === '.') {\n          const tableName = prefix.substring(0, prefix.length - 1);\n          callback(null, tableKeywords.concat(tableColumnKeywords[tableName]));\n          return;\n        }\n        callback(null, tableKeywords.concat(columnKeywords));\n      },\n    };\n\n    langTools.setCompleters([\n      langTools.snippetCompleter,\n      langTools.keyWordCompleter,\n      langTools.textCompleter,\n      schemaCompleter,\n    ]);\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    if (!nextProps.schema) {\n      return {\n        keywords: {\n          table: [],\n          column: [],\n          tableColumn: [],\n        },\n        liveAutocompleteDisabled: false,\n      };\n    } else if (nextProps.schema !== prevState.schema) {\n      const tokensCount = nextProps.schema.reduce((totalLength, table) => totalLength + table.columns.length, 0);\n      return {\n        schema: nextProps.schema,\n        keywords: keywordBuilder.buildKeywordsFromSchema(nextProps.schema),\n        liveAutocompleteDisabled: tokensCount > 5000,\n      };\n    }\n    return null;\n  }\n\n  onLoad = (editor) => {\n    // Release Cmd/Ctrl+L to the browser\n    editor.commands.bindKey('Cmd+L', null);\n    editor.commands.bindKey('Ctrl+P', null);\n    editor.commands.bindKey('Ctrl+L', null);\n\n    // Ignore Ctrl+P to open new parameter dialog\n    editor.commands.bindKey({ win: 'Ctrl+P', mac: null }, null);\n    // Lineup only mac\n    editor.commands.bindKey({ win: null, mac: 'Ctrl+P' }, 'golineup');\n\n    // Reset Completer in case dot is pressed\n    editor.commands.on('afterExec', (e) => {\n      if (e.command.name === 'insertstring' && e.args === '.'\n          && editor.completer) {\n        editor.completer.showPopup(editor);\n      }\n    });\n\n    QuerySnippet.query((snippets) => {\n      const snippetManager = snippetsModule.snippetManager;\n      const m = {\n        snippetText: '',\n      };\n      m.snippets = snippetManager.parseSnippetFile(m.snippetText);\n      snippets.forEach((snippet) => {\n        m.snippets.push(snippet.getSnippet());\n      });\n      snippetManager.register(m.snippets || [], m.scope);\n    });\n\n    editor.focus();\n    this.props.listenForResize(() => editor.resize());\n    this.props.listenForEditorCommand((e, command, ...args) => {\n      switch (command) {\n        case 'focus': {\n          editor.focus();\n          break;\n        }\n        case 'paste': {\n          const [text] = args;\n          editor.session.doc.replace(editor.selection.getRange(), text);\n          const range = editor.selection.getRange();\n          this.props.updateQuery(editor.session.getValue());\n          editor.selection.setRange(range);\n          break;\n        }\n        default:\n          break;\n      }\n    });\n  };\n\n  updateSelectedQuery = (selection) => {\n    const { editor } = this.refEditor.current;\n    const doc = editor.getSession().doc;\n    const rawSelectedQueryText = doc.getTextRange(selection.getRange());\n    const selectedQueryText = (rawSelectedQueryText.length > 1) ? rawSelectedQueryText : null;\n    this.setState({ selectedQueryText });\n    this.props.updateSelectedQuery(selectedQueryText);\n  };\n\n  updateQuery = (queryText) => {\n    this.props.updateQuery(queryText);\n    this.setState({ queryText });\n  };\n\n  formatQuery = () => {\n    Query.format(this.props.dataSource.syntax || 'sql', this.props.queryText)\n      .then(this.updateQuery)\n      .catch(error => toastr.error(error));\n  };\n\n  toggleAutocomplete = (state) => {\n    this.setState({ autocompleteQuery: state });\n    localOptions.set('liveAutocomplete', state);\n  };\n\n  componentDidUpdate = () => {\n    // ANGULAR_REMOVE_ME  Work-around for a resizing issue, see https://github.com/getredash/redash/issues/3353\n    const { editor } = this.refEditor.current;\n    editor.resize();\n  };\n\n  render() {\n    const modKey = KeyboardShortcuts.modKey;\n\n    const isExecuteDisabled = this.props.queryExecuting || !this.props.canExecuteQuery();\n\n    return (\n      <section style={{ height: '100%' }} data-test=\"QueryEditor\">\n        <div className=\"container p-15 m-b-10\" style={{ height: '100%' }}>\n          <div data-executing={this.props.queryExecuting} style={{ height: 'calc(100% - 40px)', marginBottom: '0px' }} className=\"editor__container\">\n            <AceEditor\n              ref={this.refEditor}\n              theme=\"textmate\"\n              mode={this.props.dataSource.syntax || 'sql'}\n              value={this.state.queryText}\n              editorProps={{ $blockScrolling: Infinity }}\n              width=\"100%\"\n              height=\"100%\"\n              setOptions={{\n                behavioursEnabled: true,\n                enableSnippets: true,\n                enableBasicAutocompletion: true,\n                enableLiveAutocompletion: !this.state.liveAutocompleteDisabled && this.state.autocompleteQuery,\n                autoScrollEditorIntoView: true,\n              }}\n              showPrintMargin={false}\n              wrapEnabled={false}\n              onLoad={this.onLoad}\n              onPaste={this.onPaste}\n              onChange={this.updateQuery}\n              onSelectionChange={this.updateSelectedQuery}\n            />\n          </div>\n\n          <div className=\"editor__control\">\n            <div className=\"form-inline d-flex\">\n              <Tooltip\n                placement=\"top\"\n                title={<span>Add New Parameter (<i>{modKey} + P</i>)</span>}\n              >\n                <button type=\"button\" className=\"btn btn-default m-r-5\" onClick={this.props.addNewParameter}>\n                  &#123;&#123;&nbsp;&#125;&#125;\n                </button>\n              </Tooltip>\n              <Tooltip placement=\"top\" title=\"Format Query\">\n                <button type=\"button\" className=\"btn btn-default m-r-5\" onClick={this.formatQuery}>\n                  <span className=\"zmdi zmdi-format-indent-increase\" />\n                </button>\n              </Tooltip>\n              <AutocompleteToggle\n                state={this.state.autocompleteQuery}\n                onToggle={this.toggleAutocomplete}\n                disabled={this.state.liveAutocompleteDisabled}\n              />\n              <select\n                className=\"form-control datasource-small flex-fill w-100\"\n                onChange={this.props.updateDataSource}\n                disabled={!this.props.isQueryOwner}\n              >\n                {this.props.dataSources.map(ds => (\n                  <option label={ds.name} value={ds.id} key={`ds-option-${ds.id}`}>\n                    {ds.name}\n                  </option>\n                ))}\n              </select>\n              {this.props.canEdit ? (\n                <Tooltip placement=\"top\" title={modKey + ' + S'}>\n                  <button type=\"button\" className=\"btn btn-default m-l-5\" onClick={this.props.saveQuery} title=\"Save\">\n                    <span className=\"fa fa-floppy-o\" />\n                    <span className=\"hidden-xs m-l-5\">Save</span>\n                    {this.props.isDirty ? '*' : null}\n                  </button>\n                </Tooltip>\n              ) : null}\n              <Tooltip placement=\"top\" title={modKey + ' + Enter'}>\n                {/*\n                  Tooltip wraps disabled buttons with `<span>` and moves all styles\n                  and classes to that `<span>`. There is a piece of CSS that fixes\n                  button appearance, but also wwe need to add `disabled` class to\n                  disabled buttons so it will be assigned to wrapper and make it\n                  looking properly\n                */}\n                <button\n                  type=\"button\"\n                  className={'btn btn-primary m-l-5' + (isExecuteDisabled ? ' disabled' : '')}\n                  disabled={isExecuteDisabled}\n                  onClick={this.props.executeQuery}\n                  data-test=\"ExecuteButton\"\n                >\n                  <span className=\"zmdi zmdi-play\" />\n                  <span className=\"hidden-xs m-l-5\">{ (this.state.selectedQueryText == null) ? 'Execute' : 'Execute Selected' }</span>\n                </button>\n              </Tooltip>\n            </div>\n          </div>\n        </div>\n      </section>\n    );\n  }\n}\n\nexport default function init(ngModule) {\n  ngModule.component('queryEditor', react2angular(QueryEditor));\n}\n\ninit.init = true;\n","/* eslint-disable */\n// Inspired by http://informationandvisualization.de/blog/box-plot\nfunction box() {\n  let width = 1,\n    height = 1,\n    duration = 0,\n    domain = null,\n    value = Number,\n    whiskers = boxWhiskers,\n    quartiles = boxQuartiles,\n    tickFormat = null;\n\n  // For each small multiple…\n  function box(g) {\n    g.each(function(d, i) {\n      d = d.map(value).sort(d3.ascending);\n      let g = d3.select(this),\n        n = d.length,\n        min = d[0],\n        max = d[n - 1];\n\n      // Compute quartiles. Must return exactly 3 elements.\n      const quartileData = (d.quartiles = quartiles(d));\n\n      // Compute whiskers. Must return exactly 2 elements, or null.\n      let whiskerIndices = whiskers && whiskers.call(this, d, i),\n        whiskerData = whiskerIndices && whiskerIndices.map(i => d[i]);\n\n      // Compute outliers. If no whiskers are specified, all data are \"outliers\".\n      // We compute the outliers as indices, so that we can join across transitions!\n      const outlierIndices = whiskerIndices\n        ? d3.range(0, whiskerIndices[0]).concat(d3.range(whiskerIndices[1] + 1, n))\n        : d3.range(n);\n\n      // Compute the new x-scale.\n      const x1 = d3.scale\n        .linear()\n        .domain((domain && domain.call(this, d, i)) || [min, max])\n        .range([height, 0]);\n\n      // Retrieve the old x-scale, if this is an update.\n      const x0 =\n        this.__chart__ ||\n        d3.scale\n          .linear()\n          .domain([0, Infinity])\n          .range(x1.range());\n\n      // Stash the new scale.\n      this.__chart__ = x1;\n\n      // Note: the box, median, and box tick elements are fixed in number,\n      // so we only have to handle enter and update. In contrast, the outliers\n      // and other elements are variable, so we need to exit them! Variable\n      // elements also fade in and out.\n\n      // Update center line: the vertical line spanning the whiskers.\n      const center = g.selectAll('line.center').data(whiskerData ? [whiskerData] : []);\n\n      center\n        .enter()\n        .insert('line', 'rect')\n        .attr('class', 'center')\n        .attr('x1', width / 2)\n        .attr('y1', d => x0(d[0]))\n        .attr('x2', width / 2)\n        .attr('y2', d => x0(d[1]))\n        .style('opacity', 1e-6)\n        .transition()\n        .duration(duration)\n        .style('opacity', 1)\n        .attr('y1', d => x1(d[0]))\n        .attr('y2', d => x1(d[1]));\n\n      center\n        .transition()\n        .duration(duration)\n        .style('opacity', 1)\n        .attr('y1', d => x1(d[0]))\n        .attr('y2', d => x1(d[1]));\n\n      center\n        .exit()\n        .transition()\n        .duration(duration)\n        .style('opacity', 1e-6)\n        .attr('y1', d => x1(d[0]))\n        .attr('y2', d => x1(d[1]))\n        .remove();\n\n      // Update innerquartile box.\n      const box = g.selectAll('rect.box').data([quartileData]);\n\n      box\n        .enter()\n        .append('rect')\n        .attr('class', 'box')\n        .attr('x', 0)\n        .attr('y', d => x0(d[2]))\n        .attr('width', width)\n        .attr('height', d => x0(d[0]) - x0(d[2]))\n        .transition()\n        .duration(duration)\n        .attr('y', d => x1(d[2]))\n        .attr('height', d => x1(d[0]) - x1(d[2]));\n\n      box\n        .transition()\n        .duration(duration)\n        .attr('y', d => x1(d[2]))\n        .attr('height', d => x1(d[0]) - x1(d[2]));\n\n      box.exit().remove();\n\n      // Update median line.\n      const medianLine = g.selectAll('line.median').data([quartileData[1]]);\n\n      medianLine\n        .enter()\n        .append('line')\n        .attr('class', 'median')\n        .attr('x1', 0)\n        .attr('y1', x0)\n        .attr('x2', width)\n        .attr('y2', x0)\n        .transition()\n        .duration(duration)\n        .attr('y1', x1)\n        .attr('y2', x1);\n\n      medianLine\n        .transition()\n        .duration(duration)\n        .attr('y1', x1)\n        .attr('y2', x1);\n\n      medianLine.exit().remove();\n\n      // Update whiskers.\n      const whisker = g.selectAll('line.whisker').data(whiskerData || []);\n\n      whisker\n        .enter()\n        .insert('line', 'circle, text')\n        .attr('class', 'whisker')\n        .attr('x1', 0)\n        .attr('y1', x0)\n        .attr('x2', width)\n        .attr('y2', x0)\n        .style('opacity', 1e-6)\n        .transition()\n        .duration(duration)\n        .attr('y1', x1)\n        .attr('y2', x1)\n        .style('opacity', 1);\n\n      whisker\n        .transition()\n        .duration(duration)\n        .attr('y1', x1)\n        .attr('y2', x1)\n        .style('opacity', 1);\n\n      whisker\n        .exit()\n        .transition()\n        .duration(duration)\n        .attr('y1', x1)\n        .attr('y2', x1)\n        .style('opacity', 1e-6)\n        .remove();\n\n      // Update outliers.\n      const outlier = g.selectAll('circle.outlier').data(outlierIndices, Number);\n\n      outlier\n        .enter()\n        .insert('circle', 'text')\n        .attr('class', 'outlier')\n        .attr('r', 5)\n        .attr('cx', width / 2)\n        .attr('cy', i => x0(d[i]))\n        .style('opacity', 1e-6)\n        .transition()\n        .duration(duration)\n        .attr('cy', i => x1(d[i]))\n        .style('opacity', 1);\n\n      outlier\n        .transition()\n        .duration(duration)\n        .attr('cy', i => x1(d[i]))\n        .style('opacity', 1);\n\n      outlier\n        .exit()\n        .transition()\n        .duration(duration)\n        .attr('cy', i => x1(d[i]))\n        .style('opacity', 1e-6)\n        .remove();\n\n      // Compute the tick format.\n      const format = tickFormat || x1.tickFormat(8);\n\n      // Update box ticks.\n      const boxTick = g.selectAll('text.box').data(quartileData);\n\n      boxTick\n        .enter()\n        .append('text')\n        .attr('class', 'box')\n        .attr('dy', '.3em')\n        .attr('dx', (d, i) => (i & 1 ? 6 : -6))\n        .attr('x', (d, i) => (i & 1 ? width : 0))\n        .attr('y', x0)\n        .attr('text-anchor', (d, i) => (i & 1 ? 'start' : 'end'))\n        .text(format)\n        .transition()\n        .duration(duration)\n        .attr('y', x1);\n\n      boxTick\n        .transition()\n        .duration(duration)\n        .text(format)\n        .attr('y', x1);\n\n      boxTick.exit().remove();\n\n      // Update whisker ticks. These are handled separately from the box\n      // ticks because they may or may not exist, and we want don't want\n      // to join box ticks pre-transition with whisker ticks post-.\n      const whiskerTick = g.selectAll('text.whisker').data(whiskerData || []);\n\n      whiskerTick\n        .enter()\n        .append('text')\n        .attr('class', 'whisker')\n        .attr('dy', '.3em')\n        .attr('dx', 6)\n        .attr('x', width)\n        .attr('y', x0)\n        .text(format)\n        .style('opacity', 1e-6)\n        .transition()\n        .duration(duration)\n        .attr('y', x1)\n        .style('opacity', 1);\n\n      whiskerTick\n        .transition()\n        .duration(duration)\n        .text(format)\n        .attr('y', x1)\n        .style('opacity', 1);\n\n      whiskerTick\n        .exit()\n        .transition()\n        .duration(duration)\n        .attr('y', x1)\n        .style('opacity', 1e-6)\n        .remove();\n    });\n    d3.timer.flush();\n  }\n\n  box.width = function(x) {\n    if (!arguments.length) return width;\n    width = x;\n    return box;\n  };\n\n  box.height = function(x) {\n    if (!arguments.length) return height;\n    height = x;\n    return box;\n  };\n\n  box.tickFormat = function(x) {\n    if (!arguments.length) return tickFormat;\n    tickFormat = x;\n    return box;\n  };\n\n  box.duration = function(x) {\n    if (!arguments.length) return duration;\n    duration = x;\n    return box;\n  };\n\n  box.domain = function(x) {\n    if (!arguments.length) return domain;\n    domain = x == null ? x : d3.functor(x);\n    return box;\n  };\n\n  box.value = function(x) {\n    if (!arguments.length) return value;\n    value = x;\n    return box;\n  };\n\n  box.whiskers = function(x) {\n    if (!arguments.length) return whiskers;\n    whiskers = x;\n    return box;\n  };\n\n  box.quartiles = function(x) {\n    if (!arguments.length) return quartiles;\n    quartiles = x;\n    return box;\n  };\n\n  return box;\n}\n\nfunction boxWhiskers(d) {\n  return [0, d.length - 1];\n}\n\nfunction boxQuartiles(d) {\n  return [d3.quantile(d, 0.25), d3.quantile(d, 0.5), d3.quantile(d, 0.75)];\n}\n\nexport default box;\n","import d3 from 'd3';\nimport box from '@/lib/visualizations/d3box';\nimport editorTemplate from './box-plot-editor.html';\n\nfunction boxPlotRenderer() {\n  return {\n    restrict: 'E',\n    template: '<div></div>',\n    link($scope, elm) {\n      function calcIqr(k) {\n        return (d) => {\n          const q1 = d.quartiles[0];\n          const q3 = d.quartiles[2];\n          const iqr = (q3 - q1) * k;\n\n          let i = -1;\n          let j = d.length;\n\n          // eslint-disable-next-line no-plusplus\n          while (d[++i] < q1 - iqr);\n          // eslint-disable-next-line no-plusplus\n          while (d[--j] > q3 + iqr);\n          return [i, j];\n        };\n      }\n\n      $scope.$watch('[queryResult && queryResult.getData(), visualization.options]', () => {\n        if ($scope.queryResult.getData() === null) {\n          return;\n        }\n\n        const data = $scope.queryResult.getData();\n        const parentWidth = d3.select(elm[0].parentNode).node().getBoundingClientRect().width;\n        const margin = {\n          top: 10, right: 50, bottom: 40, left: 50, inner: 25,\n        };\n        const width = parentWidth - margin.right - margin.left;\n        const height = 500 - margin.top - margin.bottom;\n\n        let min = Infinity;\n        let max = -Infinity;\n        const mydata = [];\n        let value = 0;\n        let d = [];\n        const xAxisLabel = $scope.visualization.options.xAxisLabel;\n        const yAxisLabel = $scope.visualization.options.yAxisLabel;\n\n        const columns = $scope.queryResult.getColumnNames();\n        const xscale = d3.scale.ordinal()\n          .domain(columns)\n          .rangeBands([0, parentWidth - margin.left - margin.right]);\n\n        let boxWidth;\n        if (columns.length > 1) {\n          boxWidth = Math.min(xscale(columns[1]), 120.0);\n        } else {\n          boxWidth = 120.0;\n        }\n        margin.inner = boxWidth / 3.0;\n\n        columns.forEach((column, i) => {\n          d = mydata[i] = [];\n          data.forEach((row) => {\n            value = row[column];\n            d.push(value);\n            if (value > max) max = Math.ceil(value);\n            if (value < min) min = Math.floor(value);\n          });\n        });\n\n        const yscale = d3.scale.linear()\n          .domain([min * 0.99, max * 1.01])\n          .range([height, 0]);\n\n        const chart = box()\n          .whiskers(calcIqr(1.5))\n          .width(boxWidth - 2 * margin.inner)\n          .height(height)\n          .domain([min * 0.99, max * 1.01]);\n        const xAxis = d3.svg.axis()\n          .scale(xscale)\n          .orient('bottom');\n\n\n        const yAxis = d3.svg.axis()\n          .scale(yscale)\n          .orient('left');\n\n        const xLines = d3.svg.axis()\n          .scale(xscale)\n          .tickSize(height)\n          .orient('bottom');\n\n        const yLines = d3.svg.axis()\n          .scale(yscale)\n          .tickSize(width)\n          .orient('right');\n\n        function barOffset(i) {\n          return xscale(columns[i]) + (xscale(columns[1]) - margin.inner) / 2.0;\n        }\n\n        d3.select(elm[0]).selectAll('svg').remove();\n\n        const plot = d3.select(elm[0])\n          .append('svg')\n          .attr('width', parentWidth)\n          .attr('height', height + margin.bottom + margin.top)\n          .append('g')\n          .attr('width', parentWidth - margin.left - margin.right)\n          .attr('transform', `translate(${margin.left},${margin.top})`);\n\n        d3.select('svg').append('text')\n          .attr('class', 'box')\n          .attr('x', parentWidth / 2.0)\n          .attr('text-anchor', 'middle')\n          .attr('y', height + margin.bottom)\n          .text(xAxisLabel);\n\n        d3.select('svg').append('text')\n          .attr('class', 'box')\n          .attr('transform', `translate(10,${(height + margin.top + margin.bottom) / 2.0})rotate(-90)`)\n          .attr('text-anchor', 'middle')\n          .text(yAxisLabel);\n\n        plot.append('rect')\n          .attr('class', 'grid-background')\n          .attr('width', width)\n          .attr('height', height);\n\n        plot.append('g')\n          .attr('class', 'grid')\n          .call(yLines);\n\n        plot.append('g')\n          .attr('class', 'grid')\n          .call(xLines);\n\n        plot.append('g')\n          .attr('class', 'x axis')\n          .attr('transform', `translate(0,${height})`)\n          .call(xAxis);\n\n        plot.append('g')\n          .attr('class', 'y axis')\n          .call(yAxis);\n\n        plot.selectAll('.box').data(mydata)\n          .enter().append('g')\n          .attr('class', 'box')\n          .attr('width', boxWidth)\n          .attr('height', height)\n          .attr('transform', (_, i) => `translate(${barOffset(i)},${0})`)\n          .call(chart);\n      }, true);\n    },\n  };\n}\n\nfunction boxPlotEditor() {\n  return {\n    restrict: 'E',\n    template: editorTemplate,\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.directive('boxplotRenderer', boxPlotRenderer);\n  ngModule.directive('boxplotEditor', boxPlotEditor);\n\n  ngModule.config((VisualizationProvider) => {\n    const renderTemplate =\n        '<boxplot-renderer ' +\n        'options=\"visualization.options\" query-result=\"queryResult\">' +\n        '</boxplot-renderer>';\n\n    const editTemplate = '<boxplot-editor></boxplot-editor>';\n\n    const defaultOptions = {\n      defaultRows: 8,\n      minRows: 5,\n    };\n\n    VisualizationProvider.registerVisualization({\n      type: 'BOXPLOT',\n      name: 'Boxplot (Deprecated)',\n      defaultOptions,\n      renderTemplate,\n      editorTemplate: editTemplate,\n    });\n  });\n}\n\ninit.init = true;\n","import * as d3 from 'd3';\nimport _ from 'lodash';\nimport angular from 'angular';\n\nconst exitNode = '<<<Exit>>>';\nconst colors = d3.scale.category10();\n\n// helper function colorMap - color gray if \"end\" is detected\nfunction colorMap(d) {\n  return colors(d.name);\n}\n\n// Return array of ancestors of nodes, highest first, but excluding the root.\nfunction getAncestors(node) {\n  const path = [];\n  let current = node;\n\n  while (current.parent) {\n    path.unshift(current);\n    current = current.parent;\n  }\n  return path;\n}\n\n// The following is based on @chrisrzhou's example from: http://bl.ocks.org/chrisrzhou/d5bdd8546f64ca0e4366.\nfunction Sunburst(scope, element) {\n  this.element = element;\n  this.watches = [];\n\n  // svg dimensions\n  const width = element.clientWidth;\n  const height = element.offsetHeight;\n\n  // Breadcrumb dimensions: width, height, spacing, width of tip/tail.\n  const b = {\n    w: width / 6,\n    h: 30,\n    s: 3,\n    t: 10,\n  };\n\n  const radius = Math.min(width - b.h, height - b.h) / 2 - 5;\n  if (radius <= 0) {\n    return;\n  }\n\n  // margins\n  const margin = {\n    top: radius,\n    bottom: 50,\n    left: radius,\n    right: 0,\n  };\n\n  /**\n   * Drawing variables:\n   *\n   * e.g. colors, totalSize, partitions, arcs\n   */\n  // Mapping of nodes to colorscale.\n\n  // Total size of all nodes, to be used later when data is loaded\n  let totalSize = 0;\n\n  // create d3.layout.partition\n  const partition = d3.layout\n    .partition()\n    .size([2 * Math.PI, radius * radius])\n    .value(d => d.size);\n\n  // create arcs for drawing D3 paths\n  const arc = d3.svg\n    .arc()\n    .startAngle(d => d.x)\n    .endAngle(d => d.x + d.dx)\n    .innerRadius(d => Math.sqrt(d.y))\n    .outerRadius(d => Math.sqrt(d.y + d.dy));\n\n  /**\n   * Define and initialize D3 select references and div-containers\n   *\n   * e.g. vis, breadcrumbs, lastCrumb, summary, sunburst, legend\n   */\n  const vis = d3.select(element);\n\n  // create and position breadcrumbs container and svg\n  const breadcrumbs = vis\n    .append('div')\n    .classed('breadcrumbs-container', true)\n    .append('svg')\n    .attr('width', width)\n    .attr('height', b.h)\n    .attr('fill', 'white')\n    .attr('font-weight', 600);\n\n  // create and position SVG\n  const container = vis.append('div');\n\n  // create and position summary container\n  const summary = container\n    .append('div')\n    .classed('summary-container', true);\n\n  const sunburst = container\n    .append('div')\n    .classed('sunburst-container', true)\n    .append('svg')\n    .attr('width', radius * 2)\n    .attr('height', radius * 2)\n    .append('g')\n    .attr('transform', `translate(${margin.left},${margin.top})`);\n\n  // create last breadcrumb element\n  const lastCrumb = breadcrumbs.append('text').classed('lastCrumb', true);\n\n  // Generate a string representation for drawing a breadcrumb polygon.\n  function breadcrumbPoints(d, i) {\n    const points = [];\n    points.push('0,0');\n    points.push(`${b.w},0`);\n    points.push(`${b.w + b.t},${b.h / 2}`);\n    points.push(`${b.w},${b.h}`);\n    points.push(`0,${b.h}`);\n\n    if (i > 0) {\n      // Leftmost breadcrumb; don't include 6th vertex.\n      points.push(`${b.t},${b.h / 2}`);\n    }\n    return points.join(' ');\n  }\n\n  // Update the breadcrumb breadcrumbs to show the current sequence and percentage.\n  function updateBreadcrumbs(ancestors, percentageString) {\n    // Data join, where primary key = name + depth.\n    const g = breadcrumbs.selectAll('g').data(ancestors, d => d.name + d.depth);\n\n    // Add breadcrumb and label for entering nodes.\n    const breadcrumb = g.enter().append('g');\n\n    breadcrumb\n      .append('polygon')\n      .classed('breadcrumbs-shape', true)\n      .attr('points', breadcrumbPoints)\n      .attr('fill', colorMap);\n\n    breadcrumb\n      .append('text')\n      .classed('breadcrumbs-text', true)\n      .attr('x', (b.w + b.t) / 2)\n      .attr('y', b.h / 2)\n      .attr('dy', '0.35em')\n      .attr('font-size', '10px')\n      .attr('text-anchor', 'middle')\n      .text(d => d.name);\n\n    // Set position for entering and updating nodes.\n    g.attr('transform', (d, i) => `translate(${i * (b.w + b.s)}, 0)`);\n\n    // Remove exiting nodes.\n    g.exit().remove();\n\n    // Update percentage at the lastCrumb.\n    lastCrumb\n      .attr('x', (ancestors.length + 0.5) * (b.w + b.s))\n      .attr('y', b.h / 2)\n      .attr('dy', '0.35em')\n      .attr('text-anchor', 'middle')\n      .attr('fill', 'black')\n      .attr('font-weight', 600)\n      .text(percentageString);\n  }\n\n  // helper function mouseover to handle mouseover events/animations and calculation\n  // of ancestor nodes etc\n  function mouseover(d) {\n    // build percentage string\n    const percentage = (100 * d.value / totalSize).toPrecision(3);\n    let percentageString = `${percentage}%`;\n    if (percentage < 1) {\n      percentageString = '< 1.0%';\n    }\n\n    // update breadcrumbs (get all ancestors)\n    const ancestors = getAncestors(d);\n    updateBreadcrumbs(ancestors, percentageString);\n\n    // update sunburst (Fade all the segments and highlight only ancestors of current segment)\n    sunburst.selectAll('path').attr('opacity', 0.3);\n    sunburst\n      .selectAll('path')\n      .filter(node => ancestors.indexOf(node) >= 0)\n      .attr('opacity', 1);\n\n    // update summary\n    summary.html(`\n      <span>Stage: ${d.depth}</span>\n      <span class='percentage' style='font-size: 2em;'>${percentageString}</span>\n      <span>${d.value} of ${totalSize}</span>\n    `);\n\n    // display summary and breadcrumbs if hidden\n    summary.style('visibility', '');\n    breadcrumbs.style('visibility', '');\n  }\n\n  // helper function click to handle mouseleave events/animations\n  function click() {\n    // Deactivate all segments then retransition each segment to full opacity.\n    sunburst.selectAll('path').on('mouseover', null);\n    sunburst\n      .selectAll('path')\n      .transition()\n      .duration(1000)\n      .attr('opacity', 1)\n      .each('end', function endClick() {\n        d3.select(this).on('mouseover', mouseover);\n      });\n\n    // hide summary and breadcrumbs if visible\n    breadcrumbs.style('visibility', 'hidden');\n    summary.style('visibility', 'hidden');\n  }\n\n  // helper function to draw the sunburst and breadcrumbs\n  function drawSunburst(json) {\n    // Build only nodes of a threshold \"visible\" sizes to improve efficiency\n    // 0.005 radians = 0.29 degrees\n    const nodes = partition.nodes(json).filter(d => d.dx > 0.005 && d.name !== exitNode);\n\n    // this section is required to update the colors.domain() every time the data updates\n    const uniqueNames = (function uniqueNames(a) {\n      const output = [];\n      a.forEach((d) => {\n        if (output.indexOf(d.name) === -1) output.push(d.name);\n      });\n      return output;\n    }(nodes));\n    colors.domain(uniqueNames); // update domain colors\n\n    // create path based on nodes\n    const path = sunburst\n      .data([json])\n      .selectAll('path')\n      .data(nodes)\n      .enter()\n      .append('path')\n      .classed('nodePath', true)\n      .attr('display', d => (d.depth ? null : 'none'))\n      .attr('d', arc)\n      .attr('fill', colorMap)\n      .attr('opacity', 1)\n      .attr('stroke', 'white')\n      .on('mouseover', mouseover);\n\n    // // trigger mouse click over sunburst to reset visualization summary\n    vis.on('click', click);\n\n    // Update totalSize of the tree = value of root node from partition.\n    totalSize = path.node().__data__.value;\n  }\n\n  // visualize json tree structure\n  function createVisualization(json) {\n    drawSunburst(json); // draw sunburst\n  }\n\n  function removeVisualization() {\n    sunburst.selectAll('.nodePath').remove();\n    // legend.selectAll(\"g\").remove();\n  }\n\n  function buildNodes(raw) {\n    let values;\n\n    if (\n      _.has(raw[0], 'sequence') &&\n      _.has(raw[0], 'stage') &&\n      _.has(raw[0], 'node') &&\n      _.has(raw[0], 'value')\n    ) {\n      const grouped = _.groupBy(raw, 'sequence');\n\n      values = _.map(grouped, (value) => {\n        const sorted = _.sortBy(value, 'stage');\n        return {\n          size: value[0].value,\n          sequence: value[0].sequence,\n          nodes: _.map(sorted, i => i.node),\n        };\n      });\n    } else {\n      const validKey = key => key !== 'value' && key.indexOf('$$') !== 0;\n      const keys = _.sortBy(_.filter(_.keys(raw[0]), validKey), _.identity);\n\n      values = _.map(raw, (row, sequence) => ({\n        size: row.value,\n        sequence,\n        nodes: _.compact(_.map(keys, key => row[key])),\n      }));\n    }\n\n    return values;\n  }\n\n  function buildHierarchy(csv) {\n    const data = buildNodes(csv);\n\n    // build tree\n    const root = {\n      name: 'root',\n      children: [],\n    };\n\n    data.forEach((d) => {\n      const nodes = d.nodes;\n      const size = parseInt(d.size, 10);\n\n      // build graph, nodes, and child nodes\n      let currentNode = root;\n      for (let j = 0; j < nodes.length; j += 1) {\n        let children = currentNode.children;\n        const nodeName = nodes[j];\n        const isLeaf = j + 1 === nodes.length;\n\n        if (!children) {\n          currentNode.children = children = [];\n          children.push({\n            name: exitNode,\n            size: currentNode.size,\n          });\n        }\n\n        let childNode = _.find(children, child => child.name === nodeName);\n\n        if (isLeaf && childNode) {\n          childNode.children.push({\n            name: exitNode,\n            size,\n          });\n        } else if (isLeaf) {\n          children.push({\n            name: nodeName,\n            size,\n          });\n        } else {\n          if (!childNode) {\n            childNode = {\n              name: nodeName,\n              children: [],\n            };\n            children.push(childNode);\n          }\n\n          currentNode = childNode;\n        }\n      }\n    });\n\n    return root;\n  }\n\n  function render(data) {\n    const json = buildHierarchy(data); // build json tree\n    removeVisualization(); // remove existing visualization if any\n    createVisualization(json); // visualize json tree\n  }\n\n  function refreshData() {\n    const queryData = scope.queryResult.getData();\n    if (queryData) {\n      render(queryData);\n    }\n  }\n\n  refreshData();\n  this.watches.push(scope.$watch('visualization.options', refreshData, true));\n  this.watches.push(scope.$watch('queryResult && queryResult.getData()', refreshData));\n}\n\nSunburst.prototype.remove = function remove() {\n  this.watches.forEach((unregister) => {\n    unregister();\n  });\n  angular.element(this.element).empty('.vis-container');\n};\n\nexport default Sunburst;\n","import { debounce } from 'lodash';\nimport Sunburst from '@/lib/visualizations/sunburst';\nimport editorTemplate from './sunburst-sequence-editor.html';\n\nfunction sunburstSequenceRenderer() {\n  return {\n    restrict: 'E',\n    template: '<div class=\"sunburst-visualization-container\" resize-event=\"handleResize()\"></div>',\n    link(scope, element) {\n      const container = element[0].querySelector('.sunburst-visualization-container');\n      let sunburst = new Sunburst(scope, container);\n\n      function resize() {\n        sunburst.remove();\n        sunburst = new Sunburst(scope, container);\n      }\n\n      scope.handleResize = debounce(resize, 50);\n\n      scope.$watch('visualization.options.height', (oldValue, newValue) => {\n        if (oldValue !== newValue) {\n          resize();\n        }\n      });\n    },\n  };\n}\n\nfunction sunburstSequenceEditor() {\n  return {\n    restrict: 'E',\n    template: editorTemplate,\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.directive('sunburstSequenceRenderer', sunburstSequenceRenderer);\n  ngModule.directive('sunburstSequenceEditor', sunburstSequenceEditor);\n\n  ngModule.config((VisualizationProvider) => {\n    const renderTemplate =\n      '<sunburst-sequence-renderer options=\"visualization.options\" query-result=\"queryResult\"></sunburst-sequence-renderer>';\n\n    const editTemplate = '<sunburst-sequence-editor></sunburst-sequence-editor>';\n    const defaultOptions = {\n      defaultRows: 7,\n    };\n\n    VisualizationProvider.registerVisualization({\n      type: 'SUNBURST_SEQUENCE',\n      name: 'Sunburst Sequence',\n      renderTemplate,\n      editorTemplate: editTemplate,\n      defaultOptions,\n    });\n  });\n}\n\ninit.init = true;\n","/* eslint-disable */\n\nimport d3 from 'd3';\n\nfunction center(node) {\n  return node.y + node.dy / 2;\n}\n\nfunction value(link) {\n  return link.value;\n}\n\nfunction Sankey() {\n  const sankey = {};\n  let nodeWidth = 24;\n  let nodePadding = 8;\n  let size = [1, 1];\n  let nodes = [];\n  let links = [];\n\n  // Populate the sourceLinks and targetLinks for each node.\n  // Also, if the source and target are not objects, assume they are indices.\n  function computeNodeLinks() {\n    nodes.forEach(node => {\n      node.sourceLinks = [];\n      node.targetLinks = [];\n    });\n    links.forEach(link => {\n      let source = link.source;\n      let target = link.target;\n      if (typeof source === 'number') source = link.source = nodes[link.source];\n      if (typeof target === 'number') target = link.target = nodes[link.target];\n      source.sourceLinks.push(link);\n      target.targetLinks.push(link);\n    });\n  }\n\n  // Compute the value (size) of each node by summing the associated links.\n  function computeNodeValues() {\n    nodes.forEach(node => {\n      node.value = Math.max(d3.sum(node.sourceLinks, value), d3.sum(node.targetLinks, value));\n    });\n  }\n\n  function moveSinksRight(x) {\n    nodes.forEach(node => {\n      if (!node.sourceLinks.length) {\n        node.x = x - 1;\n      }\n    });\n  }\n\n  function scaleNodeBreadths(kx) {\n    nodes.forEach(node => {\n      node.x *= kx;\n    });\n  }\n\n  // Iteratively assign the breadth (x-position) for each node.\n  // Nodes are assigned the maximum breadth of incoming neighbors plus one;\n  // nodes with no incoming links are assigned breadth zero, while\n  // nodes with no outgoing links are assigned the maximum breadth.\n  function computeNodeBreadths() {\n    let remainingNodes = nodes;\n    let nextNodes;\n    let x = 0;\n\n    function assignBreadth(node) {\n      node.x = x;\n      node.dx = nodeWidth;\n      node.sourceLinks.forEach(link => {\n        if (nextNodes.indexOf(link.target) < 0) {\n          nextNodes.push(link.target);\n        }\n      });\n    }\n\n    while (remainingNodes.length) {\n      nextNodes = [];\n      remainingNodes.forEach(assignBreadth);\n      remainingNodes = nextNodes;\n      x += 1;\n    }\n\n    //\n    moveSinksRight(x);\n    scaleNodeBreadths((size[0] - nodeWidth) / (x - 1));\n  }\n\n  function moveSourcesRight() {\n    nodes.forEach(node => {\n      if (!node.targetLinks.length) {\n        node.x = d3.min(node.sourceLinks, d => d.target.x) - 1;\n      }\n    });\n  }\n\n  function computeNodeDepths(iterations) {\n    const nodesByBreadth = d3\n      .nest()\n      .key(d => d.x)\n      .sortKeys(d3.ascending)\n      .entries(nodes)\n      .map(d => d.values);\n\n    function initializeNodeDepth() {\n      const ky = d3.min(\n        nodesByBreadth,\n        n => (size[1] - (n.length - 1) * nodePadding) / d3.sum(n, value),\n      );\n\n      nodesByBreadth.forEach(n => {\n        n.forEach((node, i) => {\n          node.y = i;\n          node.dy = node.value * ky;\n        });\n      });\n\n      links.forEach(link => {\n        link.dy = link.value * ky;\n      });\n    }\n\n    function relaxLeftToRight(alpha) {\n      function weightedSource(link) {\n        return center(link.source) * link.value;\n      }\n\n      nodesByBreadth.forEach(n => {\n        n.forEach(node => {\n          if (node.targetLinks.length) {\n            const y = d3.sum(node.targetLinks, weightedSource) / d3.sum(node.targetLinks, value);\n            node.y += (y - center(node)) * alpha;\n          }\n        });\n      });\n    }\n\n    function resolveCollisions() {\n      nodesByBreadth.forEach(nodes => {\n        const n = nodes.length;\n        let node;\n        let dy;\n        let y0 = 0;\n        let i;\n\n        // Push any overlapping nodes down.\n        nodes.sort(ascendingDepth);\n        for (i = 0; i < n; ++i) {\n          node = nodes[i];\n          dy = y0 - node.y;\n          if (dy > 0) node.y += dy;\n          y0 = node.y + node.dy + nodePadding;\n        }\n\n        // If the bottommost node goes outside the bounds, push it back up.\n        dy = y0 - nodePadding - size[1];\n        if (dy > 0) {\n          y0 = node.y -= dy;\n\n          // Push any overlapping nodes back up.\n          for (i = n - 2; i >= 0; --i) {\n            node = nodes[i];\n            dy = node.y + node.dy + nodePadding - y0;\n            if (dy > 0) node.y -= dy;\n            y0 = node.y;\n          }\n        }\n      });\n    }\n\n    function resolveCollisions() {\n      nodesByBreadth.forEach(nodes => {\n        let node,\n          dy,\n          y0 = 0,\n          n = nodes.length,\n          i;\n\n        // Push any overlapping nodes down.\n        nodes.sort(ascendingDepth);\n        for (i = 0; i < n; ++i) {\n          node = nodes[i];\n          dy = y0 - node.y;\n          if (dy > 0) node.y += dy;\n          y0 = node.y + node.dy + nodePadding;\n        }\n\n        // If the bottommost node goes outside the bounds, push it back up.\n        dy = y0 - nodePadding - size[1];\n        if (dy > 0) {\n          y0 = node.y -= dy;\n\n          // Push any overlapping nodes back up.\n          for (i = n - 2; i >= 0; --i) {\n            node = nodes[i];\n            dy = node.y + node.dy + nodePadding - y0;\n            if (dy > 0) node.y -= dy;\n            y0 = node.y;\n          }\n        }\n      });\n    }\n\n    initializeNodeDepth();\n    resolveCollisions();\n\n    for (let alpha = 1; iterations > 0; iterations -= 1) {\n      relaxRightToLeft((alpha *= 0.99));\n      resolveCollisions();\n      relaxLeftToRight(alpha);\n      resolveCollisions();\n    }\n\n    function relaxRightToLeft(alpha) {\n      nodesByBreadth\n        .slice()\n        .reverse()\n        .forEach(nodes => {\n          nodes.forEach(node => {\n            if (node.sourceLinks.length) {\n              const y = d3.sum(node.sourceLinks, weightedTarget) / d3.sum(node.sourceLinks, value);\n              node.y += (y - center(node)) * alpha;\n            }\n          });\n        });\n\n      function weightedTarget(link) {\n        return center(link.target) * link.value;\n      }\n    }\n\n    function ascendingDepth(a, b) {\n      return a.y - b.y;\n    }\n  }\n\n  function computeLinkDepths() {\n    nodes.forEach(node => {\n      node.sourceLinks.sort(ascendingTargetDepth);\n      node.targetLinks.sort(ascendingSourceDepth);\n    });\n    nodes.forEach(node => {\n      let sy = 0,\n        ty = 0;\n      node.sourceLinks.forEach(link => {\n        link.sy = sy;\n        sy += link.dy;\n      });\n      node.targetLinks.forEach(link => {\n        link.ty = ty;\n        ty += link.dy;\n      });\n    });\n\n    function ascendingSourceDepth(a, b) {\n      return a.source.y - b.source.y;\n    }\n\n    function ascendingTargetDepth(a, b) {\n      return a.target.y - b.target.y;\n    }\n  }\n\n  sankey.nodeWidth = function(_) {\n    if (!arguments.length) return nodeWidth;\n    nodeWidth = +_;\n    return sankey;\n  };\n\n  sankey.nodePadding = function(_) {\n    if (!arguments.length) return nodePadding;\n    nodePadding = +_;\n    return sankey;\n  };\n\n  sankey.nodes = function(_) {\n    if (!arguments.length) return nodes;\n    nodes = _;\n    return sankey;\n  };\n\n  sankey.links = function(_) {\n    if (!arguments.length) return links;\n    links = _;\n    return sankey;\n  };\n\n  sankey.size = function(_) {\n    if (!arguments.length) return size;\n    size = _;\n    return sankey;\n  };\n\n  sankey.layout = function(iterations) {\n    computeNodeLinks();\n    computeNodeValues();\n    computeNodeBreadths();\n    computeNodeDepths(iterations);\n    computeLinkDepths();\n    return sankey;\n  };\n\n  sankey.relayout = function() {\n    computeLinkDepths();\n    return sankey;\n  };\n\n  sankey.link = function() {\n    let curvature = 0.5;\n\n    function link(d) {\n      const x0 = d.source.x + d.source.dx;\n      const x1 = d.target.x;\n      const xi = d3.interpolateNumber(x0, x1);\n      const x2 = xi(curvature);\n      const x3 = xi(1 - curvature);\n      const y0 = d.source.y + d.sy + d.dy / 2;\n      const y1 = d.target.y + d.ty + d.dy / 2;\n\n      return `M${x0},${y0}C${x2},${y0} ${x3},${y1} ${x1},${y1}`;\n    }\n\n    link.curvature = _ => {\n      if (!arguments.length) return curvature;\n      curvature = +_;\n      return link;\n    };\n\n    return link;\n  };\n\n  return sankey;\n}\n\nexport default Sankey;\n","import angular from 'angular';\nimport _ from 'lodash';\nimport d3 from 'd3';\n\nimport d3sankey from '@/lib/visualizations/d3sankey';\nimport editorTemplate from './sankey-editor.html';\n\nfunction getConnectedNodes(node) {\n  // source link = this node is the source, I need the targets\n  const nodes = [];\n  node.sourceLinks.forEach((link) => {\n    nodes.push(link.target);\n  });\n  node.targetLinks.forEach((link) => {\n    nodes.push(link.source);\n  });\n\n  return nodes;\n}\n\nfunction graph(data) {\n  const nodesDict = {};\n  const links = {};\n  const nodes = [];\n\n  const validKey = key => key !== 'value' && key.indexOf('$$') !== 0;\n  const keys = _.sortBy(_.filter(_.keys(data[0]), validKey), _.identity);\n\n  function normalizeName(name) {\n    if (name) {\n      return name;\n    }\n\n    return 'Exit';\n  }\n\n  function getNode(name, level) {\n    name = normalizeName(name);\n    const key = `${name}:${String(level)}`;\n    let node = nodesDict[key];\n    if (!node) {\n      node = { name };\n      const id = nodes.push(node) - 1;\n      node.id = id;\n      nodesDict[key] = node;\n    }\n    return node;\n  }\n\n  function getLink(source, target) {\n    let link = links[[source, target]];\n    if (!link) {\n      link = { target, source, value: 0 };\n      links[[source, target]] = link;\n    }\n\n    return link;\n  }\n\n  function addLink(sourceName, targetName, value, depth) {\n    if ((sourceName === '' || !sourceName) && depth > 1) {\n      return;\n    }\n\n    const source = getNode(sourceName, depth);\n    const target = getNode(targetName, depth + 1);\n    const link = getLink(source.id, target.id);\n    link.value += parseInt(value, 10);\n  }\n\n  data.forEach((row) => {\n    addLink(row[keys[0]], row[keys[1]], row.value, 1);\n    addLink(row[keys[1]], row[keys[2]], row.value, 2);\n    addLink(row[keys[2]], row[keys[3]], row.value, 3);\n    addLink(row[keys[3]], row[keys[4]], row.value, 4);\n  });\n\n  return { nodes, links: _.values(links) };\n}\n\nfunction spreadNodes(height, data) {\n  const nodesByBreadth = d3\n    .nest()\n    .key(d => d.x)\n    .entries(data.nodes)\n    .map(d => d.values);\n\n  nodesByBreadth.forEach((nodes) => {\n    nodes = _.filter(_.sortBy(nodes, node => -node.value), node => node.name !== 'Exit');\n\n    const sum = d3.sum(nodes, o => o.dy);\n    const padding = (height - sum) / nodes.length;\n\n    _.reduce(\n      nodes,\n      (y0, node) => {\n        node.y = y0;\n        return y0 + node.dy + padding;\n      },\n      0,\n    );\n  });\n}\n\nfunction createSankey(element, data) {\n  const margin = {\n    top: 10,\n    right: 10,\n    bottom: 10,\n    left: 10,\n  };\n  const width = element.offsetWidth - margin.left - margin.right;\n  const height = element.offsetHeight - margin.top - margin.bottom;\n\n  if (width <= 0 || height <= 0) {\n    return;\n  }\n\n  const format = d => d3.format(',.0f')(d);\n  const color = d3.scale.category20();\n\n  data = graph(data);\n  data.nodes = _.map(data.nodes, d => _.extend(d, { color: color(d.name.replace(/ .*/, '')) }));\n\n  // append the svg canvas to the page\n  const svg = d3\n    .select(element)\n    .append('svg')\n    .attr('class', 'sankey')\n    .attr('width', width + margin.left + margin.right)\n    .attr('height', height + margin.top + margin.bottom)\n    .append('g')\n    .attr('transform', `translate(${margin.left},${margin.top})`);\n\n  // Set the sankey diagram properties\n  const sankey = d3sankey()\n    .nodeWidth(15)\n    .nodePadding(10)\n    .size([width, height]);\n\n  const path = sankey.link();\n\n  sankey\n    .nodes(data.nodes)\n    .links(data.links)\n    .layout(0);\n\n  spreadNodes(height, data);\n  sankey.relayout();\n\n  // add in the links\n  const link = svg\n    .append('g')\n    .selectAll('.link')\n    .data(data.links)\n    .enter()\n    .append('path')\n    .filter(l => l.target.name !== 'Exit')\n    .attr('class', 'link')\n    .attr('d', path)\n    .style('stroke-width', d => Math.max(1, d.dy))\n    .sort((a, b) => b.dy - a.dy);\n\n  // add the link titles\n  link.append('title').text(d => `${d.source.name} → ${d.target.name}\\n${format(d.value)}`);\n\n  const node = svg\n    .append('g')\n    .selectAll('.node')\n    .data(data.nodes)\n    .enter()\n    .append('g')\n    .filter(n => n.name !== 'Exit')\n    .attr('class', 'node')\n    .attr('transform', d => `translate(${d.x},${d.y})`);\n\n  function nodeMouseOver(currentNode) {\n    let nodes = getConnectedNodes(currentNode);\n    nodes = _.map(nodes, i => i.id);\n    node\n      .filter((d) => {\n        if (d === currentNode) {\n          return false;\n        }\n\n        if (_.includes(nodes, d.id)) {\n          return false;\n        }\n\n        return true;\n      })\n      .style('opacity', 0.2);\n    link\n      .filter(l => !(_.includes(currentNode.sourceLinks, l) || _.includes(currentNode.targetLinks, l)))\n      .style('opacity', 0.2);\n  }\n\n  function nodeMouseOut() {\n    node.style('opacity', 1);\n    link.style('opacity', 1);\n  }\n\n  // add in the nodes\n  node.on('mouseover', nodeMouseOver).on('mouseout', nodeMouseOut);\n\n  // add the rectangles for the nodes\n  node\n    .append('rect')\n    .attr('height', d => d.dy)\n    .attr('width', sankey.nodeWidth())\n    .style('fill', d => d.color)\n    .style('stroke', d => d3.rgb(d.color).darker(2))\n    .append('title')\n    .text(d => `${d.name}\\n${format(d.value)}`);\n\n  // add in the title for the nodes\n  node\n    .append('text')\n    .attr('x', -6)\n    .attr('y', d => d.dy / 2)\n    .attr('dy', '.35em')\n    .attr('text-anchor', 'end')\n    .attr('transform', null)\n    .text(d => d.name)\n    .filter(d => d.x < width / 2)\n    .attr('x', 6 + sankey.nodeWidth())\n    .attr('text-anchor', 'start');\n}\n\nfunction sankeyRenderer() {\n  return {\n    restrict: 'E',\n    template: '<div class=\"sankey-visualization-container\" resize-event=\"handleResize()\"></div>',\n    link(scope, element) {\n      const container = element[0].querySelector('.sankey-visualization-container');\n\n      function refreshData() {\n        const queryData = scope.queryResult.getData();\n        if (queryData) {\n          // do the render logic.\n          angular.element(container).empty();\n          createSankey(container, queryData);\n        }\n      }\n\n      scope.handleResize = _.debounce(refreshData, 50);\n      scope.$watch('queryResult && queryResult.getData()', refreshData);\n      scope.$watch('visualization.options.height', (oldValue, newValue) => {\n        if (oldValue !== newValue) {\n          refreshData();\n        }\n      });\n    },\n  };\n}\n\nfunction sankeyEditor() {\n  return {\n    restrict: 'E',\n    template: editorTemplate,\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.directive('sankeyRenderer', sankeyRenderer);\n  ngModule.directive('sankeyEditor', sankeyEditor);\n\n  ngModule.config((VisualizationProvider) => {\n    const renderTemplate =\n      '<sankey-renderer options=\"visualization.options\" query-result=\"queryResult\"></sankey-renderer>';\n\n    const editTemplate = '<sankey-editor></sankey-editor>';\n    const defaultOptions = {\n      defaultRows: 7,\n    };\n\n    VisualizationProvider.registerVisualization({\n      type: 'SANKEY',\n      name: 'Sankey',\n      renderTemplate,\n      editorTemplate: editTemplate,\n      defaultOptions,\n    });\n  });\n}\n\ninit.init = true;\n"],"sourceRoot":""}